function name(){ return "DNN-1"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16788205, -0.63439075, -0.1862026, 0.99761458, 0.10353333, -0.5291827, 0.09749109, 0.02214851, -0.56207372, -0.46899568, -0.69276271, 0.12189829, 0.27035635, -0.74188389, -0.46903546, 1.32732867, 0.3394156, 0.16843937, 0.59361008, -0.2293277, 0.86819813, -0.10367289, 0.66608405, -0.30202679, 0.27496808, 0.21279585, -0.73299331, 0.33347628, 0.04570234, -0.65748801, 0.49949506, 0.20476732, 0.8690524, 0.42394082, -0.44588971, -0.52423924, 0.03997332, -0.1938916, 0.18511634, 0.01269735, 0.34132422, 0.2143522, -0.29950564, -0.09399812, 0.50024004, -0.68331374, -0.32071373, 0.01955369, -0.26120985, -0.2707803, 0.3036766, -0.28112958, -0.06304748, -0.69119676, -0.46504273, -0.42278123, -0.06561067, 0.93810583, -0.07695293, -1.16068136, -0.02831264, -0.78822038, 0.02933277, -0.22943636, 0.16893768, -0.44367755, -0.38681563, 0.13489397, -0.11726421, 0.33650558, -0.31270492, 1.03640854, -0.03607425, -0.36227446, 0.31708886, -0.75841334, 0.16235638, 0.18033699, 0.1386746, -0.82146819, -0.71613523, 0.0213257, 0.89608287, -0.38216895, -0.39537786, -0.15439748, -0.67961269, -0.03526684, -0.2208372, 0.16149933, 0.33906803, 0.84800405, 0.15008155, -0.56283182, -0.22402021, 0.12096821, 1.07377091, 0.28743435, 0.99952874, 0.2723715, 0.2580235, 0.09617146, -0.01322764, -0.4138104, 0.35685543, -0.06756341, -0.36042924, 0.96033205, 0.16668951, -0.40930922, 0.94056557, 0.3921297, -0.36110341, 0.07948525, 0.48951672, -1.06305949, -0.70766376, 0.01888781, 0.20291343, 0.03660634, -0.30377504, 0.39699805, -0.3472578, -0.1090794, -0.21582979, -0.76050298, -0.46554669, -0.56627061, -0.64713995, 0.43824112, -0.03070052, 0.24849701, 0.34957775, -0.45239318, 0.66319794, -0.50455408, -0.19028965, 0.22782748, -0.89063052, -0.4693205, -1.07497332, 0.29838911, -0.34153791, 0.13461715, -0.9693946, 0.32965495, -0.32911016, -1.06481057, 0.26162833, -0.03248344, 0.15130083, -0.54334993, 0.62914388, 0.35641609, -0.8921017, 0.91726427, 0.4452475, 0.7525651, 0.21595042, 0.2756259, -0.97196587, 0.33135184, -0.20815682, 0.19812074, 0.93758071, 0.06915754, 0.45914172, 0.08126663, 0.32552199, 0.08448694, 0.14839982, -0.01523763, 0.02667876, -0.29760251, 0.01664591, 0.1890276, 0.61209817, -0.45993021, -0.44330463, -0.94120666, -0.29604388, -0.52021149, -0.50583114, -0.01257435, 0.2783062, -0.95002122, -0.16824371, 0.03387897, -1.72427171, 0.48085749, -0.76607537, 0.02886498, -0.16082788, 0.28472925, -0.04609731, -0.01791656, -0.44277961, 0.10469983, 0.3784822, -0.06009874, -0.04622983, -0.28886191, -0.03982243, -0.63079428, 0.0827715, 0.15355715, -0.22172136, -0.13448255, 0.69607142, 0.1548226, -0.85728835, 0.39983262, -0.51362815, 0.00121708, 0.19994646, -0.62649547, 0.62625891, 0.28596533, -0.57464808, 0.44087013, 0.16723396, 0.03691558, 0.26523152, -0.08085895, 0.0692517, 0.67396956, 0.88487372, -0.60631792, -0.00211093, -1.18039649, -0.21310945, -0.1434568, 0.40988157, -0.0200476, 0.17515855, 0.41569759, -0.1391067, 0.65373782, 0.67808522, 0.05287159, -0.16445228, -0.48113373, -0.56994305, -0.75095344, 0.94561105, -0.37729878, -0.92062008, 0.3208412, -0.57433954, -0.16381342, 0.1429805, -0.32311824, -0.05986529, 0.15738386, -0.09855858, 0.14942543, 0.06102041, 0.1792911, 0.60745768, -0.20550596, 0.78911684, -0.21057518, -0.07789625, 0.22531448, 0.35744262, -0.25914507, 0.47107406, 0.20694196, -1.0282735, -0.68385763, 0.36368439, -0.21451474, 0.08118256, -0.30927808, -0.25912514, -0.08891588, -0.02747355, 0.23271745, -0.60778905, -0.62654019, -0.3142036, 0.80562582, 0.14491443, -0.36072379, 0.43388157, -0.05476285, -0.04706737, 0.10673568, 0.56424862, -0.53826732, 0.29315569, 0.5908627, 0.14102791, 0.74804452, 0.18525469, 0.40335164, -0.61415255, 0.16667452, -0.1806244, -1.00274608, 0.17348233, -0.492035, 0.08394589, -0.48700832, -0.01896208, -0.64369642, 0.46076666, -0.32045204, -0.10907642, 0.4475821, 0.0346727, -0.07118651, -0.01023352, 0.15682802, -0.34302133, 0.09754035, -0.61917287, -0.06500293, -0.22417004, -0.50747288, 0.15381929, -0.08631408, -0.07599223, 0.1522749, 0.87796859, -0.42018087, 0.33855878, 0.19529181, -0.11163184, -0.13164064, -0.02020247, -0.07888311, 0.94712072, 0.86732631, -1.03377172, 0.16386457, 0.33729703, -0.10803546, -0.19154858, -0.56138059, 0.34417997, 0.23333489, -0.93582701, 0.89236907, -0.40878467, 0.33716665, -0.40687687, 0.72083574, 0.95302532, -0.48377307, -0.31470843, 0.07446214, -0.45890497, -0.14744903, -0.07778106, -0.6299586, -0.62678442, -0.3830381, -0.33517262, -1.42251885, 0.5866489, -0.08703915, 0.37135669, -0.12777202, 0.08694338, -0.86525591, -0.38726819, 0.8807366, 0.4330742, -0.67984816, 0.44155035, 0.86128064, -0.41761476, 0.99670232, 0.03114051, -0.80214563, 0.10468369, 0.51725356, -0.35506117, 0.45307899, -0.05998885, 0.63143569, -0.76215922, 0.68347487, -0.21406399, -0.26617323, -0.29898416, -0.02439218, 0.84290001, -0.34625435, -0.07590837, 0.07117403, 0.4253009, 0.84309211, -0.09233032, 0.23218783, 0.47271025, 0.5518146, 0.24049917, 0.39388777, -0.21117915, 0.56288129, 1.19033622, -0.01098663, 0.87223105, 0.38271718, 0.13341626, 0.26176694, -0.43258809, -0.32376449, 0.32462725, -0.18581978, -0.6062889, 0.49399923, -0.15075301, 0.11491479, -0.92596391, 0.2062248, 0.10645803, 0.07001367, 0.6246609, -0.67709945, -0.32218031, -0.23671831, 0.2882854, -0.06936887, 0.98694615, 0.98170173, 0.15341571, -0.28495971, 0.86752087, -1.01324441, 0.86966018, 0.03774368, 1.34783559, -0.30054713, -0.23104931, -0.31780096, 0.531366, -0.59806829, -0.36525721, -0.63076231, -0.27212686, -0.04023422, 0.09514435, 0.50196276, -0.55611572, 0.06393098, 0.18860904, -0.21944902, 0.31456557, -0.25124155, -0.41205037, 0.26962286, -0.37185813, -0.50732885, -0.41712006, -0.03760938, -0.29493057, -0.07396702, -0.35787026, 0.28704445, -0.02616743, 0.14673217, 0.91028315, 0.12892939, -0.38621262, 0.65958873, -0.21590425, 0.01428969, -0.38163871, -0.64375003, -0.28738989, 0.74725662, -0.20296571, -0.70637491, -0.48881634, -0.20099402, -0.36820631, -0.16675371, 0.65976679, -0.08706073, 0.02294333, 0.08535455, 0.5929339, 0.24594984, 0.02311426, -0.68482705, -0.41842711, 0.03982625, 0.82535104, 0.20779018, -0.43242467, -0.1331862, 0.0426914, -0.80759613, -0.63349549, -0.45052184, -0.54260007, 0.79035319, 0.35593941, -0.45047421, -0.77340938, 0.54209736, 0.33231466, -0.57680965, -0.62583135, 0.2745367, -0.16649495, 0.27927344, -0.12996884, -0.53664612, -0.22321215, 0.58269071, -0.03148943, 0.13095752, 0.20297242, 0.71916733, -0.10746074, 0.9878997, 0.27062172, 0.41977736, 0.07438166, 0.95052877, 0.10146732, 0.24125965, -0.08817491, 0.92294262, 0.81343473, -0.56173038, -0.76366122, 0.51314887, 0.76453182, 0.12350534, 0.385669, 0.70480824, 0.08199059, 0.21705523, -0.8164085, -0.2602547, -0.74657503, 0.55290443, 0.36717027, 0.03758998, 0.22755805, -0.09895607, 0.04793805, 0.36218102, 0.06425055, -0.26331255, -0.78066859, 0.51861918, 0.06778054, -0.03352325, 0.4579911, -0.20659144, -0.27758114, 0.06129695, -0.04956632, 0.35546992, 1.14912457, -0.01954446, -0.20503268, 0.56222643, 0.20876053, 0.08084127, -0.00717941, 0.10402114, -0.06648738, 0.69649003, -0.22349191, 0.34324029, -0.24874324, 0.18572242, 0.04870622, -0.12835612, -0.90237187, 0.11606011, -0.42581153, 0.19355433, -0.22528463, -0.45458354, 0.19487802, -0.52050058, 0.35448599, 0.45440697, 0.49438175, -0.68745696, 0.21038082, 0.0320896, 0.4349471, 0.43088281, 0.03111693, 0.12624104, 0.17558352, -0.35767439, 0.17776939, 0.67946628, 0.15044016, 0.34548729, 0.11586383, 0.35616219, 0.87416289, -1.18516578, -0.15303891, -0.37673308, 0.43141088, -0.48142087, 0.20155701, 0.52344659, -0.23200097, 0.2885681, -0.0462512, -0.59369048, 0.08544671, 0.34197824, 0.00295535, 0.00006176, 0.16755279, -0.66087606, -0.02465603, 0.31204548, -0.59357249, 0.01541306, -0.4005584, -0.05972554, 0.3765098, 0.42999896, -0.36535946, 1.01074673, 0.09669424, 0.40365814, 0.20393637, 0.52437575, -0.41987391, 0.37709387, -0.58987282, 0.33739617, -0.11898026, -0.28434956, 0.1597293, -0.37279759, 0.16857772, -0.68369473, -0.0071707, -0.04059722, 0.58160569, 0.58976118, 0.10055376, -0.18236506, -1.08655842, 0.30120224, 0.30007053, -0.11252756, -0.62825161, -0.1326348, -0.42851097, 1.03854125, 0.24354518, 0.10562716, 0.03132733, 0.39074576, -0.03366123, 0.79741896, 0.49841304, 0.21364995, 0.18241056, -0.18698021, -0.28497967, 0.38933595, 0.11301139, 1.24439505, 0.51136736, -0.65701771, 0.27939095, -0.22659298, -0.15105041, 0.57087145, 0.50860357, 0.29485485, -0.58321312, 0.59750485, 0.03408749, 0.39961435, 0.03062172, -0.81325337, -0.96214203, 0.74986661, -0.31788668, 0.88783763, -0.13642998, -0.32008531, 0.42439299, -0.05245325, 0.35587115, -0.78972585, -0.37017856, 0.07580413, 0.56916281, -0.09145056, -0.90740166, 0.62806898, -0.31161061, 0.15519897, 1.01124225, 0.77697608, 0.36015047, 0.32750061, -0.84616456, 0.19411611, -0.06196452, -1.09669834, -0.35645447, 0.06090909, 0.26040357, 0.13541585, -0.82187723, -0.06078835, -0.69013183, 0.19408876, 0.25123547, 0.17069555, 0.20121217, -0.1581002, -0.27500869, 0.76892683, -0.22920415, 0.21864374, -0.84626659, 1.06326256, 0.18485873, 0.28648798, -0.13462979, -0.82739178, 0.40288133, -0.2522933, -0.33840672, 1.15660232, -0.16710885, 0.59070836, -0.41584072, 0.6413154, 0.15969256, 0.13970691, 0.21919379, -0.30751989, 0.01535126, 0.151286, -0.2351158, -0.77362202, -0.28149127, -0.34349163, -0.86027636, 0.23016573, 0.32814893, 0.59121915, 0.02608666, 0.05585644, -0.14758155, -0.18051375, -0.11185617, 0.02766199, 0.1086709, -0.27037177, 0.13244513, -0.22185581, -0.50843575, 0.47653498, 0.25945503, -0.22933535, -0.78166528, 0.56236506, 0.33474894, 0.07395005, -0.0010374, 1.46650075, 0.16786992, 0.60445882, 0.21725496, -0.69845412, -0.47520656, -0.31249089, 0.08262117, -0.41453233, 0.03723303, 0.39465699, 0.13324717, 0.19290278, 0.40262335, 0.71855104, 0.00508655, -0.14580232, 0.00664295, -0.43501853, -0.25775908, -1.05643512, -0.58657198, 0.00882584, -0.91035077, -0.05087263, -0.40071615, -0.13329363, -0.32605182, 0.0582619, -0.60851712, -0.34857522, 0.34230498, 0.03913884, -0.20505177, 0.20422924, -0.6039347, -0.3201094, -0.28186075, 0.45902571, -0.39077311, -0.30344038, -0.22482032, -0.93393331, 0.18888015, 0.48344648, 1.03475056, -0.93217473, -0.01898711, 0.05513286, 0.00559779, 0.41460272, -0.04550956, -0.65065565, -0.06816141, -0.87087767, 0.39983768, -0.02467193, -0.10143708, -0.0281854, 0.19861823, 0.57277688, -0.62915897, 0.07635907, -0.21785542, -0.24266213, -0.58920035, 0.8735833, 0.01937812, -0.15674472, -0.12309391, 0.0971405, 1.2568596, 0.4631905, 0.08852888, -0.31980047, -0.44034559, 0.18866543, 0.73407759, 0.57842749, 0.75478142, -0.66825648, -0.01168109, -0.00545973, -0.39713654, 0.36269584, 0.99580935, 0.41006171, 0.50042469, -0.11071851, 1.12810914, -1.10241171, 1.89162617, -0.99732647, -0.12099965, 0.11814313, -0.01341351, -0.43024054, -0.79979627, 0.38535542, -0.17683241, 0.29936481, 0.05981153, -0.11028389, 0.34534311, 0.75691815, 0.24019508, 0.66355708, -0.34164908, 0.83255807, 0.15017797, 0.12187011, 1.41774819, -0.52498394, -0.044922, -0.41671414, -0.2338223, -0.05746551, -0.18718892, 0.39982858, 0.31543399, 0.11590568, 1.32424046, 0.05622941, -0.49715308, 0.19790781, -0.04698604, 0.0176054, -0.29532893, -0.18092255, -0.2411324, 0.16836408, -0.37251685, -0.01231155, -1.01260232, -0.02662909, 0.61151004, -0.40463673, -0.12523357, 0.09789725, 0.52598041, 0.32914949, 0.0497145, 0.07585685, -0.52719632, 0.46697623, 0.08254545, 0.10024796, -0.42965233, -1.03540314, 0.14417656, 0.64111414, -0.99078817, 0.77060728, 0.84045203, 0.66702656, 0.59150075, -0.51178797, -0.17628048, 0.02654522, -0.13195154, -0.10722928, 0.20949466, 0.72473781, 0.44285701, 0.041194, -0.18076938, -0.0056339, 0.08868553, 0.41377258, -0.26371297, 0.92863413, 0.42775041, 0.49862032, -0.84238745, 0.04070651, -0.04633961, 0.10937306, -0.38830745, -1.70342592, -0.36054629, 0.03337412, -0.55735919, 0.41443122, 0.35961044, -0.49656088, 0.85467555, 0.22505791, 0.24043058, 0.32640623, -0.83547676, -0.25394402, 0.41162933, 0.21179415, 0.12873309, 0.39479051, 0.08823813, 0.21040905, -0.02311454, 0.02801339, 0.33823009, 0.09152804, 0.26989013, 0.59232086, -0.07340297, 0.52603082, -0.13742513, -0.68716515, 0.03712687, -0.59110496, -0.5375624, -0.20264201, -0.4197942, -0.25709618, 0.02098565, -0.21788964, -0.04660608, -0.02134926, 0.32418305, -0.34799358, -0.01971767, 0.3447397, 0.92040745, 0.01829108, 0.45747208, 0.71810033, -0.47792571, -0.0511238, 0.54451592, 0.52611143, 0.13367782, 0.30706616, -0.11235834, 0.39950519, -0.92395656, -0.40335738, -0.68963082, -0.13129022, -0.16358013, 0.15970672, 0.28903858, 0.31483469, 0.18140216, -0.98620227, -0.54757712, -0.23481511, 0.01051076, -0.35504336, -0.28863315, 0.07818349, -0.35299887, 0.16308879, -0.32231376, -0.67285008, 0.28333656, 0.84791759, -0.99139896, 0.21389071];
  const b1 = [-0.43904587, 0.27626463, 0.39608897, 0.09035718, 0.10523165, 0.14424163, 0.40578421, 0.52690493, 0.59359846, 0.73608862, 0.28456852, -0.30496941, 0.28074687, 0.30099391, -0.45837033, 0.07003333, 0.17636819, 0.01055823, 0.0602172, 0.70459468, -0.18661893, -0.10891293, 0.57997362, 0.56275182];
  const W2 = [0.16396696, -0.0186638, 0.12839297, -0.50198593, 0.14857412, 0.68086165, -0.52052613, -0.16992307, -0.00838156, -0.59430475, 0.56357853, 0.25900022, -0.39076597, 0.29994446, 0.16916655, -1.08698857, 0.19083151, -0.05837215, -0.15987953, 0.42139921, -0.86008371, -0.53175356, 0.99634963, -0.094933, -0.31762471, -0.67082871, -1.29889225, 0.76329458, 0.11707492, -0.44571948, -0.36361002, -0.65672328, -0.04317494, 0.61759817, 0.15886416, -0.85469792, -0.6146735, 0.08240911, 0.32669298, -0.37848863, -0.52200957, -0.40565292, -0.45103355, -0.64287887, -0.65675879, 0.27041518, -0.08170835, -0.6208056, -0.44854897, 0.3997751, -0.10731284, -0.07882441, 0.56268168, 0.20694659, 0.16111717, 0.12925333, 0.09217448, -0.41995938, -0.92074231, 0.38274958, 0.20763628, -0.26687776, 0.31100866, 0.53164196, -0.99735721, -0.75140437, 0.05529316, 0.18596725, -0.22602161, -0.77938789, -1.09860257, -0.6923567, -0.03103315, 0.11417935, 0.81335826, -1.04016298, -0.38368465, -0.73168708, -0.41210989, 0.76497514, 0.27176183, 0.56659022, 0.64358331, 0.5583729, -0.15933102, 0.37387176, -0.99688946, 0.2453998, 0.45054678, 1.02504479, 0.20196869, -0.41455425, -0.31548267, -0.13224846, -0.02809123, 0.2178836, -0.14425645, -0.36331416, 0.98252806, -0.33386765, 0.20033046, 0.32019031, -0.82674293, -0.71015617, 0.01652158, -1.33472745, -0.57355301, 0.32226792, 0.22983429, -0.32551817, -0.76996861, 0.20474628, 0.91209956, 0.59965896, 0.47755315, -0.71012324, 0.87240346, 0.49604219, -0.10344183, 0.1183055, -0.34611065, -1.22399127, -0.04657497, -0.61022049, -0.91682694, 0.78923135, 0.00844106, 0.22467462, -0.07577602, -0.40131962, 0.31097263, -0.06949005, 0.75482901, 0.09390879, 0.87016061, 0.4766799, -0.30468133, 0.08176189, 1.09461394, -0.3174621, -0.73549457, -0.5524119, -1.10422759, 0.66952998, -0.73955392, -0.36613274, -0.18079183, -0.40314609, -0.5530615, 0.13661023, 0.65227064, 0.52941459, -0.47003222, -0.27044421, 0.32848271, 0.79646529, -0.27991992, 0.31112464, -0.8288174, -0.34683443, -0.41844676, -0.4945284, -0.15033049, 0.09999913, -0.63672432, 0.92735501, -0.7201482, -0.28410968, 0.87642094, -0.09515528, -0.62687183, 0.47488925, -0.42464593, -0.61544755, -0.02252976, -0.26969271, -0.51040979, 0.02943852, 0.50946558, 0.78695988, -0.61696838, -0.0371519, 0.45316697, -0.41050011, 0.11274156, -0.3302282, -0.02587712, 0.31364359, -0.83298445, -0.11733562, -1.13965492, -0.1663197, -0.05580997, 0.13284159, -1.00188759, 0.58866552, -1.29155741, -0.24294795, 0.77119726, -0.14296559, -0.3212845, -0.48491569, 0.20450878, 0.45125683, -0.40224331, 0.43226149, -0.3435042, -0.05146013, 0.24849959, 0.45472894, 0.55502164, 0.00261701, 0.0207984, 0.45652777, 0.08317182, 0.39696386, 0.1651187, 0.13538232, 1.01334751, -0.23982053, -0.84631347, -0.39593633, -0.05614005, 0.10181486, 0.70587434, 0.10331044, -0.82104428, -0.12421454, -0.2430469, 0.24518261, -0.03736232, -0.88174503, 0.0756319, 0.08846777, 0.98294511, -0.11442168, 0.63282598, 1.0718152, 0.42681318, 0.37931168, 0.69020573, 0.4591126, 0.03747664, 0.49496282, 0.06991234, -0.1790078, 0.25323188, -0.44929151, -0.7528889, 0.22662342, -0.41263741, -0.08106209, -0.53565413, -0.76844882, 0.13351773, -0.12390932, 0.92675604, 0.11836368, -0.64419108, 1.09892069, 0.13122719, -0.16047598, 0.65381542, -0.32719792, 0.6001395, 0.33433911, -0.75790264, -0.06342003, 0.57905808, -0.74478486, -1.06474141, -0.63431418, -0.57435547, -0.42881923, 0.21735485, 0.28905652, -0.01474968, 0.37817655, 0.14866953, 0.82630712, 1.08971463, -0.2181494, -0.57376584, -0.00452291, 0.78633473, 0.1774807, 0.94086244, -0.85308326, 0.0131292, -0.12325674, 0.20903498, -0.71042786, -0.13650023, 0.10607371, 0.75107174, 0.37678925, 0.26246965, -0.10132319, 0.31779795, 0.16659766, -0.19235965, -0.27215663, -0.66426422, -0.20287575, 0.18965513, -1.23563198, -0.31631362, -0.07376901, -0.55083622, 0.24679875, 0.94418278, -0.75968922, 1.02500868, 0.73421967, 0.7022593, -0.31794277, -0.2167448, -0.03519118, -0.06135172, -0.75028605, 0.42756959, 0.26361556, -0.41845524, -0.48468614, 0.29127131, -0.78354925, -0.4609069, -0.28941918, 0.2159856, 0.02264124, 0.53882632, -1.04805614, 0.52981935, -1.14762004, -0.97102158, -0.56164648, 0.80307627, 0.32273978, 1.30784802, -0.75973864, 0.21624475, 0.06102252, -0.55353924, 0.93644114, 0.36706723, 0.40330453, -0.20837951, 0.42954129, -0.27761503, -0.109742, 0.40631461, -0.58447597, -0.30597658, 0.1054504, 0.89990223, 0.6421127, 0.01201759, -0.52822418, 0.53476045, 0.74900807, 0.59068359, -0.07645323, 0.10750491, 0.36293164, -0.2542027, -1.21803325, -0.35954246, 0.07082262, 0.1223237, 1.87808315, -0.32019706, -0.69719369, -0.15008297, 0.22013152, 0.22280248, -0.28524836, 0.33487137, -0.6877943, 0.53402877, -0.36821837, 0.42046998, 0.71972409, -0.16289978, -0.03146343];
  const b2 = [0.71832104, 0.22619869, -0.73510757, -0.44920774, 0.1329898, 0.52800273, 0.18105101, -0.8017543, -0.10351891, 0.49626047, -0.63107878, -0.09805316, -0.25707537, -0.53390245, 0.09814826, -0.17841755];
  const W3 = [-1.46820449, 8.68473471, -1.95651755, 12.12912909, -6.63863234, -0.46174429, 4.05829573, -2.30715517, -6.43073805, -0.29181605, 4.10013078, 2.33337929, 3.21120621, -4.54177692, -0.58914978, 4.53817815, 0.39040835, 4.46925172, 0.74095311, 6.61243484, -2.0159787, 0.33010626, 4.42296788, -1.6749944, -2.22885644, -1.99383868, -0.76462135, 3.3446912, -0.04335348, -0.7659775, -0.37597068, 1.89358927, -3.63106826, 2.05479638, -0.80979544, 2.1411618, -2.04813533, -0.81137086, 2.43836706, 0.84618169, 0.20248109, -1.32979351, -0.20244115, 0.39652053, -2.56971256, -1.67672082, -2.13460751, 1.47444531, 0.35055638, 1.7945012, -1.47870906, 5.11628431, 3.39652799, 0.90195515, -1.2608352, 6.76043933, -2.78158049, 3.17331023, 2.52154186, 0.55262333, -1.98741063, -0.25319444, -0.24235402, -5.43638536, -1.01566651, 7.74578433, -0.99319471, 15.58876257, -8.83797438, 0.70877731, 3.37197068, 1.05048161, -9.84421827, 0.88579255, 5.15241889, 4.88932476, 0.68543558, -3.83122475, 0.53246475, 0.26526423];
  const b3 = [0.62199182, -0.07701043, -0.2208619, 0.84667886, 0.08747866];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-2"; }
function type(){ return Type.NORMAL; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16788205, -0.63439075, -0.1862026, 0.99761458, 0.10353333, -0.5291827, 0.09749109, 0.02214851, -0.56207372, -0.46899568, -0.69276271, 0.12189829, 0.27035635, -0.74188389, -0.46903546, 1.32732867, 0.3394156, 0.16843937, 0.59361008, -0.2293277, 0.86819813, -0.10367289, 0.66608405, -0.30202679, 0.27496808, 0.21279585, -0.73299331, 0.33347628, 0.04570234, -0.65748801, 0.49949506, 0.20476732, 0.8690524, 0.42394082, -0.44588971, -0.52423924, 0.03997332, -0.1938916, 0.18511634, 0.01269735, 0.34132422, 0.2143522, -0.29950564, -0.09399812, 0.50024004, -0.68331374, -0.32071373, 0.01955369, -0.26120985, -0.2707803, 0.3036766, -0.28112958, -0.06304748, -0.69119676, -0.46504273, -0.42278123, -0.06561067, 0.93810583, -0.07695293, -1.16068136, -0.02831264, -0.78822038, 0.02933277, -0.22943636, 0.16893768, -0.44367755, -0.38681563, 0.13489397, -0.11726421, 0.33650558, -0.31270492, 1.03640854, -0.03607425, -0.36227446, 0.31708886, -0.75841334, 0.16235638, 0.18033699, 0.1386746, -0.82146819, -0.71613523, 0.0213257, 0.89608287, -0.38216895, -0.39537786, -0.15439748, -0.67961269, -0.03526684, -0.2208372, 0.16149933, 0.33906803, 0.84800405, 0.15008155, -0.56283182, -0.22402021, 0.12096821, 1.07377091, 0.28743435, 0.99952874, 0.2723715, 0.2580235, 0.09617146, -0.01322764, -0.4138104, 0.35685543, -0.06756341, -0.36042924, 0.96033205, 0.16668951, -0.40930922, 0.94056557, 0.3921297, -0.36110341, 0.07948525, 0.48951672, -1.06305949, -0.70766376, 0.01888781, 0.20291343, 0.03660634, -0.30377504, 0.39699805, -0.3472578, -0.1090794, -0.21582979, -0.76050298, -0.46554669, -0.56627061, -0.64713995, 0.43824112, -0.03070052, 0.24849701, 0.34957775, -0.45239318, 0.66319794, -0.50455408, -0.19028965, 0.22782748, -0.89063052, -0.4693205, -1.07497332, 0.29838911, -0.34153791, 0.13461715, -0.9693946, 0.32965495, -0.32911016, -1.06481057, 0.26162833, -0.03248344, 0.15130083, -0.54334993, 0.62914388, 0.35641609, -0.8921017, 0.91726427, 0.4452475, 0.7525651, 0.21595042, 0.2756259, -0.97196587, 0.33135184, -0.20815682, 0.19812074, 0.93758071, 0.06915754, 0.45914172, 0.08126663, 0.32552199, 0.08448694, 0.14839982, -0.01523763, 0.02667876, -0.29760251, 0.01664591, 0.1890276, 0.61209817, -0.45993021, -0.44330463, -0.94120666, -0.29604388, -0.52021149, -0.50583114, -0.01257435, 0.2783062, -0.95002122, -0.16824371, 0.03387897, -1.72427171, 0.48085749, -0.76607537, 0.02886498, -0.16082788, 0.28472925, -0.04609731, -0.01791656, -0.44277961, 0.10469983, 0.3784822, -0.06009874, -0.04622983, -0.28886191, -0.03982243, -0.63079428, 0.0827715, 0.15355715, -0.22172136, -0.13448255, 0.69607142, 0.1548226, -0.85728835, 0.39983262, -0.51362815, 0.00121708, 0.19994646, -0.62649547, 0.62625891, 0.28596533, -0.57464808, 0.44087013, 0.16723396, 0.03691558, 0.26523152, -0.08085895, 0.0692517, 0.67396956, 0.88487372, -0.60631792, -0.00211093, -1.18039649, -0.21310945, -0.1434568, 0.40988157, -0.0200476, 0.17515855, 0.41569759, -0.1391067, 0.65373782, 0.67808522, 0.05287159, -0.16445228, -0.48113373, -0.56994305, -0.75095344, 0.94561105, -0.37729878, -0.92062008, 0.3208412, -0.57433954, -0.16381342, 0.1429805, -0.32311824, -0.05986529, 0.15738386, -0.09855858, 0.14942543, 0.06102041, 0.1792911, 0.60745768, -0.20550596, 0.78911684, -0.21057518, -0.07789625, 0.22531448, 0.35744262, -0.25914507, 0.47107406, 0.20694196, -1.0282735, -0.68385763, 0.36368439, -0.21451474, 0.08118256, -0.30927808, -0.25912514, -0.08891588, -0.02747355, 0.23271745, -0.60778905, -0.62654019, -0.3142036, 0.80562582, 0.14491443, -0.36072379, 0.43388157, -0.05476285, -0.04706737, 0.10673568, 0.56424862, -0.53826732, 0.29315569, 0.5908627, 0.14102791, 0.74804452, 0.18525469, 0.40335164, -0.61415255, 0.16667452, -0.1806244, -1.00274608, 0.17348233, -0.492035, 0.08394589, -0.48700832, -0.01896208, -0.64369642, 0.46076666, -0.32045204, -0.10907642, 0.4475821, 0.0346727, -0.07118651, -0.01023352, 0.15682802, -0.34302133, 0.09754035, -0.61917287, -0.06500293, -0.22417004, -0.50747288, 0.15381929, -0.08631408, -0.07599223, 0.1522749, 0.87796859, -0.42018087, 0.33855878, 0.19529181, -0.11163184, -0.13164064, -0.02020247, -0.07888311, 0.94712072, 0.86732631, -1.03377172, 0.16386457, 0.33729703, -0.10803546, -0.19154858, -0.56138059, 0.34417997, 0.23333489, -0.93582701, 0.89236907, -0.40878467, 0.33716665, -0.40687687, 0.72083574, 0.95302532, -0.48377307, -0.31470843, 0.07446214, -0.45890497, -0.14744903, -0.07778106, -0.6299586, -0.62678442, -0.3830381, -0.33517262, -1.42251885, 0.5866489, -0.08703915, 0.37135669, -0.12777202, 0.08694338, -0.86525591, -0.38726819, 0.8807366, 0.4330742, -0.67984816, 0.44155035, 0.86128064, -0.41761476, 0.99670232, 0.03114051, -0.80214563, 0.10468369, 0.51725356, -0.35506117, 0.45307899, -0.05998885, 0.63143569, -0.76215922, 0.68347487, -0.21406399, -0.26617323, -0.29898416, -0.02439218, 0.84290001, -0.34625435, -0.07590837, 0.07117403, 0.4253009, 0.84309211, -0.09233032, 0.23218783, 0.47271025, 0.5518146, 0.24049917, 0.39388777, -0.21117915, 0.56288129, 1.19033622, -0.01098663, 0.87223105, 0.38271718, 0.13341626, 0.26176694, -0.43258809, -0.32376449, 0.32462725, -0.18581978, -0.6062889, 0.49399923, -0.15075301, 0.11491479, -0.92596391, 0.2062248, 0.10645803, 0.07001367, 0.6246609, -0.67709945, -0.32218031, -0.23671831, 0.2882854, -0.06936887, 0.98694615, 0.98170173, 0.15341571, -0.28495971, 0.86752087, -1.01324441, 0.86966018, 0.03774368, 1.34783559, -0.30054713, -0.23104931, -0.31780096, 0.531366, -0.59806829, -0.36525721, -0.63076231, -0.27212686, -0.04023422, 0.09514435, 0.50196276, -0.55611572, 0.06393098, 0.18860904, -0.21944902, 0.31456557, -0.25124155, -0.41205037, 0.26962286, -0.37185813, -0.50732885, -0.41712006, -0.03760938, -0.29493057, -0.07396702, -0.35787026, 0.28704445, -0.02616743, 0.14673217, 0.91028315, 0.12892939, -0.38621262, 0.65958873, -0.21590425, 0.01428969, -0.38163871, -0.64375003, -0.28738989, 0.74725662, -0.20296571, -0.70637491, -0.48881634, -0.20099402, -0.36820631, -0.16675371, 0.65976679, -0.08706073, 0.02294333, 0.08535455, 0.5929339, 0.24594984, 0.02311426, -0.68482705, -0.41842711, 0.03982625, 0.82535104, 0.20779018, -0.43242467, -0.1331862, 0.0426914, -0.80759613, -0.63349549, -0.45052184, -0.54260007, 0.79035319, 0.35593941, -0.45047421, -0.77340938, 0.54209736, 0.33231466, -0.57680965, -0.62583135, 0.2745367, -0.16649495, 0.27927344, -0.12996884, -0.53664612, -0.22321215, 0.58269071, -0.03148943, 0.13095752, 0.20297242, 0.71916733, -0.10746074, 0.9878997, 0.27062172, 0.41977736, 0.07438166, 0.95052877, 0.10146732, 0.24125965, -0.08817491, 0.92294262, 0.81343473, -0.56173038, -0.76366122, 0.51314887, 0.76453182, 0.12350534, 0.385669, 0.70480824, 0.08199059, 0.21705523, -0.8164085, -0.2602547, -0.74657503, 0.55290443, 0.36717027, 0.03758998, 0.22755805, -0.09895607, 0.04793805, 0.36218102, 0.06425055, -0.26331255, -0.78066859, 0.51861918, 0.06778054, -0.03352325, 0.4579911, -0.20659144, -0.27758114, 0.06129695, -0.04956632, 0.35546992, 1.14912457, -0.01954446, -0.20503268, 0.56222643, 0.20876053, 0.08084127, -0.00717941, 0.10402114, -0.06648738, 0.69649003, -0.22349191, 0.34324029, -0.24874324, 0.18572242, 0.04870622, -0.12835612, -0.90237187, 0.11606011, -0.42581153, 0.19355433, -0.22528463, -0.45458354, 0.19487802, -0.52050058, 0.35448599, 0.45440697, 0.49438175, -0.68745696, 0.21038082, 0.0320896, 0.4349471, 0.43088281, 0.03111693, 0.12624104, 0.17558352, -0.35767439, 0.17776939, 0.67946628, 0.15044016, 0.34548729, 0.11586383, 0.35616219, 0.87416289, -1.18516578, -0.15303891, -0.37673308, 0.43141088, -0.48142087, 0.20155701, 0.52344659, -0.23200097, 0.2885681, -0.0462512, -0.59369048, 0.08544671, 0.34197824, 0.00295535, 0.00006176, 0.16755279, -0.66087606, -0.02465603, 0.31204548, -0.59357249, 0.01541306, -0.4005584, -0.05972554, 0.3765098, 0.42999896, -0.36535946, 1.01074673, 0.09669424, 0.40365814, 0.20393637, 0.52437575, -0.41987391, 0.37709387, -0.58987282, 0.33739617, -0.11898026, -0.28434956, 0.1597293, -0.37279759, 0.16857772, -0.68369473, -0.0071707, -0.04059722, 0.58160569, 0.58976118, 0.10055376, -0.18236506, -1.08655842, 0.30120224, 0.30007053, -0.11252756, -0.62825161, -0.1326348, -0.42851097, 1.03854125, 0.24354518, 0.10562716, 0.03132733, 0.39074576, -0.03366123, 0.79741896, 0.49841304, 0.21364995, 0.18241056, -0.18698021, -0.28497967, 0.38933595, 0.11301139, 1.24439505, 0.51136736, -0.65701771, 0.27939095, -0.22659298, -0.15105041, 0.57087145, 0.50860357, 0.29485485, -0.58321312, 0.59750485, 0.03408749, 0.39961435, 0.03062172, -0.81325337, -0.96214203, 0.74986661, -0.31788668, 0.88783763, -0.13642998, -0.32008531, 0.42439299, -0.05245325, 0.35587115, -0.78972585, -0.37017856, 0.07580413, 0.56916281, -0.09145056, -0.90740166, 0.62806898, -0.31161061, 0.15519897, 1.01124225, 0.77697608, 0.36015047, 0.32750061, -0.84616456, 0.19411611, -0.06196452, -1.09669834, -0.35645447, 0.06090909, 0.26040357, 0.13541585, -0.82187723, -0.06078835, -0.69013183, 0.19408876, 0.25123547, 0.17069555, 0.20121217, -0.1581002, -0.27500869, 0.76892683, -0.22920415, 0.21864374, -0.84626659, 1.06326256, 0.18485873, 0.28648798, -0.13462979, -0.82739178, 0.40288133, -0.2522933, -0.33840672, 1.15660232, -0.16710885, 0.59070836, -0.41584072, 0.6413154, 0.15969256, 0.13970691, 0.21919379, -0.30751989, 0.01535126, 0.151286, -0.2351158, -0.77362202, -0.28149127, -0.34349163, -0.86027636, 0.23016573, 0.32814893, 0.59121915, 0.02608666, 0.05585644, -0.14758155, -0.18051375, -0.11185617, 0.02766199, 0.1086709, -0.27037177, 0.13244513, -0.22185581, -0.50843575, 0.47653498, 0.25945503, -0.22933535, -0.78166528, 0.56236506, 0.33474894, 0.07395005, -0.0010374, 1.46650075, 0.16786992, 0.60445882, 0.21725496, -0.69845412, -0.47520656, -0.31249089, 0.08262117, -0.41453233, 0.03723303, 0.39465699, 0.13324717, 0.19290278, 0.40262335, 0.71855104, 0.00508655, -0.14580232, 0.00664295, -0.43501853, -0.25775908, -1.05643512, -0.58657198, 0.00882584, -0.91035077, -0.05087263, -0.40071615, -0.13329363, -0.32605182, 0.0582619, -0.60851712, -0.34857522, 0.34230498, 0.03913884, -0.20505177, 0.20422924, -0.6039347, -0.3201094, -0.28186075, 0.45902571, -0.39077311, -0.30344038, -0.22482032, -0.93393331, 0.18888015, 0.48344648, 1.03475056, -0.93217473, -0.01898711, 0.05513286, 0.00559779, 0.41460272, -0.04550956, -0.65065565, -0.06816141, -0.87087767, 0.39983768, -0.02467193, -0.10143708, -0.0281854, 0.19861823, 0.57277688, -0.62915897, 0.07635907, -0.21785542, -0.24266213, -0.58920035, 0.8735833, 0.01937812, -0.15674472, -0.12309391, 0.0971405, 1.2568596, 0.4631905, 0.08852888, -0.31980047, -0.44034559, 0.18866543, 0.73407759, 0.57842749, 0.75478142, -0.66825648, -0.01168109, -0.00545973, -0.39713654, 0.36269584, 0.99580935, 0.41006171, 0.50042469, -0.11071851, 1.12810914, -1.10241171, 1.89162617, -0.99732647, -0.12099965, 0.11814313, -0.01341351, -0.43024054, -0.79979627, 0.38535542, -0.17683241, 0.29936481, 0.05981153, -0.11028389, 0.34534311, 0.75691815, 0.24019508, 0.66355708, -0.34164908, 0.83255807, 0.15017797, 0.12187011, 1.41774819, -0.52498394, -0.044922, -0.41671414, -0.2338223, -0.05746551, -0.18718892, 0.39982858, 0.31543399, 0.11590568, 1.32424046, 0.05622941, -0.49715308, 0.19790781, -0.04698604, 0.0176054, -0.29532893, -0.18092255, -0.2411324, 0.16836408, -0.37251685, -0.01231155, -1.01260232, -0.02662909, 0.61151004, -0.40463673, -0.12523357, 0.09789725, 0.52598041, 0.32914949, 0.0497145, 0.07585685, -0.52719632, 0.46697623, 0.08254545, 0.10024796, -0.42965233, -1.03540314, 0.14417656, 0.64111414, -0.99078817, 0.77060728, 0.84045203, 0.66702656, 0.59150075, -0.51178797, -0.17628048, 0.02654522, -0.13195154, -0.10722928, 0.20949466, 0.72473781, 0.44285701, 0.041194, -0.18076938, -0.0056339, 0.08868553, 0.41377258, -0.26371297, 0.92863413, 0.42775041, 0.49862032, -0.84238745, 0.04070651, -0.04633961, 0.10937306, -0.38830745, -1.70342592, -0.36054629, 0.03337412, -0.55735919, 0.41443122, 0.35961044, -0.49656088, 0.85467555, 0.22505791, 0.24043058, 0.32640623, -0.83547676, -0.25394402, 0.41162933, 0.21179415, 0.12873309, 0.39479051, 0.08823813, 0.21040905, -0.02311454, 0.02801339, 0.33823009, 0.09152804, 0.26989013, 0.59232086, -0.07340297, 0.52603082, -0.13742513, -0.68716515, 0.03712687, -0.59110496, -0.5375624, -0.20264201, -0.4197942, -0.25709618, 0.02098565, -0.21788964, -0.04660608, -0.02134926, 0.32418305, -0.34799358, -0.01971767, 0.3447397, 0.92040745, 0.01829108, 0.45747208, 0.71810033, -0.47792571, -0.0511238, 0.54451592, 0.52611143, 0.13367782, 0.30706616, -0.11235834, 0.39950519, -0.92395656, -0.40335738, -0.68963082, -0.13129022, -0.16358013, 0.15970672, 0.28903858, 0.31483469, 0.18140216, -0.98620227, -0.54757712, -0.23481511, 0.01051076, -0.35504336, -0.28863315, 0.07818349, -0.35299887, 0.16308879, -0.32231376, -0.67285008, 0.28333656, 0.84791759, -0.99139896, 0.21389071];
  const b1 = [-0.43904587, 0.27626463, 0.39608897, 0.09035718, 0.10523165, 0.14424163, 0.40578421, 0.52690493, 0.59359846, 0.73608862, 0.28456852, -0.30496941, 0.28074687, 0.30099391, -0.45837033, 0.07003333, 0.17636819, 0.01055823, 0.0602172, 0.70459468, -0.18661893, -0.10891293, 0.57997362, 0.56275182];
  const W2 = [0.16396696, -0.0186638, 0.12839297, -0.50198593, 0.14857412, 0.68086165, -0.52052613, -0.16992307, -0.00838156, -0.59430475, 0.56357853, 0.25900022, -0.39076597, 0.29994446, 0.16916655, -1.08698857, 0.19083151, -0.05837215, -0.15987953, 0.42139921, -0.86008371, -0.53175356, 0.99634963, -0.094933, -0.31762471, -0.67082871, -1.29889225, 0.76329458, 0.11707492, -0.44571948, -0.36361002, -0.65672328, -0.04317494, 0.61759817, 0.15886416, -0.85469792, -0.6146735, 0.08240911, 0.32669298, -0.37848863, -0.52200957, -0.40565292, -0.45103355, -0.64287887, -0.65675879, 0.27041518, -0.08170835, -0.6208056, -0.44854897, 0.3997751, -0.10731284, -0.07882441, 0.56268168, 0.20694659, 0.16111717, 0.12925333, 0.09217448, -0.41995938, -0.92074231, 0.38274958, 0.20763628, -0.26687776, 0.31100866, 0.53164196, -0.99735721, -0.75140437, 0.05529316, 0.18596725, -0.22602161, -0.77938789, -1.09860257, -0.6923567, -0.03103315, 0.11417935, 0.81335826, -1.04016298, -0.38368465, -0.73168708, -0.41210989, 0.76497514, 0.27176183, 0.56659022, 0.64358331, 0.5583729, -0.15933102, 0.37387176, -0.99688946, 0.2453998, 0.45054678, 1.02504479, 0.20196869, -0.41455425, -0.31548267, -0.13224846, -0.02809123, 0.2178836, -0.14425645, -0.36331416, 0.98252806, -0.33386765, 0.20033046, 0.32019031, -0.82674293, -0.71015617, 0.01652158, -1.33472745, -0.57355301, 0.32226792, 0.22983429, -0.32551817, -0.76996861, 0.20474628, 0.91209956, 0.59965896, 0.47755315, -0.71012324, 0.87240346, 0.49604219, -0.10344183, 0.1183055, -0.34611065, -1.22399127, -0.04657497, -0.61022049, -0.91682694, 0.78923135, 0.00844106, 0.22467462, -0.07577602, -0.40131962, 0.31097263, -0.06949005, 0.75482901, 0.09390879, 0.87016061, 0.4766799, -0.30468133, 0.08176189, 1.09461394, -0.3174621, -0.73549457, -0.5524119, -1.10422759, 0.66952998, -0.73955392, -0.36613274, -0.18079183, -0.40314609, -0.5530615, 0.13661023, 0.65227064, 0.52941459, -0.47003222, -0.27044421, 0.32848271, 0.79646529, -0.27991992, 0.31112464, -0.8288174, -0.34683443, -0.41844676, -0.4945284, -0.15033049, 0.09999913, -0.63672432, 0.92735501, -0.7201482, -0.28410968, 0.87642094, -0.09515528, -0.62687183, 0.47488925, -0.42464593, -0.61544755, -0.02252976, -0.26969271, -0.51040979, 0.02943852, 0.50946558, 0.78695988, -0.61696838, -0.0371519, 0.45316697, -0.41050011, 0.11274156, -0.3302282, -0.02587712, 0.31364359, -0.83298445, -0.11733562, -1.13965492, -0.1663197, -0.05580997, 0.13284159, -1.00188759, 0.58866552, -1.29155741, -0.24294795, 0.77119726, -0.14296559, -0.3212845, -0.48491569, 0.20450878, 0.45125683, -0.40224331, 0.43226149, -0.3435042, -0.05146013, 0.24849959, 0.45472894, 0.55502164, 0.00261701, 0.0207984, 0.45652777, 0.08317182, 0.39696386, 0.1651187, 0.13538232, 1.01334751, -0.23982053, -0.84631347, -0.39593633, -0.05614005, 0.10181486, 0.70587434, 0.10331044, -0.82104428, -0.12421454, -0.2430469, 0.24518261, -0.03736232, -0.88174503, 0.0756319, 0.08846777, 0.98294511, -0.11442168, 0.63282598, 1.0718152, 0.42681318, 0.37931168, 0.69020573, 0.4591126, 0.03747664, 0.49496282, 0.06991234, -0.1790078, 0.25323188, -0.44929151, -0.7528889, 0.22662342, -0.41263741, -0.08106209, -0.53565413, -0.76844882, 0.13351773, -0.12390932, 0.92675604, 0.11836368, -0.64419108, 1.09892069, 0.13122719, -0.16047598, 0.65381542, -0.32719792, 0.6001395, 0.33433911, -0.75790264, -0.06342003, 0.57905808, -0.74478486, -1.06474141, -0.63431418, -0.57435547, -0.42881923, 0.21735485, 0.28905652, -0.01474968, 0.37817655, 0.14866953, 0.82630712, 1.08971463, -0.2181494, -0.57376584, -0.00452291, 0.78633473, 0.1774807, 0.94086244, -0.85308326, 0.0131292, -0.12325674, 0.20903498, -0.71042786, -0.13650023, 0.10607371, 0.75107174, 0.37678925, 0.26246965, -0.10132319, 0.31779795, 0.16659766, -0.19235965, -0.27215663, -0.66426422, -0.20287575, 0.18965513, -1.23563198, -0.31631362, -0.07376901, -0.55083622, 0.24679875, 0.94418278, -0.75968922, 1.02500868, 0.73421967, 0.7022593, -0.31794277, -0.2167448, -0.03519118, -0.06135172, -0.75028605, 0.42756959, 0.26361556, -0.41845524, -0.48468614, 0.29127131, -0.78354925, -0.4609069, -0.28941918, 0.2159856, 0.02264124, 0.53882632, -1.04805614, 0.52981935, -1.14762004, -0.97102158, -0.56164648, 0.80307627, 0.32273978, 1.30784802, -0.75973864, 0.21624475, 0.06102252, -0.55353924, 0.93644114, 0.36706723, 0.40330453, -0.20837951, 0.42954129, -0.27761503, -0.109742, 0.40631461, -0.58447597, -0.30597658, 0.1054504, 0.89990223, 0.6421127, 0.01201759, -0.52822418, 0.53476045, 0.74900807, 0.59068359, -0.07645323, 0.10750491, 0.36293164, -0.2542027, -1.21803325, -0.35954246, 0.07082262, 0.1223237, 1.87808315, -0.32019706, -0.69719369, -0.15008297, 0.22013152, 0.22280248, -0.28524836, 0.33487137, -0.6877943, 0.53402877, -0.36821837, 0.42046998, 0.71972409, -0.16289978, -0.03146343];
  const b2 = [0.71832104, 0.22619869, -0.73510757, -0.44920774, 0.1329898, 0.52800273, 0.18105101, -0.8017543, -0.10351891, 0.49626047, -0.63107878, -0.09805316, -0.25707537, -0.53390245, 0.09814826, -0.17841755];
  const W3 = [-1.46820449, 8.68473471, -1.95651755, 12.12912909, -6.63863234, -0.46174429, 4.05829573, -2.30715517, -6.43073805, -0.29181605, 4.10013078, 2.33337929, 3.21120621, -4.54177692, -0.58914978, 4.53817815, 0.39040835, 4.46925172, 0.74095311, 6.61243484, -2.0159787, 0.33010626, 4.42296788, -1.6749944, -2.22885644, -1.99383868, -0.76462135, 3.3446912, -0.04335348, -0.7659775, -0.37597068, 1.89358927, -3.63106826, 2.05479638, -0.80979544, 2.1411618, -2.04813533, -0.81137086, 2.43836706, 0.84618169, 0.20248109, -1.32979351, -0.20244115, 0.39652053, -2.56971256, -1.67672082, -2.13460751, 1.47444531, 0.35055638, 1.7945012, -1.47870906, 5.11628431, 3.39652799, 0.90195515, -1.2608352, 6.76043933, -2.78158049, 3.17331023, 2.52154186, 0.55262333, -1.98741063, -0.25319444, -0.24235402, -5.43638536, -1.01566651, 7.74578433, -0.99319471, 15.58876257, -8.83797438, 0.70877731, 3.37197068, 1.05048161, -9.84421827, 0.88579255, 5.15241889, 4.88932476, 0.68543558, -3.83122475, 0.53246475, 0.26526423];
  const b3 = [0.62199182, -0.07701043, -0.2208619, 0.84667886, 0.08747866];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-3"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16788205, -0.63439075, -0.1862026, 0.99761458, 0.10353333, -0.5291827, 0.09749109, 0.02214851, -0.56207372, -0.46899568, -0.69276271, 0.12189829, 0.27035635, -0.74188389, -0.46903546, 1.32732867, 0.3394156, 0.16843937, 0.59361008, -0.2293277, 0.86819813, -0.10367289, 0.66608405, -0.30202679, 0.27496808, 0.21279585, -0.73299331, 0.33347628, 0.04570234, -0.65748801, 0.49949506, 0.20476732, 0.8690524, 0.42394082, -0.44588971, -0.52423924, 0.03997332, -0.1938916, 0.18511634, 0.01269735, 0.34132422, 0.2143522, -0.29950564, -0.09399812, 0.50024004, -0.68331374, -0.32071373, 0.01955369, -0.26120985, -0.2707803, 0.3036766, -0.28112958, -0.06304748, -0.69119676, -0.46504273, -0.42278123, -0.06561067, 0.93810583, -0.07695293, -1.16068136, -0.02831264, -0.78822038, 0.02933277, -0.22943636, 0.16893768, -0.44367755, -0.38681563, 0.13489397, -0.11726421, 0.33650558, -0.31270492, 1.03640854, -0.03607425, -0.36227446, 0.31708886, -0.75841334, 0.16235638, 0.18033699, 0.1386746, -0.82146819, -0.71613523, 0.0213257, 0.89608287, -0.38216895, -0.39537786, -0.15439748, -0.67961269, -0.03526684, -0.2208372, 0.16149933, 0.33906803, 0.84800405, 0.15008155, -0.56283182, -0.22402021, 0.12096821, 1.07377091, 0.28743435, 0.99952874, 0.2723715, 0.2580235, 0.09617146, -0.01322764, -0.4138104, 0.35685543, -0.06756341, -0.36042924, 0.96033205, 0.16668951, -0.40930922, 0.94056557, 0.3921297, -0.36110341, 0.07948525, 0.48951672, -1.06305949, -0.70766376, 0.01888781, 0.20291343, 0.03660634, -0.30377504, 0.39699805, -0.3472578, -0.1090794, -0.21582979, -0.76050298, -0.46554669, -0.56627061, -0.64713995, 0.43824112, -0.03070052, 0.24849701, 0.34957775, -0.45239318, 0.66319794, -0.50455408, -0.19028965, 0.22782748, -0.89063052, -0.4693205, -1.07497332, 0.29838911, -0.34153791, 0.13461715, -0.9693946, 0.32965495, -0.32911016, -1.06481057, 0.26162833, -0.03248344, 0.15130083, -0.54334993, 0.62914388, 0.35641609, -0.8921017, 0.91726427, 0.4452475, 0.7525651, 0.21595042, 0.2756259, -0.97196587, 0.33135184, -0.20815682, 0.19812074, 0.93758071, 0.06915754, 0.45914172, 0.08126663, 0.32552199, 0.08448694, 0.14839982, -0.01523763, 0.02667876, -0.29760251, 0.01664591, 0.1890276, 0.61209817, -0.45993021, -0.44330463, -0.94120666, -0.29604388, -0.52021149, -0.50583114, -0.01257435, 0.2783062, -0.95002122, -0.16824371, 0.03387897, -1.72427171, 0.48085749, -0.76607537, 0.02886498, -0.16082788, 0.28472925, -0.04609731, -0.01791656, -0.44277961, 0.10469983, 0.3784822, -0.06009874, -0.04622983, -0.28886191, -0.03982243, -0.63079428, 0.0827715, 0.15355715, -0.22172136, -0.13448255, 0.69607142, 0.1548226, -0.85728835, 0.39983262, -0.51362815, 0.00121708, 0.19994646, -0.62649547, 0.62625891, 0.28596533, -0.57464808, 0.44087013, 0.16723396, 0.03691558, 0.26523152, -0.08085895, 0.0692517, 0.67396956, 0.88487372, -0.60631792, -0.00211093, -1.18039649, -0.21310945, -0.1434568, 0.40988157, -0.0200476, 0.17515855, 0.41569759, -0.1391067, 0.65373782, 0.67808522, 0.05287159, -0.16445228, -0.48113373, -0.56994305, -0.75095344, 0.94561105, -0.37729878, -0.92062008, 0.3208412, -0.57433954, -0.16381342, 0.1429805, -0.32311824, -0.05986529, 0.15738386, -0.09855858, 0.14942543, 0.06102041, 0.1792911, 0.60745768, -0.20550596, 0.78911684, -0.21057518, -0.07789625, 0.22531448, 0.35744262, -0.25914507, 0.47107406, 0.20694196, -1.0282735, -0.68385763, 0.36368439, -0.21451474, 0.08118256, -0.30927808, -0.25912514, -0.08891588, -0.02747355, 0.23271745, -0.60778905, -0.62654019, -0.3142036, 0.80562582, 0.14491443, -0.36072379, 0.43388157, -0.05476285, -0.04706737, 0.10673568, 0.56424862, -0.53826732, 0.29315569, 0.5908627, 0.14102791, 0.74804452, 0.18525469, 0.40335164, -0.61415255, 0.16667452, -0.1806244, -1.00274608, 0.17348233, -0.492035, 0.08394589, -0.48700832, -0.01896208, -0.64369642, 0.46076666, -0.32045204, -0.10907642, 0.4475821, 0.0346727, -0.07118651, -0.01023352, 0.15682802, -0.34302133, 0.09754035, -0.61917287, -0.06500293, -0.22417004, -0.50747288, 0.15381929, -0.08631408, -0.07599223, 0.1522749, 0.87796859, -0.42018087, 0.33855878, 0.19529181, -0.11163184, -0.13164064, -0.02020247, -0.07888311, 0.94712072, 0.86732631, -1.03377172, 0.16386457, 0.33729703, -0.10803546, -0.19154858, -0.56138059, 0.34417997, 0.23333489, -0.93582701, 0.89236907, -0.40878467, 0.33716665, -0.40687687, 0.72083574, 0.95302532, -0.48377307, -0.31470843, 0.07446214, -0.45890497, -0.14744903, -0.07778106, -0.6299586, -0.62678442, -0.3830381, -0.33517262, -1.42251885, 0.5866489, -0.08703915, 0.37135669, -0.12777202, 0.08694338, -0.86525591, -0.38726819, 0.8807366, 0.4330742, -0.67984816, 0.44155035, 0.86128064, -0.41761476, 0.99670232, 0.03114051, -0.80214563, 0.10468369, 0.51725356, -0.35506117, 0.45307899, -0.05998885, 0.63143569, -0.76215922, 0.68347487, -0.21406399, -0.26617323, -0.29898416, -0.02439218, 0.84290001, -0.34625435, -0.07590837, 0.07117403, 0.4253009, 0.84309211, -0.09233032, 0.23218783, 0.47271025, 0.5518146, 0.24049917, 0.39388777, -0.21117915, 0.56288129, 1.19033622, -0.01098663, 0.87223105, 0.38271718, 0.13341626, 0.26176694, -0.43258809, -0.32376449, 0.32462725, -0.18581978, -0.6062889, 0.49399923, -0.15075301, 0.11491479, -0.92596391, 0.2062248, 0.10645803, 0.07001367, 0.6246609, -0.67709945, -0.32218031, -0.23671831, 0.2882854, -0.06936887, 0.98694615, 0.98170173, 0.15341571, -0.28495971, 0.86752087, -1.01324441, 0.86966018, 0.03774368, 1.34783559, -0.30054713, -0.23104931, -0.31780096, 0.531366, -0.59806829, -0.36525721, -0.63076231, -0.27212686, -0.04023422, 0.09514435, 0.50196276, -0.55611572, 0.06393098, 0.18860904, -0.21944902, 0.31456557, -0.25124155, -0.41205037, 0.26962286, -0.37185813, -0.50732885, -0.41712006, -0.03760938, -0.29493057, -0.07396702, -0.35787026, 0.28704445, -0.02616743, 0.14673217, 0.91028315, 0.12892939, -0.38621262, 0.65958873, -0.21590425, 0.01428969, -0.38163871, -0.64375003, -0.28738989, 0.74725662, -0.20296571, -0.70637491, -0.48881634, -0.20099402, -0.36820631, -0.16675371, 0.65976679, -0.08706073, 0.02294333, 0.08535455, 0.5929339, 0.24594984, 0.02311426, -0.68482705, -0.41842711, 0.03982625, 0.82535104, 0.20779018, -0.43242467, -0.1331862, 0.0426914, -0.80759613, -0.63349549, -0.45052184, -0.54260007, 0.79035319, 0.35593941, -0.45047421, -0.77340938, 0.54209736, 0.33231466, -0.57680965, -0.62583135, 0.2745367, -0.16649495, 0.27927344, -0.12996884, -0.53664612, -0.22321215, 0.58269071, -0.03148943, 0.13095752, 0.20297242, 0.71916733, -0.10746074, 0.9878997, 0.27062172, 0.41977736, 0.07438166, 0.95052877, 0.10146732, 0.24125965, -0.08817491, 0.92294262, 0.81343473, -0.56173038, -0.76366122, 0.51314887, 0.76453182, 0.12350534, 0.385669, 0.70480824, 0.08199059, 0.21705523, -0.8164085, -0.2602547, -0.74657503, 0.55290443, 0.36717027, 0.03758998, 0.22755805, -0.09895607, 0.04793805, 0.36218102, 0.06425055, -0.26331255, -0.78066859, 0.51861918, 0.06778054, -0.03352325, 0.4579911, -0.20659144, -0.27758114, 0.06129695, -0.04956632, 0.35546992, 1.14912457, -0.01954446, -0.20503268, 0.56222643, 0.20876053, 0.08084127, -0.00717941, 0.10402114, -0.06648738, 0.69649003, -0.22349191, 0.34324029, -0.24874324, 0.18572242, 0.04870622, -0.12835612, -0.90237187, 0.11606011, -0.42581153, 0.19355433, -0.22528463, -0.45458354, 0.19487802, -0.52050058, 0.35448599, 0.45440697, 0.49438175, -0.68745696, 0.21038082, 0.0320896, 0.4349471, 0.43088281, 0.03111693, 0.12624104, 0.17558352, -0.35767439, 0.17776939, 0.67946628, 0.15044016, 0.34548729, 0.11586383, 0.35616219, 0.87416289, -1.18516578, -0.15303891, -0.37673308, 0.43141088, -0.48142087, 0.20155701, 0.52344659, -0.23200097, 0.2885681, -0.0462512, -0.59369048, 0.08544671, 0.34197824, 0.00295535, 0.00006176, 0.16755279, -0.66087606, -0.02465603, 0.31204548, -0.59357249, 0.01541306, -0.4005584, -0.05972554, 0.3765098, 0.42999896, -0.36535946, 1.01074673, 0.09669424, 0.40365814, 0.20393637, 0.52437575, -0.41987391, 0.37709387, -0.58987282, 0.33739617, -0.11898026, -0.28434956, 0.1597293, -0.37279759, 0.16857772, -0.68369473, -0.0071707, -0.04059722, 0.58160569, 0.58976118, 0.10055376, -0.18236506, -1.08655842, 0.30120224, 0.30007053, -0.11252756, -0.62825161, -0.1326348, -0.42851097, 1.03854125, 0.24354518, 0.10562716, 0.03132733, 0.39074576, -0.03366123, 0.79741896, 0.49841304, 0.21364995, 0.18241056, -0.18698021, -0.28497967, 0.38933595, 0.11301139, 1.24439505, 0.51136736, -0.65701771, 0.27939095, -0.22659298, -0.15105041, 0.57087145, 0.50860357, 0.29485485, -0.58321312, 0.59750485, 0.03408749, 0.39961435, 0.03062172, -0.81325337, -0.96214203, 0.74986661, -0.31788668, 0.88783763, -0.13642998, -0.32008531, 0.42439299, -0.05245325, 0.35587115, -0.78972585, -0.37017856, 0.07580413, 0.56916281, -0.09145056, -0.90740166, 0.62806898, -0.31161061, 0.15519897, 1.01124225, 0.77697608, 0.36015047, 0.32750061, -0.84616456, 0.19411611, -0.06196452, -1.09669834, -0.35645447, 0.06090909, 0.26040357, 0.13541585, -0.82187723, -0.06078835, -0.69013183, 0.19408876, 0.25123547, 0.17069555, 0.20121217, -0.1581002, -0.27500869, 0.76892683, -0.22920415, 0.21864374, -0.84626659, 1.06326256, 0.18485873, 0.28648798, -0.13462979, -0.82739178, 0.40288133, -0.2522933, -0.33840672, 1.15660232, -0.16710885, 0.59070836, -0.41584072, 0.6413154, 0.15969256, 0.13970691, 0.21919379, -0.30751989, 0.01535126, 0.151286, -0.2351158, -0.77362202, -0.28149127, -0.34349163, -0.86027636, 0.23016573, 0.32814893, 0.59121915, 0.02608666, 0.05585644, -0.14758155, -0.18051375, -0.11185617, 0.02766199, 0.1086709, -0.27037177, 0.13244513, -0.22185581, -0.50843575, 0.47653498, 0.25945503, -0.22933535, -0.78166528, 0.56236506, 0.33474894, 0.07395005, -0.0010374, 1.46650075, 0.16786992, 0.60445882, 0.21725496, -0.69845412, -0.47520656, -0.31249089, 0.08262117, -0.41453233, 0.03723303, 0.39465699, 0.13324717, 0.19290278, 0.40262335, 0.71855104, 0.00508655, -0.14580232, 0.00664295, -0.43501853, -0.25775908, -1.05643512, -0.58657198, 0.00882584, -0.91035077, -0.05087263, -0.40071615, -0.13329363, -0.32605182, 0.0582619, -0.60851712, -0.34857522, 0.34230498, 0.03913884, -0.20505177, 0.20422924, -0.6039347, -0.3201094, -0.28186075, 0.45902571, -0.39077311, -0.30344038, -0.22482032, -0.93393331, 0.18888015, 0.48344648, 1.03475056, -0.93217473, -0.01898711, 0.05513286, 0.00559779, 0.41460272, -0.04550956, -0.65065565, -0.06816141, -0.87087767, 0.39983768, -0.02467193, -0.10143708, -0.0281854, 0.19861823, 0.57277688, -0.62915897, 0.07635907, -0.21785542, -0.24266213, -0.58920035, 0.8735833, 0.01937812, -0.15674472, -0.12309391, 0.0971405, 1.2568596, 0.4631905, 0.08852888, -0.31980047, -0.44034559, 0.18866543, 0.73407759, 0.57842749, 0.75478142, -0.66825648, -0.01168109, -0.00545973, -0.39713654, 0.36269584, 0.99580935, 0.41006171, 0.50042469, -0.11071851, 1.12810914, -1.10241171, 1.89162617, -0.99732647, -0.12099965, 0.11814313, -0.01341351, -0.43024054, -0.79979627, 0.38535542, -0.17683241, 0.29936481, 0.05981153, -0.11028389, 0.34534311, 0.75691815, 0.24019508, 0.66355708, -0.34164908, 0.83255807, 0.15017797, 0.12187011, 1.41774819, -0.52498394, -0.044922, -0.41671414, -0.2338223, -0.05746551, -0.18718892, 0.39982858, 0.31543399, 0.11590568, 1.32424046, 0.05622941, -0.49715308, 0.19790781, -0.04698604, 0.0176054, -0.29532893, -0.18092255, -0.2411324, 0.16836408, -0.37251685, -0.01231155, -1.01260232, -0.02662909, 0.61151004, -0.40463673, -0.12523357, 0.09789725, 0.52598041, 0.32914949, 0.0497145, 0.07585685, -0.52719632, 0.46697623, 0.08254545, 0.10024796, -0.42965233, -1.03540314, 0.14417656, 0.64111414, -0.99078817, 0.77060728, 0.84045203, 0.66702656, 0.59150075, -0.51178797, -0.17628048, 0.02654522, -0.13195154, -0.10722928, 0.20949466, 0.72473781, 0.44285701, 0.041194, -0.18076938, -0.0056339, 0.08868553, 0.41377258, -0.26371297, 0.92863413, 0.42775041, 0.49862032, -0.84238745, 0.04070651, -0.04633961, 0.10937306, -0.38830745, -1.70342592, -0.36054629, 0.03337412, -0.55735919, 0.41443122, 0.35961044, -0.49656088, 0.85467555, 0.22505791, 0.24043058, 0.32640623, -0.83547676, -0.25394402, 0.41162933, 0.21179415, 0.12873309, 0.39479051, 0.08823813, 0.21040905, -0.02311454, 0.02801339, 0.33823009, 0.09152804, 0.26989013, 0.59232086, -0.07340297, 0.52603082, -0.13742513, -0.68716515, 0.03712687, -0.59110496, -0.5375624, -0.20264201, -0.4197942, -0.25709618, 0.02098565, -0.21788964, -0.04660608, -0.02134926, 0.32418305, -0.34799358, -0.01971767, 0.3447397, 0.92040745, 0.01829108, 0.45747208, 0.71810033, -0.47792571, -0.0511238, 0.54451592, 0.52611143, 0.13367782, 0.30706616, -0.11235834, 0.39950519, -0.92395656, -0.40335738, -0.68963082, -0.13129022, -0.16358013, 0.15970672, 0.28903858, 0.31483469, 0.18140216, -0.98620227, -0.54757712, -0.23481511, 0.01051076, -0.35504336, -0.28863315, 0.07818349, -0.35299887, 0.16308879, -0.32231376, -0.67285008, 0.28333656, 0.84791759, -0.99139896, 0.21389071];
  const b1 = [-0.43904587, 0.27626463, 0.39608897, 0.09035718, 0.10523165, 0.14424163, 0.40578421, 0.52690493, 0.59359846, 0.73608862, 0.28456852, -0.30496941, 0.28074687, 0.30099391, -0.45837033, 0.07003333, 0.17636819, 0.01055823, 0.0602172, 0.70459468, -0.18661893, -0.10891293, 0.57997362, 0.56275182];
  const W2 = [0.16396696, -0.0186638, 0.12839297, -0.50198593, 0.14857412, 0.68086165, -0.52052613, -0.16992307, -0.00838156, -0.59430475, 0.56357853, 0.25900022, -0.39076597, 0.29994446, 0.16916655, -1.08698857, 0.19083151, -0.05837215, -0.15987953, 0.42139921, -0.86008371, -0.53175356, 0.99634963, -0.094933, -0.31762471, -0.67082871, -1.29889225, 0.76329458, 0.11707492, -0.44571948, -0.36361002, -0.65672328, -0.04317494, 0.61759817, 0.15886416, -0.85469792, -0.6146735, 0.08240911, 0.32669298, -0.37848863, -0.52200957, -0.40565292, -0.45103355, -0.64287887, -0.65675879, 0.27041518, -0.08170835, -0.6208056, -0.44854897, 0.3997751, -0.10731284, -0.07882441, 0.56268168, 0.20694659, 0.16111717, 0.12925333, 0.09217448, -0.41995938, -0.92074231, 0.38274958, 0.20763628, -0.26687776, 0.31100866, 0.53164196, -0.99735721, -0.75140437, 0.05529316, 0.18596725, -0.22602161, -0.77938789, -1.09860257, -0.6923567, -0.03103315, 0.11417935, 0.81335826, -1.04016298, -0.38368465, -0.73168708, -0.41210989, 0.76497514, 0.27176183, 0.56659022, 0.64358331, 0.5583729, -0.15933102, 0.37387176, -0.99688946, 0.2453998, 0.45054678, 1.02504479, 0.20196869, -0.41455425, -0.31548267, -0.13224846, -0.02809123, 0.2178836, -0.14425645, -0.36331416, 0.98252806, -0.33386765, 0.20033046, 0.32019031, -0.82674293, -0.71015617, 0.01652158, -1.33472745, -0.57355301, 0.32226792, 0.22983429, -0.32551817, -0.76996861, 0.20474628, 0.91209956, 0.59965896, 0.47755315, -0.71012324, 0.87240346, 0.49604219, -0.10344183, 0.1183055, -0.34611065, -1.22399127, -0.04657497, -0.61022049, -0.91682694, 0.78923135, 0.00844106, 0.22467462, -0.07577602, -0.40131962, 0.31097263, -0.06949005, 0.75482901, 0.09390879, 0.87016061, 0.4766799, -0.30468133, 0.08176189, 1.09461394, -0.3174621, -0.73549457, -0.5524119, -1.10422759, 0.66952998, -0.73955392, -0.36613274, -0.18079183, -0.40314609, -0.5530615, 0.13661023, 0.65227064, 0.52941459, -0.47003222, -0.27044421, 0.32848271, 0.79646529, -0.27991992, 0.31112464, -0.8288174, -0.34683443, -0.41844676, -0.4945284, -0.15033049, 0.09999913, -0.63672432, 0.92735501, -0.7201482, -0.28410968, 0.87642094, -0.09515528, -0.62687183, 0.47488925, -0.42464593, -0.61544755, -0.02252976, -0.26969271, -0.51040979, 0.02943852, 0.50946558, 0.78695988, -0.61696838, -0.0371519, 0.45316697, -0.41050011, 0.11274156, -0.3302282, -0.02587712, 0.31364359, -0.83298445, -0.11733562, -1.13965492, -0.1663197, -0.05580997, 0.13284159, -1.00188759, 0.58866552, -1.29155741, -0.24294795, 0.77119726, -0.14296559, -0.3212845, -0.48491569, 0.20450878, 0.45125683, -0.40224331, 0.43226149, -0.3435042, -0.05146013, 0.24849959, 0.45472894, 0.55502164, 0.00261701, 0.0207984, 0.45652777, 0.08317182, 0.39696386, 0.1651187, 0.13538232, 1.01334751, -0.23982053, -0.84631347, -0.39593633, -0.05614005, 0.10181486, 0.70587434, 0.10331044, -0.82104428, -0.12421454, -0.2430469, 0.24518261, -0.03736232, -0.88174503, 0.0756319, 0.08846777, 0.98294511, -0.11442168, 0.63282598, 1.0718152, 0.42681318, 0.37931168, 0.69020573, 0.4591126, 0.03747664, 0.49496282, 0.06991234, -0.1790078, 0.25323188, -0.44929151, -0.7528889, 0.22662342, -0.41263741, -0.08106209, -0.53565413, -0.76844882, 0.13351773, -0.12390932, 0.92675604, 0.11836368, -0.64419108, 1.09892069, 0.13122719, -0.16047598, 0.65381542, -0.32719792, 0.6001395, 0.33433911, -0.75790264, -0.06342003, 0.57905808, -0.74478486, -1.06474141, -0.63431418, -0.57435547, -0.42881923, 0.21735485, 0.28905652, -0.01474968, 0.37817655, 0.14866953, 0.82630712, 1.08971463, -0.2181494, -0.57376584, -0.00452291, 0.78633473, 0.1774807, 0.94086244, -0.85308326, 0.0131292, -0.12325674, 0.20903498, -0.71042786, -0.13650023, 0.10607371, 0.75107174, 0.37678925, 0.26246965, -0.10132319, 0.31779795, 0.16659766, -0.19235965, -0.27215663, -0.66426422, -0.20287575, 0.18965513, -1.23563198, -0.31631362, -0.07376901, -0.55083622, 0.24679875, 0.94418278, -0.75968922, 1.02500868, 0.73421967, 0.7022593, -0.31794277, -0.2167448, -0.03519118, -0.06135172, -0.75028605, 0.42756959, 0.26361556, -0.41845524, -0.48468614, 0.29127131, -0.78354925, -0.4609069, -0.28941918, 0.2159856, 0.02264124, 0.53882632, -1.04805614, 0.52981935, -1.14762004, -0.97102158, -0.56164648, 0.80307627, 0.32273978, 1.30784802, -0.75973864, 0.21624475, 0.06102252, -0.55353924, 0.93644114, 0.36706723, 0.40330453, -0.20837951, 0.42954129, -0.27761503, -0.109742, 0.40631461, -0.58447597, -0.30597658, 0.1054504, 0.89990223, 0.6421127, 0.01201759, -0.52822418, 0.53476045, 0.74900807, 0.59068359, -0.07645323, 0.10750491, 0.36293164, -0.2542027, -1.21803325, -0.35954246, 0.07082262, 0.1223237, 1.87808315, -0.32019706, -0.69719369, -0.15008297, 0.22013152, 0.22280248, -0.28524836, 0.33487137, -0.6877943, 0.53402877, -0.36821837, 0.42046998, 0.71972409, -0.16289978, -0.03146343];
  const b2 = [0.71832104, 0.22619869, -0.73510757, -0.44920774, 0.1329898, 0.52800273, 0.18105101, -0.8017543, -0.10351891, 0.49626047, -0.63107878, -0.09805316, -0.25707537, -0.53390245, 0.09814826, -0.17841755];
  const W3 = [-1.46820449, 8.68473471, -1.95651755, 12.12912909, -6.63863234, -0.46174429, 4.05829573, -2.30715517, -6.43073805, -0.29181605, 4.10013078, 2.33337929, 3.21120621, -4.54177692, -0.58914978, 4.53817815, 0.39040835, 4.46925172, 0.74095311, 6.61243484, -2.0159787, 0.33010626, 4.42296788, -1.6749944, -2.22885644, -1.99383868, -0.76462135, 3.3446912, -0.04335348, -0.7659775, -0.37597068, 1.89358927, -3.63106826, 2.05479638, -0.80979544, 2.1411618, -2.04813533, -0.81137086, 2.43836706, 0.84618169, 0.20248109, -1.32979351, -0.20244115, 0.39652053, -2.56971256, -1.67672082, -2.13460751, 1.47444531, 0.35055638, 1.7945012, -1.47870906, 5.11628431, 3.39652799, 0.90195515, -1.2608352, 6.76043933, -2.78158049, 3.17331023, 2.52154186, 0.55262333, -1.98741063, -0.25319444, -0.24235402, -5.43638536, -1.01566651, 7.74578433, -0.99319471, 15.58876257, -8.83797438, 0.70877731, 3.37197068, 1.05048161, -9.84421827, 0.88579255, 5.15241889, 4.88932476, 0.68543558, -3.83122475, 0.53246475, 0.26526423];
  const b3 = [0.62199182, -0.07701043, -0.2208619, 0.84667886, 0.08747866];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-4"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16788205, -0.63439075, -0.1862026, 0.99761458, 0.10353333, -0.5291827, 0.09749109, 0.02214851, -0.56207372, -0.46899568, -0.69276271, 0.12189829, 0.27035635, -0.74188389, -0.46903546, 1.32732867, 0.3394156, 0.16843937, 0.59361008, -0.2293277, 0.86819813, -0.10367289, 0.66608405, -0.30202679, 0.27496808, 0.21279585, -0.73299331, 0.33347628, 0.04570234, -0.65748801, 0.49949506, 0.20476732, 0.8690524, 0.42394082, -0.44588971, -0.52423924, 0.03997332, -0.1938916, 0.18511634, 0.01269735, 0.34132422, 0.2143522, -0.29950564, -0.09399812, 0.50024004, -0.68331374, -0.32071373, 0.01955369, -0.26120985, -0.2707803, 0.3036766, -0.28112958, -0.06304748, -0.69119676, -0.46504273, -0.42278123, -0.06561067, 0.93810583, -0.07695293, -1.16068136, -0.02831264, -0.78822038, 0.02933277, -0.22943636, 0.16893768, -0.44367755, -0.38681563, 0.13489397, -0.11726421, 0.33650558, -0.31270492, 1.03640854, -0.03607425, -0.36227446, 0.31708886, -0.75841334, 0.16235638, 0.18033699, 0.1386746, -0.82146819, -0.71613523, 0.0213257, 0.89608287, -0.38216895, -0.39537786, -0.15439748, -0.67961269, -0.03526684, -0.2208372, 0.16149933, 0.33906803, 0.84800405, 0.15008155, -0.56283182, -0.22402021, 0.12096821, 1.07377091, 0.28743435, 0.99952874, 0.2723715, 0.2580235, 0.09617146, -0.01322764, -0.4138104, 0.35685543, -0.06756341, -0.36042924, 0.96033205, 0.16668951, -0.40930922, 0.94056557, 0.3921297, -0.36110341, 0.07948525, 0.48951672, -1.06305949, -0.70766376, 0.01888781, 0.20291343, 0.03660634, -0.30377504, 0.39699805, -0.3472578, -0.1090794, -0.21582979, -0.76050298, -0.46554669, -0.56627061, -0.64713995, 0.43824112, -0.03070052, 0.24849701, 0.34957775, -0.45239318, 0.66319794, -0.50455408, -0.19028965, 0.22782748, -0.89063052, -0.4693205, -1.07497332, 0.29838911, -0.34153791, 0.13461715, -0.9693946, 0.32965495, -0.32911016, -1.06481057, 0.26162833, -0.03248344, 0.15130083, -0.54334993, 0.62914388, 0.35641609, -0.8921017, 0.91726427, 0.4452475, 0.7525651, 0.21595042, 0.2756259, -0.97196587, 0.33135184, -0.20815682, 0.19812074, 0.93758071, 0.06915754, 0.45914172, 0.08126663, 0.32552199, 0.08448694, 0.14839982, -0.01523763, 0.02667876, -0.29760251, 0.01664591, 0.1890276, 0.61209817, -0.45993021, -0.44330463, -0.94120666, -0.29604388, -0.52021149, -0.50583114, -0.01257435, 0.2783062, -0.95002122, -0.16824371, 0.03387897, -1.72427171, 0.48085749, -0.76607537, 0.02886498, -0.16082788, 0.28472925, -0.04609731, -0.01791656, -0.44277961, 0.10469983, 0.3784822, -0.06009874, -0.04622983, -0.28886191, -0.03982243, -0.63079428, 0.0827715, 0.15355715, -0.22172136, -0.13448255, 0.69607142, 0.1548226, -0.85728835, 0.39983262, -0.51362815, 0.00121708, 0.19994646, -0.62649547, 0.62625891, 0.28596533, -0.57464808, 0.44087013, 0.16723396, 0.03691558, 0.26523152, -0.08085895, 0.0692517, 0.67396956, 0.88487372, -0.60631792, -0.00211093, -1.18039649, -0.21310945, -0.1434568, 0.40988157, -0.0200476, 0.17515855, 0.41569759, -0.1391067, 0.65373782, 0.67808522, 0.05287159, -0.16445228, -0.48113373, -0.56994305, -0.75095344, 0.94561105, -0.37729878, -0.92062008, 0.3208412, -0.57433954, -0.16381342, 0.1429805, -0.32311824, -0.05986529, 0.15738386, -0.09855858, 0.14942543, 0.06102041, 0.1792911, 0.60745768, -0.20550596, 0.78911684, -0.21057518, -0.07789625, 0.22531448, 0.35744262, -0.25914507, 0.47107406, 0.20694196, -1.0282735, -0.68385763, 0.36368439, -0.21451474, 0.08118256, -0.30927808, -0.25912514, -0.08891588, -0.02747355, 0.23271745, -0.60778905, -0.62654019, -0.3142036, 0.80562582, 0.14491443, -0.36072379, 0.43388157, -0.05476285, -0.04706737, 0.10673568, 0.56424862, -0.53826732, 0.29315569, 0.5908627, 0.14102791, 0.74804452, 0.18525469, 0.40335164, -0.61415255, 0.16667452, -0.1806244, -1.00274608, 0.17348233, -0.492035, 0.08394589, -0.48700832, -0.01896208, -0.64369642, 0.46076666, -0.32045204, -0.10907642, 0.4475821, 0.0346727, -0.07118651, -0.01023352, 0.15682802, -0.34302133, 0.09754035, -0.61917287, -0.06500293, -0.22417004, -0.50747288, 0.15381929, -0.08631408, -0.07599223, 0.1522749, 0.87796859, -0.42018087, 0.33855878, 0.19529181, -0.11163184, -0.13164064, -0.02020247, -0.07888311, 0.94712072, 0.86732631, -1.03377172, 0.16386457, 0.33729703, -0.10803546, -0.19154858, -0.56138059, 0.34417997, 0.23333489, -0.93582701, 0.89236907, -0.40878467, 0.33716665, -0.40687687, 0.72083574, 0.95302532, -0.48377307, -0.31470843, 0.07446214, -0.45890497, -0.14744903, -0.07778106, -0.6299586, -0.62678442, -0.3830381, -0.33517262, -1.42251885, 0.5866489, -0.08703915, 0.37135669, -0.12777202, 0.08694338, -0.86525591, -0.38726819, 0.8807366, 0.4330742, -0.67984816, 0.44155035, 0.86128064, -0.41761476, 0.99670232, 0.03114051, -0.80214563, 0.10468369, 0.51725356, -0.35506117, 0.45307899, -0.05998885, 0.63143569, -0.76215922, 0.68347487, -0.21406399, -0.26617323, -0.29898416, -0.02439218, 0.84290001, -0.34625435, -0.07590837, 0.07117403, 0.4253009, 0.84309211, -0.09233032, 0.23218783, 0.47271025, 0.5518146, 0.24049917, 0.39388777, -0.21117915, 0.56288129, 1.19033622, -0.01098663, 0.87223105, 0.38271718, 0.13341626, 0.26176694, -0.43258809, -0.32376449, 0.32462725, -0.18581978, -0.6062889, 0.49399923, -0.15075301, 0.11491479, -0.92596391, 0.2062248, 0.10645803, 0.07001367, 0.6246609, -0.67709945, -0.32218031, -0.23671831, 0.2882854, -0.06936887, 0.98694615, 0.98170173, 0.15341571, -0.28495971, 0.86752087, -1.01324441, 0.86966018, 0.03774368, 1.34783559, -0.30054713, -0.23104931, -0.31780096, 0.531366, -0.59806829, -0.36525721, -0.63076231, -0.27212686, -0.04023422, 0.09514435, 0.50196276, -0.55611572, 0.06393098, 0.18860904, -0.21944902, 0.31456557, -0.25124155, -0.41205037, 0.26962286, -0.37185813, -0.50732885, -0.41712006, -0.03760938, -0.29493057, -0.07396702, -0.35787026, 0.28704445, -0.02616743, 0.14673217, 0.91028315, 0.12892939, -0.38621262, 0.65958873, -0.21590425, 0.01428969, -0.38163871, -0.64375003, -0.28738989, 0.74725662, -0.20296571, -0.70637491, -0.48881634, -0.20099402, -0.36820631, -0.16675371, 0.65976679, -0.08706073, 0.02294333, 0.08535455, 0.5929339, 0.24594984, 0.02311426, -0.68482705, -0.41842711, 0.03982625, 0.82535104, 0.20779018, -0.43242467, -0.1331862, 0.0426914, -0.80759613, -0.63349549, -0.45052184, -0.54260007, 0.79035319, 0.35593941, -0.45047421, -0.77340938, 0.54209736, 0.33231466, -0.57680965, -0.62583135, 0.2745367, -0.16649495, 0.27927344, -0.12996884, -0.53664612, -0.22321215, 0.58269071, -0.03148943, 0.13095752, 0.20297242, 0.71916733, -0.10746074, 0.9878997, 0.27062172, 0.41977736, 0.07438166, 0.95052877, 0.10146732, 0.24125965, -0.08817491, 0.92294262, 0.81343473, -0.56173038, -0.76366122, 0.51314887, 0.76453182, 0.12350534, 0.385669, 0.70480824, 0.08199059, 0.21705523, -0.8164085, -0.2602547, -0.74657503, 0.55290443, 0.36717027, 0.03758998, 0.22755805, -0.09895607, 0.04793805, 0.36218102, 0.06425055, -0.26331255, -0.78066859, 0.51861918, 0.06778054, -0.03352325, 0.4579911, -0.20659144, -0.27758114, 0.06129695, -0.04956632, 0.35546992, 1.14912457, -0.01954446, -0.20503268, 0.56222643, 0.20876053, 0.08084127, -0.00717941, 0.10402114, -0.06648738, 0.69649003, -0.22349191, 0.34324029, -0.24874324, 0.18572242, 0.04870622, -0.12835612, -0.90237187, 0.11606011, -0.42581153, 0.19355433, -0.22528463, -0.45458354, 0.19487802, -0.52050058, 0.35448599, 0.45440697, 0.49438175, -0.68745696, 0.21038082, 0.0320896, 0.4349471, 0.43088281, 0.03111693, 0.12624104, 0.17558352, -0.35767439, 0.17776939, 0.67946628, 0.15044016, 0.34548729, 0.11586383, 0.35616219, 0.87416289, -1.18516578, -0.15303891, -0.37673308, 0.43141088, -0.48142087, 0.20155701, 0.52344659, -0.23200097, 0.2885681, -0.0462512, -0.59369048, 0.08544671, 0.34197824, 0.00295535, 0.00006176, 0.16755279, -0.66087606, -0.02465603, 0.31204548, -0.59357249, 0.01541306, -0.4005584, -0.05972554, 0.3765098, 0.42999896, -0.36535946, 1.01074673, 0.09669424, 0.40365814, 0.20393637, 0.52437575, -0.41987391, 0.37709387, -0.58987282, 0.33739617, -0.11898026, -0.28434956, 0.1597293, -0.37279759, 0.16857772, -0.68369473, -0.0071707, -0.04059722, 0.58160569, 0.58976118, 0.10055376, -0.18236506, -1.08655842, 0.30120224, 0.30007053, -0.11252756, -0.62825161, -0.1326348, -0.42851097, 1.03854125, 0.24354518, 0.10562716, 0.03132733, 0.39074576, -0.03366123, 0.79741896, 0.49841304, 0.21364995, 0.18241056, -0.18698021, -0.28497967, 0.38933595, 0.11301139, 1.24439505, 0.51136736, -0.65701771, 0.27939095, -0.22659298, -0.15105041, 0.57087145, 0.50860357, 0.29485485, -0.58321312, 0.59750485, 0.03408749, 0.39961435, 0.03062172, -0.81325337, -0.96214203, 0.74986661, -0.31788668, 0.88783763, -0.13642998, -0.32008531, 0.42439299, -0.05245325, 0.35587115, -0.78972585, -0.37017856, 0.07580413, 0.56916281, -0.09145056, -0.90740166, 0.62806898, -0.31161061, 0.15519897, 1.01124225, 0.77697608, 0.36015047, 0.32750061, -0.84616456, 0.19411611, -0.06196452, -1.09669834, -0.35645447, 0.06090909, 0.26040357, 0.13541585, -0.82187723, -0.06078835, -0.69013183, 0.19408876, 0.25123547, 0.17069555, 0.20121217, -0.1581002, -0.27500869, 0.76892683, -0.22920415, 0.21864374, -0.84626659, 1.06326256, 0.18485873, 0.28648798, -0.13462979, -0.82739178, 0.40288133, -0.2522933, -0.33840672, 1.15660232, -0.16710885, 0.59070836, -0.41584072, 0.6413154, 0.15969256, 0.13970691, 0.21919379, -0.30751989, 0.01535126, 0.151286, -0.2351158, -0.77362202, -0.28149127, -0.34349163, -0.86027636, 0.23016573, 0.32814893, 0.59121915, 0.02608666, 0.05585644, -0.14758155, -0.18051375, -0.11185617, 0.02766199, 0.1086709, -0.27037177, 0.13244513, -0.22185581, -0.50843575, 0.47653498, 0.25945503, -0.22933535, -0.78166528, 0.56236506, 0.33474894, 0.07395005, -0.0010374, 1.46650075, 0.16786992, 0.60445882, 0.21725496, -0.69845412, -0.47520656, -0.31249089, 0.08262117, -0.41453233, 0.03723303, 0.39465699, 0.13324717, 0.19290278, 0.40262335, 0.71855104, 0.00508655, -0.14580232, 0.00664295, -0.43501853, -0.25775908, -1.05643512, -0.58657198, 0.00882584, -0.91035077, -0.05087263, -0.40071615, -0.13329363, -0.32605182, 0.0582619, -0.60851712, -0.34857522, 0.34230498, 0.03913884, -0.20505177, 0.20422924, -0.6039347, -0.3201094, -0.28186075, 0.45902571, -0.39077311, -0.30344038, -0.22482032, -0.93393331, 0.18888015, 0.48344648, 1.03475056, -0.93217473, -0.01898711, 0.05513286, 0.00559779, 0.41460272, -0.04550956, -0.65065565, -0.06816141, -0.87087767, 0.39983768, -0.02467193, -0.10143708, -0.0281854, 0.19861823, 0.57277688, -0.62915897, 0.07635907, -0.21785542, -0.24266213, -0.58920035, 0.8735833, 0.01937812, -0.15674472, -0.12309391, 0.0971405, 1.2568596, 0.4631905, 0.08852888, -0.31980047, -0.44034559, 0.18866543, 0.73407759, 0.57842749, 0.75478142, -0.66825648, -0.01168109, -0.00545973, -0.39713654, 0.36269584, 0.99580935, 0.41006171, 0.50042469, -0.11071851, 1.12810914, -1.10241171, 1.89162617, -0.99732647, -0.12099965, 0.11814313, -0.01341351, -0.43024054, -0.79979627, 0.38535542, -0.17683241, 0.29936481, 0.05981153, -0.11028389, 0.34534311, 0.75691815, 0.24019508, 0.66355708, -0.34164908, 0.83255807, 0.15017797, 0.12187011, 1.41774819, -0.52498394, -0.044922, -0.41671414, -0.2338223, -0.05746551, -0.18718892, 0.39982858, 0.31543399, 0.11590568, 1.32424046, 0.05622941, -0.49715308, 0.19790781, -0.04698604, 0.0176054, -0.29532893, -0.18092255, -0.2411324, 0.16836408, -0.37251685, -0.01231155, -1.01260232, -0.02662909, 0.61151004, -0.40463673, -0.12523357, 0.09789725, 0.52598041, 0.32914949, 0.0497145, 0.07585685, -0.52719632, 0.46697623, 0.08254545, 0.10024796, -0.42965233, -1.03540314, 0.14417656, 0.64111414, -0.99078817, 0.77060728, 0.84045203, 0.66702656, 0.59150075, -0.51178797, -0.17628048, 0.02654522, -0.13195154, -0.10722928, 0.20949466, 0.72473781, 0.44285701, 0.041194, -0.18076938, -0.0056339, 0.08868553, 0.41377258, -0.26371297, 0.92863413, 0.42775041, 0.49862032, -0.84238745, 0.04070651, -0.04633961, 0.10937306, -0.38830745, -1.70342592, -0.36054629, 0.03337412, -0.55735919, 0.41443122, 0.35961044, -0.49656088, 0.85467555, 0.22505791, 0.24043058, 0.32640623, -0.83547676, -0.25394402, 0.41162933, 0.21179415, 0.12873309, 0.39479051, 0.08823813, 0.21040905, -0.02311454, 0.02801339, 0.33823009, 0.09152804, 0.26989013, 0.59232086, -0.07340297, 0.52603082, -0.13742513, -0.68716515, 0.03712687, -0.59110496, -0.5375624, -0.20264201, -0.4197942, -0.25709618, 0.02098565, -0.21788964, -0.04660608, -0.02134926, 0.32418305, -0.34799358, -0.01971767, 0.3447397, 0.92040745, 0.01829108, 0.45747208, 0.71810033, -0.47792571, -0.0511238, 0.54451592, 0.52611143, 0.13367782, 0.30706616, -0.11235834, 0.39950519, -0.92395656, -0.40335738, -0.68963082, -0.13129022, -0.16358013, 0.15970672, 0.28903858, 0.31483469, 0.18140216, -0.98620227, -0.54757712, -0.23481511, 0.01051076, -0.35504336, -0.28863315, 0.07818349, -0.35299887, 0.16308879, -0.32231376, -0.67285008, 0.28333656, 0.84791759, -0.99139896, 0.21389071];
  const b1 = [-0.43904587, 0.27626463, 0.39608897, 0.09035718, 0.10523165, 0.14424163, 0.40578421, 0.52690493, 0.59359846, 0.73608862, 0.28456852, -0.30496941, 0.28074687, 0.30099391, -0.45837033, 0.07003333, 0.17636819, 0.01055823, 0.0602172, 0.70459468, -0.18661893, -0.10891293, 0.57997362, 0.56275182];
  const W2 = [0.16396696, -0.0186638, 0.12839297, -0.50198593, 0.14857412, 0.68086165, -0.52052613, -0.16992307, -0.00838156, -0.59430475, 0.56357853, 0.25900022, -0.39076597, 0.29994446, 0.16916655, -1.08698857, 0.19083151, -0.05837215, -0.15987953, 0.42139921, -0.86008371, -0.53175356, 0.99634963, -0.094933, -0.31762471, -0.67082871, -1.29889225, 0.76329458, 0.11707492, -0.44571948, -0.36361002, -0.65672328, -0.04317494, 0.61759817, 0.15886416, -0.85469792, -0.6146735, 0.08240911, 0.32669298, -0.37848863, -0.52200957, -0.40565292, -0.45103355, -0.64287887, -0.65675879, 0.27041518, -0.08170835, -0.6208056, -0.44854897, 0.3997751, -0.10731284, -0.07882441, 0.56268168, 0.20694659, 0.16111717, 0.12925333, 0.09217448, -0.41995938, -0.92074231, 0.38274958, 0.20763628, -0.26687776, 0.31100866, 0.53164196, -0.99735721, -0.75140437, 0.05529316, 0.18596725, -0.22602161, -0.77938789, -1.09860257, -0.6923567, -0.03103315, 0.11417935, 0.81335826, -1.04016298, -0.38368465, -0.73168708, -0.41210989, 0.76497514, 0.27176183, 0.56659022, 0.64358331, 0.5583729, -0.15933102, 0.37387176, -0.99688946, 0.2453998, 0.45054678, 1.02504479, 0.20196869, -0.41455425, -0.31548267, -0.13224846, -0.02809123, 0.2178836, -0.14425645, -0.36331416, 0.98252806, -0.33386765, 0.20033046, 0.32019031, -0.82674293, -0.71015617, 0.01652158, -1.33472745, -0.57355301, 0.32226792, 0.22983429, -0.32551817, -0.76996861, 0.20474628, 0.91209956, 0.59965896, 0.47755315, -0.71012324, 0.87240346, 0.49604219, -0.10344183, 0.1183055, -0.34611065, -1.22399127, -0.04657497, -0.61022049, -0.91682694, 0.78923135, 0.00844106, 0.22467462, -0.07577602, -0.40131962, 0.31097263, -0.06949005, 0.75482901, 0.09390879, 0.87016061, 0.4766799, -0.30468133, 0.08176189, 1.09461394, -0.3174621, -0.73549457, -0.5524119, -1.10422759, 0.66952998, -0.73955392, -0.36613274, -0.18079183, -0.40314609, -0.5530615, 0.13661023, 0.65227064, 0.52941459, -0.47003222, -0.27044421, 0.32848271, 0.79646529, -0.27991992, 0.31112464, -0.8288174, -0.34683443, -0.41844676, -0.4945284, -0.15033049, 0.09999913, -0.63672432, 0.92735501, -0.7201482, -0.28410968, 0.87642094, -0.09515528, -0.62687183, 0.47488925, -0.42464593, -0.61544755, -0.02252976, -0.26969271, -0.51040979, 0.02943852, 0.50946558, 0.78695988, -0.61696838, -0.0371519, 0.45316697, -0.41050011, 0.11274156, -0.3302282, -0.02587712, 0.31364359, -0.83298445, -0.11733562, -1.13965492, -0.1663197, -0.05580997, 0.13284159, -1.00188759, 0.58866552, -1.29155741, -0.24294795, 0.77119726, -0.14296559, -0.3212845, -0.48491569, 0.20450878, 0.45125683, -0.40224331, 0.43226149, -0.3435042, -0.05146013, 0.24849959, 0.45472894, 0.55502164, 0.00261701, 0.0207984, 0.45652777, 0.08317182, 0.39696386, 0.1651187, 0.13538232, 1.01334751, -0.23982053, -0.84631347, -0.39593633, -0.05614005, 0.10181486, 0.70587434, 0.10331044, -0.82104428, -0.12421454, -0.2430469, 0.24518261, -0.03736232, -0.88174503, 0.0756319, 0.08846777, 0.98294511, -0.11442168, 0.63282598, 1.0718152, 0.42681318, 0.37931168, 0.69020573, 0.4591126, 0.03747664, 0.49496282, 0.06991234, -0.1790078, 0.25323188, -0.44929151, -0.7528889, 0.22662342, -0.41263741, -0.08106209, -0.53565413, -0.76844882, 0.13351773, -0.12390932, 0.92675604, 0.11836368, -0.64419108, 1.09892069, 0.13122719, -0.16047598, 0.65381542, -0.32719792, 0.6001395, 0.33433911, -0.75790264, -0.06342003, 0.57905808, -0.74478486, -1.06474141, -0.63431418, -0.57435547, -0.42881923, 0.21735485, 0.28905652, -0.01474968, 0.37817655, 0.14866953, 0.82630712, 1.08971463, -0.2181494, -0.57376584, -0.00452291, 0.78633473, 0.1774807, 0.94086244, -0.85308326, 0.0131292, -0.12325674, 0.20903498, -0.71042786, -0.13650023, 0.10607371, 0.75107174, 0.37678925, 0.26246965, -0.10132319, 0.31779795, 0.16659766, -0.19235965, -0.27215663, -0.66426422, -0.20287575, 0.18965513, -1.23563198, -0.31631362, -0.07376901, -0.55083622, 0.24679875, 0.94418278, -0.75968922, 1.02500868, 0.73421967, 0.7022593, -0.31794277, -0.2167448, -0.03519118, -0.06135172, -0.75028605, 0.42756959, 0.26361556, -0.41845524, -0.48468614, 0.29127131, -0.78354925, -0.4609069, -0.28941918, 0.2159856, 0.02264124, 0.53882632, -1.04805614, 0.52981935, -1.14762004, -0.97102158, -0.56164648, 0.80307627, 0.32273978, 1.30784802, -0.75973864, 0.21624475, 0.06102252, -0.55353924, 0.93644114, 0.36706723, 0.40330453, -0.20837951, 0.42954129, -0.27761503, -0.109742, 0.40631461, -0.58447597, -0.30597658, 0.1054504, 0.89990223, 0.6421127, 0.01201759, -0.52822418, 0.53476045, 0.74900807, 0.59068359, -0.07645323, 0.10750491, 0.36293164, -0.2542027, -1.21803325, -0.35954246, 0.07082262, 0.1223237, 1.87808315, -0.32019706, -0.69719369, -0.15008297, 0.22013152, 0.22280248, -0.28524836, 0.33487137, -0.6877943, 0.53402877, -0.36821837, 0.42046998, 0.71972409, -0.16289978, -0.03146343];
  const b2 = [0.71832104, 0.22619869, -0.73510757, -0.44920774, 0.1329898, 0.52800273, 0.18105101, -0.8017543, -0.10351891, 0.49626047, -0.63107878, -0.09805316, -0.25707537, -0.53390245, 0.09814826, -0.17841755];
  const W3 = [-1.46820449, 8.68473471, -1.95651755, 12.12912909, -6.63863234, -0.46174429, 4.05829573, -2.30715517, -6.43073805, -0.29181605, 4.10013078, 2.33337929, 3.21120621, -4.54177692, -0.58914978, 4.53817815, 0.39040835, 4.46925172, 0.74095311, 6.61243484, -2.0159787, 0.33010626, 4.42296788, -1.6749944, -2.22885644, -1.99383868, -0.76462135, 3.3446912, -0.04335348, -0.7659775, -0.37597068, 1.89358927, -3.63106826, 2.05479638, -0.80979544, 2.1411618, -2.04813533, -0.81137086, 2.43836706, 0.84618169, 0.20248109, -1.32979351, -0.20244115, 0.39652053, -2.56971256, -1.67672082, -2.13460751, 1.47444531, 0.35055638, 1.7945012, -1.47870906, 5.11628431, 3.39652799, 0.90195515, -1.2608352, 6.76043933, -2.78158049, 3.17331023, 2.52154186, 0.55262333, -1.98741063, -0.25319444, -0.24235402, -5.43638536, -1.01566651, 7.74578433, -0.99319471, 15.58876257, -8.83797438, 0.70877731, 3.37197068, 1.05048161, -9.84421827, 0.88579255, 5.15241889, 4.88932476, 0.68543558, -3.83122475, 0.53246475, 0.26526423];
  const b3 = [0.62199182, -0.07701043, -0.2208619, 0.84667886, 0.08747866];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-5"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16788205, -0.63439075, -0.1862026, 0.99761458, 0.10353333, -0.5291827, 0.09749109, 0.02214851, -0.56207372, -0.46899568, -0.69276271, 0.12189829, 0.27035635, -0.74188389, -0.46903546, 1.32732867, 0.3394156, 0.16843937, 0.59361008, -0.2293277, 0.86819813, -0.10367289, 0.66608405, -0.30202679, 0.27496808, 0.21279585, -0.73299331, 0.33347628, 0.04570234, -0.65748801, 0.49949506, 0.20476732, 0.8690524, 0.42394082, -0.44588971, -0.52423924, 0.03997332, -0.1938916, 0.18511634, 0.01269735, 0.34132422, 0.2143522, -0.29950564, -0.09399812, 0.50024004, -0.68331374, -0.32071373, 0.01955369, -0.26120985, -0.2707803, 0.3036766, -0.28112958, -0.06304748, -0.69119676, -0.46504273, -0.42278123, -0.06561067, 0.93810583, -0.07695293, -1.16068136, -0.02831264, -0.78822038, 0.02933277, -0.22943636, 0.16893768, -0.44367755, -0.38681563, 0.13489397, -0.11726421, 0.33650558, -0.31270492, 1.03640854, -0.03607425, -0.36227446, 0.31708886, -0.75841334, 0.16235638, 0.18033699, 0.1386746, -0.82146819, -0.71613523, 0.0213257, 0.89608287, -0.38216895, -0.39537786, -0.15439748, -0.67961269, -0.03526684, -0.2208372, 0.16149933, 0.33906803, 0.84800405, 0.15008155, -0.56283182, -0.22402021, 0.12096821, 1.07377091, 0.28743435, 0.99952874, 0.2723715, 0.2580235, 0.09617146, -0.01322764, -0.4138104, 0.35685543, -0.06756341, -0.36042924, 0.96033205, 0.16668951, -0.40930922, 0.94056557, 0.3921297, -0.36110341, 0.07948525, 0.48951672, -1.06305949, -0.70766376, 0.01888781, 0.20291343, 0.03660634, -0.30377504, 0.39699805, -0.3472578, -0.1090794, -0.21582979, -0.76050298, -0.46554669, -0.56627061, -0.64713995, 0.43824112, -0.03070052, 0.24849701, 0.34957775, -0.45239318, 0.66319794, -0.50455408, -0.19028965, 0.22782748, -0.89063052, -0.4693205, -1.07497332, 0.29838911, -0.34153791, 0.13461715, -0.9693946, 0.32965495, -0.32911016, -1.06481057, 0.26162833, -0.03248344, 0.15130083, -0.54334993, 0.62914388, 0.35641609, -0.8921017, 0.91726427, 0.4452475, 0.7525651, 0.21595042, 0.2756259, -0.97196587, 0.33135184, -0.20815682, 0.19812074, 0.93758071, 0.06915754, 0.45914172, 0.08126663, 0.32552199, 0.08448694, 0.14839982, -0.01523763, 0.02667876, -0.29760251, 0.01664591, 0.1890276, 0.61209817, -0.45993021, -0.44330463, -0.94120666, -0.29604388, -0.52021149, -0.50583114, -0.01257435, 0.2783062, -0.95002122, -0.16824371, 0.03387897, -1.72427171, 0.48085749, -0.76607537, 0.02886498, -0.16082788, 0.28472925, -0.04609731, -0.01791656, -0.44277961, 0.10469983, 0.3784822, -0.06009874, -0.04622983, -0.28886191, -0.03982243, -0.63079428, 0.0827715, 0.15355715, -0.22172136, -0.13448255, 0.69607142, 0.1548226, -0.85728835, 0.39983262, -0.51362815, 0.00121708, 0.19994646, -0.62649547, 0.62625891, 0.28596533, -0.57464808, 0.44087013, 0.16723396, 0.03691558, 0.26523152, -0.08085895, 0.0692517, 0.67396956, 0.88487372, -0.60631792, -0.00211093, -1.18039649, -0.21310945, -0.1434568, 0.40988157, -0.0200476, 0.17515855, 0.41569759, -0.1391067, 0.65373782, 0.67808522, 0.05287159, -0.16445228, -0.48113373, -0.56994305, -0.75095344, 0.94561105, -0.37729878, -0.92062008, 0.3208412, -0.57433954, -0.16381342, 0.1429805, -0.32311824, -0.05986529, 0.15738386, -0.09855858, 0.14942543, 0.06102041, 0.1792911, 0.60745768, -0.20550596, 0.78911684, -0.21057518, -0.07789625, 0.22531448, 0.35744262, -0.25914507, 0.47107406, 0.20694196, -1.0282735, -0.68385763, 0.36368439, -0.21451474, 0.08118256, -0.30927808, -0.25912514, -0.08891588, -0.02747355, 0.23271745, -0.60778905, -0.62654019, -0.3142036, 0.80562582, 0.14491443, -0.36072379, 0.43388157, -0.05476285, -0.04706737, 0.10673568, 0.56424862, -0.53826732, 0.29315569, 0.5908627, 0.14102791, 0.74804452, 0.18525469, 0.40335164, -0.61415255, 0.16667452, -0.1806244, -1.00274608, 0.17348233, -0.492035, 0.08394589, -0.48700832, -0.01896208, -0.64369642, 0.46076666, -0.32045204, -0.10907642, 0.4475821, 0.0346727, -0.07118651, -0.01023352, 0.15682802, -0.34302133, 0.09754035, -0.61917287, -0.06500293, -0.22417004, -0.50747288, 0.15381929, -0.08631408, -0.07599223, 0.1522749, 0.87796859, -0.42018087, 0.33855878, 0.19529181, -0.11163184, -0.13164064, -0.02020247, -0.07888311, 0.94712072, 0.86732631, -1.03377172, 0.16386457, 0.33729703, -0.10803546, -0.19154858, -0.56138059, 0.34417997, 0.23333489, -0.93582701, 0.89236907, -0.40878467, 0.33716665, -0.40687687, 0.72083574, 0.95302532, -0.48377307, -0.31470843, 0.07446214, -0.45890497, -0.14744903, -0.07778106, -0.6299586, -0.62678442, -0.3830381, -0.33517262, -1.42251885, 0.5866489, -0.08703915, 0.37135669, -0.12777202, 0.08694338, -0.86525591, -0.38726819, 0.8807366, 0.4330742, -0.67984816, 0.44155035, 0.86128064, -0.41761476, 0.99670232, 0.03114051, -0.80214563, 0.10468369, 0.51725356, -0.35506117, 0.45307899, -0.05998885, 0.63143569, -0.76215922, 0.68347487, -0.21406399, -0.26617323, -0.29898416, -0.02439218, 0.84290001, -0.34625435, -0.07590837, 0.07117403, 0.4253009, 0.84309211, -0.09233032, 0.23218783, 0.47271025, 0.5518146, 0.24049917, 0.39388777, -0.21117915, 0.56288129, 1.19033622, -0.01098663, 0.87223105, 0.38271718, 0.13341626, 0.26176694, -0.43258809, -0.32376449, 0.32462725, -0.18581978, -0.6062889, 0.49399923, -0.15075301, 0.11491479, -0.92596391, 0.2062248, 0.10645803, 0.07001367, 0.6246609, -0.67709945, -0.32218031, -0.23671831, 0.2882854, -0.06936887, 0.98694615, 0.98170173, 0.15341571, -0.28495971, 0.86752087, -1.01324441, 0.86966018, 0.03774368, 1.34783559, -0.30054713, -0.23104931, -0.31780096, 0.531366, -0.59806829, -0.36525721, -0.63076231, -0.27212686, -0.04023422, 0.09514435, 0.50196276, -0.55611572, 0.06393098, 0.18860904, -0.21944902, 0.31456557, -0.25124155, -0.41205037, 0.26962286, -0.37185813, -0.50732885, -0.41712006, -0.03760938, -0.29493057, -0.07396702, -0.35787026, 0.28704445, -0.02616743, 0.14673217, 0.91028315, 0.12892939, -0.38621262, 0.65958873, -0.21590425, 0.01428969, -0.38163871, -0.64375003, -0.28738989, 0.74725662, -0.20296571, -0.70637491, -0.48881634, -0.20099402, -0.36820631, -0.16675371, 0.65976679, -0.08706073, 0.02294333, 0.08535455, 0.5929339, 0.24594984, 0.02311426, -0.68482705, -0.41842711, 0.03982625, 0.82535104, 0.20779018, -0.43242467, -0.1331862, 0.0426914, -0.80759613, -0.63349549, -0.45052184, -0.54260007, 0.79035319, 0.35593941, -0.45047421, -0.77340938, 0.54209736, 0.33231466, -0.57680965, -0.62583135, 0.2745367, -0.16649495, 0.27927344, -0.12996884, -0.53664612, -0.22321215, 0.58269071, -0.03148943, 0.13095752, 0.20297242, 0.71916733, -0.10746074, 0.9878997, 0.27062172, 0.41977736, 0.07438166, 0.95052877, 0.10146732, 0.24125965, -0.08817491, 0.92294262, 0.81343473, -0.56173038, -0.76366122, 0.51314887, 0.76453182, 0.12350534, 0.385669, 0.70480824, 0.08199059, 0.21705523, -0.8164085, -0.2602547, -0.74657503, 0.55290443, 0.36717027, 0.03758998, 0.22755805, -0.09895607, 0.04793805, 0.36218102, 0.06425055, -0.26331255, -0.78066859, 0.51861918, 0.06778054, -0.03352325, 0.4579911, -0.20659144, -0.27758114, 0.06129695, -0.04956632, 0.35546992, 1.14912457, -0.01954446, -0.20503268, 0.56222643, 0.20876053, 0.08084127, -0.00717941, 0.10402114, -0.06648738, 0.69649003, -0.22349191, 0.34324029, -0.24874324, 0.18572242, 0.04870622, -0.12835612, -0.90237187, 0.11606011, -0.42581153, 0.19355433, -0.22528463, -0.45458354, 0.19487802, -0.52050058, 0.35448599, 0.45440697, 0.49438175, -0.68745696, 0.21038082, 0.0320896, 0.4349471, 0.43088281, 0.03111693, 0.12624104, 0.17558352, -0.35767439, 0.17776939, 0.67946628, 0.15044016, 0.34548729, 0.11586383, 0.35616219, 0.87416289, -1.18516578, -0.15303891, -0.37673308, 0.43141088, -0.48142087, 0.20155701, 0.52344659, -0.23200097, 0.2885681, -0.0462512, -0.59369048, 0.08544671, 0.34197824, 0.00295535, 0.00006176, 0.16755279, -0.66087606, -0.02465603, 0.31204548, -0.59357249, 0.01541306, -0.4005584, -0.05972554, 0.3765098, 0.42999896, -0.36535946, 1.01074673, 0.09669424, 0.40365814, 0.20393637, 0.52437575, -0.41987391, 0.37709387, -0.58987282, 0.33739617, -0.11898026, -0.28434956, 0.1597293, -0.37279759, 0.16857772, -0.68369473, -0.0071707, -0.04059722, 0.58160569, 0.58976118, 0.10055376, -0.18236506, -1.08655842, 0.30120224, 0.30007053, -0.11252756, -0.62825161, -0.1326348, -0.42851097, 1.03854125, 0.24354518, 0.10562716, 0.03132733, 0.39074576, -0.03366123, 0.79741896, 0.49841304, 0.21364995, 0.18241056, -0.18698021, -0.28497967, 0.38933595, 0.11301139, 1.24439505, 0.51136736, -0.65701771, 0.27939095, -0.22659298, -0.15105041, 0.57087145, 0.50860357, 0.29485485, -0.58321312, 0.59750485, 0.03408749, 0.39961435, 0.03062172, -0.81325337, -0.96214203, 0.74986661, -0.31788668, 0.88783763, -0.13642998, -0.32008531, 0.42439299, -0.05245325, 0.35587115, -0.78972585, -0.37017856, 0.07580413, 0.56916281, -0.09145056, -0.90740166, 0.62806898, -0.31161061, 0.15519897, 1.01124225, 0.77697608, 0.36015047, 0.32750061, -0.84616456, 0.19411611, -0.06196452, -1.09669834, -0.35645447, 0.06090909, 0.26040357, 0.13541585, -0.82187723, -0.06078835, -0.69013183, 0.19408876, 0.25123547, 0.17069555, 0.20121217, -0.1581002, -0.27500869, 0.76892683, -0.22920415, 0.21864374, -0.84626659, 1.06326256, 0.18485873, 0.28648798, -0.13462979, -0.82739178, 0.40288133, -0.2522933, -0.33840672, 1.15660232, -0.16710885, 0.59070836, -0.41584072, 0.6413154, 0.15969256, 0.13970691, 0.21919379, -0.30751989, 0.01535126, 0.151286, -0.2351158, -0.77362202, -0.28149127, -0.34349163, -0.86027636, 0.23016573, 0.32814893, 0.59121915, 0.02608666, 0.05585644, -0.14758155, -0.18051375, -0.11185617, 0.02766199, 0.1086709, -0.27037177, 0.13244513, -0.22185581, -0.50843575, 0.47653498, 0.25945503, -0.22933535, -0.78166528, 0.56236506, 0.33474894, 0.07395005, -0.0010374, 1.46650075, 0.16786992, 0.60445882, 0.21725496, -0.69845412, -0.47520656, -0.31249089, 0.08262117, -0.41453233, 0.03723303, 0.39465699, 0.13324717, 0.19290278, 0.40262335, 0.71855104, 0.00508655, -0.14580232, 0.00664295, -0.43501853, -0.25775908, -1.05643512, -0.58657198, 0.00882584, -0.91035077, -0.05087263, -0.40071615, -0.13329363, -0.32605182, 0.0582619, -0.60851712, -0.34857522, 0.34230498, 0.03913884, -0.20505177, 0.20422924, -0.6039347, -0.3201094, -0.28186075, 0.45902571, -0.39077311, -0.30344038, -0.22482032, -0.93393331, 0.18888015, 0.48344648, 1.03475056, -0.93217473, -0.01898711, 0.05513286, 0.00559779, 0.41460272, -0.04550956, -0.65065565, -0.06816141, -0.87087767, 0.39983768, -0.02467193, -0.10143708, -0.0281854, 0.19861823, 0.57277688, -0.62915897, 0.07635907, -0.21785542, -0.24266213, -0.58920035, 0.8735833, 0.01937812, -0.15674472, -0.12309391, 0.0971405, 1.2568596, 0.4631905, 0.08852888, -0.31980047, -0.44034559, 0.18866543, 0.73407759, 0.57842749, 0.75478142, -0.66825648, -0.01168109, -0.00545973, -0.39713654, 0.36269584, 0.99580935, 0.41006171, 0.50042469, -0.11071851, 1.12810914, -1.10241171, 1.89162617, -0.99732647, -0.12099965, 0.11814313, -0.01341351, -0.43024054, -0.79979627, 0.38535542, -0.17683241, 0.29936481, 0.05981153, -0.11028389, 0.34534311, 0.75691815, 0.24019508, 0.66355708, -0.34164908, 0.83255807, 0.15017797, 0.12187011, 1.41774819, -0.52498394, -0.044922, -0.41671414, -0.2338223, -0.05746551, -0.18718892, 0.39982858, 0.31543399, 0.11590568, 1.32424046, 0.05622941, -0.49715308, 0.19790781, -0.04698604, 0.0176054, -0.29532893, -0.18092255, -0.2411324, 0.16836408, -0.37251685, -0.01231155, -1.01260232, -0.02662909, 0.61151004, -0.40463673, -0.12523357, 0.09789725, 0.52598041, 0.32914949, 0.0497145, 0.07585685, -0.52719632, 0.46697623, 0.08254545, 0.10024796, -0.42965233, -1.03540314, 0.14417656, 0.64111414, -0.99078817, 0.77060728, 0.84045203, 0.66702656, 0.59150075, -0.51178797, -0.17628048, 0.02654522, -0.13195154, -0.10722928, 0.20949466, 0.72473781, 0.44285701, 0.041194, -0.18076938, -0.0056339, 0.08868553, 0.41377258, -0.26371297, 0.92863413, 0.42775041, 0.49862032, -0.84238745, 0.04070651, -0.04633961, 0.10937306, -0.38830745, -1.70342592, -0.36054629, 0.03337412, -0.55735919, 0.41443122, 0.35961044, -0.49656088, 0.85467555, 0.22505791, 0.24043058, 0.32640623, -0.83547676, -0.25394402, 0.41162933, 0.21179415, 0.12873309, 0.39479051, 0.08823813, 0.21040905, -0.02311454, 0.02801339, 0.33823009, 0.09152804, 0.26989013, 0.59232086, -0.07340297, 0.52603082, -0.13742513, -0.68716515, 0.03712687, -0.59110496, -0.5375624, -0.20264201, -0.4197942, -0.25709618, 0.02098565, -0.21788964, -0.04660608, -0.02134926, 0.32418305, -0.34799358, -0.01971767, 0.3447397, 0.92040745, 0.01829108, 0.45747208, 0.71810033, -0.47792571, -0.0511238, 0.54451592, 0.52611143, 0.13367782, 0.30706616, -0.11235834, 0.39950519, -0.92395656, -0.40335738, -0.68963082, -0.13129022, -0.16358013, 0.15970672, 0.28903858, 0.31483469, 0.18140216, -0.98620227, -0.54757712, -0.23481511, 0.01051076, -0.35504336, -0.28863315, 0.07818349, -0.35299887, 0.16308879, -0.32231376, -0.67285008, 0.28333656, 0.84791759, -0.99139896, 0.21389071];
  const b1 = [-0.43904587, 0.27626463, 0.39608897, 0.09035718, 0.10523165, 0.14424163, 0.40578421, 0.52690493, 0.59359846, 0.73608862, 0.28456852, -0.30496941, 0.28074687, 0.30099391, -0.45837033, 0.07003333, 0.17636819, 0.01055823, 0.0602172, 0.70459468, -0.18661893, -0.10891293, 0.57997362, 0.56275182];
  const W2 = [0.16396696, -0.0186638, 0.12839297, -0.50198593, 0.14857412, 0.68086165, -0.52052613, -0.16992307, -0.00838156, -0.59430475, 0.56357853, 0.25900022, -0.39076597, 0.29994446, 0.16916655, -1.08698857, 0.19083151, -0.05837215, -0.15987953, 0.42139921, -0.86008371, -0.53175356, 0.99634963, -0.094933, -0.31762471, -0.67082871, -1.29889225, 0.76329458, 0.11707492, -0.44571948, -0.36361002, -0.65672328, -0.04317494, 0.61759817, 0.15886416, -0.85469792, -0.6146735, 0.08240911, 0.32669298, -0.37848863, -0.52200957, -0.40565292, -0.45103355, -0.64287887, -0.65675879, 0.27041518, -0.08170835, -0.6208056, -0.44854897, 0.3997751, -0.10731284, -0.07882441, 0.56268168, 0.20694659, 0.16111717, 0.12925333, 0.09217448, -0.41995938, -0.92074231, 0.38274958, 0.20763628, -0.26687776, 0.31100866, 0.53164196, -0.99735721, -0.75140437, 0.05529316, 0.18596725, -0.22602161, -0.77938789, -1.09860257, -0.6923567, -0.03103315, 0.11417935, 0.81335826, -1.04016298, -0.38368465, -0.73168708, -0.41210989, 0.76497514, 0.27176183, 0.56659022, 0.64358331, 0.5583729, -0.15933102, 0.37387176, -0.99688946, 0.2453998, 0.45054678, 1.02504479, 0.20196869, -0.41455425, -0.31548267, -0.13224846, -0.02809123, 0.2178836, -0.14425645, -0.36331416, 0.98252806, -0.33386765, 0.20033046, 0.32019031, -0.82674293, -0.71015617, 0.01652158, -1.33472745, -0.57355301, 0.32226792, 0.22983429, -0.32551817, -0.76996861, 0.20474628, 0.91209956, 0.59965896, 0.47755315, -0.71012324, 0.87240346, 0.49604219, -0.10344183, 0.1183055, -0.34611065, -1.22399127, -0.04657497, -0.61022049, -0.91682694, 0.78923135, 0.00844106, 0.22467462, -0.07577602, -0.40131962, 0.31097263, -0.06949005, 0.75482901, 0.09390879, 0.87016061, 0.4766799, -0.30468133, 0.08176189, 1.09461394, -0.3174621, -0.73549457, -0.5524119, -1.10422759, 0.66952998, -0.73955392, -0.36613274, -0.18079183, -0.40314609, -0.5530615, 0.13661023, 0.65227064, 0.52941459, -0.47003222, -0.27044421, 0.32848271, 0.79646529, -0.27991992, 0.31112464, -0.8288174, -0.34683443, -0.41844676, -0.4945284, -0.15033049, 0.09999913, -0.63672432, 0.92735501, -0.7201482, -0.28410968, 0.87642094, -0.09515528, -0.62687183, 0.47488925, -0.42464593, -0.61544755, -0.02252976, -0.26969271, -0.51040979, 0.02943852, 0.50946558, 0.78695988, -0.61696838, -0.0371519, 0.45316697, -0.41050011, 0.11274156, -0.3302282, -0.02587712, 0.31364359, -0.83298445, -0.11733562, -1.13965492, -0.1663197, -0.05580997, 0.13284159, -1.00188759, 0.58866552, -1.29155741, -0.24294795, 0.77119726, -0.14296559, -0.3212845, -0.48491569, 0.20450878, 0.45125683, -0.40224331, 0.43226149, -0.3435042, -0.05146013, 0.24849959, 0.45472894, 0.55502164, 0.00261701, 0.0207984, 0.45652777, 0.08317182, 0.39696386, 0.1651187, 0.13538232, 1.01334751, -0.23982053, -0.84631347, -0.39593633, -0.05614005, 0.10181486, 0.70587434, 0.10331044, -0.82104428, -0.12421454, -0.2430469, 0.24518261, -0.03736232, -0.88174503, 0.0756319, 0.08846777, 0.98294511, -0.11442168, 0.63282598, 1.0718152, 0.42681318, 0.37931168, 0.69020573, 0.4591126, 0.03747664, 0.49496282, 0.06991234, -0.1790078, 0.25323188, -0.44929151, -0.7528889, 0.22662342, -0.41263741, -0.08106209, -0.53565413, -0.76844882, 0.13351773, -0.12390932, 0.92675604, 0.11836368, -0.64419108, 1.09892069, 0.13122719, -0.16047598, 0.65381542, -0.32719792, 0.6001395, 0.33433911, -0.75790264, -0.06342003, 0.57905808, -0.74478486, -1.06474141, -0.63431418, -0.57435547, -0.42881923, 0.21735485, 0.28905652, -0.01474968, 0.37817655, 0.14866953, 0.82630712, 1.08971463, -0.2181494, -0.57376584, -0.00452291, 0.78633473, 0.1774807, 0.94086244, -0.85308326, 0.0131292, -0.12325674, 0.20903498, -0.71042786, -0.13650023, 0.10607371, 0.75107174, 0.37678925, 0.26246965, -0.10132319, 0.31779795, 0.16659766, -0.19235965, -0.27215663, -0.66426422, -0.20287575, 0.18965513, -1.23563198, -0.31631362, -0.07376901, -0.55083622, 0.24679875, 0.94418278, -0.75968922, 1.02500868, 0.73421967, 0.7022593, -0.31794277, -0.2167448, -0.03519118, -0.06135172, -0.75028605, 0.42756959, 0.26361556, -0.41845524, -0.48468614, 0.29127131, -0.78354925, -0.4609069, -0.28941918, 0.2159856, 0.02264124, 0.53882632, -1.04805614, 0.52981935, -1.14762004, -0.97102158, -0.56164648, 0.80307627, 0.32273978, 1.30784802, -0.75973864, 0.21624475, 0.06102252, -0.55353924, 0.93644114, 0.36706723, 0.40330453, -0.20837951, 0.42954129, -0.27761503, -0.109742, 0.40631461, -0.58447597, -0.30597658, 0.1054504, 0.89990223, 0.6421127, 0.01201759, -0.52822418, 0.53476045, 0.74900807, 0.59068359, -0.07645323, 0.10750491, 0.36293164, -0.2542027, -1.21803325, -0.35954246, 0.07082262, 0.1223237, 1.87808315, -0.32019706, -0.69719369, -0.15008297, 0.22013152, 0.22280248, -0.28524836, 0.33487137, -0.6877943, 0.53402877, -0.36821837, 0.42046998, 0.71972409, -0.16289978, -0.03146343];
  const b2 = [0.71832104, 0.22619869, -0.73510757, -0.44920774, 0.1329898, 0.52800273, 0.18105101, -0.8017543, -0.10351891, 0.49626047, -0.63107878, -0.09805316, -0.25707537, -0.53390245, 0.09814826, -0.17841755];
  const W3 = [-1.46820449, 8.68473471, -1.95651755, 12.12912909, -6.63863234, -0.46174429, 4.05829573, -2.30715517, -6.43073805, -0.29181605, 4.10013078, 2.33337929, 3.21120621, -4.54177692, -0.58914978, 4.53817815, 0.39040835, 4.46925172, 0.74095311, 6.61243484, -2.0159787, 0.33010626, 4.42296788, -1.6749944, -2.22885644, -1.99383868, -0.76462135, 3.3446912, -0.04335348, -0.7659775, -0.37597068, 1.89358927, -3.63106826, 2.05479638, -0.80979544, 2.1411618, -2.04813533, -0.81137086, 2.43836706, 0.84618169, 0.20248109, -1.32979351, -0.20244115, 0.39652053, -2.56971256, -1.67672082, -2.13460751, 1.47444531, 0.35055638, 1.7945012, -1.47870906, 5.11628431, 3.39652799, 0.90195515, -1.2608352, 6.76043933, -2.78158049, 3.17331023, 2.52154186, 0.55262333, -1.98741063, -0.25319444, -0.24235402, -5.43638536, -1.01566651, 7.74578433, -0.99319471, 15.58876257, -8.83797438, 0.70877731, 3.37197068, 1.05048161, -9.84421827, 0.88579255, 5.15241889, 4.88932476, 0.68543558, -3.83122475, 0.53246475, 0.26526423];
  const b3 = [0.62199182, -0.07701043, -0.2208619, 0.84667886, 0.08747866];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-6"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16788205, -0.63439075, -0.1862026, 0.99761458, 0.10353333, -0.5291827, 0.09749109, 0.02214851, -0.56207372, -0.46899568, -0.69276271, 0.12189829, 0.27035635, -0.74188389, -0.46903546, 1.32732867, 0.3394156, 0.16843937, 0.59361008, -0.2293277, 0.86819813, -0.10367289, 0.66608405, -0.30202679, 0.27496808, 0.21279585, -0.73299331, 0.33347628, 0.04570234, -0.65748801, 0.49949506, 0.20476732, 0.8690524, 0.42394082, -0.44588971, -0.52423924, 0.03997332, -0.1938916, 0.18511634, 0.01269735, 0.34132422, 0.2143522, -0.29950564, -0.09399812, 0.50024004, -0.68331374, -0.32071373, 0.01955369, -0.26120985, -0.2707803, 0.3036766, -0.28112958, -0.06304748, -0.69119676, -0.46504273, -0.42278123, -0.06561067, 0.93810583, -0.07695293, -1.16068136, -0.02831264, -0.78822038, 0.02933277, -0.22943636, 0.16893768, -0.44367755, -0.38681563, 0.13489397, -0.11726421, 0.33650558, -0.31270492, 1.03640854, -0.03607425, -0.36227446, 0.31708886, -0.75841334, 0.16235638, 0.18033699, 0.1386746, -0.82146819, -0.71613523, 0.0213257, 0.89608287, -0.38216895, -0.39537786, -0.15439748, -0.67961269, -0.03526684, -0.2208372, 0.16149933, 0.33906803, 0.84800405, 0.15008155, -0.56283182, -0.22402021, 0.12096821, 1.07377091, 0.28743435, 0.99952874, 0.2723715, 0.2580235, 0.09617146, -0.01322764, -0.4138104, 0.35685543, -0.06756341, -0.36042924, 0.96033205, 0.16668951, -0.40930922, 0.94056557, 0.3921297, -0.36110341, 0.07948525, 0.48951672, -1.06305949, -0.70766376, 0.01888781, 0.20291343, 0.03660634, -0.30377504, 0.39699805, -0.3472578, -0.1090794, -0.21582979, -0.76050298, -0.46554669, -0.56627061, -0.64713995, 0.43824112, -0.03070052, 0.24849701, 0.34957775, -0.45239318, 0.66319794, -0.50455408, -0.19028965, 0.22782748, -0.89063052, -0.4693205, -1.07497332, 0.29838911, -0.34153791, 0.13461715, -0.9693946, 0.32965495, -0.32911016, -1.06481057, 0.26162833, -0.03248344, 0.15130083, -0.54334993, 0.62914388, 0.35641609, -0.8921017, 0.91726427, 0.4452475, 0.7525651, 0.21595042, 0.2756259, -0.97196587, 0.33135184, -0.20815682, 0.19812074, 0.93758071, 0.06915754, 0.45914172, 0.08126663, 0.32552199, 0.08448694, 0.14839982, -0.01523763, 0.02667876, -0.29760251, 0.01664591, 0.1890276, 0.61209817, -0.45993021, -0.44330463, -0.94120666, -0.29604388, -0.52021149, -0.50583114, -0.01257435, 0.2783062, -0.95002122, -0.16824371, 0.03387897, -1.72427171, 0.48085749, -0.76607537, 0.02886498, -0.16082788, 0.28472925, -0.04609731, -0.01791656, -0.44277961, 0.10469983, 0.3784822, -0.06009874, -0.04622983, -0.28886191, -0.03982243, -0.63079428, 0.0827715, 0.15355715, -0.22172136, -0.13448255, 0.69607142, 0.1548226, -0.85728835, 0.39983262, -0.51362815, 0.00121708, 0.19994646, -0.62649547, 0.62625891, 0.28596533, -0.57464808, 0.44087013, 0.16723396, 0.03691558, 0.26523152, -0.08085895, 0.0692517, 0.67396956, 0.88487372, -0.60631792, -0.00211093, -1.18039649, -0.21310945, -0.1434568, 0.40988157, -0.0200476, 0.17515855, 0.41569759, -0.1391067, 0.65373782, 0.67808522, 0.05287159, -0.16445228, -0.48113373, -0.56994305, -0.75095344, 0.94561105, -0.37729878, -0.92062008, 0.3208412, -0.57433954, -0.16381342, 0.1429805, -0.32311824, -0.05986529, 0.15738386, -0.09855858, 0.14942543, 0.06102041, 0.1792911, 0.60745768, -0.20550596, 0.78911684, -0.21057518, -0.07789625, 0.22531448, 0.35744262, -0.25914507, 0.47107406, 0.20694196, -1.0282735, -0.68385763, 0.36368439, -0.21451474, 0.08118256, -0.30927808, -0.25912514, -0.08891588, -0.02747355, 0.23271745, -0.60778905, -0.62654019, -0.3142036, 0.80562582, 0.14491443, -0.36072379, 0.43388157, -0.05476285, -0.04706737, 0.10673568, 0.56424862, -0.53826732, 0.29315569, 0.5908627, 0.14102791, 0.74804452, 0.18525469, 0.40335164, -0.61415255, 0.16667452, -0.1806244, -1.00274608, 0.17348233, -0.492035, 0.08394589, -0.48700832, -0.01896208, -0.64369642, 0.46076666, -0.32045204, -0.10907642, 0.4475821, 0.0346727, -0.07118651, -0.01023352, 0.15682802, -0.34302133, 0.09754035, -0.61917287, -0.06500293, -0.22417004, -0.50747288, 0.15381929, -0.08631408, -0.07599223, 0.1522749, 0.87796859, -0.42018087, 0.33855878, 0.19529181, -0.11163184, -0.13164064, -0.02020247, -0.07888311, 0.94712072, 0.86732631, -1.03377172, 0.16386457, 0.33729703, -0.10803546, -0.19154858, -0.56138059, 0.34417997, 0.23333489, -0.93582701, 0.89236907, -0.40878467, 0.33716665, -0.40687687, 0.72083574, 0.95302532, -0.48377307, -0.31470843, 0.07446214, -0.45890497, -0.14744903, -0.07778106, -0.6299586, -0.62678442, -0.3830381, -0.33517262, -1.42251885, 0.5866489, -0.08703915, 0.37135669, -0.12777202, 0.08694338, -0.86525591, -0.38726819, 0.8807366, 0.4330742, -0.67984816, 0.44155035, 0.86128064, -0.41761476, 0.99670232, 0.03114051, -0.80214563, 0.10468369, 0.51725356, -0.35506117, 0.45307899, -0.05998885, 0.63143569, -0.76215922, 0.68347487, -0.21406399, -0.26617323, -0.29898416, -0.02439218, 0.84290001, -0.34625435, -0.07590837, 0.07117403, 0.4253009, 0.84309211, -0.09233032, 0.23218783, 0.47271025, 0.5518146, 0.24049917, 0.39388777, -0.21117915, 0.56288129, 1.19033622, -0.01098663, 0.87223105, 0.38271718, 0.13341626, 0.26176694, -0.43258809, -0.32376449, 0.32462725, -0.18581978, -0.6062889, 0.49399923, -0.15075301, 0.11491479, -0.92596391, 0.2062248, 0.10645803, 0.07001367, 0.6246609, -0.67709945, -0.32218031, -0.23671831, 0.2882854, -0.06936887, 0.98694615, 0.98170173, 0.15341571, -0.28495971, 0.86752087, -1.01324441, 0.86966018, 0.03774368, 1.34783559, -0.30054713, -0.23104931, -0.31780096, 0.531366, -0.59806829, -0.36525721, -0.63076231, -0.27212686, -0.04023422, 0.09514435, 0.50196276, -0.55611572, 0.06393098, 0.18860904, -0.21944902, 0.31456557, -0.25124155, -0.41205037, 0.26962286, -0.37185813, -0.50732885, -0.41712006, -0.03760938, -0.29493057, -0.07396702, -0.35787026, 0.28704445, -0.02616743, 0.14673217, 0.91028315, 0.12892939, -0.38621262, 0.65958873, -0.21590425, 0.01428969, -0.38163871, -0.64375003, -0.28738989, 0.74725662, -0.20296571, -0.70637491, -0.48881634, -0.20099402, -0.36820631, -0.16675371, 0.65976679, -0.08706073, 0.02294333, 0.08535455, 0.5929339, 0.24594984, 0.02311426, -0.68482705, -0.41842711, 0.03982625, 0.82535104, 0.20779018, -0.43242467, -0.1331862, 0.0426914, -0.80759613, -0.63349549, -0.45052184, -0.54260007, 0.79035319, 0.35593941, -0.45047421, -0.77340938, 0.54209736, 0.33231466, -0.57680965, -0.62583135, 0.2745367, -0.16649495, 0.27927344, -0.12996884, -0.53664612, -0.22321215, 0.58269071, -0.03148943, 0.13095752, 0.20297242, 0.71916733, -0.10746074, 0.9878997, 0.27062172, 0.41977736, 0.07438166, 0.95052877, 0.10146732, 0.24125965, -0.08817491, 0.92294262, 0.81343473, -0.56173038, -0.76366122, 0.51314887, 0.76453182, 0.12350534, 0.385669, 0.70480824, 0.08199059, 0.21705523, -0.8164085, -0.2602547, -0.74657503, 0.55290443, 0.36717027, 0.03758998, 0.22755805, -0.09895607, 0.04793805, 0.36218102, 0.06425055, -0.26331255, -0.78066859, 0.51861918, 0.06778054, -0.03352325, 0.4579911, -0.20659144, -0.27758114, 0.06129695, -0.04956632, 0.35546992, 1.14912457, -0.01954446, -0.20503268, 0.56222643, 0.20876053, 0.08084127, -0.00717941, 0.10402114, -0.06648738, 0.69649003, -0.22349191, 0.34324029, -0.24874324, 0.18572242, 0.04870622, -0.12835612, -0.90237187, 0.11606011, -0.42581153, 0.19355433, -0.22528463, -0.45458354, 0.19487802, -0.52050058, 0.35448599, 0.45440697, 0.49438175, -0.68745696, 0.21038082, 0.0320896, 0.4349471, 0.43088281, 0.03111693, 0.12624104, 0.17558352, -0.35767439, 0.17776939, 0.67946628, 0.15044016, 0.34548729, 0.11586383, 0.35616219, 0.87416289, -1.18516578, -0.15303891, -0.37673308, 0.43141088, -0.48142087, 0.20155701, 0.52344659, -0.23200097, 0.2885681, -0.0462512, -0.59369048, 0.08544671, 0.34197824, 0.00295535, 0.00006176, 0.16755279, -0.66087606, -0.02465603, 0.31204548, -0.59357249, 0.01541306, -0.4005584, -0.05972554, 0.3765098, 0.42999896, -0.36535946, 1.01074673, 0.09669424, 0.40365814, 0.20393637, 0.52437575, -0.41987391, 0.37709387, -0.58987282, 0.33739617, -0.11898026, -0.28434956, 0.1597293, -0.37279759, 0.16857772, -0.68369473, -0.0071707, -0.04059722, 0.58160569, 0.58976118, 0.10055376, -0.18236506, -1.08655842, 0.30120224, 0.30007053, -0.11252756, -0.62825161, -0.1326348, -0.42851097, 1.03854125, 0.24354518, 0.10562716, 0.03132733, 0.39074576, -0.03366123, 0.79741896, 0.49841304, 0.21364995, 0.18241056, -0.18698021, -0.28497967, 0.38933595, 0.11301139, 1.24439505, 0.51136736, -0.65701771, 0.27939095, -0.22659298, -0.15105041, 0.57087145, 0.50860357, 0.29485485, -0.58321312, 0.59750485, 0.03408749, 0.39961435, 0.03062172, -0.81325337, -0.96214203, 0.74986661, -0.31788668, 0.88783763, -0.13642998, -0.32008531, 0.42439299, -0.05245325, 0.35587115, -0.78972585, -0.37017856, 0.07580413, 0.56916281, -0.09145056, -0.90740166, 0.62806898, -0.31161061, 0.15519897, 1.01124225, 0.77697608, 0.36015047, 0.32750061, -0.84616456, 0.19411611, -0.06196452, -1.09669834, -0.35645447, 0.06090909, 0.26040357, 0.13541585, -0.82187723, -0.06078835, -0.69013183, 0.19408876, 0.25123547, 0.17069555, 0.20121217, -0.1581002, -0.27500869, 0.76892683, -0.22920415, 0.21864374, -0.84626659, 1.06326256, 0.18485873, 0.28648798, -0.13462979, -0.82739178, 0.40288133, -0.2522933, -0.33840672, 1.15660232, -0.16710885, 0.59070836, -0.41584072, 0.6413154, 0.15969256, 0.13970691, 0.21919379, -0.30751989, 0.01535126, 0.151286, -0.2351158, -0.77362202, -0.28149127, -0.34349163, -0.86027636, 0.23016573, 0.32814893, 0.59121915, 0.02608666, 0.05585644, -0.14758155, -0.18051375, -0.11185617, 0.02766199, 0.1086709, -0.27037177, 0.13244513, -0.22185581, -0.50843575, 0.47653498, 0.25945503, -0.22933535, -0.78166528, 0.56236506, 0.33474894, 0.07395005, -0.0010374, 1.46650075, 0.16786992, 0.60445882, 0.21725496, -0.69845412, -0.47520656, -0.31249089, 0.08262117, -0.41453233, 0.03723303, 0.39465699, 0.13324717, 0.19290278, 0.40262335, 0.71855104, 0.00508655, -0.14580232, 0.00664295, -0.43501853, -0.25775908, -1.05643512, -0.58657198, 0.00882584, -0.91035077, -0.05087263, -0.40071615, -0.13329363, -0.32605182, 0.0582619, -0.60851712, -0.34857522, 0.34230498, 0.03913884, -0.20505177, 0.20422924, -0.6039347, -0.3201094, -0.28186075, 0.45902571, -0.39077311, -0.30344038, -0.22482032, -0.93393331, 0.18888015, 0.48344648, 1.03475056, -0.93217473, -0.01898711, 0.05513286, 0.00559779, 0.41460272, -0.04550956, -0.65065565, -0.06816141, -0.87087767, 0.39983768, -0.02467193, -0.10143708, -0.0281854, 0.19861823, 0.57277688, -0.62915897, 0.07635907, -0.21785542, -0.24266213, -0.58920035, 0.8735833, 0.01937812, -0.15674472, -0.12309391, 0.0971405, 1.2568596, 0.4631905, 0.08852888, -0.31980047, -0.44034559, 0.18866543, 0.73407759, 0.57842749, 0.75478142, -0.66825648, -0.01168109, -0.00545973, -0.39713654, 0.36269584, 0.99580935, 0.41006171, 0.50042469, -0.11071851, 1.12810914, -1.10241171, 1.89162617, -0.99732647, -0.12099965, 0.11814313, -0.01341351, -0.43024054, -0.79979627, 0.38535542, -0.17683241, 0.29936481, 0.05981153, -0.11028389, 0.34534311, 0.75691815, 0.24019508, 0.66355708, -0.34164908, 0.83255807, 0.15017797, 0.12187011, 1.41774819, -0.52498394, -0.044922, -0.41671414, -0.2338223, -0.05746551, -0.18718892, 0.39982858, 0.31543399, 0.11590568, 1.32424046, 0.05622941, -0.49715308, 0.19790781, -0.04698604, 0.0176054, -0.29532893, -0.18092255, -0.2411324, 0.16836408, -0.37251685, -0.01231155, -1.01260232, -0.02662909, 0.61151004, -0.40463673, -0.12523357, 0.09789725, 0.52598041, 0.32914949, 0.0497145, 0.07585685, -0.52719632, 0.46697623, 0.08254545, 0.10024796, -0.42965233, -1.03540314, 0.14417656, 0.64111414, -0.99078817, 0.77060728, 0.84045203, 0.66702656, 0.59150075, -0.51178797, -0.17628048, 0.02654522, -0.13195154, -0.10722928, 0.20949466, 0.72473781, 0.44285701, 0.041194, -0.18076938, -0.0056339, 0.08868553, 0.41377258, -0.26371297, 0.92863413, 0.42775041, 0.49862032, -0.84238745, 0.04070651, -0.04633961, 0.10937306, -0.38830745, -1.70342592, -0.36054629, 0.03337412, -0.55735919, 0.41443122, 0.35961044, -0.49656088, 0.85467555, 0.22505791, 0.24043058, 0.32640623, -0.83547676, -0.25394402, 0.41162933, 0.21179415, 0.12873309, 0.39479051, 0.08823813, 0.21040905, -0.02311454, 0.02801339, 0.33823009, 0.09152804, 0.26989013, 0.59232086, -0.07340297, 0.52603082, -0.13742513, -0.68716515, 0.03712687, -0.59110496, -0.5375624, -0.20264201, -0.4197942, -0.25709618, 0.02098565, -0.21788964, -0.04660608, -0.02134926, 0.32418305, -0.34799358, -0.01971767, 0.3447397, 0.92040745, 0.01829108, 0.45747208, 0.71810033, -0.47792571, -0.0511238, 0.54451592, 0.52611143, 0.13367782, 0.30706616, -0.11235834, 0.39950519, -0.92395656, -0.40335738, -0.68963082, -0.13129022, -0.16358013, 0.15970672, 0.28903858, 0.31483469, 0.18140216, -0.98620227, -0.54757712, -0.23481511, 0.01051076, -0.35504336, -0.28863315, 0.07818349, -0.35299887, 0.16308879, -0.32231376, -0.67285008, 0.28333656, 0.84791759, -0.99139896, 0.21389071];
  const b1 = [-0.43904587, 0.27626463, 0.39608897, 0.09035718, 0.10523165, 0.14424163, 0.40578421, 0.52690493, 0.59359846, 0.73608862, 0.28456852, -0.30496941, 0.28074687, 0.30099391, -0.45837033, 0.07003333, 0.17636819, 0.01055823, 0.0602172, 0.70459468, -0.18661893, -0.10891293, 0.57997362, 0.56275182];
  const W2 = [0.16396696, -0.0186638, 0.12839297, -0.50198593, 0.14857412, 0.68086165, -0.52052613, -0.16992307, -0.00838156, -0.59430475, 0.56357853, 0.25900022, -0.39076597, 0.29994446, 0.16916655, -1.08698857, 0.19083151, -0.05837215, -0.15987953, 0.42139921, -0.86008371, -0.53175356, 0.99634963, -0.094933, -0.31762471, -0.67082871, -1.29889225, 0.76329458, 0.11707492, -0.44571948, -0.36361002, -0.65672328, -0.04317494, 0.61759817, 0.15886416, -0.85469792, -0.6146735, 0.08240911, 0.32669298, -0.37848863, -0.52200957, -0.40565292, -0.45103355, -0.64287887, -0.65675879, 0.27041518, -0.08170835, -0.6208056, -0.44854897, 0.3997751, -0.10731284, -0.07882441, 0.56268168, 0.20694659, 0.16111717, 0.12925333, 0.09217448, -0.41995938, -0.92074231, 0.38274958, 0.20763628, -0.26687776, 0.31100866, 0.53164196, -0.99735721, -0.75140437, 0.05529316, 0.18596725, -0.22602161, -0.77938789, -1.09860257, -0.6923567, -0.03103315, 0.11417935, 0.81335826, -1.04016298, -0.38368465, -0.73168708, -0.41210989, 0.76497514, 0.27176183, 0.56659022, 0.64358331, 0.5583729, -0.15933102, 0.37387176, -0.99688946, 0.2453998, 0.45054678, 1.02504479, 0.20196869, -0.41455425, -0.31548267, -0.13224846, -0.02809123, 0.2178836, -0.14425645, -0.36331416, 0.98252806, -0.33386765, 0.20033046, 0.32019031, -0.82674293, -0.71015617, 0.01652158, -1.33472745, -0.57355301, 0.32226792, 0.22983429, -0.32551817, -0.76996861, 0.20474628, 0.91209956, 0.59965896, 0.47755315, -0.71012324, 0.87240346, 0.49604219, -0.10344183, 0.1183055, -0.34611065, -1.22399127, -0.04657497, -0.61022049, -0.91682694, 0.78923135, 0.00844106, 0.22467462, -0.07577602, -0.40131962, 0.31097263, -0.06949005, 0.75482901, 0.09390879, 0.87016061, 0.4766799, -0.30468133, 0.08176189, 1.09461394, -0.3174621, -0.73549457, -0.5524119, -1.10422759, 0.66952998, -0.73955392, -0.36613274, -0.18079183, -0.40314609, -0.5530615, 0.13661023, 0.65227064, 0.52941459, -0.47003222, -0.27044421, 0.32848271, 0.79646529, -0.27991992, 0.31112464, -0.8288174, -0.34683443, -0.41844676, -0.4945284, -0.15033049, 0.09999913, -0.63672432, 0.92735501, -0.7201482, -0.28410968, 0.87642094, -0.09515528, -0.62687183, 0.47488925, -0.42464593, -0.61544755, -0.02252976, -0.26969271, -0.51040979, 0.02943852, 0.50946558, 0.78695988, -0.61696838, -0.0371519, 0.45316697, -0.41050011, 0.11274156, -0.3302282, -0.02587712, 0.31364359, -0.83298445, -0.11733562, -1.13965492, -0.1663197, -0.05580997, 0.13284159, -1.00188759, 0.58866552, -1.29155741, -0.24294795, 0.77119726, -0.14296559, -0.3212845, -0.48491569, 0.20450878, 0.45125683, -0.40224331, 0.43226149, -0.3435042, -0.05146013, 0.24849959, 0.45472894, 0.55502164, 0.00261701, 0.0207984, 0.45652777, 0.08317182, 0.39696386, 0.1651187, 0.13538232, 1.01334751, -0.23982053, -0.84631347, -0.39593633, -0.05614005, 0.10181486, 0.70587434, 0.10331044, -0.82104428, -0.12421454, -0.2430469, 0.24518261, -0.03736232, -0.88174503, 0.0756319, 0.08846777, 0.98294511, -0.11442168, 0.63282598, 1.0718152, 0.42681318, 0.37931168, 0.69020573, 0.4591126, 0.03747664, 0.49496282, 0.06991234, -0.1790078, 0.25323188, -0.44929151, -0.7528889, 0.22662342, -0.41263741, -0.08106209, -0.53565413, -0.76844882, 0.13351773, -0.12390932, 0.92675604, 0.11836368, -0.64419108, 1.09892069, 0.13122719, -0.16047598, 0.65381542, -0.32719792, 0.6001395, 0.33433911, -0.75790264, -0.06342003, 0.57905808, -0.74478486, -1.06474141, -0.63431418, -0.57435547, -0.42881923, 0.21735485, 0.28905652, -0.01474968, 0.37817655, 0.14866953, 0.82630712, 1.08971463, -0.2181494, -0.57376584, -0.00452291, 0.78633473, 0.1774807, 0.94086244, -0.85308326, 0.0131292, -0.12325674, 0.20903498, -0.71042786, -0.13650023, 0.10607371, 0.75107174, 0.37678925, 0.26246965, -0.10132319, 0.31779795, 0.16659766, -0.19235965, -0.27215663, -0.66426422, -0.20287575, 0.18965513, -1.23563198, -0.31631362, -0.07376901, -0.55083622, 0.24679875, 0.94418278, -0.75968922, 1.02500868, 0.73421967, 0.7022593, -0.31794277, -0.2167448, -0.03519118, -0.06135172, -0.75028605, 0.42756959, 0.26361556, -0.41845524, -0.48468614, 0.29127131, -0.78354925, -0.4609069, -0.28941918, 0.2159856, 0.02264124, 0.53882632, -1.04805614, 0.52981935, -1.14762004, -0.97102158, -0.56164648, 0.80307627, 0.32273978, 1.30784802, -0.75973864, 0.21624475, 0.06102252, -0.55353924, 0.93644114, 0.36706723, 0.40330453, -0.20837951, 0.42954129, -0.27761503, -0.109742, 0.40631461, -0.58447597, -0.30597658, 0.1054504, 0.89990223, 0.6421127, 0.01201759, -0.52822418, 0.53476045, 0.74900807, 0.59068359, -0.07645323, 0.10750491, 0.36293164, -0.2542027, -1.21803325, -0.35954246, 0.07082262, 0.1223237, 1.87808315, -0.32019706, -0.69719369, -0.15008297, 0.22013152, 0.22280248, -0.28524836, 0.33487137, -0.6877943, 0.53402877, -0.36821837, 0.42046998, 0.71972409, -0.16289978, -0.03146343];
  const b2 = [0.71832104, 0.22619869, -0.73510757, -0.44920774, 0.1329898, 0.52800273, 0.18105101, -0.8017543, -0.10351891, 0.49626047, -0.63107878, -0.09805316, -0.25707537, -0.53390245, 0.09814826, -0.17841755];
  const W3 = [-1.46820449, 8.68473471, -1.95651755, 12.12912909, -6.63863234, -0.46174429, 4.05829573, -2.30715517, -6.43073805, -0.29181605, 4.10013078, 2.33337929, 3.21120621, -4.54177692, -0.58914978, 4.53817815, 0.39040835, 4.46925172, 0.74095311, 6.61243484, -2.0159787, 0.33010626, 4.42296788, -1.6749944, -2.22885644, -1.99383868, -0.76462135, 3.3446912, -0.04335348, -0.7659775, -0.37597068, 1.89358927, -3.63106826, 2.05479638, -0.80979544, 2.1411618, -2.04813533, -0.81137086, 2.43836706, 0.84618169, 0.20248109, -1.32979351, -0.20244115, 0.39652053, -2.56971256, -1.67672082, -2.13460751, 1.47444531, 0.35055638, 1.7945012, -1.47870906, 5.11628431, 3.39652799, 0.90195515, -1.2608352, 6.76043933, -2.78158049, 3.17331023, 2.52154186, 0.55262333, -1.98741063, -0.25319444, -0.24235402, -5.43638536, -1.01566651, 7.74578433, -0.99319471, 15.58876257, -8.83797438, 0.70877731, 3.37197068, 1.05048161, -9.84421827, 0.88579255, 5.15241889, 4.88932476, 0.68543558, -3.83122475, 0.53246475, 0.26526423];
  const b3 = [0.62199182, -0.07701043, -0.2208619, 0.84667886, 0.08747866];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}
