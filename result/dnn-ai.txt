function name(){ return "DNN-1"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = new Float64Array([].concat(xSelf, xEn, xAl, xBl));

  // 네트워크 파라미터
  const W1 = new Float64Array([1.16086702, 0.45401742, -0.01593306, 0.16406664, -1.44471348, -0.67984097, 0.06272919, 0.00810838, -0.58460643, -0.29896211, 0.11007025, 0.16961782, 0.66569015, -0.26033104, -0.58403305, -0.71961494, -0.36391825, -0.16436795, -0.26443623, -0.5968099, 0.06221329, 0.06544934, -0.82875078, -0.05609292, 0.65011095, 0.32939133, 0.04072446, 0.25186724, 0.23290355, 0.06281219, 0.99699044, 0.20191478, -0.04649937, 0.22625417, -0.11034798, 1.27393896, -0.76150229, -0.8635544, -0.21925316, -0.04880573, 0.15813534, 0.19932841, 1.01714773, 0.30365795, 0.96540023, 0.11658218, -0.62094998, -0.09308994, -0.56460527, -0.4336218, 0.29794669, 0.00669034, 0.48326163, 0.56174434, 0.54996855, -0.93609383, -1.6931748, 0.22584619, -0.13784087, -1.31519507, -0.68030321, -0.36889185, 0.08940414, 0.02749305, 0.38713431, -0.91272947, -0.14308387, 0.10915428, -0.72326627, -0.37677676, -0.08072782, 0.59875187, -0.13658641, 0.30562405, -0.38887482, -0.98198801, 0.81044668, -0.78336721, -0.80018618, -0.31511136, -0.27351081, -0.46975315, 0.55776256, 0.85781492, 0.12019162, 0.02701763, -0.09369403, 0.48170794, 0.36172632, 1.24365736, -0.13260142, -1.52352339, 0.15109771, -0.61446944, 0.36094656, 0.05202249, -0.38022846, -1.05829891, 0.44929253, 0.57618019, 0.58184458, -0.82668472, 0.64381304, 1.00833486, -0.27968269, -1.16264133, -0.37894766, -0.97466413, 0.08924598, 0.50523106, 1.87124699, 1.83523539, 0.90369879, -0.49695994, -0.73596613, -1.27897492, -0.38795678, 0.4159936, 0.32760904, 0.31689439, -0.8703111, -0.29733383, -0.72120939, -0.36477211, 0.48973045, -0.64162434, -0.17304323, -0.6994659, -1.35170662, 0.74770919, 0.30243538, 0.30617512, -0.03050566, -0.3233877, 0.10660731, -0.00333878, -0.43127077, 1.30151012, 0.00387886, -0.09469426, 0.56956096, -1.31669778, -1.01776947, 0.14802802, -0.04577162, -0.26193228, 0.28633774, -0.06325617, 1.10292621, -0.07619031, -0.63584017, 1.14766394, 0.25591626, 0.7069892, 0.11372392, -0.98768697, 0.11969738, -1.01995703, -0.3506455, -0.0467716, -0.13806299, 0.42895311, 0.33598468, -0.41438213, 0.67137576, -0.8746665, 0.52521327, -0.7833527, -0.83115591, 0.10322272, 0.24795352, 0.67960129, 0.48128904, -1.00160012, -0.34381929, -0.11012828, -0.14070958, -1.73900748, 0.72594448, -0.76020488, 0.62884411, 0.11877309, -0.39077049, -0.58863772, 0.84551336, -0.11473078, 0.09951373, -0.39560461, -0.41852265, -0.32501324, 0.7776738, 0.45697128, -0.28558617, -0.09704501, -0.39521746, -0.83920598, 0.69260479, -1.14155343, 0.37013403, -0.2034506, -0.4489779, 0.53987859, -0.36055087, 0.05158537, -1.30033754, -0.64110242, -0.36874535, 0.44696835, 0.54902682, 0.72053128, 0.73604817, 0.7636507, 0.16890671, -0.02332019, 0.55566605, -0.2851684, 0.29689583, 0.23660206, -0.38717438, -0.22605389, -0.07092057, -0.31870926, -0.07906894, -0.2109383, -0.38327225, 0.63438534, 0.12765305, -0.37270295, 0.40481945, -0.93951494, -1.26443663, 1.09536072, -0.04889285, -0.66873671, -0.01267788, 1.21869488, -0.87239176, -0.15712428, -0.27733631, -0.91299076, -0.5714763, -2.14484416, -1.41593189, 0.11706559, 0.20479337, -0.75803695, -0.36531284, -0.85017932, -0.32848005, 0.09529417, -0.82630194, 0.04991336, -0.09534916, -0.80282786, -0.56850584, -1.24345825, -1.10089051, 0.2203343, -0.60116796, -0.11097936, -0.14311113, -0.21207631, 0.3535344, 0.45356577, -0.74389534, 0.92579172, 0.04597104, -0.06952132, 1.51910342, -1.20419546, -0.34095466, -0.86512096, -0.65965474, -0.04129611, 0.11360989, 0.33624902, -0.13595207, -0.08719876, -1.0329773, -0.55058183, -0.9472039, -0.37246928, 0.75140574, -0.54056671, -0.51109925, -0.13291926, 0.3840631, 0.66007861, 0.54286724, 0.25171705, 0.13292041, -0.21974529, -0.15580825, 0.02619065, 0.77795744, -0.12991554, 0.04318976, -0.38708442, 0.01757154, 0.0291313, 0.61835127, 0.77367978, -0.03174497, -0.39667814, 0.1199593, -0.31889607, -2.03711826, 0.08424961, 0.57123952, 0.7545686, -0.71487463, -0.70036889, 0.45774308, 0.58922809, -0.09836251, 0.04810853, 0.06526479, 0.69769606, 0.49778227, 0.01350059, -0.52018922, 0.00923191, 0.13094283, 0.37774463, -0.77697205, -0.84999367, 0.51282004, -0.49711115, -0.21733004, -0.2481893, 0.8059767, 0.88175241, 0.35072886, 1.34160237, 1.06666083, 1.2207679, 0.40964663, 0.20771024, -1.3773647, 0.34010567, 1.17758313, -0.09336074, 0.31999316, 0.11416906, -0.82756758, 2.0376495, 0.03660808, 1.14994647, 0.62363955, -1.09884732, 0.72934064, -0.05143806, 0.01239782, -1.005048, -0.2314267, 0.24408043, 0.33947186, 1.01110219, -0.18420296, -0.27977509, -0.99013518, -0.18804744, -1.53258886, -0.21522777, 0.39032316, -0.68295017, -0.15647297, 1.04648212, 0.33073313, -0.99314643, 0.28778317, 1.23742316, -0.8159566, 1.56674052, -0.21317538, -0.30768919, 0.71472878, 0.08665315, -0.56722215, 0.25377158, 0.68508894, -0.35473352, -0.08253754, -0.22723459, 1.10059747, -0.62881945, 0.25384721, 0.25234513, -0.48941471, 0.576745, 1.19376593, -0.93930334, 1.04895022, 0.93967111, -0.25368214, -0.32751746, -0.09581665, -0.38326827, 1.31193455, 0.43456618, -0.00147016, -0.65658302, 2.99298065, -0.83586729, 0.22237639, -0.41999931, -0.92540094, -0.05389802, 0.2653403, 0.93888063, 0.31573814, 0.32562754, -1.14293588, -0.4140554, 0.43485158, -0.40664181, 0.14655501, 0.6383114, -0.313888, 0.79044605, 0.35270861, 0.11537321, -0.49391459, 0.65480588, 0.47773779, -1.08749446, 0.06484172, 0.06666529, 0.61169475, -0.69780553, 1.07121735, 0.69516626, 0.51173459, 1.50380326, 0.6454491, 0.67539381, -0.37438603, 1.43421095, -0.39305273, -0.72548708, -0.47548751, -0.43766228, 0.21429306, 1.43047044, -0.40381818, 0.00795012, 0.02997096, 0.58388169, -0.40245655, 0.6131839, -0.27581648, 0.5666807, -0.23377305, 1.2885485, -1.04283389, -0.46101071, 0.3611301, 0.12050271, 0.0049348, 1.08960369, 0.36405158, -0.56468039, -1.09066012, -0.31926477, -0.1972565, -0.5980025, 0.95270623, 1.51640893, -0.20515308, 0.04240382, 1.195249, 0.20710055, -0.82669571, -0.28712219, 0.30362276, 0.16034049, -0.92023867, -0.77361715, 1.18455135, 0.01688821, -0.20041185, -0.69134363, 0.20930622, 0.19286829, 0.87262986, 0.4991553, -0.19489766, -0.02531507, -0.5260548, -0.59774647, 0.12256422, -0.4934823, 0.64799214, 0.20577249, -0.93890704, -0.80421991, -0.42317845, -0.01476863, 0.45327845, -0.2882091, 0.37536435, -0.51498041, 0.15247781, 0.80657302, 0.69462779, 0.62940653, -0.10764285, -0.23848797, 0.28198195, -0.61475637, 1.39833164, -0.03668195, -0.39429582, -0.20501472, -0.59773825, -1.07196702, 1.40425208, 0.57192025, -0.40771664, 0.19515251, -0.87620034, -0.27866708, -0.45870696, 0.50583381, 1.24554625, 1.1116707, -0.32322129, 0.24284652, 0.00179021, -0.09650273, -0.93616158, -1.05441676, -0.69705983, -0.50295876, 0.6242088, -1.16010549, 0.28982143, -0.12720418, -0.70617804, -0.38295051, -0.33786862, 1.25194374, 1.83610358, -0.25231712, -0.3748979, 0.17497663, 0.42398335, -0.38929575, -0.3216867, -1.05164369, -0.9118069, 0.703489, -0.03758412, -0.23815471, 0.07255176, -1.68574302, 0.25883816, 0.06989032, -0.93124178, 0.20902762, 0.38173734, 0.13870243, -0.23427843, -0.14115152, 0.47605078, 0.4454979, 0.45597094, -0.1983945, -0.7477611, 0.40125748, -1.06690213, 0.45920684, 0.60075469, -0.07964625, -0.3354177, -0.37211442, -0.61793865, 1.43228787, -0.65250606, -1.10042336, -0.13492828, 0.05632365, -0.61567626, -1.55302321, 1.88478626, -0.98103863, -0.48086189, 1.13282848, 0.69127848, 0.77299591, 0.34796462, -0.50901509, -1.14569059, -0.77596236, 0.66750389, 0.26099538, -0.556026, -0.22851248, -0.34709766, -1.10579648, -1.08899645, 0.44643478, -2.36167688, 0.67997586, -1.4068962, 0.22963969, 0.25963779, -1.05276731, -1.69805801, -0.84405611, 0.72977312, 0.59938034, 0.54898742, 1.80606045, -0.30971488, 0.84102942, 0.09793618, 0.48754923, 1.20838508, -0.62451834, 0.09788401, 0.7467389, -0.08779934, 0.73816975, -0.22347306, 0.30062027, -1.11447533, 1.54847941, -0.66364917, 0.35511818, -0.07139212, -0.38955982, -0.59200115, 0.37394571, -1.33925108, 0.9380908, 0.28080086, 1.00623516, 0.5502759, 1.16385904, -0.11462171, 0.14345689, -0.53444457, 0.097352, -0.14986276, 0.78204915, 0.20525447, -0.67473325, 0.66499061, -0.1516195, -0.21933897, 0.12057362, 0.41203389, 0.98277055, -1.23621804, 1.05831904, -0.08574682, 0.62202105, 0.65528091, -0.76004287, -0.03058533, -0.31154378, -1.13694933, 0.36976683, -0.08363774, -0.32942447, 0.07587069, 0.19027874, 0.11281399, 0.17220612, 0.55086702, 1.21881242, 0.2014665, 1.15660021, -0.09822483, 0.02500986, -1.2307767, 0.65041515, 0.04411311, 0.37882355, -0.58894418, -0.03076014, -1.27614444, -0.27489264, 0.53902593, 0.18870826, -0.37961904, 0.78318519, 0.94519992, -0.03050743, -0.97358773, 0.39778298, -0.19134397, 0.16464383, 0.18019496, -0.76480353, 0.32393955, 1.18116199, -0.20294073, -0.75705158, -0.55021636, -1.64067941, 0.8437686, -0.01123728, 0.14878633, 0.14249866, 0.10681131, -0.4507022, 0.53426259, -1.68412461, -0.29220864, -1.41776781, -0.50033608, -0.34632478, 0.18044948, -0.82627421, 0.14019874, -0.33185464, 0.32046232, -0.10981499, -0.33977175, 1.02563296, 0.66537243, -0.87231143, 0.72871676, -0.65158434, -0.9203776, 0.05668717, -0.55850094, -0.50904144, 0.57538706, -0.82225195, 0.03662629, 0.08782363, -1.02716603, 0.22578043, -0.52152126, 0.11340605, 0.3918442, 0.33330609, -1.32654307, -0.76009881, -0.71566889, -0.22165534, 0.92906845, -0.55708918, -0.55462621, -1.54555777, -0.14415664, -0.1848873, -0.26021055, -0.41767918, 0.19625378, 1.04737573, 0.00697196, -0.70901659, -0.00480012, 0.87530084, -0.10824349, -0.00282898, 0.25111284, -0.1917045, 0.58569746, 0.2612749, -0.8745288, 0.26737458, 0.6995127, 0.31654037, 0.52142329, 0.38912296, 0.71674512, -0.25948829, -1.01074201, -0.48554032, -1.36646042, 1.17896041, -0.82315626, -0.00843667, 0.03083474, -0.96222985, 0.48064918, -0.62582194, -0.71741746, -1.43552686, 0.19578284, 2.03117411, -0.95849408, 0.7839609, -1.29579605, -1.00732767, -0.54791046, -0.28679079, 0.65720846, -0.47495962, -0.17917459, 0.75350098, -0.99669408, 0.25540013, -1.18001701, 0.56036715, -0.04207052, 1.08761316, 0.10036886, 0.57481806, 0.25946003, 0.53901969, 0.42514115, -0.43490003, 0.17413253, 0.98927462, -1.03232907, 0.1819374, -0.70176453, 0.31333646, 0.33080943, 0.39121941, -0.62672335, -0.65054383, -0.04517418, -0.12088381, -0.01804329, 0.05683406, 0.45080333, 1.47798919, -0.51680808, 0.73296181, -1.48945951, 0.74404927, 0.75088802, 0.17704742, -0.51834999, 0.04198799, -0.13868619, -0.05838725, -0.49027223, 0.27638584, 2.02584813, -1.25148804, 0.24972321, -0.19335215, 0.62556605, -0.2514363, 0.22177411, 0.63826601, -0.54012802, -0.10707163, 0.93831171, 1.12989518, 0.21530634, 1.21067474, 0.13818377, -0.69262038, 0.02886073, 0.29469636, 0.1480988, -1.29583559, -0.58162885, 0.81207667, -0.37826294, 0.46417966, 0.49384449, -0.37389535, 0.39729082, 0.08511844, -0.97422482, 0.73575366, -0.66093956, -0.18330258, 0.43329887, -0.08506892, 0.58911792, -0.06151641, -0.49245219, 0.49205393, 0.121273, -0.29452151, -0.48359684, -0.22048145, 0.61008063, 0.49397883, 0.67811953, -0.44626817, 0.71946891, -0.42557979, 0.40210063, 0.63631853, -1.02046362, 0.92248358, 0.96123277, 0.72412298, -0.8060785, -0.21486891, -1.37027589, 0.52257695, -0.10714835, -1.08687105, -0.61936232, -0.84997842, 1.05491477, 0.37951007, 0.52192154, 0.65894867, 0.27851039, -0.55289659, -1.08079426, -0.26859139, -0.16033914, -0.73331905, 0.51154261, -1.39762869, -0.35988197, 0.32214246, 0.55092736, -0.75884738, -0.11575132, -0.35883372, -0.01573113, 1.29988618, 1.17732022, 0.010014, 0.40095138, 0.21447211, 0.17495981, -1.05637666, -0.1781282, -0.29554115, -0.41499499, 0.21466573, 0.13314829, -0.32754156, -0.54871312, -0.6182757, -1.10433068, -0.28020414, -0.20971262, 0.90851942, 0.07758443, -0.62777127, -0.03705823, -0.7843605, 0.35139392, -0.46936848, -0.85024895, 0.33510784, 0.24013882, 0.52902027, 0.11585872, 0.48151824, -0.28568003, -1.26636815, 0.65577621, -0.07577273, -0.28189863, -0.11901846, 0.13208514, 0.19101085, -0.4680898, -1.22646417, 1.28397173, -0.78566114, -1.56642036, -0.84912138, 1.25314465, 0.38590742, 0.27558469, -0.59376337, 0.54032141, 0.87125474, -1.27068735, 1.34807346, 0.13984405, 0.09131003, -0.84027738, -0.38492104, -0.01261329, -0.39885724, 1.13270869, -1.02046083, 1.00566987, 0.02963152, 0.17467701, -0.53336961, -0.18238527, -1.14414412, -0.01182096, 0.25307798, -0.20359748, -0.0695521, -0.13440645, 0.26750904, -0.14119641, 0.35248018, 0.39799964, 0.04569278, 1.80155198, -1.33543038, -0.16360659, 0.00202509, 0.9023821, 0.1299744, 0.01393592, -0.44448482, 0.52724335, 0.49014318, 0.84315736, -1.65197569, 1.05383237, -0.33121668, 0.08938957, -0.23889197, -0.09618305, 0.86934385, 1.27300009, 1.59577239, 0.52001913, 0.2659651, 0.75374924, -0.31495881, -0.94089639, -0.39707486, 1.08004452, -0.78486726, 0.1657878, -1.10838613, -0.30296491, 0.02727271, 1.11018468, 0.14214768, 0.53123477, -0.65260925, 0.38206853, -0.31400402]);
  const b1 = new Float64Array([-0.3769938, -0.45708039, 0.1840647, -0.49859403, -1.19755413, -0.48706846, 0.14640391, 0.8514539, 0.53820686, 0.69263349, 0.38994627, 0.8531916, -0.27439562, 0.4009886, -0.6740462, -0.27949024, 0.29455258, -0.00034507, 0.53743342, 0.97994221, 1.02223938, 0.41637915, 0.11570332, 0.0702926]);
  const W2 = new Float64Array([-0.36393361, 0.76600759, -0.32311301, -0.37044924, -0.01863374, 0.79199933, -0.2163266, 1.20070149, -1.02148294, 0.0083419, 0.06359666, 1.11031189, 0.42117964, 0.27628324, -0.46810193, 0.24248746, 0.07207636, 0.09156226, -0.11509207, 0.35024306, -0.44417629, -0.05339462, 0.26774132, -0.27254216, 0.09509289, -0.65469355, -0.83629374, 0.45104715, 0.22883103, -0.90283069, -1.15603583, 0.09833863, 0.29237483, 0.47836261, -2.4460134, -0.56021614, -0.26992881, 0.43201711, -0.02180406, -0.51424737, -1.46169835, 0.30544392, 1.81139699, -0.07617088, 1.58025579, 0.74848514, 0.02369266, 0.13041428, -1.63889131, -0.52996167, 0.42526035, 0.41926151, -0.144258, -0.28895869, -0.02232091, 0.53920144, -0.14787584, -0.5741529, -0.62076608, 0.2941718, -0.47452249, -0.00123355, 0.4041733, -1.25805765, 0.22910861, -0.73952017, 0.09727384, -0.16606013, 0.04156928, 0.91861792, -1.42002961, -0.81805485, 0.57443283, 0.86570567, -0.19932989, -0.49271031, -1.63179525, -0.6927011, 0.89972923, 0.40743626, -0.75087564, 1.16170509, -0.41986334, 0.39460286, 0.89749259, 0.38983426, -0.47620402, -0.59410362, -0.30842786, 0.54130752, -0.07882, -0.20294656, 0.70568312, 0.6721814, -0.028044, 0.6512739, 0.75722795, -1.55043224, -0.27954478, -0.08522111, 0.99482679, 0.33379424, -0.3630426, -0.33156176, -0.92108823, 0.59060897, -0.05438484, -0.92390538, 0.65244049, -0.6213278, 0.82398787, 0.26221064, 0.21072438, -0.44529634, 0.23773221, 0.7228993, 0.82514828, -0.50748032, 0.33344273, 0.09323166, 0.20515946, 0.07801714, -0.44518889, 0.37120208, 0.07572043, 0.44320258, -0.22717027, -0.10482123, 0.26398932, -0.03062848, 0.70255935, 0.55667808, 1.13265819, -0.49028272, -0.36266301, 0.01647426, -1.11018706, 0.94490753, -0.4591503, 0.2275123, -0.59097867, 0.09167088, -0.47469073, 0.48256224, -0.85543583, 0.90945703, -0.32781463, -0.07944888, -0.38965299, 0.17363449, -0.33493807, 1.19614678, 1.52397341, -0.5126045, -0.92904639, -0.16536019, -0.07437995, -0.06630058, -0.05920561, -0.91556489, 0.27830692, -0.04637011, -1.268791, 0.71808597, -0.87078319, 0.33912577, -0.28772744, 0.8211476, 0.05298478, -0.10813952, 0.57768677, 0.84899942, -0.59795597, -0.66052374, 0.76742469, -0.7931425, -0.10961566, 0.09829366, -0.34175491, 0.51519788, -1.40315846, -0.16702435, -0.51209354, -0.38183541, 0.60264025, -0.10498202, -0.38149483, 0.33112388, 0.48871427, -0.22567533, -0.7913914, -0.02635052, 0.74428098, -0.76697084, -0.64660469, -0.28209903, -0.36147913, -1.26383792, -1.0025512, -0.35382618, 1.46433295, -0.77309231, -0.04454931, -1.1609705, 0.20221897, -0.02414127, -0.76231562, 0.73596926, -0.30292943, 0.02225386, -0.86552363, 1.54643087, -0.24689933, 0.31782228, 0.30385905, 0.35345317, -0.50139077, -0.26649418, -0.66252487, 0.59758983, -1.20314557, -0.00102702, -1.72954606, -0.69695597, 0.01010309, 0.07690896, -0.45218546, -0.63164826, -0.03793293, -0.30552826, 0.65476779, 0.60104735, 0.32822241, -0.35552989, 0.55512618, 0.58471448, 1.19603718, 0.50259965, -0.38864743, -0.09966946, -0.72886386, -0.78148735, 0.28832804, -0.28275472, -0.74906584, -1.31599546, 0.03450359, -0.15530443, -0.39851719, -1.43312151, 0.46560598, -0.00642272, -0.39440374, 0.22884593, 0.51599111, -0.39352526, 0.86692105, 0.03556991, -0.24389477, 0.51262709, 0.27055508, 0.38822586, -0.49411828, 0.63403343, -1.10228932, -1.1593433, -0.51061209, 1.15306232, 0.11640585, 0.44370477, -0.53130742, 0.26390809, -0.67154718, 1.40693708, -0.48723334, -0.49547427, 0.13578793, 0.24428097, -0.07702629, -0.12334438, 0.73434769, -0.34828112, 1.59163668, 0.15897032, 0.56919218, 0.77535925, 0.12950974, 0.41811662, -0.38307804, -1.92510929, -0.85514935, -0.25447702, 0.42686288, -0.15602175, -1.44877125, 0.60687618, 0.02640019, -0.05638041, -0.43861239, 0.33457765, 0.35254409, -0.20468833, -0.31108453, 0.00713026, -0.29020946, -0.46269764, -0.22214031, -0.46402655, -0.22948271, 0.87596305, 0.64690908, -1.07476093, 0.0491252, -0.50053172, -0.03114955, -0.16291113, 0.0695048, 1.14204312, 0.66589582, 0.68286839, -0.07678356, 0.49312202, -0.12123471, 0.52507097, -0.99656503, -0.37103426, -0.26655923, -0.75544704, -0.65432554, 0.50990224, 1.41448291, 0.783597, 0.4732937, 0.12736108, -1.98329906, -0.40487857, -1.08659657, 0.27248858, -0.83469585, -0.94199992, 0.63753699, -0.31288364, 0.40723314, -0.36106579, 0.45189581, -0.06192257, 0.2451347, 0.7518234, 0.73162397, -1.07409414, -0.07444491, 0.10628975, 0.11440681, 0.65798029, 0.79394028, 0.58606972, 0.45011631, 1.07236974, 0.49211977, -0.5974386, 1.08321938, 0.97710106, 1.19344415, 0.33450276, 0.14136327, 0.54938384, -0.55995131, -0.32786671, 0.4198819, -0.19464183, -1.11149979, -0.90131444, 2.48280857, 1.01865555, -0.26239437, -0.99392251, 0.60515907, -0.57263126, 0.91474912, 1.39025813, 0.78375887, 0.97426836, -0.24018025, -0.30298187]);
  const b2 = new Float64Array([0.49044545, 0.14832435, -0.10399946, 0.11030815, -0.68922647, -0.21270648, -0.94226456, -0.5901483, 0.27010855, -0.53688043, 0.57202995, -1.30302149, 0.14501043, 0.03385137, -0.41964462, 0.58487763]);
  const W3 = new Float64Array([-1.11992536, 4.53139432, -2.89361341, 6.23758128, -3.76610992, -0.38554416, 3.30262714, -3.16179178, -1.75913688, -2.48264956, 0.47743097, 1.09828654, -0.29926214, -2.06160024, -0.86656337, 3.74605644, 0.02934477, 5.44329593, 0.99398807, 9.04172845, -0.47661728, 0.88628877, 3.61989566, -2.00428394, -1.44359882, -1.83289812, -0.19174532, 1.37806327, 0.96615007, -0.30643046, 0.31657145, 1.23013555, -1.37346395, 0.49040335, -1.61664998, 2.16740278, -1.50815878, 0.20102948, 0.88683403, 1.32886478, 0.25889118, -2.7626618, -0.19922588, 1.21432, -4.40024236, -0.95583138, -2.19231325, -0.42404666, -0.88370609, 0.61475744, -0.15560042, 5.95764335, 4.11236093, 2.54421855, 1.4069629, 5.40031324, -0.9192656, 4.0505183, 2.05173544, -0.32517741, 0.84071744, -2.92066841, 0.15832721, -5.12158492, -1.00964129, 7.03878065, -3.93775312, 10.14645857, -5.36920526, -0.59732656, 0.0000242, -0.45126131, -4.70117446, -0.11856551, 3.28501056, 2.68392719, -0.7721146, 0.70172966, -1.35528559, 0.14938389]);
  const b3 = new Float64Array([0.04730517, 0.60743675, -0.15742229, -0.44259557, -0.95105089]);

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Float64Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Float64Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Float64Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-2"; }
function type(){ return Type.NORMAL; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = new Float64Array([].concat(xSelf, xEn, xAl, xBl));

  // 네트워크 파라미터
  const W1 = new Float64Array([1.16086702, 0.45401742, -0.01593306, 0.16406664, -1.44471348, -0.67984097, 0.06272919, 0.00810838, -0.58460643, -0.29896211, 0.11007025, 0.16961782, 0.66569015, -0.26033104, -0.58403305, -0.71961494, -0.36391825, -0.16436795, -0.26443623, -0.5968099, 0.06221329, 0.06544934, -0.82875078, -0.05609292, 0.65011095, 0.32939133, 0.04072446, 0.25186724, 0.23290355, 0.06281219, 0.99699044, 0.20191478, -0.04649937, 0.22625417, -0.11034798, 1.27393896, -0.76150229, -0.8635544, -0.21925316, -0.04880573, 0.15813534, 0.19932841, 1.01714773, 0.30365795, 0.96540023, 0.11658218, -0.62094998, -0.09308994, -0.56460527, -0.4336218, 0.29794669, 0.00669034, 0.48326163, 0.56174434, 0.54996855, -0.93609383, -1.6931748, 0.22584619, -0.13784087, -1.31519507, -0.68030321, -0.36889185, 0.08940414, 0.02749305, 0.38713431, -0.91272947, -0.14308387, 0.10915428, -0.72326627, -0.37677676, -0.08072782, 0.59875187, -0.13658641, 0.30562405, -0.38887482, -0.98198801, 0.81044668, -0.78336721, -0.80018618, -0.31511136, -0.27351081, -0.46975315, 0.55776256, 0.85781492, 0.12019162, 0.02701763, -0.09369403, 0.48170794, 0.36172632, 1.24365736, -0.13260142, -1.52352339, 0.15109771, -0.61446944, 0.36094656, 0.05202249, -0.38022846, -1.05829891, 0.44929253, 0.57618019, 0.58184458, -0.82668472, 0.64381304, 1.00833486, -0.27968269, -1.16264133, -0.37894766, -0.97466413, 0.08924598, 0.50523106, 1.87124699, 1.83523539, 0.90369879, -0.49695994, -0.73596613, -1.27897492, -0.38795678, 0.4159936, 0.32760904, 0.31689439, -0.8703111, -0.29733383, -0.72120939, -0.36477211, 0.48973045, -0.64162434, -0.17304323, -0.6994659, -1.35170662, 0.74770919, 0.30243538, 0.30617512, -0.03050566, -0.3233877, 0.10660731, -0.00333878, -0.43127077, 1.30151012, 0.00387886, -0.09469426, 0.56956096, -1.31669778, -1.01776947, 0.14802802, -0.04577162, -0.26193228, 0.28633774, -0.06325617, 1.10292621, -0.07619031, -0.63584017, 1.14766394, 0.25591626, 0.7069892, 0.11372392, -0.98768697, 0.11969738, -1.01995703, -0.3506455, -0.0467716, -0.13806299, 0.42895311, 0.33598468, -0.41438213, 0.67137576, -0.8746665, 0.52521327, -0.7833527, -0.83115591, 0.10322272, 0.24795352, 0.67960129, 0.48128904, -1.00160012, -0.34381929, -0.11012828, -0.14070958, -1.73900748, 0.72594448, -0.76020488, 0.62884411, 0.11877309, -0.39077049, -0.58863772, 0.84551336, -0.11473078, 0.09951373, -0.39560461, -0.41852265, -0.32501324, 0.7776738, 0.45697128, -0.28558617, -0.09704501, -0.39521746, -0.83920598, 0.69260479, -1.14155343, 0.37013403, -0.2034506, -0.4489779, 0.53987859, -0.36055087, 0.05158537, -1.30033754, -0.64110242, -0.36874535, 0.44696835, 0.54902682, 0.72053128, 0.73604817, 0.7636507, 0.16890671, -0.02332019, 0.55566605, -0.2851684, 0.29689583, 0.23660206, -0.38717438, -0.22605389, -0.07092057, -0.31870926, -0.07906894, -0.2109383, -0.38327225, 0.63438534, 0.12765305, -0.37270295, 0.40481945, -0.93951494, -1.26443663, 1.09536072, -0.04889285, -0.66873671, -0.01267788, 1.21869488, -0.87239176, -0.15712428, -0.27733631, -0.91299076, -0.5714763, -2.14484416, -1.41593189, 0.11706559, 0.20479337, -0.75803695, -0.36531284, -0.85017932, -0.32848005, 0.09529417, -0.82630194, 0.04991336, -0.09534916, -0.80282786, -0.56850584, -1.24345825, -1.10089051, 0.2203343, -0.60116796, -0.11097936, -0.14311113, -0.21207631, 0.3535344, 0.45356577, -0.74389534, 0.92579172, 0.04597104, -0.06952132, 1.51910342, -1.20419546, -0.34095466, -0.86512096, -0.65965474, -0.04129611, 0.11360989, 0.33624902, -0.13595207, -0.08719876, -1.0329773, -0.55058183, -0.9472039, -0.37246928, 0.75140574, -0.54056671, -0.51109925, -0.13291926, 0.3840631, 0.66007861, 0.54286724, 0.25171705, 0.13292041, -0.21974529, -0.15580825, 0.02619065, 0.77795744, -0.12991554, 0.04318976, -0.38708442, 0.01757154, 0.0291313, 0.61835127, 0.77367978, -0.03174497, -0.39667814, 0.1199593, -0.31889607, -2.03711826, 0.08424961, 0.57123952, 0.7545686, -0.71487463, -0.70036889, 0.45774308, 0.58922809, -0.09836251, 0.04810853, 0.06526479, 0.69769606, 0.49778227, 0.01350059, -0.52018922, 0.00923191, 0.13094283, 0.37774463, -0.77697205, -0.84999367, 0.51282004, -0.49711115, -0.21733004, -0.2481893, 0.8059767, 0.88175241, 0.35072886, 1.34160237, 1.06666083, 1.2207679, 0.40964663, 0.20771024, -1.3773647, 0.34010567, 1.17758313, -0.09336074, 0.31999316, 0.11416906, -0.82756758, 2.0376495, 0.03660808, 1.14994647, 0.62363955, -1.09884732, 0.72934064, -0.05143806, 0.01239782, -1.005048, -0.2314267, 0.24408043, 0.33947186, 1.01110219, -0.18420296, -0.27977509, -0.99013518, -0.18804744, -1.53258886, -0.21522777, 0.39032316, -0.68295017, -0.15647297, 1.04648212, 0.33073313, -0.99314643, 0.28778317, 1.23742316, -0.8159566, 1.56674052, -0.21317538, -0.30768919, 0.71472878, 0.08665315, -0.56722215, 0.25377158, 0.68508894, -0.35473352, -0.08253754, -0.22723459, 1.10059747, -0.62881945, 0.25384721, 0.25234513, -0.48941471, 0.576745, 1.19376593, -0.93930334, 1.04895022, 0.93967111, -0.25368214, -0.32751746, -0.09581665, -0.38326827, 1.31193455, 0.43456618, -0.00147016, -0.65658302, 2.99298065, -0.83586729, 0.22237639, -0.41999931, -0.92540094, -0.05389802, 0.2653403, 0.93888063, 0.31573814, 0.32562754, -1.14293588, -0.4140554, 0.43485158, -0.40664181, 0.14655501, 0.6383114, -0.313888, 0.79044605, 0.35270861, 0.11537321, -0.49391459, 0.65480588, 0.47773779, -1.08749446, 0.06484172, 0.06666529, 0.61169475, -0.69780553, 1.07121735, 0.69516626, 0.51173459, 1.50380326, 0.6454491, 0.67539381, -0.37438603, 1.43421095, -0.39305273, -0.72548708, -0.47548751, -0.43766228, 0.21429306, 1.43047044, -0.40381818, 0.00795012, 0.02997096, 0.58388169, -0.40245655, 0.6131839, -0.27581648, 0.5666807, -0.23377305, 1.2885485, -1.04283389, -0.46101071, 0.3611301, 0.12050271, 0.0049348, 1.08960369, 0.36405158, -0.56468039, -1.09066012, -0.31926477, -0.1972565, -0.5980025, 0.95270623, 1.51640893, -0.20515308, 0.04240382, 1.195249, 0.20710055, -0.82669571, -0.28712219, 0.30362276, 0.16034049, -0.92023867, -0.77361715, 1.18455135, 0.01688821, -0.20041185, -0.69134363, 0.20930622, 0.19286829, 0.87262986, 0.4991553, -0.19489766, -0.02531507, -0.5260548, -0.59774647, 0.12256422, -0.4934823, 0.64799214, 0.20577249, -0.93890704, -0.80421991, -0.42317845, -0.01476863, 0.45327845, -0.2882091, 0.37536435, -0.51498041, 0.15247781, 0.80657302, 0.69462779, 0.62940653, -0.10764285, -0.23848797, 0.28198195, -0.61475637, 1.39833164, -0.03668195, -0.39429582, -0.20501472, -0.59773825, -1.07196702, 1.40425208, 0.57192025, -0.40771664, 0.19515251, -0.87620034, -0.27866708, -0.45870696, 0.50583381, 1.24554625, 1.1116707, -0.32322129, 0.24284652, 0.00179021, -0.09650273, -0.93616158, -1.05441676, -0.69705983, -0.50295876, 0.6242088, -1.16010549, 0.28982143, -0.12720418, -0.70617804, -0.38295051, -0.33786862, 1.25194374, 1.83610358, -0.25231712, -0.3748979, 0.17497663, 0.42398335, -0.38929575, -0.3216867, -1.05164369, -0.9118069, 0.703489, -0.03758412, -0.23815471, 0.07255176, -1.68574302, 0.25883816, 0.06989032, -0.93124178, 0.20902762, 0.38173734, 0.13870243, -0.23427843, -0.14115152, 0.47605078, 0.4454979, 0.45597094, -0.1983945, -0.7477611, 0.40125748, -1.06690213, 0.45920684, 0.60075469, -0.07964625, -0.3354177, -0.37211442, -0.61793865, 1.43228787, -0.65250606, -1.10042336, -0.13492828, 0.05632365, -0.61567626, -1.55302321, 1.88478626, -0.98103863, -0.48086189, 1.13282848, 0.69127848, 0.77299591, 0.34796462, -0.50901509, -1.14569059, -0.77596236, 0.66750389, 0.26099538, -0.556026, -0.22851248, -0.34709766, -1.10579648, -1.08899645, 0.44643478, -2.36167688, 0.67997586, -1.4068962, 0.22963969, 0.25963779, -1.05276731, -1.69805801, -0.84405611, 0.72977312, 0.59938034, 0.54898742, 1.80606045, -0.30971488, 0.84102942, 0.09793618, 0.48754923, 1.20838508, -0.62451834, 0.09788401, 0.7467389, -0.08779934, 0.73816975, -0.22347306, 0.30062027, -1.11447533, 1.54847941, -0.66364917, 0.35511818, -0.07139212, -0.38955982, -0.59200115, 0.37394571, -1.33925108, 0.9380908, 0.28080086, 1.00623516, 0.5502759, 1.16385904, -0.11462171, 0.14345689, -0.53444457, 0.097352, -0.14986276, 0.78204915, 0.20525447, -0.67473325, 0.66499061, -0.1516195, -0.21933897, 0.12057362, 0.41203389, 0.98277055, -1.23621804, 1.05831904, -0.08574682, 0.62202105, 0.65528091, -0.76004287, -0.03058533, -0.31154378, -1.13694933, 0.36976683, -0.08363774, -0.32942447, 0.07587069, 0.19027874, 0.11281399, 0.17220612, 0.55086702, 1.21881242, 0.2014665, 1.15660021, -0.09822483, 0.02500986, -1.2307767, 0.65041515, 0.04411311, 0.37882355, -0.58894418, -0.03076014, -1.27614444, -0.27489264, 0.53902593, 0.18870826, -0.37961904, 0.78318519, 0.94519992, -0.03050743, -0.97358773, 0.39778298, -0.19134397, 0.16464383, 0.18019496, -0.76480353, 0.32393955, 1.18116199, -0.20294073, -0.75705158, -0.55021636, -1.64067941, 0.8437686, -0.01123728, 0.14878633, 0.14249866, 0.10681131, -0.4507022, 0.53426259, -1.68412461, -0.29220864, -1.41776781, -0.50033608, -0.34632478, 0.18044948, -0.82627421, 0.14019874, -0.33185464, 0.32046232, -0.10981499, -0.33977175, 1.02563296, 0.66537243, -0.87231143, 0.72871676, -0.65158434, -0.9203776, 0.05668717, -0.55850094, -0.50904144, 0.57538706, -0.82225195, 0.03662629, 0.08782363, -1.02716603, 0.22578043, -0.52152126, 0.11340605, 0.3918442, 0.33330609, -1.32654307, -0.76009881, -0.71566889, -0.22165534, 0.92906845, -0.55708918, -0.55462621, -1.54555777, -0.14415664, -0.1848873, -0.26021055, -0.41767918, 0.19625378, 1.04737573, 0.00697196, -0.70901659, -0.00480012, 0.87530084, -0.10824349, -0.00282898, 0.25111284, -0.1917045, 0.58569746, 0.2612749, -0.8745288, 0.26737458, 0.6995127, 0.31654037, 0.52142329, 0.38912296, 0.71674512, -0.25948829, -1.01074201, -0.48554032, -1.36646042, 1.17896041, -0.82315626, -0.00843667, 0.03083474, -0.96222985, 0.48064918, -0.62582194, -0.71741746, -1.43552686, 0.19578284, 2.03117411, -0.95849408, 0.7839609, -1.29579605, -1.00732767, -0.54791046, -0.28679079, 0.65720846, -0.47495962, -0.17917459, 0.75350098, -0.99669408, 0.25540013, -1.18001701, 0.56036715, -0.04207052, 1.08761316, 0.10036886, 0.57481806, 0.25946003, 0.53901969, 0.42514115, -0.43490003, 0.17413253, 0.98927462, -1.03232907, 0.1819374, -0.70176453, 0.31333646, 0.33080943, 0.39121941, -0.62672335, -0.65054383, -0.04517418, -0.12088381, -0.01804329, 0.05683406, 0.45080333, 1.47798919, -0.51680808, 0.73296181, -1.48945951, 0.74404927, 0.75088802, 0.17704742, -0.51834999, 0.04198799, -0.13868619, -0.05838725, -0.49027223, 0.27638584, 2.02584813, -1.25148804, 0.24972321, -0.19335215, 0.62556605, -0.2514363, 0.22177411, 0.63826601, -0.54012802, -0.10707163, 0.93831171, 1.12989518, 0.21530634, 1.21067474, 0.13818377, -0.69262038, 0.02886073, 0.29469636, 0.1480988, -1.29583559, -0.58162885, 0.81207667, -0.37826294, 0.46417966, 0.49384449, -0.37389535, 0.39729082, 0.08511844, -0.97422482, 0.73575366, -0.66093956, -0.18330258, 0.43329887, -0.08506892, 0.58911792, -0.06151641, -0.49245219, 0.49205393, 0.121273, -0.29452151, -0.48359684, -0.22048145, 0.61008063, 0.49397883, 0.67811953, -0.44626817, 0.71946891, -0.42557979, 0.40210063, 0.63631853, -1.02046362, 0.92248358, 0.96123277, 0.72412298, -0.8060785, -0.21486891, -1.37027589, 0.52257695, -0.10714835, -1.08687105, -0.61936232, -0.84997842, 1.05491477, 0.37951007, 0.52192154, 0.65894867, 0.27851039, -0.55289659, -1.08079426, -0.26859139, -0.16033914, -0.73331905, 0.51154261, -1.39762869, -0.35988197, 0.32214246, 0.55092736, -0.75884738, -0.11575132, -0.35883372, -0.01573113, 1.29988618, 1.17732022, 0.010014, 0.40095138, 0.21447211, 0.17495981, -1.05637666, -0.1781282, -0.29554115, -0.41499499, 0.21466573, 0.13314829, -0.32754156, -0.54871312, -0.6182757, -1.10433068, -0.28020414, -0.20971262, 0.90851942, 0.07758443, -0.62777127, -0.03705823, -0.7843605, 0.35139392, -0.46936848, -0.85024895, 0.33510784, 0.24013882, 0.52902027, 0.11585872, 0.48151824, -0.28568003, -1.26636815, 0.65577621, -0.07577273, -0.28189863, -0.11901846, 0.13208514, 0.19101085, -0.4680898, -1.22646417, 1.28397173, -0.78566114, -1.56642036, -0.84912138, 1.25314465, 0.38590742, 0.27558469, -0.59376337, 0.54032141, 0.87125474, -1.27068735, 1.34807346, 0.13984405, 0.09131003, -0.84027738, -0.38492104, -0.01261329, -0.39885724, 1.13270869, -1.02046083, 1.00566987, 0.02963152, 0.17467701, -0.53336961, -0.18238527, -1.14414412, -0.01182096, 0.25307798, -0.20359748, -0.0695521, -0.13440645, 0.26750904, -0.14119641, 0.35248018, 0.39799964, 0.04569278, 1.80155198, -1.33543038, -0.16360659, 0.00202509, 0.9023821, 0.1299744, 0.01393592, -0.44448482, 0.52724335, 0.49014318, 0.84315736, -1.65197569, 1.05383237, -0.33121668, 0.08938957, -0.23889197, -0.09618305, 0.86934385, 1.27300009, 1.59577239, 0.52001913, 0.2659651, 0.75374924, -0.31495881, -0.94089639, -0.39707486, 1.08004452, -0.78486726, 0.1657878, -1.10838613, -0.30296491, 0.02727271, 1.11018468, 0.14214768, 0.53123477, -0.65260925, 0.38206853, -0.31400402]);
  const b1 = new Float64Array([-0.3769938, -0.45708039, 0.1840647, -0.49859403, -1.19755413, -0.48706846, 0.14640391, 0.8514539, 0.53820686, 0.69263349, 0.38994627, 0.8531916, -0.27439562, 0.4009886, -0.6740462, -0.27949024, 0.29455258, -0.00034507, 0.53743342, 0.97994221, 1.02223938, 0.41637915, 0.11570332, 0.0702926]);
  const W2 = new Float64Array([-0.36393361, 0.76600759, -0.32311301, -0.37044924, -0.01863374, 0.79199933, -0.2163266, 1.20070149, -1.02148294, 0.0083419, 0.06359666, 1.11031189, 0.42117964, 0.27628324, -0.46810193, 0.24248746, 0.07207636, 0.09156226, -0.11509207, 0.35024306, -0.44417629, -0.05339462, 0.26774132, -0.27254216, 0.09509289, -0.65469355, -0.83629374, 0.45104715, 0.22883103, -0.90283069, -1.15603583, 0.09833863, 0.29237483, 0.47836261, -2.4460134, -0.56021614, -0.26992881, 0.43201711, -0.02180406, -0.51424737, -1.46169835, 0.30544392, 1.81139699, -0.07617088, 1.58025579, 0.74848514, 0.02369266, 0.13041428, -1.63889131, -0.52996167, 0.42526035, 0.41926151, -0.144258, -0.28895869, -0.02232091, 0.53920144, -0.14787584, -0.5741529, -0.62076608, 0.2941718, -0.47452249, -0.00123355, 0.4041733, -1.25805765, 0.22910861, -0.73952017, 0.09727384, -0.16606013, 0.04156928, 0.91861792, -1.42002961, -0.81805485, 0.57443283, 0.86570567, -0.19932989, -0.49271031, -1.63179525, -0.6927011, 0.89972923, 0.40743626, -0.75087564, 1.16170509, -0.41986334, 0.39460286, 0.89749259, 0.38983426, -0.47620402, -0.59410362, -0.30842786, 0.54130752, -0.07882, -0.20294656, 0.70568312, 0.6721814, -0.028044, 0.6512739, 0.75722795, -1.55043224, -0.27954478, -0.08522111, 0.99482679, 0.33379424, -0.3630426, -0.33156176, -0.92108823, 0.59060897, -0.05438484, -0.92390538, 0.65244049, -0.6213278, 0.82398787, 0.26221064, 0.21072438, -0.44529634, 0.23773221, 0.7228993, 0.82514828, -0.50748032, 0.33344273, 0.09323166, 0.20515946, 0.07801714, -0.44518889, 0.37120208, 0.07572043, 0.44320258, -0.22717027, -0.10482123, 0.26398932, -0.03062848, 0.70255935, 0.55667808, 1.13265819, -0.49028272, -0.36266301, 0.01647426, -1.11018706, 0.94490753, -0.4591503, 0.2275123, -0.59097867, 0.09167088, -0.47469073, 0.48256224, -0.85543583, 0.90945703, -0.32781463, -0.07944888, -0.38965299, 0.17363449, -0.33493807, 1.19614678, 1.52397341, -0.5126045, -0.92904639, -0.16536019, -0.07437995, -0.06630058, -0.05920561, -0.91556489, 0.27830692, -0.04637011, -1.268791, 0.71808597, -0.87078319, 0.33912577, -0.28772744, 0.8211476, 0.05298478, -0.10813952, 0.57768677, 0.84899942, -0.59795597, -0.66052374, 0.76742469, -0.7931425, -0.10961566, 0.09829366, -0.34175491, 0.51519788, -1.40315846, -0.16702435, -0.51209354, -0.38183541, 0.60264025, -0.10498202, -0.38149483, 0.33112388, 0.48871427, -0.22567533, -0.7913914, -0.02635052, 0.74428098, -0.76697084, -0.64660469, -0.28209903, -0.36147913, -1.26383792, -1.0025512, -0.35382618, 1.46433295, -0.77309231, -0.04454931, -1.1609705, 0.20221897, -0.02414127, -0.76231562, 0.73596926, -0.30292943, 0.02225386, -0.86552363, 1.54643087, -0.24689933, 0.31782228, 0.30385905, 0.35345317, -0.50139077, -0.26649418, -0.66252487, 0.59758983, -1.20314557, -0.00102702, -1.72954606, -0.69695597, 0.01010309, 0.07690896, -0.45218546, -0.63164826, -0.03793293, -0.30552826, 0.65476779, 0.60104735, 0.32822241, -0.35552989, 0.55512618, 0.58471448, 1.19603718, 0.50259965, -0.38864743, -0.09966946, -0.72886386, -0.78148735, 0.28832804, -0.28275472, -0.74906584, -1.31599546, 0.03450359, -0.15530443, -0.39851719, -1.43312151, 0.46560598, -0.00642272, -0.39440374, 0.22884593, 0.51599111, -0.39352526, 0.86692105, 0.03556991, -0.24389477, 0.51262709, 0.27055508, 0.38822586, -0.49411828, 0.63403343, -1.10228932, -1.1593433, -0.51061209, 1.15306232, 0.11640585, 0.44370477, -0.53130742, 0.26390809, -0.67154718, 1.40693708, -0.48723334, -0.49547427, 0.13578793, 0.24428097, -0.07702629, -0.12334438, 0.73434769, -0.34828112, 1.59163668, 0.15897032, 0.56919218, 0.77535925, 0.12950974, 0.41811662, -0.38307804, -1.92510929, -0.85514935, -0.25447702, 0.42686288, -0.15602175, -1.44877125, 0.60687618, 0.02640019, -0.05638041, -0.43861239, 0.33457765, 0.35254409, -0.20468833, -0.31108453, 0.00713026, -0.29020946, -0.46269764, -0.22214031, -0.46402655, -0.22948271, 0.87596305, 0.64690908, -1.07476093, 0.0491252, -0.50053172, -0.03114955, -0.16291113, 0.0695048, 1.14204312, 0.66589582, 0.68286839, -0.07678356, 0.49312202, -0.12123471, 0.52507097, -0.99656503, -0.37103426, -0.26655923, -0.75544704, -0.65432554, 0.50990224, 1.41448291, 0.783597, 0.4732937, 0.12736108, -1.98329906, -0.40487857, -1.08659657, 0.27248858, -0.83469585, -0.94199992, 0.63753699, -0.31288364, 0.40723314, -0.36106579, 0.45189581, -0.06192257, 0.2451347, 0.7518234, 0.73162397, -1.07409414, -0.07444491, 0.10628975, 0.11440681, 0.65798029, 0.79394028, 0.58606972, 0.45011631, 1.07236974, 0.49211977, -0.5974386, 1.08321938, 0.97710106, 1.19344415, 0.33450276, 0.14136327, 0.54938384, -0.55995131, -0.32786671, 0.4198819, -0.19464183, -1.11149979, -0.90131444, 2.48280857, 1.01865555, -0.26239437, -0.99392251, 0.60515907, -0.57263126, 0.91474912, 1.39025813, 0.78375887, 0.97426836, -0.24018025, -0.30298187]);
  const b2 = new Float64Array([0.49044545, 0.14832435, -0.10399946, 0.11030815, -0.68922647, -0.21270648, -0.94226456, -0.5901483, 0.27010855, -0.53688043, 0.57202995, -1.30302149, 0.14501043, 0.03385137, -0.41964462, 0.58487763]);
  const W3 = new Float64Array([-1.11992536, 4.53139432, -2.89361341, 6.23758128, -3.76610992, -0.38554416, 3.30262714, -3.16179178, -1.75913688, -2.48264956, 0.47743097, 1.09828654, -0.29926214, -2.06160024, -0.86656337, 3.74605644, 0.02934477, 5.44329593, 0.99398807, 9.04172845, -0.47661728, 0.88628877, 3.61989566, -2.00428394, -1.44359882, -1.83289812, -0.19174532, 1.37806327, 0.96615007, -0.30643046, 0.31657145, 1.23013555, -1.37346395, 0.49040335, -1.61664998, 2.16740278, -1.50815878, 0.20102948, 0.88683403, 1.32886478, 0.25889118, -2.7626618, -0.19922588, 1.21432, -4.40024236, -0.95583138, -2.19231325, -0.42404666, -0.88370609, 0.61475744, -0.15560042, 5.95764335, 4.11236093, 2.54421855, 1.4069629, 5.40031324, -0.9192656, 4.0505183, 2.05173544, -0.32517741, 0.84071744, -2.92066841, 0.15832721, -5.12158492, -1.00964129, 7.03878065, -3.93775312, 10.14645857, -5.36920526, -0.59732656, 0.0000242, -0.45126131, -4.70117446, -0.11856551, 3.28501056, 2.68392719, -0.7721146, 0.70172966, -1.35528559, 0.14938389]);
  const b3 = new Float64Array([0.04730517, 0.60743675, -0.15742229, -0.44259557, -0.95105089]);

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Float64Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Float64Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Float64Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-3"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = new Float64Array([].concat(xSelf, xEn, xAl, xBl));

  // 네트워크 파라미터
  const W1 = new Float64Array([1.16086702, 0.45401742, -0.01593306, 0.16406664, -1.44471348, -0.67984097, 0.06272919, 0.00810838, -0.58460643, -0.29896211, 0.11007025, 0.16961782, 0.66569015, -0.26033104, -0.58403305, -0.71961494, -0.36391825, -0.16436795, -0.26443623, -0.5968099, 0.06221329, 0.06544934, -0.82875078, -0.05609292, 0.65011095, 0.32939133, 0.04072446, 0.25186724, 0.23290355, 0.06281219, 0.99699044, 0.20191478, -0.04649937, 0.22625417, -0.11034798, 1.27393896, -0.76150229, -0.8635544, -0.21925316, -0.04880573, 0.15813534, 0.19932841, 1.01714773, 0.30365795, 0.96540023, 0.11658218, -0.62094998, -0.09308994, -0.56460527, -0.4336218, 0.29794669, 0.00669034, 0.48326163, 0.56174434, 0.54996855, -0.93609383, -1.6931748, 0.22584619, -0.13784087, -1.31519507, -0.68030321, -0.36889185, 0.08940414, 0.02749305, 0.38713431, -0.91272947, -0.14308387, 0.10915428, -0.72326627, -0.37677676, -0.08072782, 0.59875187, -0.13658641, 0.30562405, -0.38887482, -0.98198801, 0.81044668, -0.78336721, -0.80018618, -0.31511136, -0.27351081, -0.46975315, 0.55776256, 0.85781492, 0.12019162, 0.02701763, -0.09369403, 0.48170794, 0.36172632, 1.24365736, -0.13260142, -1.52352339, 0.15109771, -0.61446944, 0.36094656, 0.05202249, -0.38022846, -1.05829891, 0.44929253, 0.57618019, 0.58184458, -0.82668472, 0.64381304, 1.00833486, -0.27968269, -1.16264133, -0.37894766, -0.97466413, 0.08924598, 0.50523106, 1.87124699, 1.83523539, 0.90369879, -0.49695994, -0.73596613, -1.27897492, -0.38795678, 0.4159936, 0.32760904, 0.31689439, -0.8703111, -0.29733383, -0.72120939, -0.36477211, 0.48973045, -0.64162434, -0.17304323, -0.6994659, -1.35170662, 0.74770919, 0.30243538, 0.30617512, -0.03050566, -0.3233877, 0.10660731, -0.00333878, -0.43127077, 1.30151012, 0.00387886, -0.09469426, 0.56956096, -1.31669778, -1.01776947, 0.14802802, -0.04577162, -0.26193228, 0.28633774, -0.06325617, 1.10292621, -0.07619031, -0.63584017, 1.14766394, 0.25591626, 0.7069892, 0.11372392, -0.98768697, 0.11969738, -1.01995703, -0.3506455, -0.0467716, -0.13806299, 0.42895311, 0.33598468, -0.41438213, 0.67137576, -0.8746665, 0.52521327, -0.7833527, -0.83115591, 0.10322272, 0.24795352, 0.67960129, 0.48128904, -1.00160012, -0.34381929, -0.11012828, -0.14070958, -1.73900748, 0.72594448, -0.76020488, 0.62884411, 0.11877309, -0.39077049, -0.58863772, 0.84551336, -0.11473078, 0.09951373, -0.39560461, -0.41852265, -0.32501324, 0.7776738, 0.45697128, -0.28558617, -0.09704501, -0.39521746, -0.83920598, 0.69260479, -1.14155343, 0.37013403, -0.2034506, -0.4489779, 0.53987859, -0.36055087, 0.05158537, -1.30033754, -0.64110242, -0.36874535, 0.44696835, 0.54902682, 0.72053128, 0.73604817, 0.7636507, 0.16890671, -0.02332019, 0.55566605, -0.2851684, 0.29689583, 0.23660206, -0.38717438, -0.22605389, -0.07092057, -0.31870926, -0.07906894, -0.2109383, -0.38327225, 0.63438534, 0.12765305, -0.37270295, 0.40481945, -0.93951494, -1.26443663, 1.09536072, -0.04889285, -0.66873671, -0.01267788, 1.21869488, -0.87239176, -0.15712428, -0.27733631, -0.91299076, -0.5714763, -2.14484416, -1.41593189, 0.11706559, 0.20479337, -0.75803695, -0.36531284, -0.85017932, -0.32848005, 0.09529417, -0.82630194, 0.04991336, -0.09534916, -0.80282786, -0.56850584, -1.24345825, -1.10089051, 0.2203343, -0.60116796, -0.11097936, -0.14311113, -0.21207631, 0.3535344, 0.45356577, -0.74389534, 0.92579172, 0.04597104, -0.06952132, 1.51910342, -1.20419546, -0.34095466, -0.86512096, -0.65965474, -0.04129611, 0.11360989, 0.33624902, -0.13595207, -0.08719876, -1.0329773, -0.55058183, -0.9472039, -0.37246928, 0.75140574, -0.54056671, -0.51109925, -0.13291926, 0.3840631, 0.66007861, 0.54286724, 0.25171705, 0.13292041, -0.21974529, -0.15580825, 0.02619065, 0.77795744, -0.12991554, 0.04318976, -0.38708442, 0.01757154, 0.0291313, 0.61835127, 0.77367978, -0.03174497, -0.39667814, 0.1199593, -0.31889607, -2.03711826, 0.08424961, 0.57123952, 0.7545686, -0.71487463, -0.70036889, 0.45774308, 0.58922809, -0.09836251, 0.04810853, 0.06526479, 0.69769606, 0.49778227, 0.01350059, -0.52018922, 0.00923191, 0.13094283, 0.37774463, -0.77697205, -0.84999367, 0.51282004, -0.49711115, -0.21733004, -0.2481893, 0.8059767, 0.88175241, 0.35072886, 1.34160237, 1.06666083, 1.2207679, 0.40964663, 0.20771024, -1.3773647, 0.34010567, 1.17758313, -0.09336074, 0.31999316, 0.11416906, -0.82756758, 2.0376495, 0.03660808, 1.14994647, 0.62363955, -1.09884732, 0.72934064, -0.05143806, 0.01239782, -1.005048, -0.2314267, 0.24408043, 0.33947186, 1.01110219, -0.18420296, -0.27977509, -0.99013518, -0.18804744, -1.53258886, -0.21522777, 0.39032316, -0.68295017, -0.15647297, 1.04648212, 0.33073313, -0.99314643, 0.28778317, 1.23742316, -0.8159566, 1.56674052, -0.21317538, -0.30768919, 0.71472878, 0.08665315, -0.56722215, 0.25377158, 0.68508894, -0.35473352, -0.08253754, -0.22723459, 1.10059747, -0.62881945, 0.25384721, 0.25234513, -0.48941471, 0.576745, 1.19376593, -0.93930334, 1.04895022, 0.93967111, -0.25368214, -0.32751746, -0.09581665, -0.38326827, 1.31193455, 0.43456618, -0.00147016, -0.65658302, 2.99298065, -0.83586729, 0.22237639, -0.41999931, -0.92540094, -0.05389802, 0.2653403, 0.93888063, 0.31573814, 0.32562754, -1.14293588, -0.4140554, 0.43485158, -0.40664181, 0.14655501, 0.6383114, -0.313888, 0.79044605, 0.35270861, 0.11537321, -0.49391459, 0.65480588, 0.47773779, -1.08749446, 0.06484172, 0.06666529, 0.61169475, -0.69780553, 1.07121735, 0.69516626, 0.51173459, 1.50380326, 0.6454491, 0.67539381, -0.37438603, 1.43421095, -0.39305273, -0.72548708, -0.47548751, -0.43766228, 0.21429306, 1.43047044, -0.40381818, 0.00795012, 0.02997096, 0.58388169, -0.40245655, 0.6131839, -0.27581648, 0.5666807, -0.23377305, 1.2885485, -1.04283389, -0.46101071, 0.3611301, 0.12050271, 0.0049348, 1.08960369, 0.36405158, -0.56468039, -1.09066012, -0.31926477, -0.1972565, -0.5980025, 0.95270623, 1.51640893, -0.20515308, 0.04240382, 1.195249, 0.20710055, -0.82669571, -0.28712219, 0.30362276, 0.16034049, -0.92023867, -0.77361715, 1.18455135, 0.01688821, -0.20041185, -0.69134363, 0.20930622, 0.19286829, 0.87262986, 0.4991553, -0.19489766, -0.02531507, -0.5260548, -0.59774647, 0.12256422, -0.4934823, 0.64799214, 0.20577249, -0.93890704, -0.80421991, -0.42317845, -0.01476863, 0.45327845, -0.2882091, 0.37536435, -0.51498041, 0.15247781, 0.80657302, 0.69462779, 0.62940653, -0.10764285, -0.23848797, 0.28198195, -0.61475637, 1.39833164, -0.03668195, -0.39429582, -0.20501472, -0.59773825, -1.07196702, 1.40425208, 0.57192025, -0.40771664, 0.19515251, -0.87620034, -0.27866708, -0.45870696, 0.50583381, 1.24554625, 1.1116707, -0.32322129, 0.24284652, 0.00179021, -0.09650273, -0.93616158, -1.05441676, -0.69705983, -0.50295876, 0.6242088, -1.16010549, 0.28982143, -0.12720418, -0.70617804, -0.38295051, -0.33786862, 1.25194374, 1.83610358, -0.25231712, -0.3748979, 0.17497663, 0.42398335, -0.38929575, -0.3216867, -1.05164369, -0.9118069, 0.703489, -0.03758412, -0.23815471, 0.07255176, -1.68574302, 0.25883816, 0.06989032, -0.93124178, 0.20902762, 0.38173734, 0.13870243, -0.23427843, -0.14115152, 0.47605078, 0.4454979, 0.45597094, -0.1983945, -0.7477611, 0.40125748, -1.06690213, 0.45920684, 0.60075469, -0.07964625, -0.3354177, -0.37211442, -0.61793865, 1.43228787, -0.65250606, -1.10042336, -0.13492828, 0.05632365, -0.61567626, -1.55302321, 1.88478626, -0.98103863, -0.48086189, 1.13282848, 0.69127848, 0.77299591, 0.34796462, -0.50901509, -1.14569059, -0.77596236, 0.66750389, 0.26099538, -0.556026, -0.22851248, -0.34709766, -1.10579648, -1.08899645, 0.44643478, -2.36167688, 0.67997586, -1.4068962, 0.22963969, 0.25963779, -1.05276731, -1.69805801, -0.84405611, 0.72977312, 0.59938034, 0.54898742, 1.80606045, -0.30971488, 0.84102942, 0.09793618, 0.48754923, 1.20838508, -0.62451834, 0.09788401, 0.7467389, -0.08779934, 0.73816975, -0.22347306, 0.30062027, -1.11447533, 1.54847941, -0.66364917, 0.35511818, -0.07139212, -0.38955982, -0.59200115, 0.37394571, -1.33925108, 0.9380908, 0.28080086, 1.00623516, 0.5502759, 1.16385904, -0.11462171, 0.14345689, -0.53444457, 0.097352, -0.14986276, 0.78204915, 0.20525447, -0.67473325, 0.66499061, -0.1516195, -0.21933897, 0.12057362, 0.41203389, 0.98277055, -1.23621804, 1.05831904, -0.08574682, 0.62202105, 0.65528091, -0.76004287, -0.03058533, -0.31154378, -1.13694933, 0.36976683, -0.08363774, -0.32942447, 0.07587069, 0.19027874, 0.11281399, 0.17220612, 0.55086702, 1.21881242, 0.2014665, 1.15660021, -0.09822483, 0.02500986, -1.2307767, 0.65041515, 0.04411311, 0.37882355, -0.58894418, -0.03076014, -1.27614444, -0.27489264, 0.53902593, 0.18870826, -0.37961904, 0.78318519, 0.94519992, -0.03050743, -0.97358773, 0.39778298, -0.19134397, 0.16464383, 0.18019496, -0.76480353, 0.32393955, 1.18116199, -0.20294073, -0.75705158, -0.55021636, -1.64067941, 0.8437686, -0.01123728, 0.14878633, 0.14249866, 0.10681131, -0.4507022, 0.53426259, -1.68412461, -0.29220864, -1.41776781, -0.50033608, -0.34632478, 0.18044948, -0.82627421, 0.14019874, -0.33185464, 0.32046232, -0.10981499, -0.33977175, 1.02563296, 0.66537243, -0.87231143, 0.72871676, -0.65158434, -0.9203776, 0.05668717, -0.55850094, -0.50904144, 0.57538706, -0.82225195, 0.03662629, 0.08782363, -1.02716603, 0.22578043, -0.52152126, 0.11340605, 0.3918442, 0.33330609, -1.32654307, -0.76009881, -0.71566889, -0.22165534, 0.92906845, -0.55708918, -0.55462621, -1.54555777, -0.14415664, -0.1848873, -0.26021055, -0.41767918, 0.19625378, 1.04737573, 0.00697196, -0.70901659, -0.00480012, 0.87530084, -0.10824349, -0.00282898, 0.25111284, -0.1917045, 0.58569746, 0.2612749, -0.8745288, 0.26737458, 0.6995127, 0.31654037, 0.52142329, 0.38912296, 0.71674512, -0.25948829, -1.01074201, -0.48554032, -1.36646042, 1.17896041, -0.82315626, -0.00843667, 0.03083474, -0.96222985, 0.48064918, -0.62582194, -0.71741746, -1.43552686, 0.19578284, 2.03117411, -0.95849408, 0.7839609, -1.29579605, -1.00732767, -0.54791046, -0.28679079, 0.65720846, -0.47495962, -0.17917459, 0.75350098, -0.99669408, 0.25540013, -1.18001701, 0.56036715, -0.04207052, 1.08761316, 0.10036886, 0.57481806, 0.25946003, 0.53901969, 0.42514115, -0.43490003, 0.17413253, 0.98927462, -1.03232907, 0.1819374, -0.70176453, 0.31333646, 0.33080943, 0.39121941, -0.62672335, -0.65054383, -0.04517418, -0.12088381, -0.01804329, 0.05683406, 0.45080333, 1.47798919, -0.51680808, 0.73296181, -1.48945951, 0.74404927, 0.75088802, 0.17704742, -0.51834999, 0.04198799, -0.13868619, -0.05838725, -0.49027223, 0.27638584, 2.02584813, -1.25148804, 0.24972321, -0.19335215, 0.62556605, -0.2514363, 0.22177411, 0.63826601, -0.54012802, -0.10707163, 0.93831171, 1.12989518, 0.21530634, 1.21067474, 0.13818377, -0.69262038, 0.02886073, 0.29469636, 0.1480988, -1.29583559, -0.58162885, 0.81207667, -0.37826294, 0.46417966, 0.49384449, -0.37389535, 0.39729082, 0.08511844, -0.97422482, 0.73575366, -0.66093956, -0.18330258, 0.43329887, -0.08506892, 0.58911792, -0.06151641, -0.49245219, 0.49205393, 0.121273, -0.29452151, -0.48359684, -0.22048145, 0.61008063, 0.49397883, 0.67811953, -0.44626817, 0.71946891, -0.42557979, 0.40210063, 0.63631853, -1.02046362, 0.92248358, 0.96123277, 0.72412298, -0.8060785, -0.21486891, -1.37027589, 0.52257695, -0.10714835, -1.08687105, -0.61936232, -0.84997842, 1.05491477, 0.37951007, 0.52192154, 0.65894867, 0.27851039, -0.55289659, -1.08079426, -0.26859139, -0.16033914, -0.73331905, 0.51154261, -1.39762869, -0.35988197, 0.32214246, 0.55092736, -0.75884738, -0.11575132, -0.35883372, -0.01573113, 1.29988618, 1.17732022, 0.010014, 0.40095138, 0.21447211, 0.17495981, -1.05637666, -0.1781282, -0.29554115, -0.41499499, 0.21466573, 0.13314829, -0.32754156, -0.54871312, -0.6182757, -1.10433068, -0.28020414, -0.20971262, 0.90851942, 0.07758443, -0.62777127, -0.03705823, -0.7843605, 0.35139392, -0.46936848, -0.85024895, 0.33510784, 0.24013882, 0.52902027, 0.11585872, 0.48151824, -0.28568003, -1.26636815, 0.65577621, -0.07577273, -0.28189863, -0.11901846, 0.13208514, 0.19101085, -0.4680898, -1.22646417, 1.28397173, -0.78566114, -1.56642036, -0.84912138, 1.25314465, 0.38590742, 0.27558469, -0.59376337, 0.54032141, 0.87125474, -1.27068735, 1.34807346, 0.13984405, 0.09131003, -0.84027738, -0.38492104, -0.01261329, -0.39885724, 1.13270869, -1.02046083, 1.00566987, 0.02963152, 0.17467701, -0.53336961, -0.18238527, -1.14414412, -0.01182096, 0.25307798, -0.20359748, -0.0695521, -0.13440645, 0.26750904, -0.14119641, 0.35248018, 0.39799964, 0.04569278, 1.80155198, -1.33543038, -0.16360659, 0.00202509, 0.9023821, 0.1299744, 0.01393592, -0.44448482, 0.52724335, 0.49014318, 0.84315736, -1.65197569, 1.05383237, -0.33121668, 0.08938957, -0.23889197, -0.09618305, 0.86934385, 1.27300009, 1.59577239, 0.52001913, 0.2659651, 0.75374924, -0.31495881, -0.94089639, -0.39707486, 1.08004452, -0.78486726, 0.1657878, -1.10838613, -0.30296491, 0.02727271, 1.11018468, 0.14214768, 0.53123477, -0.65260925, 0.38206853, -0.31400402]);
  const b1 = new Float64Array([-0.3769938, -0.45708039, 0.1840647, -0.49859403, -1.19755413, -0.48706846, 0.14640391, 0.8514539, 0.53820686, 0.69263349, 0.38994627, 0.8531916, -0.27439562, 0.4009886, -0.6740462, -0.27949024, 0.29455258, -0.00034507, 0.53743342, 0.97994221, 1.02223938, 0.41637915, 0.11570332, 0.0702926]);
  const W2 = new Float64Array([-0.36393361, 0.76600759, -0.32311301, -0.37044924, -0.01863374, 0.79199933, -0.2163266, 1.20070149, -1.02148294, 0.0083419, 0.06359666, 1.11031189, 0.42117964, 0.27628324, -0.46810193, 0.24248746, 0.07207636, 0.09156226, -0.11509207, 0.35024306, -0.44417629, -0.05339462, 0.26774132, -0.27254216, 0.09509289, -0.65469355, -0.83629374, 0.45104715, 0.22883103, -0.90283069, -1.15603583, 0.09833863, 0.29237483, 0.47836261, -2.4460134, -0.56021614, -0.26992881, 0.43201711, -0.02180406, -0.51424737, -1.46169835, 0.30544392, 1.81139699, -0.07617088, 1.58025579, 0.74848514, 0.02369266, 0.13041428, -1.63889131, -0.52996167, 0.42526035, 0.41926151, -0.144258, -0.28895869, -0.02232091, 0.53920144, -0.14787584, -0.5741529, -0.62076608, 0.2941718, -0.47452249, -0.00123355, 0.4041733, -1.25805765, 0.22910861, -0.73952017, 0.09727384, -0.16606013, 0.04156928, 0.91861792, -1.42002961, -0.81805485, 0.57443283, 0.86570567, -0.19932989, -0.49271031, -1.63179525, -0.6927011, 0.89972923, 0.40743626, -0.75087564, 1.16170509, -0.41986334, 0.39460286, 0.89749259, 0.38983426, -0.47620402, -0.59410362, -0.30842786, 0.54130752, -0.07882, -0.20294656, 0.70568312, 0.6721814, -0.028044, 0.6512739, 0.75722795, -1.55043224, -0.27954478, -0.08522111, 0.99482679, 0.33379424, -0.3630426, -0.33156176, -0.92108823, 0.59060897, -0.05438484, -0.92390538, 0.65244049, -0.6213278, 0.82398787, 0.26221064, 0.21072438, -0.44529634, 0.23773221, 0.7228993, 0.82514828, -0.50748032, 0.33344273, 0.09323166, 0.20515946, 0.07801714, -0.44518889, 0.37120208, 0.07572043, 0.44320258, -0.22717027, -0.10482123, 0.26398932, -0.03062848, 0.70255935, 0.55667808, 1.13265819, -0.49028272, -0.36266301, 0.01647426, -1.11018706, 0.94490753, -0.4591503, 0.2275123, -0.59097867, 0.09167088, -0.47469073, 0.48256224, -0.85543583, 0.90945703, -0.32781463, -0.07944888, -0.38965299, 0.17363449, -0.33493807, 1.19614678, 1.52397341, -0.5126045, -0.92904639, -0.16536019, -0.07437995, -0.06630058, -0.05920561, -0.91556489, 0.27830692, -0.04637011, -1.268791, 0.71808597, -0.87078319, 0.33912577, -0.28772744, 0.8211476, 0.05298478, -0.10813952, 0.57768677, 0.84899942, -0.59795597, -0.66052374, 0.76742469, -0.7931425, -0.10961566, 0.09829366, -0.34175491, 0.51519788, -1.40315846, -0.16702435, -0.51209354, -0.38183541, 0.60264025, -0.10498202, -0.38149483, 0.33112388, 0.48871427, -0.22567533, -0.7913914, -0.02635052, 0.74428098, -0.76697084, -0.64660469, -0.28209903, -0.36147913, -1.26383792, -1.0025512, -0.35382618, 1.46433295, -0.77309231, -0.04454931, -1.1609705, 0.20221897, -0.02414127, -0.76231562, 0.73596926, -0.30292943, 0.02225386, -0.86552363, 1.54643087, -0.24689933, 0.31782228, 0.30385905, 0.35345317, -0.50139077, -0.26649418, -0.66252487, 0.59758983, -1.20314557, -0.00102702, -1.72954606, -0.69695597, 0.01010309, 0.07690896, -0.45218546, -0.63164826, -0.03793293, -0.30552826, 0.65476779, 0.60104735, 0.32822241, -0.35552989, 0.55512618, 0.58471448, 1.19603718, 0.50259965, -0.38864743, -0.09966946, -0.72886386, -0.78148735, 0.28832804, -0.28275472, -0.74906584, -1.31599546, 0.03450359, -0.15530443, -0.39851719, -1.43312151, 0.46560598, -0.00642272, -0.39440374, 0.22884593, 0.51599111, -0.39352526, 0.86692105, 0.03556991, -0.24389477, 0.51262709, 0.27055508, 0.38822586, -0.49411828, 0.63403343, -1.10228932, -1.1593433, -0.51061209, 1.15306232, 0.11640585, 0.44370477, -0.53130742, 0.26390809, -0.67154718, 1.40693708, -0.48723334, -0.49547427, 0.13578793, 0.24428097, -0.07702629, -0.12334438, 0.73434769, -0.34828112, 1.59163668, 0.15897032, 0.56919218, 0.77535925, 0.12950974, 0.41811662, -0.38307804, -1.92510929, -0.85514935, -0.25447702, 0.42686288, -0.15602175, -1.44877125, 0.60687618, 0.02640019, -0.05638041, -0.43861239, 0.33457765, 0.35254409, -0.20468833, -0.31108453, 0.00713026, -0.29020946, -0.46269764, -0.22214031, -0.46402655, -0.22948271, 0.87596305, 0.64690908, -1.07476093, 0.0491252, -0.50053172, -0.03114955, -0.16291113, 0.0695048, 1.14204312, 0.66589582, 0.68286839, -0.07678356, 0.49312202, -0.12123471, 0.52507097, -0.99656503, -0.37103426, -0.26655923, -0.75544704, -0.65432554, 0.50990224, 1.41448291, 0.783597, 0.4732937, 0.12736108, -1.98329906, -0.40487857, -1.08659657, 0.27248858, -0.83469585, -0.94199992, 0.63753699, -0.31288364, 0.40723314, -0.36106579, 0.45189581, -0.06192257, 0.2451347, 0.7518234, 0.73162397, -1.07409414, -0.07444491, 0.10628975, 0.11440681, 0.65798029, 0.79394028, 0.58606972, 0.45011631, 1.07236974, 0.49211977, -0.5974386, 1.08321938, 0.97710106, 1.19344415, 0.33450276, 0.14136327, 0.54938384, -0.55995131, -0.32786671, 0.4198819, -0.19464183, -1.11149979, -0.90131444, 2.48280857, 1.01865555, -0.26239437, -0.99392251, 0.60515907, -0.57263126, 0.91474912, 1.39025813, 0.78375887, 0.97426836, -0.24018025, -0.30298187]);
  const b2 = new Float64Array([0.49044545, 0.14832435, -0.10399946, 0.11030815, -0.68922647, -0.21270648, -0.94226456, -0.5901483, 0.27010855, -0.53688043, 0.57202995, -1.30302149, 0.14501043, 0.03385137, -0.41964462, 0.58487763]);
  const W3 = new Float64Array([-1.11992536, 4.53139432, -2.89361341, 6.23758128, -3.76610992, -0.38554416, 3.30262714, -3.16179178, -1.75913688, -2.48264956, 0.47743097, 1.09828654, -0.29926214, -2.06160024, -0.86656337, 3.74605644, 0.02934477, 5.44329593, 0.99398807, 9.04172845, -0.47661728, 0.88628877, 3.61989566, -2.00428394, -1.44359882, -1.83289812, -0.19174532, 1.37806327, 0.96615007, -0.30643046, 0.31657145, 1.23013555, -1.37346395, 0.49040335, -1.61664998, 2.16740278, -1.50815878, 0.20102948, 0.88683403, 1.32886478, 0.25889118, -2.7626618, -0.19922588, 1.21432, -4.40024236, -0.95583138, -2.19231325, -0.42404666, -0.88370609, 0.61475744, -0.15560042, 5.95764335, 4.11236093, 2.54421855, 1.4069629, 5.40031324, -0.9192656, 4.0505183, 2.05173544, -0.32517741, 0.84071744, -2.92066841, 0.15832721, -5.12158492, -1.00964129, 7.03878065, -3.93775312, 10.14645857, -5.36920526, -0.59732656, 0.0000242, -0.45126131, -4.70117446, -0.11856551, 3.28501056, 2.68392719, -0.7721146, 0.70172966, -1.35528559, 0.14938389]);
  const b3 = new Float64Array([0.04730517, 0.60743675, -0.15742229, -0.44259557, -0.95105089]);

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Float64Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Float64Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Float64Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-4"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = new Float64Array([].concat(xSelf, xEn, xAl, xBl));

  // 네트워크 파라미터
  const W1 = new Float64Array([1.16086702, 0.45401742, -0.01593306, 0.16406664, -1.44471348, -0.67984097, 0.06272919, 0.00810838, -0.58460643, -0.29896211, 0.11007025, 0.16961782, 0.66569015, -0.26033104, -0.58403305, -0.71961494, -0.36391825, -0.16436795, -0.26443623, -0.5968099, 0.06221329, 0.06544934, -0.82875078, -0.05609292, 0.65011095, 0.32939133, 0.04072446, 0.25186724, 0.23290355, 0.06281219, 0.99699044, 0.20191478, -0.04649937, 0.22625417, -0.11034798, 1.27393896, -0.76150229, -0.8635544, -0.21925316, -0.04880573, 0.15813534, 0.19932841, 1.01714773, 0.30365795, 0.96540023, 0.11658218, -0.62094998, -0.09308994, -0.56460527, -0.4336218, 0.29794669, 0.00669034, 0.48326163, 0.56174434, 0.54996855, -0.93609383, -1.6931748, 0.22584619, -0.13784087, -1.31519507, -0.68030321, -0.36889185, 0.08940414, 0.02749305, 0.38713431, -0.91272947, -0.14308387, 0.10915428, -0.72326627, -0.37677676, -0.08072782, 0.59875187, -0.13658641, 0.30562405, -0.38887482, -0.98198801, 0.81044668, -0.78336721, -0.80018618, -0.31511136, -0.27351081, -0.46975315, 0.55776256, 0.85781492, 0.12019162, 0.02701763, -0.09369403, 0.48170794, 0.36172632, 1.24365736, -0.13260142, -1.52352339, 0.15109771, -0.61446944, 0.36094656, 0.05202249, -0.38022846, -1.05829891, 0.44929253, 0.57618019, 0.58184458, -0.82668472, 0.64381304, 1.00833486, -0.27968269, -1.16264133, -0.37894766, -0.97466413, 0.08924598, 0.50523106, 1.87124699, 1.83523539, 0.90369879, -0.49695994, -0.73596613, -1.27897492, -0.38795678, 0.4159936, 0.32760904, 0.31689439, -0.8703111, -0.29733383, -0.72120939, -0.36477211, 0.48973045, -0.64162434, -0.17304323, -0.6994659, -1.35170662, 0.74770919, 0.30243538, 0.30617512, -0.03050566, -0.3233877, 0.10660731, -0.00333878, -0.43127077, 1.30151012, 0.00387886, -0.09469426, 0.56956096, -1.31669778, -1.01776947, 0.14802802, -0.04577162, -0.26193228, 0.28633774, -0.06325617, 1.10292621, -0.07619031, -0.63584017, 1.14766394, 0.25591626, 0.7069892, 0.11372392, -0.98768697, 0.11969738, -1.01995703, -0.3506455, -0.0467716, -0.13806299, 0.42895311, 0.33598468, -0.41438213, 0.67137576, -0.8746665, 0.52521327, -0.7833527, -0.83115591, 0.10322272, 0.24795352, 0.67960129, 0.48128904, -1.00160012, -0.34381929, -0.11012828, -0.14070958, -1.73900748, 0.72594448, -0.76020488, 0.62884411, 0.11877309, -0.39077049, -0.58863772, 0.84551336, -0.11473078, 0.09951373, -0.39560461, -0.41852265, -0.32501324, 0.7776738, 0.45697128, -0.28558617, -0.09704501, -0.39521746, -0.83920598, 0.69260479, -1.14155343, 0.37013403, -0.2034506, -0.4489779, 0.53987859, -0.36055087, 0.05158537, -1.30033754, -0.64110242, -0.36874535, 0.44696835, 0.54902682, 0.72053128, 0.73604817, 0.7636507, 0.16890671, -0.02332019, 0.55566605, -0.2851684, 0.29689583, 0.23660206, -0.38717438, -0.22605389, -0.07092057, -0.31870926, -0.07906894, -0.2109383, -0.38327225, 0.63438534, 0.12765305, -0.37270295, 0.40481945, -0.93951494, -1.26443663, 1.09536072, -0.04889285, -0.66873671, -0.01267788, 1.21869488, -0.87239176, -0.15712428, -0.27733631, -0.91299076, -0.5714763, -2.14484416, -1.41593189, 0.11706559, 0.20479337, -0.75803695, -0.36531284, -0.85017932, -0.32848005, 0.09529417, -0.82630194, 0.04991336, -0.09534916, -0.80282786, -0.56850584, -1.24345825, -1.10089051, 0.2203343, -0.60116796, -0.11097936, -0.14311113, -0.21207631, 0.3535344, 0.45356577, -0.74389534, 0.92579172, 0.04597104, -0.06952132, 1.51910342, -1.20419546, -0.34095466, -0.86512096, -0.65965474, -0.04129611, 0.11360989, 0.33624902, -0.13595207, -0.08719876, -1.0329773, -0.55058183, -0.9472039, -0.37246928, 0.75140574, -0.54056671, -0.51109925, -0.13291926, 0.3840631, 0.66007861, 0.54286724, 0.25171705, 0.13292041, -0.21974529, -0.15580825, 0.02619065, 0.77795744, -0.12991554, 0.04318976, -0.38708442, 0.01757154, 0.0291313, 0.61835127, 0.77367978, -0.03174497, -0.39667814, 0.1199593, -0.31889607, -2.03711826, 0.08424961, 0.57123952, 0.7545686, -0.71487463, -0.70036889, 0.45774308, 0.58922809, -0.09836251, 0.04810853, 0.06526479, 0.69769606, 0.49778227, 0.01350059, -0.52018922, 0.00923191, 0.13094283, 0.37774463, -0.77697205, -0.84999367, 0.51282004, -0.49711115, -0.21733004, -0.2481893, 0.8059767, 0.88175241, 0.35072886, 1.34160237, 1.06666083, 1.2207679, 0.40964663, 0.20771024, -1.3773647, 0.34010567, 1.17758313, -0.09336074, 0.31999316, 0.11416906, -0.82756758, 2.0376495, 0.03660808, 1.14994647, 0.62363955, -1.09884732, 0.72934064, -0.05143806, 0.01239782, -1.005048, -0.2314267, 0.24408043, 0.33947186, 1.01110219, -0.18420296, -0.27977509, -0.99013518, -0.18804744, -1.53258886, -0.21522777, 0.39032316, -0.68295017, -0.15647297, 1.04648212, 0.33073313, -0.99314643, 0.28778317, 1.23742316, -0.8159566, 1.56674052, -0.21317538, -0.30768919, 0.71472878, 0.08665315, -0.56722215, 0.25377158, 0.68508894, -0.35473352, -0.08253754, -0.22723459, 1.10059747, -0.62881945, 0.25384721, 0.25234513, -0.48941471, 0.576745, 1.19376593, -0.93930334, 1.04895022, 0.93967111, -0.25368214, -0.32751746, -0.09581665, -0.38326827, 1.31193455, 0.43456618, -0.00147016, -0.65658302, 2.99298065, -0.83586729, 0.22237639, -0.41999931, -0.92540094, -0.05389802, 0.2653403, 0.93888063, 0.31573814, 0.32562754, -1.14293588, -0.4140554, 0.43485158, -0.40664181, 0.14655501, 0.6383114, -0.313888, 0.79044605, 0.35270861, 0.11537321, -0.49391459, 0.65480588, 0.47773779, -1.08749446, 0.06484172, 0.06666529, 0.61169475, -0.69780553, 1.07121735, 0.69516626, 0.51173459, 1.50380326, 0.6454491, 0.67539381, -0.37438603, 1.43421095, -0.39305273, -0.72548708, -0.47548751, -0.43766228, 0.21429306, 1.43047044, -0.40381818, 0.00795012, 0.02997096, 0.58388169, -0.40245655, 0.6131839, -0.27581648, 0.5666807, -0.23377305, 1.2885485, -1.04283389, -0.46101071, 0.3611301, 0.12050271, 0.0049348, 1.08960369, 0.36405158, -0.56468039, -1.09066012, -0.31926477, -0.1972565, -0.5980025, 0.95270623, 1.51640893, -0.20515308, 0.04240382, 1.195249, 0.20710055, -0.82669571, -0.28712219, 0.30362276, 0.16034049, -0.92023867, -0.77361715, 1.18455135, 0.01688821, -0.20041185, -0.69134363, 0.20930622, 0.19286829, 0.87262986, 0.4991553, -0.19489766, -0.02531507, -0.5260548, -0.59774647, 0.12256422, -0.4934823, 0.64799214, 0.20577249, -0.93890704, -0.80421991, -0.42317845, -0.01476863, 0.45327845, -0.2882091, 0.37536435, -0.51498041, 0.15247781, 0.80657302, 0.69462779, 0.62940653, -0.10764285, -0.23848797, 0.28198195, -0.61475637, 1.39833164, -0.03668195, -0.39429582, -0.20501472, -0.59773825, -1.07196702, 1.40425208, 0.57192025, -0.40771664, 0.19515251, -0.87620034, -0.27866708, -0.45870696, 0.50583381, 1.24554625, 1.1116707, -0.32322129, 0.24284652, 0.00179021, -0.09650273, -0.93616158, -1.05441676, -0.69705983, -0.50295876, 0.6242088, -1.16010549, 0.28982143, -0.12720418, -0.70617804, -0.38295051, -0.33786862, 1.25194374, 1.83610358, -0.25231712, -0.3748979, 0.17497663, 0.42398335, -0.38929575, -0.3216867, -1.05164369, -0.9118069, 0.703489, -0.03758412, -0.23815471, 0.07255176, -1.68574302, 0.25883816, 0.06989032, -0.93124178, 0.20902762, 0.38173734, 0.13870243, -0.23427843, -0.14115152, 0.47605078, 0.4454979, 0.45597094, -0.1983945, -0.7477611, 0.40125748, -1.06690213, 0.45920684, 0.60075469, -0.07964625, -0.3354177, -0.37211442, -0.61793865, 1.43228787, -0.65250606, -1.10042336, -0.13492828, 0.05632365, -0.61567626, -1.55302321, 1.88478626, -0.98103863, -0.48086189, 1.13282848, 0.69127848, 0.77299591, 0.34796462, -0.50901509, -1.14569059, -0.77596236, 0.66750389, 0.26099538, -0.556026, -0.22851248, -0.34709766, -1.10579648, -1.08899645, 0.44643478, -2.36167688, 0.67997586, -1.4068962, 0.22963969, 0.25963779, -1.05276731, -1.69805801, -0.84405611, 0.72977312, 0.59938034, 0.54898742, 1.80606045, -0.30971488, 0.84102942, 0.09793618, 0.48754923, 1.20838508, -0.62451834, 0.09788401, 0.7467389, -0.08779934, 0.73816975, -0.22347306, 0.30062027, -1.11447533, 1.54847941, -0.66364917, 0.35511818, -0.07139212, -0.38955982, -0.59200115, 0.37394571, -1.33925108, 0.9380908, 0.28080086, 1.00623516, 0.5502759, 1.16385904, -0.11462171, 0.14345689, -0.53444457, 0.097352, -0.14986276, 0.78204915, 0.20525447, -0.67473325, 0.66499061, -0.1516195, -0.21933897, 0.12057362, 0.41203389, 0.98277055, -1.23621804, 1.05831904, -0.08574682, 0.62202105, 0.65528091, -0.76004287, -0.03058533, -0.31154378, -1.13694933, 0.36976683, -0.08363774, -0.32942447, 0.07587069, 0.19027874, 0.11281399, 0.17220612, 0.55086702, 1.21881242, 0.2014665, 1.15660021, -0.09822483, 0.02500986, -1.2307767, 0.65041515, 0.04411311, 0.37882355, -0.58894418, -0.03076014, -1.27614444, -0.27489264, 0.53902593, 0.18870826, -0.37961904, 0.78318519, 0.94519992, -0.03050743, -0.97358773, 0.39778298, -0.19134397, 0.16464383, 0.18019496, -0.76480353, 0.32393955, 1.18116199, -0.20294073, -0.75705158, -0.55021636, -1.64067941, 0.8437686, -0.01123728, 0.14878633, 0.14249866, 0.10681131, -0.4507022, 0.53426259, -1.68412461, -0.29220864, -1.41776781, -0.50033608, -0.34632478, 0.18044948, -0.82627421, 0.14019874, -0.33185464, 0.32046232, -0.10981499, -0.33977175, 1.02563296, 0.66537243, -0.87231143, 0.72871676, -0.65158434, -0.9203776, 0.05668717, -0.55850094, -0.50904144, 0.57538706, -0.82225195, 0.03662629, 0.08782363, -1.02716603, 0.22578043, -0.52152126, 0.11340605, 0.3918442, 0.33330609, -1.32654307, -0.76009881, -0.71566889, -0.22165534, 0.92906845, -0.55708918, -0.55462621, -1.54555777, -0.14415664, -0.1848873, -0.26021055, -0.41767918, 0.19625378, 1.04737573, 0.00697196, -0.70901659, -0.00480012, 0.87530084, -0.10824349, -0.00282898, 0.25111284, -0.1917045, 0.58569746, 0.2612749, -0.8745288, 0.26737458, 0.6995127, 0.31654037, 0.52142329, 0.38912296, 0.71674512, -0.25948829, -1.01074201, -0.48554032, -1.36646042, 1.17896041, -0.82315626, -0.00843667, 0.03083474, -0.96222985, 0.48064918, -0.62582194, -0.71741746, -1.43552686, 0.19578284, 2.03117411, -0.95849408, 0.7839609, -1.29579605, -1.00732767, -0.54791046, -0.28679079, 0.65720846, -0.47495962, -0.17917459, 0.75350098, -0.99669408, 0.25540013, -1.18001701, 0.56036715, -0.04207052, 1.08761316, 0.10036886, 0.57481806, 0.25946003, 0.53901969, 0.42514115, -0.43490003, 0.17413253, 0.98927462, -1.03232907, 0.1819374, -0.70176453, 0.31333646, 0.33080943, 0.39121941, -0.62672335, -0.65054383, -0.04517418, -0.12088381, -0.01804329, 0.05683406, 0.45080333, 1.47798919, -0.51680808, 0.73296181, -1.48945951, 0.74404927, 0.75088802, 0.17704742, -0.51834999, 0.04198799, -0.13868619, -0.05838725, -0.49027223, 0.27638584, 2.02584813, -1.25148804, 0.24972321, -0.19335215, 0.62556605, -0.2514363, 0.22177411, 0.63826601, -0.54012802, -0.10707163, 0.93831171, 1.12989518, 0.21530634, 1.21067474, 0.13818377, -0.69262038, 0.02886073, 0.29469636, 0.1480988, -1.29583559, -0.58162885, 0.81207667, -0.37826294, 0.46417966, 0.49384449, -0.37389535, 0.39729082, 0.08511844, -0.97422482, 0.73575366, -0.66093956, -0.18330258, 0.43329887, -0.08506892, 0.58911792, -0.06151641, -0.49245219, 0.49205393, 0.121273, -0.29452151, -0.48359684, -0.22048145, 0.61008063, 0.49397883, 0.67811953, -0.44626817, 0.71946891, -0.42557979, 0.40210063, 0.63631853, -1.02046362, 0.92248358, 0.96123277, 0.72412298, -0.8060785, -0.21486891, -1.37027589, 0.52257695, -0.10714835, -1.08687105, -0.61936232, -0.84997842, 1.05491477, 0.37951007, 0.52192154, 0.65894867, 0.27851039, -0.55289659, -1.08079426, -0.26859139, -0.16033914, -0.73331905, 0.51154261, -1.39762869, -0.35988197, 0.32214246, 0.55092736, -0.75884738, -0.11575132, -0.35883372, -0.01573113, 1.29988618, 1.17732022, 0.010014, 0.40095138, 0.21447211, 0.17495981, -1.05637666, -0.1781282, -0.29554115, -0.41499499, 0.21466573, 0.13314829, -0.32754156, -0.54871312, -0.6182757, -1.10433068, -0.28020414, -0.20971262, 0.90851942, 0.07758443, -0.62777127, -0.03705823, -0.7843605, 0.35139392, -0.46936848, -0.85024895, 0.33510784, 0.24013882, 0.52902027, 0.11585872, 0.48151824, -0.28568003, -1.26636815, 0.65577621, -0.07577273, -0.28189863, -0.11901846, 0.13208514, 0.19101085, -0.4680898, -1.22646417, 1.28397173, -0.78566114, -1.56642036, -0.84912138, 1.25314465, 0.38590742, 0.27558469, -0.59376337, 0.54032141, 0.87125474, -1.27068735, 1.34807346, 0.13984405, 0.09131003, -0.84027738, -0.38492104, -0.01261329, -0.39885724, 1.13270869, -1.02046083, 1.00566987, 0.02963152, 0.17467701, -0.53336961, -0.18238527, -1.14414412, -0.01182096, 0.25307798, -0.20359748, -0.0695521, -0.13440645, 0.26750904, -0.14119641, 0.35248018, 0.39799964, 0.04569278, 1.80155198, -1.33543038, -0.16360659, 0.00202509, 0.9023821, 0.1299744, 0.01393592, -0.44448482, 0.52724335, 0.49014318, 0.84315736, -1.65197569, 1.05383237, -0.33121668, 0.08938957, -0.23889197, -0.09618305, 0.86934385, 1.27300009, 1.59577239, 0.52001913, 0.2659651, 0.75374924, -0.31495881, -0.94089639, -0.39707486, 1.08004452, -0.78486726, 0.1657878, -1.10838613, -0.30296491, 0.02727271, 1.11018468, 0.14214768, 0.53123477, -0.65260925, 0.38206853, -0.31400402]);
  const b1 = new Float64Array([-0.3769938, -0.45708039, 0.1840647, -0.49859403, -1.19755413, -0.48706846, 0.14640391, 0.8514539, 0.53820686, 0.69263349, 0.38994627, 0.8531916, -0.27439562, 0.4009886, -0.6740462, -0.27949024, 0.29455258, -0.00034507, 0.53743342, 0.97994221, 1.02223938, 0.41637915, 0.11570332, 0.0702926]);
  const W2 = new Float64Array([-0.36393361, 0.76600759, -0.32311301, -0.37044924, -0.01863374, 0.79199933, -0.2163266, 1.20070149, -1.02148294, 0.0083419, 0.06359666, 1.11031189, 0.42117964, 0.27628324, -0.46810193, 0.24248746, 0.07207636, 0.09156226, -0.11509207, 0.35024306, -0.44417629, -0.05339462, 0.26774132, -0.27254216, 0.09509289, -0.65469355, -0.83629374, 0.45104715, 0.22883103, -0.90283069, -1.15603583, 0.09833863, 0.29237483, 0.47836261, -2.4460134, -0.56021614, -0.26992881, 0.43201711, -0.02180406, -0.51424737, -1.46169835, 0.30544392, 1.81139699, -0.07617088, 1.58025579, 0.74848514, 0.02369266, 0.13041428, -1.63889131, -0.52996167, 0.42526035, 0.41926151, -0.144258, -0.28895869, -0.02232091, 0.53920144, -0.14787584, -0.5741529, -0.62076608, 0.2941718, -0.47452249, -0.00123355, 0.4041733, -1.25805765, 0.22910861, -0.73952017, 0.09727384, -0.16606013, 0.04156928, 0.91861792, -1.42002961, -0.81805485, 0.57443283, 0.86570567, -0.19932989, -0.49271031, -1.63179525, -0.6927011, 0.89972923, 0.40743626, -0.75087564, 1.16170509, -0.41986334, 0.39460286, 0.89749259, 0.38983426, -0.47620402, -0.59410362, -0.30842786, 0.54130752, -0.07882, -0.20294656, 0.70568312, 0.6721814, -0.028044, 0.6512739, 0.75722795, -1.55043224, -0.27954478, -0.08522111, 0.99482679, 0.33379424, -0.3630426, -0.33156176, -0.92108823, 0.59060897, -0.05438484, -0.92390538, 0.65244049, -0.6213278, 0.82398787, 0.26221064, 0.21072438, -0.44529634, 0.23773221, 0.7228993, 0.82514828, -0.50748032, 0.33344273, 0.09323166, 0.20515946, 0.07801714, -0.44518889, 0.37120208, 0.07572043, 0.44320258, -0.22717027, -0.10482123, 0.26398932, -0.03062848, 0.70255935, 0.55667808, 1.13265819, -0.49028272, -0.36266301, 0.01647426, -1.11018706, 0.94490753, -0.4591503, 0.2275123, -0.59097867, 0.09167088, -0.47469073, 0.48256224, -0.85543583, 0.90945703, -0.32781463, -0.07944888, -0.38965299, 0.17363449, -0.33493807, 1.19614678, 1.52397341, -0.5126045, -0.92904639, -0.16536019, -0.07437995, -0.06630058, -0.05920561, -0.91556489, 0.27830692, -0.04637011, -1.268791, 0.71808597, -0.87078319, 0.33912577, -0.28772744, 0.8211476, 0.05298478, -0.10813952, 0.57768677, 0.84899942, -0.59795597, -0.66052374, 0.76742469, -0.7931425, -0.10961566, 0.09829366, -0.34175491, 0.51519788, -1.40315846, -0.16702435, -0.51209354, -0.38183541, 0.60264025, -0.10498202, -0.38149483, 0.33112388, 0.48871427, -0.22567533, -0.7913914, -0.02635052, 0.74428098, -0.76697084, -0.64660469, -0.28209903, -0.36147913, -1.26383792, -1.0025512, -0.35382618, 1.46433295, -0.77309231, -0.04454931, -1.1609705, 0.20221897, -0.02414127, -0.76231562, 0.73596926, -0.30292943, 0.02225386, -0.86552363, 1.54643087, -0.24689933, 0.31782228, 0.30385905, 0.35345317, -0.50139077, -0.26649418, -0.66252487, 0.59758983, -1.20314557, -0.00102702, -1.72954606, -0.69695597, 0.01010309, 0.07690896, -0.45218546, -0.63164826, -0.03793293, -0.30552826, 0.65476779, 0.60104735, 0.32822241, -0.35552989, 0.55512618, 0.58471448, 1.19603718, 0.50259965, -0.38864743, -0.09966946, -0.72886386, -0.78148735, 0.28832804, -0.28275472, -0.74906584, -1.31599546, 0.03450359, -0.15530443, -0.39851719, -1.43312151, 0.46560598, -0.00642272, -0.39440374, 0.22884593, 0.51599111, -0.39352526, 0.86692105, 0.03556991, -0.24389477, 0.51262709, 0.27055508, 0.38822586, -0.49411828, 0.63403343, -1.10228932, -1.1593433, -0.51061209, 1.15306232, 0.11640585, 0.44370477, -0.53130742, 0.26390809, -0.67154718, 1.40693708, -0.48723334, -0.49547427, 0.13578793, 0.24428097, -0.07702629, -0.12334438, 0.73434769, -0.34828112, 1.59163668, 0.15897032, 0.56919218, 0.77535925, 0.12950974, 0.41811662, -0.38307804, -1.92510929, -0.85514935, -0.25447702, 0.42686288, -0.15602175, -1.44877125, 0.60687618, 0.02640019, -0.05638041, -0.43861239, 0.33457765, 0.35254409, -0.20468833, -0.31108453, 0.00713026, -0.29020946, -0.46269764, -0.22214031, -0.46402655, -0.22948271, 0.87596305, 0.64690908, -1.07476093, 0.0491252, -0.50053172, -0.03114955, -0.16291113, 0.0695048, 1.14204312, 0.66589582, 0.68286839, -0.07678356, 0.49312202, -0.12123471, 0.52507097, -0.99656503, -0.37103426, -0.26655923, -0.75544704, -0.65432554, 0.50990224, 1.41448291, 0.783597, 0.4732937, 0.12736108, -1.98329906, -0.40487857, -1.08659657, 0.27248858, -0.83469585, -0.94199992, 0.63753699, -0.31288364, 0.40723314, -0.36106579, 0.45189581, -0.06192257, 0.2451347, 0.7518234, 0.73162397, -1.07409414, -0.07444491, 0.10628975, 0.11440681, 0.65798029, 0.79394028, 0.58606972, 0.45011631, 1.07236974, 0.49211977, -0.5974386, 1.08321938, 0.97710106, 1.19344415, 0.33450276, 0.14136327, 0.54938384, -0.55995131, -0.32786671, 0.4198819, -0.19464183, -1.11149979, -0.90131444, 2.48280857, 1.01865555, -0.26239437, -0.99392251, 0.60515907, -0.57263126, 0.91474912, 1.39025813, 0.78375887, 0.97426836, -0.24018025, -0.30298187]);
  const b2 = new Float64Array([0.49044545, 0.14832435, -0.10399946, 0.11030815, -0.68922647, -0.21270648, -0.94226456, -0.5901483, 0.27010855, -0.53688043, 0.57202995, -1.30302149, 0.14501043, 0.03385137, -0.41964462, 0.58487763]);
  const W3 = new Float64Array([-1.11992536, 4.53139432, -2.89361341, 6.23758128, -3.76610992, -0.38554416, 3.30262714, -3.16179178, -1.75913688, -2.48264956, 0.47743097, 1.09828654, -0.29926214, -2.06160024, -0.86656337, 3.74605644, 0.02934477, 5.44329593, 0.99398807, 9.04172845, -0.47661728, 0.88628877, 3.61989566, -2.00428394, -1.44359882, -1.83289812, -0.19174532, 1.37806327, 0.96615007, -0.30643046, 0.31657145, 1.23013555, -1.37346395, 0.49040335, -1.61664998, 2.16740278, -1.50815878, 0.20102948, 0.88683403, 1.32886478, 0.25889118, -2.7626618, -0.19922588, 1.21432, -4.40024236, -0.95583138, -2.19231325, -0.42404666, -0.88370609, 0.61475744, -0.15560042, 5.95764335, 4.11236093, 2.54421855, 1.4069629, 5.40031324, -0.9192656, 4.0505183, 2.05173544, -0.32517741, 0.84071744, -2.92066841, 0.15832721, -5.12158492, -1.00964129, 7.03878065, -3.93775312, 10.14645857, -5.36920526, -0.59732656, 0.0000242, -0.45126131, -4.70117446, -0.11856551, 3.28501056, 2.68392719, -0.7721146, 0.70172966, -1.35528559, 0.14938389]);
  const b3 = new Float64Array([0.04730517, 0.60743675, -0.15742229, -0.44259557, -0.95105089]);

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Float64Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Float64Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Float64Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-5"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = new Float64Array([].concat(xSelf, xEn, xAl, xBl));

  // 네트워크 파라미터
  const W1 = new Float64Array([1.16086702, 0.45401742, -0.01593306, 0.16406664, -1.44471348, -0.67984097, 0.06272919, 0.00810838, -0.58460643, -0.29896211, 0.11007025, 0.16961782, 0.66569015, -0.26033104, -0.58403305, -0.71961494, -0.36391825, -0.16436795, -0.26443623, -0.5968099, 0.06221329, 0.06544934, -0.82875078, -0.05609292, 0.65011095, 0.32939133, 0.04072446, 0.25186724, 0.23290355, 0.06281219, 0.99699044, 0.20191478, -0.04649937, 0.22625417, -0.11034798, 1.27393896, -0.76150229, -0.8635544, -0.21925316, -0.04880573, 0.15813534, 0.19932841, 1.01714773, 0.30365795, 0.96540023, 0.11658218, -0.62094998, -0.09308994, -0.56460527, -0.4336218, 0.29794669, 0.00669034, 0.48326163, 0.56174434, 0.54996855, -0.93609383, -1.6931748, 0.22584619, -0.13784087, -1.31519507, -0.68030321, -0.36889185, 0.08940414, 0.02749305, 0.38713431, -0.91272947, -0.14308387, 0.10915428, -0.72326627, -0.37677676, -0.08072782, 0.59875187, -0.13658641, 0.30562405, -0.38887482, -0.98198801, 0.81044668, -0.78336721, -0.80018618, -0.31511136, -0.27351081, -0.46975315, 0.55776256, 0.85781492, 0.12019162, 0.02701763, -0.09369403, 0.48170794, 0.36172632, 1.24365736, -0.13260142, -1.52352339, 0.15109771, -0.61446944, 0.36094656, 0.05202249, -0.38022846, -1.05829891, 0.44929253, 0.57618019, 0.58184458, -0.82668472, 0.64381304, 1.00833486, -0.27968269, -1.16264133, -0.37894766, -0.97466413, 0.08924598, 0.50523106, 1.87124699, 1.83523539, 0.90369879, -0.49695994, -0.73596613, -1.27897492, -0.38795678, 0.4159936, 0.32760904, 0.31689439, -0.8703111, -0.29733383, -0.72120939, -0.36477211, 0.48973045, -0.64162434, -0.17304323, -0.6994659, -1.35170662, 0.74770919, 0.30243538, 0.30617512, -0.03050566, -0.3233877, 0.10660731, -0.00333878, -0.43127077, 1.30151012, 0.00387886, -0.09469426, 0.56956096, -1.31669778, -1.01776947, 0.14802802, -0.04577162, -0.26193228, 0.28633774, -0.06325617, 1.10292621, -0.07619031, -0.63584017, 1.14766394, 0.25591626, 0.7069892, 0.11372392, -0.98768697, 0.11969738, -1.01995703, -0.3506455, -0.0467716, -0.13806299, 0.42895311, 0.33598468, -0.41438213, 0.67137576, -0.8746665, 0.52521327, -0.7833527, -0.83115591, 0.10322272, 0.24795352, 0.67960129, 0.48128904, -1.00160012, -0.34381929, -0.11012828, -0.14070958, -1.73900748, 0.72594448, -0.76020488, 0.62884411, 0.11877309, -0.39077049, -0.58863772, 0.84551336, -0.11473078, 0.09951373, -0.39560461, -0.41852265, -0.32501324, 0.7776738, 0.45697128, -0.28558617, -0.09704501, -0.39521746, -0.83920598, 0.69260479, -1.14155343, 0.37013403, -0.2034506, -0.4489779, 0.53987859, -0.36055087, 0.05158537, -1.30033754, -0.64110242, -0.36874535, 0.44696835, 0.54902682, 0.72053128, 0.73604817, 0.7636507, 0.16890671, -0.02332019, 0.55566605, -0.2851684, 0.29689583, 0.23660206, -0.38717438, -0.22605389, -0.07092057, -0.31870926, -0.07906894, -0.2109383, -0.38327225, 0.63438534, 0.12765305, -0.37270295, 0.40481945, -0.93951494, -1.26443663, 1.09536072, -0.04889285, -0.66873671, -0.01267788, 1.21869488, -0.87239176, -0.15712428, -0.27733631, -0.91299076, -0.5714763, -2.14484416, -1.41593189, 0.11706559, 0.20479337, -0.75803695, -0.36531284, -0.85017932, -0.32848005, 0.09529417, -0.82630194, 0.04991336, -0.09534916, -0.80282786, -0.56850584, -1.24345825, -1.10089051, 0.2203343, -0.60116796, -0.11097936, -0.14311113, -0.21207631, 0.3535344, 0.45356577, -0.74389534, 0.92579172, 0.04597104, -0.06952132, 1.51910342, -1.20419546, -0.34095466, -0.86512096, -0.65965474, -0.04129611, 0.11360989, 0.33624902, -0.13595207, -0.08719876, -1.0329773, -0.55058183, -0.9472039, -0.37246928, 0.75140574, -0.54056671, -0.51109925, -0.13291926, 0.3840631, 0.66007861, 0.54286724, 0.25171705, 0.13292041, -0.21974529, -0.15580825, 0.02619065, 0.77795744, -0.12991554, 0.04318976, -0.38708442, 0.01757154, 0.0291313, 0.61835127, 0.77367978, -0.03174497, -0.39667814, 0.1199593, -0.31889607, -2.03711826, 0.08424961, 0.57123952, 0.7545686, -0.71487463, -0.70036889, 0.45774308, 0.58922809, -0.09836251, 0.04810853, 0.06526479, 0.69769606, 0.49778227, 0.01350059, -0.52018922, 0.00923191, 0.13094283, 0.37774463, -0.77697205, -0.84999367, 0.51282004, -0.49711115, -0.21733004, -0.2481893, 0.8059767, 0.88175241, 0.35072886, 1.34160237, 1.06666083, 1.2207679, 0.40964663, 0.20771024, -1.3773647, 0.34010567, 1.17758313, -0.09336074, 0.31999316, 0.11416906, -0.82756758, 2.0376495, 0.03660808, 1.14994647, 0.62363955, -1.09884732, 0.72934064, -0.05143806, 0.01239782, -1.005048, -0.2314267, 0.24408043, 0.33947186, 1.01110219, -0.18420296, -0.27977509, -0.99013518, -0.18804744, -1.53258886, -0.21522777, 0.39032316, -0.68295017, -0.15647297, 1.04648212, 0.33073313, -0.99314643, 0.28778317, 1.23742316, -0.8159566, 1.56674052, -0.21317538, -0.30768919, 0.71472878, 0.08665315, -0.56722215, 0.25377158, 0.68508894, -0.35473352, -0.08253754, -0.22723459, 1.10059747, -0.62881945, 0.25384721, 0.25234513, -0.48941471, 0.576745, 1.19376593, -0.93930334, 1.04895022, 0.93967111, -0.25368214, -0.32751746, -0.09581665, -0.38326827, 1.31193455, 0.43456618, -0.00147016, -0.65658302, 2.99298065, -0.83586729, 0.22237639, -0.41999931, -0.92540094, -0.05389802, 0.2653403, 0.93888063, 0.31573814, 0.32562754, -1.14293588, -0.4140554, 0.43485158, -0.40664181, 0.14655501, 0.6383114, -0.313888, 0.79044605, 0.35270861, 0.11537321, -0.49391459, 0.65480588, 0.47773779, -1.08749446, 0.06484172, 0.06666529, 0.61169475, -0.69780553, 1.07121735, 0.69516626, 0.51173459, 1.50380326, 0.6454491, 0.67539381, -0.37438603, 1.43421095, -0.39305273, -0.72548708, -0.47548751, -0.43766228, 0.21429306, 1.43047044, -0.40381818, 0.00795012, 0.02997096, 0.58388169, -0.40245655, 0.6131839, -0.27581648, 0.5666807, -0.23377305, 1.2885485, -1.04283389, -0.46101071, 0.3611301, 0.12050271, 0.0049348, 1.08960369, 0.36405158, -0.56468039, -1.09066012, -0.31926477, -0.1972565, -0.5980025, 0.95270623, 1.51640893, -0.20515308, 0.04240382, 1.195249, 0.20710055, -0.82669571, -0.28712219, 0.30362276, 0.16034049, -0.92023867, -0.77361715, 1.18455135, 0.01688821, -0.20041185, -0.69134363, 0.20930622, 0.19286829, 0.87262986, 0.4991553, -0.19489766, -0.02531507, -0.5260548, -0.59774647, 0.12256422, -0.4934823, 0.64799214, 0.20577249, -0.93890704, -0.80421991, -0.42317845, -0.01476863, 0.45327845, -0.2882091, 0.37536435, -0.51498041, 0.15247781, 0.80657302, 0.69462779, 0.62940653, -0.10764285, -0.23848797, 0.28198195, -0.61475637, 1.39833164, -0.03668195, -0.39429582, -0.20501472, -0.59773825, -1.07196702, 1.40425208, 0.57192025, -0.40771664, 0.19515251, -0.87620034, -0.27866708, -0.45870696, 0.50583381, 1.24554625, 1.1116707, -0.32322129, 0.24284652, 0.00179021, -0.09650273, -0.93616158, -1.05441676, -0.69705983, -0.50295876, 0.6242088, -1.16010549, 0.28982143, -0.12720418, -0.70617804, -0.38295051, -0.33786862, 1.25194374, 1.83610358, -0.25231712, -0.3748979, 0.17497663, 0.42398335, -0.38929575, -0.3216867, -1.05164369, -0.9118069, 0.703489, -0.03758412, -0.23815471, 0.07255176, -1.68574302, 0.25883816, 0.06989032, -0.93124178, 0.20902762, 0.38173734, 0.13870243, -0.23427843, -0.14115152, 0.47605078, 0.4454979, 0.45597094, -0.1983945, -0.7477611, 0.40125748, -1.06690213, 0.45920684, 0.60075469, -0.07964625, -0.3354177, -0.37211442, -0.61793865, 1.43228787, -0.65250606, -1.10042336, -0.13492828, 0.05632365, -0.61567626, -1.55302321, 1.88478626, -0.98103863, -0.48086189, 1.13282848, 0.69127848, 0.77299591, 0.34796462, -0.50901509, -1.14569059, -0.77596236, 0.66750389, 0.26099538, -0.556026, -0.22851248, -0.34709766, -1.10579648, -1.08899645, 0.44643478, -2.36167688, 0.67997586, -1.4068962, 0.22963969, 0.25963779, -1.05276731, -1.69805801, -0.84405611, 0.72977312, 0.59938034, 0.54898742, 1.80606045, -0.30971488, 0.84102942, 0.09793618, 0.48754923, 1.20838508, -0.62451834, 0.09788401, 0.7467389, -0.08779934, 0.73816975, -0.22347306, 0.30062027, -1.11447533, 1.54847941, -0.66364917, 0.35511818, -0.07139212, -0.38955982, -0.59200115, 0.37394571, -1.33925108, 0.9380908, 0.28080086, 1.00623516, 0.5502759, 1.16385904, -0.11462171, 0.14345689, -0.53444457, 0.097352, -0.14986276, 0.78204915, 0.20525447, -0.67473325, 0.66499061, -0.1516195, -0.21933897, 0.12057362, 0.41203389, 0.98277055, -1.23621804, 1.05831904, -0.08574682, 0.62202105, 0.65528091, -0.76004287, -0.03058533, -0.31154378, -1.13694933, 0.36976683, -0.08363774, -0.32942447, 0.07587069, 0.19027874, 0.11281399, 0.17220612, 0.55086702, 1.21881242, 0.2014665, 1.15660021, -0.09822483, 0.02500986, -1.2307767, 0.65041515, 0.04411311, 0.37882355, -0.58894418, -0.03076014, -1.27614444, -0.27489264, 0.53902593, 0.18870826, -0.37961904, 0.78318519, 0.94519992, -0.03050743, -0.97358773, 0.39778298, -0.19134397, 0.16464383, 0.18019496, -0.76480353, 0.32393955, 1.18116199, -0.20294073, -0.75705158, -0.55021636, -1.64067941, 0.8437686, -0.01123728, 0.14878633, 0.14249866, 0.10681131, -0.4507022, 0.53426259, -1.68412461, -0.29220864, -1.41776781, -0.50033608, -0.34632478, 0.18044948, -0.82627421, 0.14019874, -0.33185464, 0.32046232, -0.10981499, -0.33977175, 1.02563296, 0.66537243, -0.87231143, 0.72871676, -0.65158434, -0.9203776, 0.05668717, -0.55850094, -0.50904144, 0.57538706, -0.82225195, 0.03662629, 0.08782363, -1.02716603, 0.22578043, -0.52152126, 0.11340605, 0.3918442, 0.33330609, -1.32654307, -0.76009881, -0.71566889, -0.22165534, 0.92906845, -0.55708918, -0.55462621, -1.54555777, -0.14415664, -0.1848873, -0.26021055, -0.41767918, 0.19625378, 1.04737573, 0.00697196, -0.70901659, -0.00480012, 0.87530084, -0.10824349, -0.00282898, 0.25111284, -0.1917045, 0.58569746, 0.2612749, -0.8745288, 0.26737458, 0.6995127, 0.31654037, 0.52142329, 0.38912296, 0.71674512, -0.25948829, -1.01074201, -0.48554032, -1.36646042, 1.17896041, -0.82315626, -0.00843667, 0.03083474, -0.96222985, 0.48064918, -0.62582194, -0.71741746, -1.43552686, 0.19578284, 2.03117411, -0.95849408, 0.7839609, -1.29579605, -1.00732767, -0.54791046, -0.28679079, 0.65720846, -0.47495962, -0.17917459, 0.75350098, -0.99669408, 0.25540013, -1.18001701, 0.56036715, -0.04207052, 1.08761316, 0.10036886, 0.57481806, 0.25946003, 0.53901969, 0.42514115, -0.43490003, 0.17413253, 0.98927462, -1.03232907, 0.1819374, -0.70176453, 0.31333646, 0.33080943, 0.39121941, -0.62672335, -0.65054383, -0.04517418, -0.12088381, -0.01804329, 0.05683406, 0.45080333, 1.47798919, -0.51680808, 0.73296181, -1.48945951, 0.74404927, 0.75088802, 0.17704742, -0.51834999, 0.04198799, -0.13868619, -0.05838725, -0.49027223, 0.27638584, 2.02584813, -1.25148804, 0.24972321, -0.19335215, 0.62556605, -0.2514363, 0.22177411, 0.63826601, -0.54012802, -0.10707163, 0.93831171, 1.12989518, 0.21530634, 1.21067474, 0.13818377, -0.69262038, 0.02886073, 0.29469636, 0.1480988, -1.29583559, -0.58162885, 0.81207667, -0.37826294, 0.46417966, 0.49384449, -0.37389535, 0.39729082, 0.08511844, -0.97422482, 0.73575366, -0.66093956, -0.18330258, 0.43329887, -0.08506892, 0.58911792, -0.06151641, -0.49245219, 0.49205393, 0.121273, -0.29452151, -0.48359684, -0.22048145, 0.61008063, 0.49397883, 0.67811953, -0.44626817, 0.71946891, -0.42557979, 0.40210063, 0.63631853, -1.02046362, 0.92248358, 0.96123277, 0.72412298, -0.8060785, -0.21486891, -1.37027589, 0.52257695, -0.10714835, -1.08687105, -0.61936232, -0.84997842, 1.05491477, 0.37951007, 0.52192154, 0.65894867, 0.27851039, -0.55289659, -1.08079426, -0.26859139, -0.16033914, -0.73331905, 0.51154261, -1.39762869, -0.35988197, 0.32214246, 0.55092736, -0.75884738, -0.11575132, -0.35883372, -0.01573113, 1.29988618, 1.17732022, 0.010014, 0.40095138, 0.21447211, 0.17495981, -1.05637666, -0.1781282, -0.29554115, -0.41499499, 0.21466573, 0.13314829, -0.32754156, -0.54871312, -0.6182757, -1.10433068, -0.28020414, -0.20971262, 0.90851942, 0.07758443, -0.62777127, -0.03705823, -0.7843605, 0.35139392, -0.46936848, -0.85024895, 0.33510784, 0.24013882, 0.52902027, 0.11585872, 0.48151824, -0.28568003, -1.26636815, 0.65577621, -0.07577273, -0.28189863, -0.11901846, 0.13208514, 0.19101085, -0.4680898, -1.22646417, 1.28397173, -0.78566114, -1.56642036, -0.84912138, 1.25314465, 0.38590742, 0.27558469, -0.59376337, 0.54032141, 0.87125474, -1.27068735, 1.34807346, 0.13984405, 0.09131003, -0.84027738, -0.38492104, -0.01261329, -0.39885724, 1.13270869, -1.02046083, 1.00566987, 0.02963152, 0.17467701, -0.53336961, -0.18238527, -1.14414412, -0.01182096, 0.25307798, -0.20359748, -0.0695521, -0.13440645, 0.26750904, -0.14119641, 0.35248018, 0.39799964, 0.04569278, 1.80155198, -1.33543038, -0.16360659, 0.00202509, 0.9023821, 0.1299744, 0.01393592, -0.44448482, 0.52724335, 0.49014318, 0.84315736, -1.65197569, 1.05383237, -0.33121668, 0.08938957, -0.23889197, -0.09618305, 0.86934385, 1.27300009, 1.59577239, 0.52001913, 0.2659651, 0.75374924, -0.31495881, -0.94089639, -0.39707486, 1.08004452, -0.78486726, 0.1657878, -1.10838613, -0.30296491, 0.02727271, 1.11018468, 0.14214768, 0.53123477, -0.65260925, 0.38206853, -0.31400402]);
  const b1 = new Float64Array([-0.3769938, -0.45708039, 0.1840647, -0.49859403, -1.19755413, -0.48706846, 0.14640391, 0.8514539, 0.53820686, 0.69263349, 0.38994627, 0.8531916, -0.27439562, 0.4009886, -0.6740462, -0.27949024, 0.29455258, -0.00034507, 0.53743342, 0.97994221, 1.02223938, 0.41637915, 0.11570332, 0.0702926]);
  const W2 = new Float64Array([-0.36393361, 0.76600759, -0.32311301, -0.37044924, -0.01863374, 0.79199933, -0.2163266, 1.20070149, -1.02148294, 0.0083419, 0.06359666, 1.11031189, 0.42117964, 0.27628324, -0.46810193, 0.24248746, 0.07207636, 0.09156226, -0.11509207, 0.35024306, -0.44417629, -0.05339462, 0.26774132, -0.27254216, 0.09509289, -0.65469355, -0.83629374, 0.45104715, 0.22883103, -0.90283069, -1.15603583, 0.09833863, 0.29237483, 0.47836261, -2.4460134, -0.56021614, -0.26992881, 0.43201711, -0.02180406, -0.51424737, -1.46169835, 0.30544392, 1.81139699, -0.07617088, 1.58025579, 0.74848514, 0.02369266, 0.13041428, -1.63889131, -0.52996167, 0.42526035, 0.41926151, -0.144258, -0.28895869, -0.02232091, 0.53920144, -0.14787584, -0.5741529, -0.62076608, 0.2941718, -0.47452249, -0.00123355, 0.4041733, -1.25805765, 0.22910861, -0.73952017, 0.09727384, -0.16606013, 0.04156928, 0.91861792, -1.42002961, -0.81805485, 0.57443283, 0.86570567, -0.19932989, -0.49271031, -1.63179525, -0.6927011, 0.89972923, 0.40743626, -0.75087564, 1.16170509, -0.41986334, 0.39460286, 0.89749259, 0.38983426, -0.47620402, -0.59410362, -0.30842786, 0.54130752, -0.07882, -0.20294656, 0.70568312, 0.6721814, -0.028044, 0.6512739, 0.75722795, -1.55043224, -0.27954478, -0.08522111, 0.99482679, 0.33379424, -0.3630426, -0.33156176, -0.92108823, 0.59060897, -0.05438484, -0.92390538, 0.65244049, -0.6213278, 0.82398787, 0.26221064, 0.21072438, -0.44529634, 0.23773221, 0.7228993, 0.82514828, -0.50748032, 0.33344273, 0.09323166, 0.20515946, 0.07801714, -0.44518889, 0.37120208, 0.07572043, 0.44320258, -0.22717027, -0.10482123, 0.26398932, -0.03062848, 0.70255935, 0.55667808, 1.13265819, -0.49028272, -0.36266301, 0.01647426, -1.11018706, 0.94490753, -0.4591503, 0.2275123, -0.59097867, 0.09167088, -0.47469073, 0.48256224, -0.85543583, 0.90945703, -0.32781463, -0.07944888, -0.38965299, 0.17363449, -0.33493807, 1.19614678, 1.52397341, -0.5126045, -0.92904639, -0.16536019, -0.07437995, -0.06630058, -0.05920561, -0.91556489, 0.27830692, -0.04637011, -1.268791, 0.71808597, -0.87078319, 0.33912577, -0.28772744, 0.8211476, 0.05298478, -0.10813952, 0.57768677, 0.84899942, -0.59795597, -0.66052374, 0.76742469, -0.7931425, -0.10961566, 0.09829366, -0.34175491, 0.51519788, -1.40315846, -0.16702435, -0.51209354, -0.38183541, 0.60264025, -0.10498202, -0.38149483, 0.33112388, 0.48871427, -0.22567533, -0.7913914, -0.02635052, 0.74428098, -0.76697084, -0.64660469, -0.28209903, -0.36147913, -1.26383792, -1.0025512, -0.35382618, 1.46433295, -0.77309231, -0.04454931, -1.1609705, 0.20221897, -0.02414127, -0.76231562, 0.73596926, -0.30292943, 0.02225386, -0.86552363, 1.54643087, -0.24689933, 0.31782228, 0.30385905, 0.35345317, -0.50139077, -0.26649418, -0.66252487, 0.59758983, -1.20314557, -0.00102702, -1.72954606, -0.69695597, 0.01010309, 0.07690896, -0.45218546, -0.63164826, -0.03793293, -0.30552826, 0.65476779, 0.60104735, 0.32822241, -0.35552989, 0.55512618, 0.58471448, 1.19603718, 0.50259965, -0.38864743, -0.09966946, -0.72886386, -0.78148735, 0.28832804, -0.28275472, -0.74906584, -1.31599546, 0.03450359, -0.15530443, -0.39851719, -1.43312151, 0.46560598, -0.00642272, -0.39440374, 0.22884593, 0.51599111, -0.39352526, 0.86692105, 0.03556991, -0.24389477, 0.51262709, 0.27055508, 0.38822586, -0.49411828, 0.63403343, -1.10228932, -1.1593433, -0.51061209, 1.15306232, 0.11640585, 0.44370477, -0.53130742, 0.26390809, -0.67154718, 1.40693708, -0.48723334, -0.49547427, 0.13578793, 0.24428097, -0.07702629, -0.12334438, 0.73434769, -0.34828112, 1.59163668, 0.15897032, 0.56919218, 0.77535925, 0.12950974, 0.41811662, -0.38307804, -1.92510929, -0.85514935, -0.25447702, 0.42686288, -0.15602175, -1.44877125, 0.60687618, 0.02640019, -0.05638041, -0.43861239, 0.33457765, 0.35254409, -0.20468833, -0.31108453, 0.00713026, -0.29020946, -0.46269764, -0.22214031, -0.46402655, -0.22948271, 0.87596305, 0.64690908, -1.07476093, 0.0491252, -0.50053172, -0.03114955, -0.16291113, 0.0695048, 1.14204312, 0.66589582, 0.68286839, -0.07678356, 0.49312202, -0.12123471, 0.52507097, -0.99656503, -0.37103426, -0.26655923, -0.75544704, -0.65432554, 0.50990224, 1.41448291, 0.783597, 0.4732937, 0.12736108, -1.98329906, -0.40487857, -1.08659657, 0.27248858, -0.83469585, -0.94199992, 0.63753699, -0.31288364, 0.40723314, -0.36106579, 0.45189581, -0.06192257, 0.2451347, 0.7518234, 0.73162397, -1.07409414, -0.07444491, 0.10628975, 0.11440681, 0.65798029, 0.79394028, 0.58606972, 0.45011631, 1.07236974, 0.49211977, -0.5974386, 1.08321938, 0.97710106, 1.19344415, 0.33450276, 0.14136327, 0.54938384, -0.55995131, -0.32786671, 0.4198819, -0.19464183, -1.11149979, -0.90131444, 2.48280857, 1.01865555, -0.26239437, -0.99392251, 0.60515907, -0.57263126, 0.91474912, 1.39025813, 0.78375887, 0.97426836, -0.24018025, -0.30298187]);
  const b2 = new Float64Array([0.49044545, 0.14832435, -0.10399946, 0.11030815, -0.68922647, -0.21270648, -0.94226456, -0.5901483, 0.27010855, -0.53688043, 0.57202995, -1.30302149, 0.14501043, 0.03385137, -0.41964462, 0.58487763]);
  const W3 = new Float64Array([-1.11992536, 4.53139432, -2.89361341, 6.23758128, -3.76610992, -0.38554416, 3.30262714, -3.16179178, -1.75913688, -2.48264956, 0.47743097, 1.09828654, -0.29926214, -2.06160024, -0.86656337, 3.74605644, 0.02934477, 5.44329593, 0.99398807, 9.04172845, -0.47661728, 0.88628877, 3.61989566, -2.00428394, -1.44359882, -1.83289812, -0.19174532, 1.37806327, 0.96615007, -0.30643046, 0.31657145, 1.23013555, -1.37346395, 0.49040335, -1.61664998, 2.16740278, -1.50815878, 0.20102948, 0.88683403, 1.32886478, 0.25889118, -2.7626618, -0.19922588, 1.21432, -4.40024236, -0.95583138, -2.19231325, -0.42404666, -0.88370609, 0.61475744, -0.15560042, 5.95764335, 4.11236093, 2.54421855, 1.4069629, 5.40031324, -0.9192656, 4.0505183, 2.05173544, -0.32517741, 0.84071744, -2.92066841, 0.15832721, -5.12158492, -1.00964129, 7.03878065, -3.93775312, 10.14645857, -5.36920526, -0.59732656, 0.0000242, -0.45126131, -4.70117446, -0.11856551, 3.28501056, 2.68392719, -0.7721146, 0.70172966, -1.35528559, 0.14938389]);
  const b3 = new Float64Array([0.04730517, 0.60743675, -0.15742229, -0.44259557, -0.95105089]);

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Float64Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Float64Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Float64Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-6"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = new Float64Array([].concat(xSelf, xEn, xAl, xBl));

  // 네트워크 파라미터
  const W1 = new Float64Array([1.16086702, 0.45401742, -0.01593306, 0.16406664, -1.44471348, -0.67984097, 0.06272919, 0.00810838, -0.58460643, -0.29896211, 0.11007025, 0.16961782, 0.66569015, -0.26033104, -0.58403305, -0.71961494, -0.36391825, -0.16436795, -0.26443623, -0.5968099, 0.06221329, 0.06544934, -0.82875078, -0.05609292, 0.65011095, 0.32939133, 0.04072446, 0.25186724, 0.23290355, 0.06281219, 0.99699044, 0.20191478, -0.04649937, 0.22625417, -0.11034798, 1.27393896, -0.76150229, -0.8635544, -0.21925316, -0.04880573, 0.15813534, 0.19932841, 1.01714773, 0.30365795, 0.96540023, 0.11658218, -0.62094998, -0.09308994, -0.56460527, -0.4336218, 0.29794669, 0.00669034, 0.48326163, 0.56174434, 0.54996855, -0.93609383, -1.6931748, 0.22584619, -0.13784087, -1.31519507, -0.68030321, -0.36889185, 0.08940414, 0.02749305, 0.38713431, -0.91272947, -0.14308387, 0.10915428, -0.72326627, -0.37677676, -0.08072782, 0.59875187, -0.13658641, 0.30562405, -0.38887482, -0.98198801, 0.81044668, -0.78336721, -0.80018618, -0.31511136, -0.27351081, -0.46975315, 0.55776256, 0.85781492, 0.12019162, 0.02701763, -0.09369403, 0.48170794, 0.36172632, 1.24365736, -0.13260142, -1.52352339, 0.15109771, -0.61446944, 0.36094656, 0.05202249, -0.38022846, -1.05829891, 0.44929253, 0.57618019, 0.58184458, -0.82668472, 0.64381304, 1.00833486, -0.27968269, -1.16264133, -0.37894766, -0.97466413, 0.08924598, 0.50523106, 1.87124699, 1.83523539, 0.90369879, -0.49695994, -0.73596613, -1.27897492, -0.38795678, 0.4159936, 0.32760904, 0.31689439, -0.8703111, -0.29733383, -0.72120939, -0.36477211, 0.48973045, -0.64162434, -0.17304323, -0.6994659, -1.35170662, 0.74770919, 0.30243538, 0.30617512, -0.03050566, -0.3233877, 0.10660731, -0.00333878, -0.43127077, 1.30151012, 0.00387886, -0.09469426, 0.56956096, -1.31669778, -1.01776947, 0.14802802, -0.04577162, -0.26193228, 0.28633774, -0.06325617, 1.10292621, -0.07619031, -0.63584017, 1.14766394, 0.25591626, 0.7069892, 0.11372392, -0.98768697, 0.11969738, -1.01995703, -0.3506455, -0.0467716, -0.13806299, 0.42895311, 0.33598468, -0.41438213, 0.67137576, -0.8746665, 0.52521327, -0.7833527, -0.83115591, 0.10322272, 0.24795352, 0.67960129, 0.48128904, -1.00160012, -0.34381929, -0.11012828, -0.14070958, -1.73900748, 0.72594448, -0.76020488, 0.62884411, 0.11877309, -0.39077049, -0.58863772, 0.84551336, -0.11473078, 0.09951373, -0.39560461, -0.41852265, -0.32501324, 0.7776738, 0.45697128, -0.28558617, -0.09704501, -0.39521746, -0.83920598, 0.69260479, -1.14155343, 0.37013403, -0.2034506, -0.4489779, 0.53987859, -0.36055087, 0.05158537, -1.30033754, -0.64110242, -0.36874535, 0.44696835, 0.54902682, 0.72053128, 0.73604817, 0.7636507, 0.16890671, -0.02332019, 0.55566605, -0.2851684, 0.29689583, 0.23660206, -0.38717438, -0.22605389, -0.07092057, -0.31870926, -0.07906894, -0.2109383, -0.38327225, 0.63438534, 0.12765305, -0.37270295, 0.40481945, -0.93951494, -1.26443663, 1.09536072, -0.04889285, -0.66873671, -0.01267788, 1.21869488, -0.87239176, -0.15712428, -0.27733631, -0.91299076, -0.5714763, -2.14484416, -1.41593189, 0.11706559, 0.20479337, -0.75803695, -0.36531284, -0.85017932, -0.32848005, 0.09529417, -0.82630194, 0.04991336, -0.09534916, -0.80282786, -0.56850584, -1.24345825, -1.10089051, 0.2203343, -0.60116796, -0.11097936, -0.14311113, -0.21207631, 0.3535344, 0.45356577, -0.74389534, 0.92579172, 0.04597104, -0.06952132, 1.51910342, -1.20419546, -0.34095466, -0.86512096, -0.65965474, -0.04129611, 0.11360989, 0.33624902, -0.13595207, -0.08719876, -1.0329773, -0.55058183, -0.9472039, -0.37246928, 0.75140574, -0.54056671, -0.51109925, -0.13291926, 0.3840631, 0.66007861, 0.54286724, 0.25171705, 0.13292041, -0.21974529, -0.15580825, 0.02619065, 0.77795744, -0.12991554, 0.04318976, -0.38708442, 0.01757154, 0.0291313, 0.61835127, 0.77367978, -0.03174497, -0.39667814, 0.1199593, -0.31889607, -2.03711826, 0.08424961, 0.57123952, 0.7545686, -0.71487463, -0.70036889, 0.45774308, 0.58922809, -0.09836251, 0.04810853, 0.06526479, 0.69769606, 0.49778227, 0.01350059, -0.52018922, 0.00923191, 0.13094283, 0.37774463, -0.77697205, -0.84999367, 0.51282004, -0.49711115, -0.21733004, -0.2481893, 0.8059767, 0.88175241, 0.35072886, 1.34160237, 1.06666083, 1.2207679, 0.40964663, 0.20771024, -1.3773647, 0.34010567, 1.17758313, -0.09336074, 0.31999316, 0.11416906, -0.82756758, 2.0376495, 0.03660808, 1.14994647, 0.62363955, -1.09884732, 0.72934064, -0.05143806, 0.01239782, -1.005048, -0.2314267, 0.24408043, 0.33947186, 1.01110219, -0.18420296, -0.27977509, -0.99013518, -0.18804744, -1.53258886, -0.21522777, 0.39032316, -0.68295017, -0.15647297, 1.04648212, 0.33073313, -0.99314643, 0.28778317, 1.23742316, -0.8159566, 1.56674052, -0.21317538, -0.30768919, 0.71472878, 0.08665315, -0.56722215, 0.25377158, 0.68508894, -0.35473352, -0.08253754, -0.22723459, 1.10059747, -0.62881945, 0.25384721, 0.25234513, -0.48941471, 0.576745, 1.19376593, -0.93930334, 1.04895022, 0.93967111, -0.25368214, -0.32751746, -0.09581665, -0.38326827, 1.31193455, 0.43456618, -0.00147016, -0.65658302, 2.99298065, -0.83586729, 0.22237639, -0.41999931, -0.92540094, -0.05389802, 0.2653403, 0.93888063, 0.31573814, 0.32562754, -1.14293588, -0.4140554, 0.43485158, -0.40664181, 0.14655501, 0.6383114, -0.313888, 0.79044605, 0.35270861, 0.11537321, -0.49391459, 0.65480588, 0.47773779, -1.08749446, 0.06484172, 0.06666529, 0.61169475, -0.69780553, 1.07121735, 0.69516626, 0.51173459, 1.50380326, 0.6454491, 0.67539381, -0.37438603, 1.43421095, -0.39305273, -0.72548708, -0.47548751, -0.43766228, 0.21429306, 1.43047044, -0.40381818, 0.00795012, 0.02997096, 0.58388169, -0.40245655, 0.6131839, -0.27581648, 0.5666807, -0.23377305, 1.2885485, -1.04283389, -0.46101071, 0.3611301, 0.12050271, 0.0049348, 1.08960369, 0.36405158, -0.56468039, -1.09066012, -0.31926477, -0.1972565, -0.5980025, 0.95270623, 1.51640893, -0.20515308, 0.04240382, 1.195249, 0.20710055, -0.82669571, -0.28712219, 0.30362276, 0.16034049, -0.92023867, -0.77361715, 1.18455135, 0.01688821, -0.20041185, -0.69134363, 0.20930622, 0.19286829, 0.87262986, 0.4991553, -0.19489766, -0.02531507, -0.5260548, -0.59774647, 0.12256422, -0.4934823, 0.64799214, 0.20577249, -0.93890704, -0.80421991, -0.42317845, -0.01476863, 0.45327845, -0.2882091, 0.37536435, -0.51498041, 0.15247781, 0.80657302, 0.69462779, 0.62940653, -0.10764285, -0.23848797, 0.28198195, -0.61475637, 1.39833164, -0.03668195, -0.39429582, -0.20501472, -0.59773825, -1.07196702, 1.40425208, 0.57192025, -0.40771664, 0.19515251, -0.87620034, -0.27866708, -0.45870696, 0.50583381, 1.24554625, 1.1116707, -0.32322129, 0.24284652, 0.00179021, -0.09650273, -0.93616158, -1.05441676, -0.69705983, -0.50295876, 0.6242088, -1.16010549, 0.28982143, -0.12720418, -0.70617804, -0.38295051, -0.33786862, 1.25194374, 1.83610358, -0.25231712, -0.3748979, 0.17497663, 0.42398335, -0.38929575, -0.3216867, -1.05164369, -0.9118069, 0.703489, -0.03758412, -0.23815471, 0.07255176, -1.68574302, 0.25883816, 0.06989032, -0.93124178, 0.20902762, 0.38173734, 0.13870243, -0.23427843, -0.14115152, 0.47605078, 0.4454979, 0.45597094, -0.1983945, -0.7477611, 0.40125748, -1.06690213, 0.45920684, 0.60075469, -0.07964625, -0.3354177, -0.37211442, -0.61793865, 1.43228787, -0.65250606, -1.10042336, -0.13492828, 0.05632365, -0.61567626, -1.55302321, 1.88478626, -0.98103863, -0.48086189, 1.13282848, 0.69127848, 0.77299591, 0.34796462, -0.50901509, -1.14569059, -0.77596236, 0.66750389, 0.26099538, -0.556026, -0.22851248, -0.34709766, -1.10579648, -1.08899645, 0.44643478, -2.36167688, 0.67997586, -1.4068962, 0.22963969, 0.25963779, -1.05276731, -1.69805801, -0.84405611, 0.72977312, 0.59938034, 0.54898742, 1.80606045, -0.30971488, 0.84102942, 0.09793618, 0.48754923, 1.20838508, -0.62451834, 0.09788401, 0.7467389, -0.08779934, 0.73816975, -0.22347306, 0.30062027, -1.11447533, 1.54847941, -0.66364917, 0.35511818, -0.07139212, -0.38955982, -0.59200115, 0.37394571, -1.33925108, 0.9380908, 0.28080086, 1.00623516, 0.5502759, 1.16385904, -0.11462171, 0.14345689, -0.53444457, 0.097352, -0.14986276, 0.78204915, 0.20525447, -0.67473325, 0.66499061, -0.1516195, -0.21933897, 0.12057362, 0.41203389, 0.98277055, -1.23621804, 1.05831904, -0.08574682, 0.62202105, 0.65528091, -0.76004287, -0.03058533, -0.31154378, -1.13694933, 0.36976683, -0.08363774, -0.32942447, 0.07587069, 0.19027874, 0.11281399, 0.17220612, 0.55086702, 1.21881242, 0.2014665, 1.15660021, -0.09822483, 0.02500986, -1.2307767, 0.65041515, 0.04411311, 0.37882355, -0.58894418, -0.03076014, -1.27614444, -0.27489264, 0.53902593, 0.18870826, -0.37961904, 0.78318519, 0.94519992, -0.03050743, -0.97358773, 0.39778298, -0.19134397, 0.16464383, 0.18019496, -0.76480353, 0.32393955, 1.18116199, -0.20294073, -0.75705158, -0.55021636, -1.64067941, 0.8437686, -0.01123728, 0.14878633, 0.14249866, 0.10681131, -0.4507022, 0.53426259, -1.68412461, -0.29220864, -1.41776781, -0.50033608, -0.34632478, 0.18044948, -0.82627421, 0.14019874, -0.33185464, 0.32046232, -0.10981499, -0.33977175, 1.02563296, 0.66537243, -0.87231143, 0.72871676, -0.65158434, -0.9203776, 0.05668717, -0.55850094, -0.50904144, 0.57538706, -0.82225195, 0.03662629, 0.08782363, -1.02716603, 0.22578043, -0.52152126, 0.11340605, 0.3918442, 0.33330609, -1.32654307, -0.76009881, -0.71566889, -0.22165534, 0.92906845, -0.55708918, -0.55462621, -1.54555777, -0.14415664, -0.1848873, -0.26021055, -0.41767918, 0.19625378, 1.04737573, 0.00697196, -0.70901659, -0.00480012, 0.87530084, -0.10824349, -0.00282898, 0.25111284, -0.1917045, 0.58569746, 0.2612749, -0.8745288, 0.26737458, 0.6995127, 0.31654037, 0.52142329, 0.38912296, 0.71674512, -0.25948829, -1.01074201, -0.48554032, -1.36646042, 1.17896041, -0.82315626, -0.00843667, 0.03083474, -0.96222985, 0.48064918, -0.62582194, -0.71741746, -1.43552686, 0.19578284, 2.03117411, -0.95849408, 0.7839609, -1.29579605, -1.00732767, -0.54791046, -0.28679079, 0.65720846, -0.47495962, -0.17917459, 0.75350098, -0.99669408, 0.25540013, -1.18001701, 0.56036715, -0.04207052, 1.08761316, 0.10036886, 0.57481806, 0.25946003, 0.53901969, 0.42514115, -0.43490003, 0.17413253, 0.98927462, -1.03232907, 0.1819374, -0.70176453, 0.31333646, 0.33080943, 0.39121941, -0.62672335, -0.65054383, -0.04517418, -0.12088381, -0.01804329, 0.05683406, 0.45080333, 1.47798919, -0.51680808, 0.73296181, -1.48945951, 0.74404927, 0.75088802, 0.17704742, -0.51834999, 0.04198799, -0.13868619, -0.05838725, -0.49027223, 0.27638584, 2.02584813, -1.25148804, 0.24972321, -0.19335215, 0.62556605, -0.2514363, 0.22177411, 0.63826601, -0.54012802, -0.10707163, 0.93831171, 1.12989518, 0.21530634, 1.21067474, 0.13818377, -0.69262038, 0.02886073, 0.29469636, 0.1480988, -1.29583559, -0.58162885, 0.81207667, -0.37826294, 0.46417966, 0.49384449, -0.37389535, 0.39729082, 0.08511844, -0.97422482, 0.73575366, -0.66093956, -0.18330258, 0.43329887, -0.08506892, 0.58911792, -0.06151641, -0.49245219, 0.49205393, 0.121273, -0.29452151, -0.48359684, -0.22048145, 0.61008063, 0.49397883, 0.67811953, -0.44626817, 0.71946891, -0.42557979, 0.40210063, 0.63631853, -1.02046362, 0.92248358, 0.96123277, 0.72412298, -0.8060785, -0.21486891, -1.37027589, 0.52257695, -0.10714835, -1.08687105, -0.61936232, -0.84997842, 1.05491477, 0.37951007, 0.52192154, 0.65894867, 0.27851039, -0.55289659, -1.08079426, -0.26859139, -0.16033914, -0.73331905, 0.51154261, -1.39762869, -0.35988197, 0.32214246, 0.55092736, -0.75884738, -0.11575132, -0.35883372, -0.01573113, 1.29988618, 1.17732022, 0.010014, 0.40095138, 0.21447211, 0.17495981, -1.05637666, -0.1781282, -0.29554115, -0.41499499, 0.21466573, 0.13314829, -0.32754156, -0.54871312, -0.6182757, -1.10433068, -0.28020414, -0.20971262, 0.90851942, 0.07758443, -0.62777127, -0.03705823, -0.7843605, 0.35139392, -0.46936848, -0.85024895, 0.33510784, 0.24013882, 0.52902027, 0.11585872, 0.48151824, -0.28568003, -1.26636815, 0.65577621, -0.07577273, -0.28189863, -0.11901846, 0.13208514, 0.19101085, -0.4680898, -1.22646417, 1.28397173, -0.78566114, -1.56642036, -0.84912138, 1.25314465, 0.38590742, 0.27558469, -0.59376337, 0.54032141, 0.87125474, -1.27068735, 1.34807346, 0.13984405, 0.09131003, -0.84027738, -0.38492104, -0.01261329, -0.39885724, 1.13270869, -1.02046083, 1.00566987, 0.02963152, 0.17467701, -0.53336961, -0.18238527, -1.14414412, -0.01182096, 0.25307798, -0.20359748, -0.0695521, -0.13440645, 0.26750904, -0.14119641, 0.35248018, 0.39799964, 0.04569278, 1.80155198, -1.33543038, -0.16360659, 0.00202509, 0.9023821, 0.1299744, 0.01393592, -0.44448482, 0.52724335, 0.49014318, 0.84315736, -1.65197569, 1.05383237, -0.33121668, 0.08938957, -0.23889197, -0.09618305, 0.86934385, 1.27300009, 1.59577239, 0.52001913, 0.2659651, 0.75374924, -0.31495881, -0.94089639, -0.39707486, 1.08004452, -0.78486726, 0.1657878, -1.10838613, -0.30296491, 0.02727271, 1.11018468, 0.14214768, 0.53123477, -0.65260925, 0.38206853, -0.31400402]);
  const b1 = new Float64Array([-0.3769938, -0.45708039, 0.1840647, -0.49859403, -1.19755413, -0.48706846, 0.14640391, 0.8514539, 0.53820686, 0.69263349, 0.38994627, 0.8531916, -0.27439562, 0.4009886, -0.6740462, -0.27949024, 0.29455258, -0.00034507, 0.53743342, 0.97994221, 1.02223938, 0.41637915, 0.11570332, 0.0702926]);
  const W2 = new Float64Array([-0.36393361, 0.76600759, -0.32311301, -0.37044924, -0.01863374, 0.79199933, -0.2163266, 1.20070149, -1.02148294, 0.0083419, 0.06359666, 1.11031189, 0.42117964, 0.27628324, -0.46810193, 0.24248746, 0.07207636, 0.09156226, -0.11509207, 0.35024306, -0.44417629, -0.05339462, 0.26774132, -0.27254216, 0.09509289, -0.65469355, -0.83629374, 0.45104715, 0.22883103, -0.90283069, -1.15603583, 0.09833863, 0.29237483, 0.47836261, -2.4460134, -0.56021614, -0.26992881, 0.43201711, -0.02180406, -0.51424737, -1.46169835, 0.30544392, 1.81139699, -0.07617088, 1.58025579, 0.74848514, 0.02369266, 0.13041428, -1.63889131, -0.52996167, 0.42526035, 0.41926151, -0.144258, -0.28895869, -0.02232091, 0.53920144, -0.14787584, -0.5741529, -0.62076608, 0.2941718, -0.47452249, -0.00123355, 0.4041733, -1.25805765, 0.22910861, -0.73952017, 0.09727384, -0.16606013, 0.04156928, 0.91861792, -1.42002961, -0.81805485, 0.57443283, 0.86570567, -0.19932989, -0.49271031, -1.63179525, -0.6927011, 0.89972923, 0.40743626, -0.75087564, 1.16170509, -0.41986334, 0.39460286, 0.89749259, 0.38983426, -0.47620402, -0.59410362, -0.30842786, 0.54130752, -0.07882, -0.20294656, 0.70568312, 0.6721814, -0.028044, 0.6512739, 0.75722795, -1.55043224, -0.27954478, -0.08522111, 0.99482679, 0.33379424, -0.3630426, -0.33156176, -0.92108823, 0.59060897, -0.05438484, -0.92390538, 0.65244049, -0.6213278, 0.82398787, 0.26221064, 0.21072438, -0.44529634, 0.23773221, 0.7228993, 0.82514828, -0.50748032, 0.33344273, 0.09323166, 0.20515946, 0.07801714, -0.44518889, 0.37120208, 0.07572043, 0.44320258, -0.22717027, -0.10482123, 0.26398932, -0.03062848, 0.70255935, 0.55667808, 1.13265819, -0.49028272, -0.36266301, 0.01647426, -1.11018706, 0.94490753, -0.4591503, 0.2275123, -0.59097867, 0.09167088, -0.47469073, 0.48256224, -0.85543583, 0.90945703, -0.32781463, -0.07944888, -0.38965299, 0.17363449, -0.33493807, 1.19614678, 1.52397341, -0.5126045, -0.92904639, -0.16536019, -0.07437995, -0.06630058, -0.05920561, -0.91556489, 0.27830692, -0.04637011, -1.268791, 0.71808597, -0.87078319, 0.33912577, -0.28772744, 0.8211476, 0.05298478, -0.10813952, 0.57768677, 0.84899942, -0.59795597, -0.66052374, 0.76742469, -0.7931425, -0.10961566, 0.09829366, -0.34175491, 0.51519788, -1.40315846, -0.16702435, -0.51209354, -0.38183541, 0.60264025, -0.10498202, -0.38149483, 0.33112388, 0.48871427, -0.22567533, -0.7913914, -0.02635052, 0.74428098, -0.76697084, -0.64660469, -0.28209903, -0.36147913, -1.26383792, -1.0025512, -0.35382618, 1.46433295, -0.77309231, -0.04454931, -1.1609705, 0.20221897, -0.02414127, -0.76231562, 0.73596926, -0.30292943, 0.02225386, -0.86552363, 1.54643087, -0.24689933, 0.31782228, 0.30385905, 0.35345317, -0.50139077, -0.26649418, -0.66252487, 0.59758983, -1.20314557, -0.00102702, -1.72954606, -0.69695597, 0.01010309, 0.07690896, -0.45218546, -0.63164826, -0.03793293, -0.30552826, 0.65476779, 0.60104735, 0.32822241, -0.35552989, 0.55512618, 0.58471448, 1.19603718, 0.50259965, -0.38864743, -0.09966946, -0.72886386, -0.78148735, 0.28832804, -0.28275472, -0.74906584, -1.31599546, 0.03450359, -0.15530443, -0.39851719, -1.43312151, 0.46560598, -0.00642272, -0.39440374, 0.22884593, 0.51599111, -0.39352526, 0.86692105, 0.03556991, -0.24389477, 0.51262709, 0.27055508, 0.38822586, -0.49411828, 0.63403343, -1.10228932, -1.1593433, -0.51061209, 1.15306232, 0.11640585, 0.44370477, -0.53130742, 0.26390809, -0.67154718, 1.40693708, -0.48723334, -0.49547427, 0.13578793, 0.24428097, -0.07702629, -0.12334438, 0.73434769, -0.34828112, 1.59163668, 0.15897032, 0.56919218, 0.77535925, 0.12950974, 0.41811662, -0.38307804, -1.92510929, -0.85514935, -0.25447702, 0.42686288, -0.15602175, -1.44877125, 0.60687618, 0.02640019, -0.05638041, -0.43861239, 0.33457765, 0.35254409, -0.20468833, -0.31108453, 0.00713026, -0.29020946, -0.46269764, -0.22214031, -0.46402655, -0.22948271, 0.87596305, 0.64690908, -1.07476093, 0.0491252, -0.50053172, -0.03114955, -0.16291113, 0.0695048, 1.14204312, 0.66589582, 0.68286839, -0.07678356, 0.49312202, -0.12123471, 0.52507097, -0.99656503, -0.37103426, -0.26655923, -0.75544704, -0.65432554, 0.50990224, 1.41448291, 0.783597, 0.4732937, 0.12736108, -1.98329906, -0.40487857, -1.08659657, 0.27248858, -0.83469585, -0.94199992, 0.63753699, -0.31288364, 0.40723314, -0.36106579, 0.45189581, -0.06192257, 0.2451347, 0.7518234, 0.73162397, -1.07409414, -0.07444491, 0.10628975, 0.11440681, 0.65798029, 0.79394028, 0.58606972, 0.45011631, 1.07236974, 0.49211977, -0.5974386, 1.08321938, 0.97710106, 1.19344415, 0.33450276, 0.14136327, 0.54938384, -0.55995131, -0.32786671, 0.4198819, -0.19464183, -1.11149979, -0.90131444, 2.48280857, 1.01865555, -0.26239437, -0.99392251, 0.60515907, -0.57263126, 0.91474912, 1.39025813, 0.78375887, 0.97426836, -0.24018025, -0.30298187]);
  const b2 = new Float64Array([0.49044545, 0.14832435, -0.10399946, 0.11030815, -0.68922647, -0.21270648, -0.94226456, -0.5901483, 0.27010855, -0.53688043, 0.57202995, -1.30302149, 0.14501043, 0.03385137, -0.41964462, 0.58487763]);
  const W3 = new Float64Array([-1.11992536, 4.53139432, -2.89361341, 6.23758128, -3.76610992, -0.38554416, 3.30262714, -3.16179178, -1.75913688, -2.48264956, 0.47743097, 1.09828654, -0.29926214, -2.06160024, -0.86656337, 3.74605644, 0.02934477, 5.44329593, 0.99398807, 9.04172845, -0.47661728, 0.88628877, 3.61989566, -2.00428394, -1.44359882, -1.83289812, -0.19174532, 1.37806327, 0.96615007, -0.30643046, 0.31657145, 1.23013555, -1.37346395, 0.49040335, -1.61664998, 2.16740278, -1.50815878, 0.20102948, 0.88683403, 1.32886478, 0.25889118, -2.7626618, -0.19922588, 1.21432, -4.40024236, -0.95583138, -2.19231325, -0.42404666, -0.88370609, 0.61475744, -0.15560042, 5.95764335, 4.11236093, 2.54421855, 1.4069629, 5.40031324, -0.9192656, 4.0505183, 2.05173544, -0.32517741, 0.84071744, -2.92066841, 0.15832721, -5.12158492, -1.00964129, 7.03878065, -3.93775312, 10.14645857, -5.36920526, -0.59732656, 0.0000242, -0.45126131, -4.70117446, -0.11856551, 3.28501056, 2.68392719, -0.7721146, 0.70172966, -1.35528559, 0.14938389]);
  const b3 = new Float64Array([0.04730517, 0.60743675, -0.15742229, -0.44259557, -0.95105089]);

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Float64Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Float64Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Float64Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}
