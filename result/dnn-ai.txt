function name(){ return "DNN-1"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [-0.2357732, 0.02634139, -0.2768696, 0.40091123, -0.27198983, 0.49810835, 0.31156402, 0.01940359, -0.7738431, -0.13783468, 0.10765544, 0.61622267, -0.0511993, 0.28267754, 0.14895243, 0.6471685, 0.44529869, -0.18262228, 0.45381755, -0.09739416, -0.395692, 0.12043324, 0.25958921, 0.44550519, -0.72043581, -0.32455332, -0.26604753, 0.40496418, -1.27806336, -1.3418663, 0.00503958, -0.42021287, -0.02611556, -0.17617193, -1.02944845, 0.18694497, -0.36452884, -0.48436563, -0.3599027, 0.04413992, 0.09432728, 0.03950904, -0.35843172, -0.06308131, 0.0156311, 0.19714881, -0.28304971, 0.0206515, -0.42586885, 0.16671394, 0.41487369, -0.3987425, -0.26535347, 0.09109996, -0.24583065, 0.54707823, 0.13530272, -0.44648455, -0.00522103, -0.11447097, 0.1787504, -0.26528898, 0.61932067, -0.49996168, -0.59178697, -0.01416045, -0.11558889, -0.14163286, 0.23887228, 0.6341497, 0.27309587, -1.23442547, -0.49337339, 0.41936009, -0.53181299, -0.32536327, -0.61247861, -0.25948647, 0.39173963, -0.22754439, 0.08453632, -0.29416437, 0.14266488, -0.018089, 0.68862312, -0.78499064, 0.19457195, -0.47508544, 0.15762316, -0.01909196, -0.16632682, 0.02828834, 0.78604801, -0.54883196, 0.80731106, 0.33965961, -0.02857838, -0.13870498, 0.66473777, -0.33735956, 0.03711809, 0.01366417, 0.1814562, -1.05214982, -0.20639146, 0.10438804, 0.27242064, -0.07503711, 0.32133774, 0.15374217, 0.47711521, -0.03397035, 0.12795526, 0.077671, -1.2802327, -0.80711007, -0.02167037, 0.24367284, 0.38230997, -0.20432688, -0.55583685, 0.64721242, 0.75056146, 0.30868136, -0.44595948, 0.18272466, -0.53687228, 0.5343944, 0.21617953, -0.29297674, -1.07207191, 0.39614951, -0.39112253, 0.36107937, -0.37838412, -0.15788288, 0.2573166, 0.6466398, 1.12507457, 0.58998512, 0.01500307, 0.72210532, -0.00037618, -0.05216391, 0.20299318, 0.23693515, 0.06008989, 0.18305067, 0.09455217, -0.55164513, 0.31161314, 0.30265037, -0.31439486, 0.36993244, 0.043895, 1.11475629, 0.02862288, -0.05309323, -0.20257513, -1.01460075, 0.59632834, -0.16275008, 0.03822404, -1.01930431, -0.33694263, 0.63591434, -0.04932564, -0.64803293, -0.52810161, -0.55397281, 0.44148106, -0.15985292, 0.21641667, -0.31279188, -0.01142058, -0.11749153, -0.13905185, -0.90877486, -0.64699426, -0.03272542, 0.51172517, -0.92667678, 0.10537888, -0.50114096, 0.09444276, 0.14649023, -0.26500213, -0.2693419, 0.05984365, 0.09452058, -0.31706702, -0.36956691, 0.89187971, 0.19087493, -0.21811088, -0.83137973, -0.74630028, -0.09959176, 0.09500996, -0.2923984, 0.41870228, -0.94529939, -0.6623974, 0.47803185, 0.30693394, -0.44615616, -1.07450704, -0.03953652, 0.06985743, 0.18297802, 0.33126735, 0.40507084, 0.03806302, 0.27472966, 0.14885497, -0.38299512, 0.57495117, -0.44939423, -0.26144651, 0.00330667, -0.17740051, 0.18165847, -0.1173933, 0.66457661, -0.60639531, 0.13394702, 0.06311017, 0.40852277, -0.07798384, 0.09199797, 0.21940218, 0.53032653, -0.14268529, 0.30985419, 0.05685485, 0.39474354, 0.57284904, 0.61280362, -0.30627413, 0.39395862, 0.85835203, -0.24064918, -0.58957863, 0.9966288, 0.64410104, 0.65472918, 0.21590269, -1.06021328, 0.73186616, 0.6056456, 0.09301941, 0.27854138, -0.5394236, 0.7364847, 0.34187712, 0.71339864, 0.20932205, -0.13908938, 0.32454092, -0.02385126, 0.4102746, 0.35441755, -0.10600595, -0.2566295, -0.07759301, 0.50798128, -0.0049675, 1.83731818, -0.03331043, 0.03269217, 0.14522556, 0.17030689, 0.13514892, 0.57806525, 0.0871643, 0.02011128, 0.21156542, 0.31465029, 0.64349551, -0.28241731, 0.19481499, 0.14808729, 0.66295225, 0.62612837, 0.04167787, 0.12423115, -0.05351779, 1.38133295, 0.13949702, 0.09180802, -0.26763491, -0.33108576, 0.45118776, -0.29460004, 0.65140407, -0.68211143, -1.08954084, 0.58350625, -0.31354752, 0.42177181, 0.36211515, 0.16961878, -0.08926298, -0.36578472, 0.24271354, 0.17211399, 0.22284118, -0.75480529, 0.08954827, -0.54673226, -0.20164896, -0.01798856, 0.35379824, -0.42216938, -0.50346707, 0.15213156, -0.06373593, -0.29000228, 0.2027261, -0.15171819, -0.00377551, -1.03858815, -0.87202946, -0.11194298, 0.2758585, -0.77119197, 0.7981156, -0.24303843, -0.58440428, 1.21380153, 1.04824116, -0.21117462, -0.8423889, -0.02087191, 1.16906926, 0.9703315, -0.38302848, -0.43875439, -0.62767248, 0.12127513, 1.13537919, -0.22921823, 0.12067754, -0.69609811, 0.43107382, -0.12191585, -0.50169014, 0.80063014, 0.31970946, 0.40921847, -0.38801561, -0.04209568, -0.06308807, 1.8093925, 0.19808815, -0.04397689, 0.21267481, 0.06348, -0.03697248, -0.26231326, -0.00118257, 0.28359176, 0.16005355, 0.01664968, 0.866719, -0.58145217, -0.09146186, 0.20107679, -0.27990698, -0.04436133, -0.39920918, -0.61689032, -1.10618906, 0.9171798, -0.53466555, -0.28348998, -0.1231616, -1.09907272, 0.78678451, -0.5981971, -0.40642012, -0.3096091, -1.09386969, 1.06980515, -0.79942156, -0.91427517, -0.4096431, -0.24233566, -0.30615205, -0.88901262, -0.86479727, -0.44055508, -0.3963222, -0.21526566, 0.01032306, 0.35014156, -4.78352904, -0.29543986, -0.6111401, 0.24253167, 0.65401288, 0.4217101, -0.06745108, 0.10270246, 1.14385676, 0.16327688, -0.49374794, 1.20178487, 0.49484133, -0.1222703, -0.04055787, -0.16786515, 0.05658129, 0.30881351, -0.23910557, 0.08267583, -0.82662538, -0.2936944, 0.30498341, -0.30492662, 1.22938781, -1.38010541, -0.34034213, 0.87322636, -0.52356623, 1.31479852, 0.25174402, -0.14609408, 0.84556585, 0.01255683, 0.11420633, -0.18321017, 0.01440074, 0.02996949, -0.39405712, -0.61246269, 0.32041495, 0.1930965, -0.77072619, -0.5335698, 0.16169134, -0.05634864, 0.08555152, -0.13295023, -0.26851962, 0.17436667, -0.54976472, 1.05511108, -0.18092632, -0.76094481, 0.69092003, 0.56430217, -0.24604029, 0.89844454, 0.18669489, 0.93804533, -0.76826344, 0.18669313, 1.06182759, -0.94942139, 0.2943491, -0.21588942, 0.00849108, 0.30275311, -0.69889326, 0.13911169, 0.18370253, -0.88747634, 0.27273599, -0.04867609, 0.29838191, -0.00393964, -0.69674422, -0.13377483, -0.89051287, 0.20302294, -0.14039776, -0.1274034, 0.04852941, -0.33614926, -0.02585425, -0.0404718, -0.05939889, 0.14324031, -0.72520171, -1.0375725, 0.12612976, -0.17577518, -0.62986626, 0.6144157, 0.06530959, -0.32639405, -0.19318147, 0.73856011, -0.31917996, 0.27949492, -0.22504909, 2.07801705, 0.92924964, -0.05670527, -0.31497623, -0.54934355, -0.45569069, 0.92493849, 0.47380143, 0.12334206, -0.08723864, -0.55940267, 0.34416949, -0.35268622, 0.22252883, -0.18668398, -0.49287651, 0.82483699, 0.17049323, -0.36894765, 0.46002704, 0.39026147, -0.02633802, 0.27822955, -0.60688266, 0.00461498, -0.41695397, 0.63904946, -0.42534705, -0.35748937, 0.05943162, 0.34075674, -0.42435248, 0.05444187, 0.09367026, 0.27935257, 0.33716515, 0.36117114, 0.2903928, 0.3352802, 0.28577795, 0.50842142, 0.3873581, -0.14820455, -0.03641834, -0.46644767, 0.45719931, 0.35813923, 1.66523348, 1.09722954, 0.41483574, -0.12524579, 0.95003115, 1.08203855, 0.14017292, 0.47153747, 0.05333192, 0.7562444, 0.63787555, -0.69017265, 0.08046007, 0.33481676, -0.08012297, 0.46828347, -0.33924237, -0.0648715, 0.00541225, 0.92991958, 0.28157712, -0.040611, 0.45487365, -0.70853334, -1.48176201, 0.68683515, 0.45567688, -0.73684179, 0.32903689, -0.5127594, 0.01785268, -0.51966395, 0.49014177, 0.04126317, -0.33796322, -0.08865805, -0.36920743, 0.0287596, 0.57302842, 0.06263771, 0.60168178, 0.02604508, 0.58665349, 0.2900799, -0.81840984, 0.41305784, -0.67990565, 0.00580809, 0.06885373, -1.09843913, 0.69194489, -0.57036928, 0.14163079, -0.32603203, -0.67528092, 0.13433141, 0.00804013, 0.11347552, -0.26162916, -0.46360183, 0.30511908, 0.24982625, -0.46724763, 0.09166332, 0.95149154, 0.22090068, -0.09459887, 1.70734053, 0.74930376, 0.22669064, 0.23088873, 0.00691208, 0.25461777, 0.49022368, -0.14824938, -0.08682214, 0.34272745, 0.54509346, 1.4000886, -0.03680593, 0.03357015, -0.26427125, -0.64349718, -0.40486876, -0.27951439, -0.34387091, 0.43569515, -0.14073143, -1.00215432, -0.77639047, 0.70114047, -0.42803449, 0.57140846, -0.26717316, -0.07949634, 0.28524032, 0.27920031, 0.61605446, -0.34894915, -0.2712964, -0.63830127, -0.09076834, 0.07402614, -0.35414093, -0.0684393, 0.34896978, 0.32264804, -0.34490816, -0.45356265, 0.63439775, -1.57600579, -0.06746198, -0.08537566, 1.09918399, 0.31868402, -0.03376455, -0.25548217, 0.42193183, -0.3127198, 0.4727384, -0.06248772, 0.08320642, -0.2881927, 0.00782974, 0.4451475, 0.77373579, 0.22577541, 0.30525797, -0.45273546, 1.03770254, -0.05583925, -0.16798302, 0.07008786, 0.16383369, 1.57074778, 0.93955063, -0.12112078, 0.66962385, -0.26793744, 1.04184463, 0.29216865, 0.16070794, 0.33549893, -0.45702747, -1.13992813, -0.64657602, 0.26132991, -0.02085444, 0.16059716, -0.26935617, 0.34359996, -0.22458816, -0.72919062, -0.22978941, 0.37173572, 0.16773367, 0.02098599, 0.2716156, -0.53525399, -0.27688178, -0.97950053, -0.32334612, -0.25029956, -0.06467537, -0.07218093, -1.01340458, -0.21611213, 0.15029247, -0.38265591, -0.47588177, 0.06405578, 0.37624425, -0.08201947, 0.22172391, 0.03612089, -0.12981825, -0.11134576, 0.33256439, 0.11602157, -0.16626147, 0.61933846, -0.24215501, -0.55514468, 0.52243741, 1.20488911, 0.19173783, 0.20565168, 0.00644769, 0.6703385, 0.2052223, 0.17900277, 0.16313057, 0.58269392, 0.00173648, 0.50942206, -0.61683307, -1.46956046, 0.01266611, -0.09550294, -0.39602346, 0.07013626, 0.60146089, 0.68026193, -0.29026554, -0.2540086, 0.46243097, 0.04812017, -1.26404814, -0.39118637, 0.47828079, -0.02254198, -0.29781671, -0.25658804, -0.54873166, -0.49387461, -0.76328254, -1.01676986, -0.13034879, 0.15770167, -0.44614452, -0.06037171, -0.17925293, 0.23464917, -0.68336229, 0.57623704, -0.31081313, -0.49639537, -0.40952591, -0.22370329, 0.43885301, -0.028323, 0.0188124, -0.18967801, -0.35367742, -0.19206563, -0.49588587, 0.24829387, 0.01903777, 0.57040827, 2.72491966, -0.37807439, -0.40776463, 0.03627962, -0.93149738, -0.04963062, -0.34383704, -0.02506453, 0.11986074, 0.24562915, -0.33740327, 0.23716379, 0.21267282, 0.08205699, -0.02999661, 0.55361538, 0.35859333, -0.02758471, 0.35317362, 0.46563806, -0.01505904, -0.06359542, 0.28172492, -0.01575933, -0.09248343, 0.05493762, -0.21260668, 0.22769476, 0.23893377, 0.5173057, 0.42637082, 0.33849944, 0.39346337, 0.03080021, -0.31391991, 0.34274927, 0.24812789, 0.16865966, 0.18244305, 0.46673628, -0.71000847, 0.00293225, 0.4536123, 0.91971681, -0.30898484, -0.19726569, 0.4793678, -0.39953838, 0.04603011, -0.19085773, -0.49374168, 0.14248923, -0.25347248, 0.1539884, -0.3381789, 0.6150777, -0.1885152, -0.07296459, 0.11777548, -0.12478369, -0.78552517, 0.12054085, 0.91435569, 0.47031117, 0.04047152, -0.08767102, 0.28111799, -0.02124643, 1.13503109, 0.03670552, 0.09898181, 0.64261767, 1.41467219, -0.71452366, 0.27641977, -0.4476406, -0.27908163, 0.53286556, 0.01147704, -0.08576561, 0.34389645, 0.16502984, -0.03746609, -0.12941539, 0.05676178, -0.43498304, -0.56349863, 0.41625942, 0.37243294, -0.22078923, -0.84976553, 0.05545318, -0.03537457, 0.44254738, -0.76460323, -0.20293335, 0.30298515, -0.01907024, -0.62560245, 0.6279514, 0.44739138, 1.22262979, 0.35938674, 0.89309988, 0.36212964, 0.23205768, 0.52482745, 0.25233463, -0.62129294, 0.05498481, -0.4560259, -0.23054347, -0.02574204, -0.48216593, 0.33955806, 0.20483013, -0.90602299, 0.57322584, -0.05093936, 0.1646145, -0.01429148, 0.40006555, 0.01888463, 0.28819351, 0.0726744, 0.32692636, 0.57094279, -0.18648538, 0.00556427, -0.04964708, 0.4111429, 0.25742869, 0.0896221, -0.38195579, 0.15628806, -0.01166875, -0.2901624, -1.32993149, -0.00591237, 0.10646304, -0.41226836, -0.15054724, 0.21722247, -0.41034127, 0.5878759, -0.58710366, 0.23164358, 0.40791447, -1.01599833, -0.12948828, -0.49793159, 0.19025755, 0.31259493, -0.48683006, 0.33777179, -0.08704104, -0.30503902, 0.68525083, -0.49020564, 0.06250808, 0.40463369, 0.33772726, 1.04466189, 0.15990268, -0.52680586, 0.14771937, 0.16826381, -0.16129405, 0.38795634, 0.84928823, 0.45345982, 1.10246936, 0.08383852, 0.0780205, -0.17398169, 0.43126701, -0.44679115, 0.11457492, -0.01764735, 0.57507503, -0.12219563, 0.59354659, -0.19624025, 0.43172547, 1.56085574, -0.32837438, -0.41954544, 1.35660896, 1.05986259, 0.41042023, 0.25119354, 0.04962639, 0.1819531, -0.82794901, 0.38166209, 0.666766, -0.13868658, 0.01395617, -0.20142711, -0.08781057, 0.22192809, 1.71218669, -0.02913629, -0.83176747, 0.38935886, 0.12619378, 0.3367484, 0.06111146, 0.20676118, 0.15945462, 0.09938302, -0.00768375, 0.06067527, 0.5972888, 0.38486441, 0.17080494, 0.22716211, 0.03381028, -0.00233479, -1.02576006, 0.69778953, 0.21272467, -0.32264809, -1.21195787, 0.05201386, 0.47900678, -0.75168006, -2.04562592, 0.44292291, -0.11270947, -0.08236143, -0.25360588, -0.02693176, -0.23172039, -0.45858358, -1.29033933, 1.00028266, 0.3434152, -0.34193044, 0.12953692, -0.65773072, 1.41460808, 0.35848971, -0.20396988, -0.50504556, -1.33247652, 0.90431179, -0.13210972, 0.28488859];
  const b1 = [0.15920827, -0.43166889, -0.0675993, 0.03339267, -0.14736637, -0.1983139, 0.02390528, -0.40268505, -0.49983402, -0.71953602, -0.08518223, -0.57073853, 0.22758926, 0.55602469, -0.0077341, 0.02096832, -0.2051495, 0.3016202, -0.3751937, -0.10366951, 0.20311337, 0.01694928, -0.12531235, 0.14691086];
  const W2 = [0.54247374, 0.86832904, 0.18068135, 0.20984645, -0.49189309, -0.25879529, 0.05251636, -0.30104285, 0.0260195, 0.86289642, -0.26084685, -0.32439601, -0.58021052, 0.31087067, -0.14465713, -1.03364043, 0.26452191, 0.55054756, -0.4607206, -0.83993635, 0.00743894, 0.40357251, 0.81217289, 0.23951988, -0.25816643, -0.53121914, -0.06674625, -0.51526671, -0.02816474, -0.52170475, -0.52637129, -0.23987969, 0.55976685, 0.32173093, -0.60648788, -0.98959481, 0.63481982, 0.0428517, 0.02475942, 0.0119749, -0.06099691, 0.6755614, 0.46943357, -0.88339713, -0.0266863, 0.66544902, 0.0956175, -0.07551576, -0.64720404, -0.08306334, 0.15592898, -0.01733847, -0.06427562, 0.38829296, 0.55680505, 0.45237054, -0.495264, -0.52682366, -0.36012757, 0.11459108, 0.51118291, 0.01974198, -0.54573976, -0.16269153, -0.07672154, -0.25754632, 0.54168173, 0.84106338, -0.19201789, -0.4100774, 0.1942514, 0.10992718, 0.65214561, 0.64041501, 0.47816714, -0.12205325, 0.33038189, -0.59251034, -0.49714791, -0.46177991, 0.63834309, 0.02022834, -0.57199429, 0.63473198, -0.19282243, -0.04622024, -0.71073075, -0.16915612, 0.87368364, -0.19639622, -0.46144101, -0.09226731, -0.41031184, -0.52299841, 0.45185886, 0.00431855, 0.02172061, 0.10904878, 0.72830684, 0.2678994, -0.16777036, -0.14819549, -0.06292678, 0.41464158, -0.26905812, 0.26501398, -0.00895521, -0.65785324, 0.23332399, -0.33462707, 0.68975489, -0.72196349, -0.27834403, 0.41103108, 0.13309676, 0.40994753, 0.23468863, -0.05969509, 0.26308608, 0.11043425, -0.24267272, -0.05843755, -0.74976216, -0.10064263, -0.49080933, 0.33140413, -0.49959361, 0.0911211, -0.12154595, 0.3718216, -0.06100468, -0.03833565, 0.14697059, -0.55189811, 0.2544361, 0.01742821, 0.37990524, -0.45885477, 0.15632297, 0.41644768, 0.4328091, -0.67248781, 0.57953217, -0.03029795, -0.4191149, -0.00243307, 0.13287425, 1.14071682, -0.32292669, 0.14139873, 0.85955806, -0.37252867, 1.43420743, -0.53709538, -0.00572119, 0.37029745, 0.41790264, -0.27744215, 0.0682296, -0.80051132, -0.09693305, -0.22096531, 0.76050983, 0.37026393, -0.80277079, -0.0051135, 0.56795758, -0.51399867, -0.0755205, -0.06466649, 0.36783789, 0.20255052, -0.26522135, 0.85287384, 0.52123548, 0.19054305, -0.17399183, 0.08761386, 0.21850481, -0.30273283, 0.11424527, 0.24557832, -0.25402611, 0.21782415, 0.29789938, 0.70312415, -0.80951691, 0.10204281, 0.69423295, 0.16915515, -0.69604868, 0.59288883, -0.04233299, -0.09917248, 0.03605698, 0.14327247, -0.50878509, -0.41314975, 0.32353387, -0.56799082, 0.41152038, -1.05467736, -0.33218165, -0.01466625, 0.2500429, -0.00640784, 0.48920246, -0.06851237, 0.10950843, -0.28047306, 1.27122974, 0.26778687, -0.20965498, 0.05966231, -0.00737077, 0.51376314, -0.03310669, 0.04000779, 0.32301482, -0.62258329, 0.06372631, -0.10490108, -0.33816124, -0.11193624, -0.93471216, 0.06005379, -0.00582699, -0.11404245, -0.38422749, 0.3752085, -0.5069963, -0.18867895, -0.44620464, 0.55795773, -0.00158051, 0.33624875, 0.31926824, 0.02160093, 0.6654894, -0.31819482, 0.08356259, -0.43952932, -0.06293565, 0.0535796, 0.30535802, 0.01247109, -0.7281938, -0.08689071, -0.23844762, -1.02881999, 0.38698379, -0.71748919, 0.26524313, 0.2902467, -0.53168338, 0.91810756, 0.38495431, 0.43431144, 0.00504469, 0.035795, 0.21446148, 0.16667373, -0.31032626, 0.84076548, -0.33922565, -0.36437759, 0.33573022, -1.01241875, -0.31344073, -0.42350423, 0.05523917, 0.19400118, 0.91095566, 0.15839675, 0.739852, -0.53507346, -0.54574754, 0.11692534, -0.33822965, 0.59021345, -0.32560446, -0.13722227, 0.14831106, -0.61720111, 0.24636341, -0.05821383, -0.01996904, -0.04065672, -0.21986686, -0.08767616, -0.00745672, -0.22921492, -0.30577557, 0.43697187, 0.13097605, -0.20986671, 0.35204903, 0.29037645, -1.04140773, -0.70221042, -0.06041101, 0.48038921, 0.19865339, -0.05975922, 0.03434219, -0.06742248, 0.74869572, -0.10867569, 0.06348322, -0.21926995, 0.02474056, -0.39416978, -0.11967728, -0.01576845, -0.09075414, 0.46405326, -0.15242146, 0.05803013, 0.1037105, -0.33557925, 1.29393612, -0.78121679, -0.07083863, -0.45795545, 0.49496264, -0.41003813, 0.28690868, -0.13999092, 0.24309896, 0.25744957, 1.19925399, -0.38188064, -0.68897555, 0.05424064, 0.31072307, -0.17813833, 0.04111223, 0.05967255, -0.17640973, 0.0967115, -0.27474694, -0.07308925, -0.29375981, 0.05935046, -0.34840387, -0.43971671, -0.01109003, -0.61678802, -0.16670553, 0.27477585, 0.11880909, 0.00606765, -0.46084648, 0.19119837, -0.27664747, -0.17710353, -0.11481983, 0.82559053, -0.32826093, 0.30087227, 0.15331873, 0.09051307, 0.00214496, 0.24929402, -0.12908378, 0.92054806, -0.85514176, 0.1281831, -0.25799487, 0.35822421, -0.22283738, -0.02276509, 0.1509969, -0.48196055, -0.81578716, -0.00636459, 0.07790823, -0.50144091, 0.03868029, 0.18902279, -0.17966878, -0.56509588, 0.15466779, 0.04008383];
  const b2 = [0.03334961, 0.07560899, -0.0306667, 0.07332929, 0.30675453, -0.27532262, -0.10842766, 0.28548837, 0.00461051, 0.16640197, -0.61591286, -0.17170685, -0.13848418, -0.10602048, 0.81079592, -0.43535308];
  const W3 = [0.83773354, 0.43208601, -0.30642806, 0.7331294, -0.14490738, -0.50015562, 0.52790396, -1.37173614, -0.34714762, -0.60350551, -0.13255906, -0.07448241, -0.34614463, 0.75937533, 0.05045933, -0.61851931, 0.09060202, 0.24280053, 0.36570273, 0.06898967, -1.42465876, -1.12020136, -0.02890302, 0.50931894, -0.41850085, -0.09908804, -0.07563624, -0.11718983, -0.1749126, 0.55965612, -0.67766312, -0.01556262, 0.29130563, -0.0623848, -0.33215347, -0.67290029, 0.30722107, 0.42222655, -0.04453258, -0.30191282, -0.76489039, 0.00257077, 0.34370651, 0.2151296, -0.13947726, 0.20678835, -0.25881618, 0.17061797, 0.19543123, -0.35961783, 0.15370324, 0.47495654, -0.86579057, 0.30703933, -0.00386803, -0.08714491, 0.11455408, 0.73578083, 0.35128798, -0.06305502, 0.98634428, 0.15569331, 0.17489905, 0.21520658, 0.55075377, 1.2752488, -0.22134933, 0.03846544, 0.21248838, -0.37755592, -0.63355997, -0.43677321, -0.94789427, 0.19605512, -0.81639076, -0.00392941, 0.49647528, -1.31916409, 0.08576553, -0.41647767];
  const b3 = [0.01226738, -0.50027164, 0.63185453, 0.49247114, 0.44428307];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-2"; }
function type(){ return Type.NORMAL; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [-0.2357732, 0.02634139, -0.2768696, 0.40091123, -0.27198983, 0.49810835, 0.31156402, 0.01940359, -0.7738431, -0.13783468, 0.10765544, 0.61622267, -0.0511993, 0.28267754, 0.14895243, 0.6471685, 0.44529869, -0.18262228, 0.45381755, -0.09739416, -0.395692, 0.12043324, 0.25958921, 0.44550519, -0.72043581, -0.32455332, -0.26604753, 0.40496418, -1.27806336, -1.3418663, 0.00503958, -0.42021287, -0.02611556, -0.17617193, -1.02944845, 0.18694497, -0.36452884, -0.48436563, -0.3599027, 0.04413992, 0.09432728, 0.03950904, -0.35843172, -0.06308131, 0.0156311, 0.19714881, -0.28304971, 0.0206515, -0.42586885, 0.16671394, 0.41487369, -0.3987425, -0.26535347, 0.09109996, -0.24583065, 0.54707823, 0.13530272, -0.44648455, -0.00522103, -0.11447097, 0.1787504, -0.26528898, 0.61932067, -0.49996168, -0.59178697, -0.01416045, -0.11558889, -0.14163286, 0.23887228, 0.6341497, 0.27309587, -1.23442547, -0.49337339, 0.41936009, -0.53181299, -0.32536327, -0.61247861, -0.25948647, 0.39173963, -0.22754439, 0.08453632, -0.29416437, 0.14266488, -0.018089, 0.68862312, -0.78499064, 0.19457195, -0.47508544, 0.15762316, -0.01909196, -0.16632682, 0.02828834, 0.78604801, -0.54883196, 0.80731106, 0.33965961, -0.02857838, -0.13870498, 0.66473777, -0.33735956, 0.03711809, 0.01366417, 0.1814562, -1.05214982, -0.20639146, 0.10438804, 0.27242064, -0.07503711, 0.32133774, 0.15374217, 0.47711521, -0.03397035, 0.12795526, 0.077671, -1.2802327, -0.80711007, -0.02167037, 0.24367284, 0.38230997, -0.20432688, -0.55583685, 0.64721242, 0.75056146, 0.30868136, -0.44595948, 0.18272466, -0.53687228, 0.5343944, 0.21617953, -0.29297674, -1.07207191, 0.39614951, -0.39112253, 0.36107937, -0.37838412, -0.15788288, 0.2573166, 0.6466398, 1.12507457, 0.58998512, 0.01500307, 0.72210532, -0.00037618, -0.05216391, 0.20299318, 0.23693515, 0.06008989, 0.18305067, 0.09455217, -0.55164513, 0.31161314, 0.30265037, -0.31439486, 0.36993244, 0.043895, 1.11475629, 0.02862288, -0.05309323, -0.20257513, -1.01460075, 0.59632834, -0.16275008, 0.03822404, -1.01930431, -0.33694263, 0.63591434, -0.04932564, -0.64803293, -0.52810161, -0.55397281, 0.44148106, -0.15985292, 0.21641667, -0.31279188, -0.01142058, -0.11749153, -0.13905185, -0.90877486, -0.64699426, -0.03272542, 0.51172517, -0.92667678, 0.10537888, -0.50114096, 0.09444276, 0.14649023, -0.26500213, -0.2693419, 0.05984365, 0.09452058, -0.31706702, -0.36956691, 0.89187971, 0.19087493, -0.21811088, -0.83137973, -0.74630028, -0.09959176, 0.09500996, -0.2923984, 0.41870228, -0.94529939, -0.6623974, 0.47803185, 0.30693394, -0.44615616, -1.07450704, -0.03953652, 0.06985743, 0.18297802, 0.33126735, 0.40507084, 0.03806302, 0.27472966, 0.14885497, -0.38299512, 0.57495117, -0.44939423, -0.26144651, 0.00330667, -0.17740051, 0.18165847, -0.1173933, 0.66457661, -0.60639531, 0.13394702, 0.06311017, 0.40852277, -0.07798384, 0.09199797, 0.21940218, 0.53032653, -0.14268529, 0.30985419, 0.05685485, 0.39474354, 0.57284904, 0.61280362, -0.30627413, 0.39395862, 0.85835203, -0.24064918, -0.58957863, 0.9966288, 0.64410104, 0.65472918, 0.21590269, -1.06021328, 0.73186616, 0.6056456, 0.09301941, 0.27854138, -0.5394236, 0.7364847, 0.34187712, 0.71339864, 0.20932205, -0.13908938, 0.32454092, -0.02385126, 0.4102746, 0.35441755, -0.10600595, -0.2566295, -0.07759301, 0.50798128, -0.0049675, 1.83731818, -0.03331043, 0.03269217, 0.14522556, 0.17030689, 0.13514892, 0.57806525, 0.0871643, 0.02011128, 0.21156542, 0.31465029, 0.64349551, -0.28241731, 0.19481499, 0.14808729, 0.66295225, 0.62612837, 0.04167787, 0.12423115, -0.05351779, 1.38133295, 0.13949702, 0.09180802, -0.26763491, -0.33108576, 0.45118776, -0.29460004, 0.65140407, -0.68211143, -1.08954084, 0.58350625, -0.31354752, 0.42177181, 0.36211515, 0.16961878, -0.08926298, -0.36578472, 0.24271354, 0.17211399, 0.22284118, -0.75480529, 0.08954827, -0.54673226, -0.20164896, -0.01798856, 0.35379824, -0.42216938, -0.50346707, 0.15213156, -0.06373593, -0.29000228, 0.2027261, -0.15171819, -0.00377551, -1.03858815, -0.87202946, -0.11194298, 0.2758585, -0.77119197, 0.7981156, -0.24303843, -0.58440428, 1.21380153, 1.04824116, -0.21117462, -0.8423889, -0.02087191, 1.16906926, 0.9703315, -0.38302848, -0.43875439, -0.62767248, 0.12127513, 1.13537919, -0.22921823, 0.12067754, -0.69609811, 0.43107382, -0.12191585, -0.50169014, 0.80063014, 0.31970946, 0.40921847, -0.38801561, -0.04209568, -0.06308807, 1.8093925, 0.19808815, -0.04397689, 0.21267481, 0.06348, -0.03697248, -0.26231326, -0.00118257, 0.28359176, 0.16005355, 0.01664968, 0.866719, -0.58145217, -0.09146186, 0.20107679, -0.27990698, -0.04436133, -0.39920918, -0.61689032, -1.10618906, 0.9171798, -0.53466555, -0.28348998, -0.1231616, -1.09907272, 0.78678451, -0.5981971, -0.40642012, -0.3096091, -1.09386969, 1.06980515, -0.79942156, -0.91427517, -0.4096431, -0.24233566, -0.30615205, -0.88901262, -0.86479727, -0.44055508, -0.3963222, -0.21526566, 0.01032306, 0.35014156, -4.78352904, -0.29543986, -0.6111401, 0.24253167, 0.65401288, 0.4217101, -0.06745108, 0.10270246, 1.14385676, 0.16327688, -0.49374794, 1.20178487, 0.49484133, -0.1222703, -0.04055787, -0.16786515, 0.05658129, 0.30881351, -0.23910557, 0.08267583, -0.82662538, -0.2936944, 0.30498341, -0.30492662, 1.22938781, -1.38010541, -0.34034213, 0.87322636, -0.52356623, 1.31479852, 0.25174402, -0.14609408, 0.84556585, 0.01255683, 0.11420633, -0.18321017, 0.01440074, 0.02996949, -0.39405712, -0.61246269, 0.32041495, 0.1930965, -0.77072619, -0.5335698, 0.16169134, -0.05634864, 0.08555152, -0.13295023, -0.26851962, 0.17436667, -0.54976472, 1.05511108, -0.18092632, -0.76094481, 0.69092003, 0.56430217, -0.24604029, 0.89844454, 0.18669489, 0.93804533, -0.76826344, 0.18669313, 1.06182759, -0.94942139, 0.2943491, -0.21588942, 0.00849108, 0.30275311, -0.69889326, 0.13911169, 0.18370253, -0.88747634, 0.27273599, -0.04867609, 0.29838191, -0.00393964, -0.69674422, -0.13377483, -0.89051287, 0.20302294, -0.14039776, -0.1274034, 0.04852941, -0.33614926, -0.02585425, -0.0404718, -0.05939889, 0.14324031, -0.72520171, -1.0375725, 0.12612976, -0.17577518, -0.62986626, 0.6144157, 0.06530959, -0.32639405, -0.19318147, 0.73856011, -0.31917996, 0.27949492, -0.22504909, 2.07801705, 0.92924964, -0.05670527, -0.31497623, -0.54934355, -0.45569069, 0.92493849, 0.47380143, 0.12334206, -0.08723864, -0.55940267, 0.34416949, -0.35268622, 0.22252883, -0.18668398, -0.49287651, 0.82483699, 0.17049323, -0.36894765, 0.46002704, 0.39026147, -0.02633802, 0.27822955, -0.60688266, 0.00461498, -0.41695397, 0.63904946, -0.42534705, -0.35748937, 0.05943162, 0.34075674, -0.42435248, 0.05444187, 0.09367026, 0.27935257, 0.33716515, 0.36117114, 0.2903928, 0.3352802, 0.28577795, 0.50842142, 0.3873581, -0.14820455, -0.03641834, -0.46644767, 0.45719931, 0.35813923, 1.66523348, 1.09722954, 0.41483574, -0.12524579, 0.95003115, 1.08203855, 0.14017292, 0.47153747, 0.05333192, 0.7562444, 0.63787555, -0.69017265, 0.08046007, 0.33481676, -0.08012297, 0.46828347, -0.33924237, -0.0648715, 0.00541225, 0.92991958, 0.28157712, -0.040611, 0.45487365, -0.70853334, -1.48176201, 0.68683515, 0.45567688, -0.73684179, 0.32903689, -0.5127594, 0.01785268, -0.51966395, 0.49014177, 0.04126317, -0.33796322, -0.08865805, -0.36920743, 0.0287596, 0.57302842, 0.06263771, 0.60168178, 0.02604508, 0.58665349, 0.2900799, -0.81840984, 0.41305784, -0.67990565, 0.00580809, 0.06885373, -1.09843913, 0.69194489, -0.57036928, 0.14163079, -0.32603203, -0.67528092, 0.13433141, 0.00804013, 0.11347552, -0.26162916, -0.46360183, 0.30511908, 0.24982625, -0.46724763, 0.09166332, 0.95149154, 0.22090068, -0.09459887, 1.70734053, 0.74930376, 0.22669064, 0.23088873, 0.00691208, 0.25461777, 0.49022368, -0.14824938, -0.08682214, 0.34272745, 0.54509346, 1.4000886, -0.03680593, 0.03357015, -0.26427125, -0.64349718, -0.40486876, -0.27951439, -0.34387091, 0.43569515, -0.14073143, -1.00215432, -0.77639047, 0.70114047, -0.42803449, 0.57140846, -0.26717316, -0.07949634, 0.28524032, 0.27920031, 0.61605446, -0.34894915, -0.2712964, -0.63830127, -0.09076834, 0.07402614, -0.35414093, -0.0684393, 0.34896978, 0.32264804, -0.34490816, -0.45356265, 0.63439775, -1.57600579, -0.06746198, -0.08537566, 1.09918399, 0.31868402, -0.03376455, -0.25548217, 0.42193183, -0.3127198, 0.4727384, -0.06248772, 0.08320642, -0.2881927, 0.00782974, 0.4451475, 0.77373579, 0.22577541, 0.30525797, -0.45273546, 1.03770254, -0.05583925, -0.16798302, 0.07008786, 0.16383369, 1.57074778, 0.93955063, -0.12112078, 0.66962385, -0.26793744, 1.04184463, 0.29216865, 0.16070794, 0.33549893, -0.45702747, -1.13992813, -0.64657602, 0.26132991, -0.02085444, 0.16059716, -0.26935617, 0.34359996, -0.22458816, -0.72919062, -0.22978941, 0.37173572, 0.16773367, 0.02098599, 0.2716156, -0.53525399, -0.27688178, -0.97950053, -0.32334612, -0.25029956, -0.06467537, -0.07218093, -1.01340458, -0.21611213, 0.15029247, -0.38265591, -0.47588177, 0.06405578, 0.37624425, -0.08201947, 0.22172391, 0.03612089, -0.12981825, -0.11134576, 0.33256439, 0.11602157, -0.16626147, 0.61933846, -0.24215501, -0.55514468, 0.52243741, 1.20488911, 0.19173783, 0.20565168, 0.00644769, 0.6703385, 0.2052223, 0.17900277, 0.16313057, 0.58269392, 0.00173648, 0.50942206, -0.61683307, -1.46956046, 0.01266611, -0.09550294, -0.39602346, 0.07013626, 0.60146089, 0.68026193, -0.29026554, -0.2540086, 0.46243097, 0.04812017, -1.26404814, -0.39118637, 0.47828079, -0.02254198, -0.29781671, -0.25658804, -0.54873166, -0.49387461, -0.76328254, -1.01676986, -0.13034879, 0.15770167, -0.44614452, -0.06037171, -0.17925293, 0.23464917, -0.68336229, 0.57623704, -0.31081313, -0.49639537, -0.40952591, -0.22370329, 0.43885301, -0.028323, 0.0188124, -0.18967801, -0.35367742, -0.19206563, -0.49588587, 0.24829387, 0.01903777, 0.57040827, 2.72491966, -0.37807439, -0.40776463, 0.03627962, -0.93149738, -0.04963062, -0.34383704, -0.02506453, 0.11986074, 0.24562915, -0.33740327, 0.23716379, 0.21267282, 0.08205699, -0.02999661, 0.55361538, 0.35859333, -0.02758471, 0.35317362, 0.46563806, -0.01505904, -0.06359542, 0.28172492, -0.01575933, -0.09248343, 0.05493762, -0.21260668, 0.22769476, 0.23893377, 0.5173057, 0.42637082, 0.33849944, 0.39346337, 0.03080021, -0.31391991, 0.34274927, 0.24812789, 0.16865966, 0.18244305, 0.46673628, -0.71000847, 0.00293225, 0.4536123, 0.91971681, -0.30898484, -0.19726569, 0.4793678, -0.39953838, 0.04603011, -0.19085773, -0.49374168, 0.14248923, -0.25347248, 0.1539884, -0.3381789, 0.6150777, -0.1885152, -0.07296459, 0.11777548, -0.12478369, -0.78552517, 0.12054085, 0.91435569, 0.47031117, 0.04047152, -0.08767102, 0.28111799, -0.02124643, 1.13503109, 0.03670552, 0.09898181, 0.64261767, 1.41467219, -0.71452366, 0.27641977, -0.4476406, -0.27908163, 0.53286556, 0.01147704, -0.08576561, 0.34389645, 0.16502984, -0.03746609, -0.12941539, 0.05676178, -0.43498304, -0.56349863, 0.41625942, 0.37243294, -0.22078923, -0.84976553, 0.05545318, -0.03537457, 0.44254738, -0.76460323, -0.20293335, 0.30298515, -0.01907024, -0.62560245, 0.6279514, 0.44739138, 1.22262979, 0.35938674, 0.89309988, 0.36212964, 0.23205768, 0.52482745, 0.25233463, -0.62129294, 0.05498481, -0.4560259, -0.23054347, -0.02574204, -0.48216593, 0.33955806, 0.20483013, -0.90602299, 0.57322584, -0.05093936, 0.1646145, -0.01429148, 0.40006555, 0.01888463, 0.28819351, 0.0726744, 0.32692636, 0.57094279, -0.18648538, 0.00556427, -0.04964708, 0.4111429, 0.25742869, 0.0896221, -0.38195579, 0.15628806, -0.01166875, -0.2901624, -1.32993149, -0.00591237, 0.10646304, -0.41226836, -0.15054724, 0.21722247, -0.41034127, 0.5878759, -0.58710366, 0.23164358, 0.40791447, -1.01599833, -0.12948828, -0.49793159, 0.19025755, 0.31259493, -0.48683006, 0.33777179, -0.08704104, -0.30503902, 0.68525083, -0.49020564, 0.06250808, 0.40463369, 0.33772726, 1.04466189, 0.15990268, -0.52680586, 0.14771937, 0.16826381, -0.16129405, 0.38795634, 0.84928823, 0.45345982, 1.10246936, 0.08383852, 0.0780205, -0.17398169, 0.43126701, -0.44679115, 0.11457492, -0.01764735, 0.57507503, -0.12219563, 0.59354659, -0.19624025, 0.43172547, 1.56085574, -0.32837438, -0.41954544, 1.35660896, 1.05986259, 0.41042023, 0.25119354, 0.04962639, 0.1819531, -0.82794901, 0.38166209, 0.666766, -0.13868658, 0.01395617, -0.20142711, -0.08781057, 0.22192809, 1.71218669, -0.02913629, -0.83176747, 0.38935886, 0.12619378, 0.3367484, 0.06111146, 0.20676118, 0.15945462, 0.09938302, -0.00768375, 0.06067527, 0.5972888, 0.38486441, 0.17080494, 0.22716211, 0.03381028, -0.00233479, -1.02576006, 0.69778953, 0.21272467, -0.32264809, -1.21195787, 0.05201386, 0.47900678, -0.75168006, -2.04562592, 0.44292291, -0.11270947, -0.08236143, -0.25360588, -0.02693176, -0.23172039, -0.45858358, -1.29033933, 1.00028266, 0.3434152, -0.34193044, 0.12953692, -0.65773072, 1.41460808, 0.35848971, -0.20396988, -0.50504556, -1.33247652, 0.90431179, -0.13210972, 0.28488859];
  const b1 = [0.15920827, -0.43166889, -0.0675993, 0.03339267, -0.14736637, -0.1983139, 0.02390528, -0.40268505, -0.49983402, -0.71953602, -0.08518223, -0.57073853, 0.22758926, 0.55602469, -0.0077341, 0.02096832, -0.2051495, 0.3016202, -0.3751937, -0.10366951, 0.20311337, 0.01694928, -0.12531235, 0.14691086];
  const W2 = [0.54247374, 0.86832904, 0.18068135, 0.20984645, -0.49189309, -0.25879529, 0.05251636, -0.30104285, 0.0260195, 0.86289642, -0.26084685, -0.32439601, -0.58021052, 0.31087067, -0.14465713, -1.03364043, 0.26452191, 0.55054756, -0.4607206, -0.83993635, 0.00743894, 0.40357251, 0.81217289, 0.23951988, -0.25816643, -0.53121914, -0.06674625, -0.51526671, -0.02816474, -0.52170475, -0.52637129, -0.23987969, 0.55976685, 0.32173093, -0.60648788, -0.98959481, 0.63481982, 0.0428517, 0.02475942, 0.0119749, -0.06099691, 0.6755614, 0.46943357, -0.88339713, -0.0266863, 0.66544902, 0.0956175, -0.07551576, -0.64720404, -0.08306334, 0.15592898, -0.01733847, -0.06427562, 0.38829296, 0.55680505, 0.45237054, -0.495264, -0.52682366, -0.36012757, 0.11459108, 0.51118291, 0.01974198, -0.54573976, -0.16269153, -0.07672154, -0.25754632, 0.54168173, 0.84106338, -0.19201789, -0.4100774, 0.1942514, 0.10992718, 0.65214561, 0.64041501, 0.47816714, -0.12205325, 0.33038189, -0.59251034, -0.49714791, -0.46177991, 0.63834309, 0.02022834, -0.57199429, 0.63473198, -0.19282243, -0.04622024, -0.71073075, -0.16915612, 0.87368364, -0.19639622, -0.46144101, -0.09226731, -0.41031184, -0.52299841, 0.45185886, 0.00431855, 0.02172061, 0.10904878, 0.72830684, 0.2678994, -0.16777036, -0.14819549, -0.06292678, 0.41464158, -0.26905812, 0.26501398, -0.00895521, -0.65785324, 0.23332399, -0.33462707, 0.68975489, -0.72196349, -0.27834403, 0.41103108, 0.13309676, 0.40994753, 0.23468863, -0.05969509, 0.26308608, 0.11043425, -0.24267272, -0.05843755, -0.74976216, -0.10064263, -0.49080933, 0.33140413, -0.49959361, 0.0911211, -0.12154595, 0.3718216, -0.06100468, -0.03833565, 0.14697059, -0.55189811, 0.2544361, 0.01742821, 0.37990524, -0.45885477, 0.15632297, 0.41644768, 0.4328091, -0.67248781, 0.57953217, -0.03029795, -0.4191149, -0.00243307, 0.13287425, 1.14071682, -0.32292669, 0.14139873, 0.85955806, -0.37252867, 1.43420743, -0.53709538, -0.00572119, 0.37029745, 0.41790264, -0.27744215, 0.0682296, -0.80051132, -0.09693305, -0.22096531, 0.76050983, 0.37026393, -0.80277079, -0.0051135, 0.56795758, -0.51399867, -0.0755205, -0.06466649, 0.36783789, 0.20255052, -0.26522135, 0.85287384, 0.52123548, 0.19054305, -0.17399183, 0.08761386, 0.21850481, -0.30273283, 0.11424527, 0.24557832, -0.25402611, 0.21782415, 0.29789938, 0.70312415, -0.80951691, 0.10204281, 0.69423295, 0.16915515, -0.69604868, 0.59288883, -0.04233299, -0.09917248, 0.03605698, 0.14327247, -0.50878509, -0.41314975, 0.32353387, -0.56799082, 0.41152038, -1.05467736, -0.33218165, -0.01466625, 0.2500429, -0.00640784, 0.48920246, -0.06851237, 0.10950843, -0.28047306, 1.27122974, 0.26778687, -0.20965498, 0.05966231, -0.00737077, 0.51376314, -0.03310669, 0.04000779, 0.32301482, -0.62258329, 0.06372631, -0.10490108, -0.33816124, -0.11193624, -0.93471216, 0.06005379, -0.00582699, -0.11404245, -0.38422749, 0.3752085, -0.5069963, -0.18867895, -0.44620464, 0.55795773, -0.00158051, 0.33624875, 0.31926824, 0.02160093, 0.6654894, -0.31819482, 0.08356259, -0.43952932, -0.06293565, 0.0535796, 0.30535802, 0.01247109, -0.7281938, -0.08689071, -0.23844762, -1.02881999, 0.38698379, -0.71748919, 0.26524313, 0.2902467, -0.53168338, 0.91810756, 0.38495431, 0.43431144, 0.00504469, 0.035795, 0.21446148, 0.16667373, -0.31032626, 0.84076548, -0.33922565, -0.36437759, 0.33573022, -1.01241875, -0.31344073, -0.42350423, 0.05523917, 0.19400118, 0.91095566, 0.15839675, 0.739852, -0.53507346, -0.54574754, 0.11692534, -0.33822965, 0.59021345, -0.32560446, -0.13722227, 0.14831106, -0.61720111, 0.24636341, -0.05821383, -0.01996904, -0.04065672, -0.21986686, -0.08767616, -0.00745672, -0.22921492, -0.30577557, 0.43697187, 0.13097605, -0.20986671, 0.35204903, 0.29037645, -1.04140773, -0.70221042, -0.06041101, 0.48038921, 0.19865339, -0.05975922, 0.03434219, -0.06742248, 0.74869572, -0.10867569, 0.06348322, -0.21926995, 0.02474056, -0.39416978, -0.11967728, -0.01576845, -0.09075414, 0.46405326, -0.15242146, 0.05803013, 0.1037105, -0.33557925, 1.29393612, -0.78121679, -0.07083863, -0.45795545, 0.49496264, -0.41003813, 0.28690868, -0.13999092, 0.24309896, 0.25744957, 1.19925399, -0.38188064, -0.68897555, 0.05424064, 0.31072307, -0.17813833, 0.04111223, 0.05967255, -0.17640973, 0.0967115, -0.27474694, -0.07308925, -0.29375981, 0.05935046, -0.34840387, -0.43971671, -0.01109003, -0.61678802, -0.16670553, 0.27477585, 0.11880909, 0.00606765, -0.46084648, 0.19119837, -0.27664747, -0.17710353, -0.11481983, 0.82559053, -0.32826093, 0.30087227, 0.15331873, 0.09051307, 0.00214496, 0.24929402, -0.12908378, 0.92054806, -0.85514176, 0.1281831, -0.25799487, 0.35822421, -0.22283738, -0.02276509, 0.1509969, -0.48196055, -0.81578716, -0.00636459, 0.07790823, -0.50144091, 0.03868029, 0.18902279, -0.17966878, -0.56509588, 0.15466779, 0.04008383];
  const b2 = [0.03334961, 0.07560899, -0.0306667, 0.07332929, 0.30675453, -0.27532262, -0.10842766, 0.28548837, 0.00461051, 0.16640197, -0.61591286, -0.17170685, -0.13848418, -0.10602048, 0.81079592, -0.43535308];
  const W3 = [0.83773354, 0.43208601, -0.30642806, 0.7331294, -0.14490738, -0.50015562, 0.52790396, -1.37173614, -0.34714762, -0.60350551, -0.13255906, -0.07448241, -0.34614463, 0.75937533, 0.05045933, -0.61851931, 0.09060202, 0.24280053, 0.36570273, 0.06898967, -1.42465876, -1.12020136, -0.02890302, 0.50931894, -0.41850085, -0.09908804, -0.07563624, -0.11718983, -0.1749126, 0.55965612, -0.67766312, -0.01556262, 0.29130563, -0.0623848, -0.33215347, -0.67290029, 0.30722107, 0.42222655, -0.04453258, -0.30191282, -0.76489039, 0.00257077, 0.34370651, 0.2151296, -0.13947726, 0.20678835, -0.25881618, 0.17061797, 0.19543123, -0.35961783, 0.15370324, 0.47495654, -0.86579057, 0.30703933, -0.00386803, -0.08714491, 0.11455408, 0.73578083, 0.35128798, -0.06305502, 0.98634428, 0.15569331, 0.17489905, 0.21520658, 0.55075377, 1.2752488, -0.22134933, 0.03846544, 0.21248838, -0.37755592, -0.63355997, -0.43677321, -0.94789427, 0.19605512, -0.81639076, -0.00392941, 0.49647528, -1.31916409, 0.08576553, -0.41647767];
  const b3 = [0.01226738, -0.50027164, 0.63185453, 0.49247114, 0.44428307];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-3"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [-0.2357732, 0.02634139, -0.2768696, 0.40091123, -0.27198983, 0.49810835, 0.31156402, 0.01940359, -0.7738431, -0.13783468, 0.10765544, 0.61622267, -0.0511993, 0.28267754, 0.14895243, 0.6471685, 0.44529869, -0.18262228, 0.45381755, -0.09739416, -0.395692, 0.12043324, 0.25958921, 0.44550519, -0.72043581, -0.32455332, -0.26604753, 0.40496418, -1.27806336, -1.3418663, 0.00503958, -0.42021287, -0.02611556, -0.17617193, -1.02944845, 0.18694497, -0.36452884, -0.48436563, -0.3599027, 0.04413992, 0.09432728, 0.03950904, -0.35843172, -0.06308131, 0.0156311, 0.19714881, -0.28304971, 0.0206515, -0.42586885, 0.16671394, 0.41487369, -0.3987425, -0.26535347, 0.09109996, -0.24583065, 0.54707823, 0.13530272, -0.44648455, -0.00522103, -0.11447097, 0.1787504, -0.26528898, 0.61932067, -0.49996168, -0.59178697, -0.01416045, -0.11558889, -0.14163286, 0.23887228, 0.6341497, 0.27309587, -1.23442547, -0.49337339, 0.41936009, -0.53181299, -0.32536327, -0.61247861, -0.25948647, 0.39173963, -0.22754439, 0.08453632, -0.29416437, 0.14266488, -0.018089, 0.68862312, -0.78499064, 0.19457195, -0.47508544, 0.15762316, -0.01909196, -0.16632682, 0.02828834, 0.78604801, -0.54883196, 0.80731106, 0.33965961, -0.02857838, -0.13870498, 0.66473777, -0.33735956, 0.03711809, 0.01366417, 0.1814562, -1.05214982, -0.20639146, 0.10438804, 0.27242064, -0.07503711, 0.32133774, 0.15374217, 0.47711521, -0.03397035, 0.12795526, 0.077671, -1.2802327, -0.80711007, -0.02167037, 0.24367284, 0.38230997, -0.20432688, -0.55583685, 0.64721242, 0.75056146, 0.30868136, -0.44595948, 0.18272466, -0.53687228, 0.5343944, 0.21617953, -0.29297674, -1.07207191, 0.39614951, -0.39112253, 0.36107937, -0.37838412, -0.15788288, 0.2573166, 0.6466398, 1.12507457, 0.58998512, 0.01500307, 0.72210532, -0.00037618, -0.05216391, 0.20299318, 0.23693515, 0.06008989, 0.18305067, 0.09455217, -0.55164513, 0.31161314, 0.30265037, -0.31439486, 0.36993244, 0.043895, 1.11475629, 0.02862288, -0.05309323, -0.20257513, -1.01460075, 0.59632834, -0.16275008, 0.03822404, -1.01930431, -0.33694263, 0.63591434, -0.04932564, -0.64803293, -0.52810161, -0.55397281, 0.44148106, -0.15985292, 0.21641667, -0.31279188, -0.01142058, -0.11749153, -0.13905185, -0.90877486, -0.64699426, -0.03272542, 0.51172517, -0.92667678, 0.10537888, -0.50114096, 0.09444276, 0.14649023, -0.26500213, -0.2693419, 0.05984365, 0.09452058, -0.31706702, -0.36956691, 0.89187971, 0.19087493, -0.21811088, -0.83137973, -0.74630028, -0.09959176, 0.09500996, -0.2923984, 0.41870228, -0.94529939, -0.6623974, 0.47803185, 0.30693394, -0.44615616, -1.07450704, -0.03953652, 0.06985743, 0.18297802, 0.33126735, 0.40507084, 0.03806302, 0.27472966, 0.14885497, -0.38299512, 0.57495117, -0.44939423, -0.26144651, 0.00330667, -0.17740051, 0.18165847, -0.1173933, 0.66457661, -0.60639531, 0.13394702, 0.06311017, 0.40852277, -0.07798384, 0.09199797, 0.21940218, 0.53032653, -0.14268529, 0.30985419, 0.05685485, 0.39474354, 0.57284904, 0.61280362, -0.30627413, 0.39395862, 0.85835203, -0.24064918, -0.58957863, 0.9966288, 0.64410104, 0.65472918, 0.21590269, -1.06021328, 0.73186616, 0.6056456, 0.09301941, 0.27854138, -0.5394236, 0.7364847, 0.34187712, 0.71339864, 0.20932205, -0.13908938, 0.32454092, -0.02385126, 0.4102746, 0.35441755, -0.10600595, -0.2566295, -0.07759301, 0.50798128, -0.0049675, 1.83731818, -0.03331043, 0.03269217, 0.14522556, 0.17030689, 0.13514892, 0.57806525, 0.0871643, 0.02011128, 0.21156542, 0.31465029, 0.64349551, -0.28241731, 0.19481499, 0.14808729, 0.66295225, 0.62612837, 0.04167787, 0.12423115, -0.05351779, 1.38133295, 0.13949702, 0.09180802, -0.26763491, -0.33108576, 0.45118776, -0.29460004, 0.65140407, -0.68211143, -1.08954084, 0.58350625, -0.31354752, 0.42177181, 0.36211515, 0.16961878, -0.08926298, -0.36578472, 0.24271354, 0.17211399, 0.22284118, -0.75480529, 0.08954827, -0.54673226, -0.20164896, -0.01798856, 0.35379824, -0.42216938, -0.50346707, 0.15213156, -0.06373593, -0.29000228, 0.2027261, -0.15171819, -0.00377551, -1.03858815, -0.87202946, -0.11194298, 0.2758585, -0.77119197, 0.7981156, -0.24303843, -0.58440428, 1.21380153, 1.04824116, -0.21117462, -0.8423889, -0.02087191, 1.16906926, 0.9703315, -0.38302848, -0.43875439, -0.62767248, 0.12127513, 1.13537919, -0.22921823, 0.12067754, -0.69609811, 0.43107382, -0.12191585, -0.50169014, 0.80063014, 0.31970946, 0.40921847, -0.38801561, -0.04209568, -0.06308807, 1.8093925, 0.19808815, -0.04397689, 0.21267481, 0.06348, -0.03697248, -0.26231326, -0.00118257, 0.28359176, 0.16005355, 0.01664968, 0.866719, -0.58145217, -0.09146186, 0.20107679, -0.27990698, -0.04436133, -0.39920918, -0.61689032, -1.10618906, 0.9171798, -0.53466555, -0.28348998, -0.1231616, -1.09907272, 0.78678451, -0.5981971, -0.40642012, -0.3096091, -1.09386969, 1.06980515, -0.79942156, -0.91427517, -0.4096431, -0.24233566, -0.30615205, -0.88901262, -0.86479727, -0.44055508, -0.3963222, -0.21526566, 0.01032306, 0.35014156, -4.78352904, -0.29543986, -0.6111401, 0.24253167, 0.65401288, 0.4217101, -0.06745108, 0.10270246, 1.14385676, 0.16327688, -0.49374794, 1.20178487, 0.49484133, -0.1222703, -0.04055787, -0.16786515, 0.05658129, 0.30881351, -0.23910557, 0.08267583, -0.82662538, -0.2936944, 0.30498341, -0.30492662, 1.22938781, -1.38010541, -0.34034213, 0.87322636, -0.52356623, 1.31479852, 0.25174402, -0.14609408, 0.84556585, 0.01255683, 0.11420633, -0.18321017, 0.01440074, 0.02996949, -0.39405712, -0.61246269, 0.32041495, 0.1930965, -0.77072619, -0.5335698, 0.16169134, -0.05634864, 0.08555152, -0.13295023, -0.26851962, 0.17436667, -0.54976472, 1.05511108, -0.18092632, -0.76094481, 0.69092003, 0.56430217, -0.24604029, 0.89844454, 0.18669489, 0.93804533, -0.76826344, 0.18669313, 1.06182759, -0.94942139, 0.2943491, -0.21588942, 0.00849108, 0.30275311, -0.69889326, 0.13911169, 0.18370253, -0.88747634, 0.27273599, -0.04867609, 0.29838191, -0.00393964, -0.69674422, -0.13377483, -0.89051287, 0.20302294, -0.14039776, -0.1274034, 0.04852941, -0.33614926, -0.02585425, -0.0404718, -0.05939889, 0.14324031, -0.72520171, -1.0375725, 0.12612976, -0.17577518, -0.62986626, 0.6144157, 0.06530959, -0.32639405, -0.19318147, 0.73856011, -0.31917996, 0.27949492, -0.22504909, 2.07801705, 0.92924964, -0.05670527, -0.31497623, -0.54934355, -0.45569069, 0.92493849, 0.47380143, 0.12334206, -0.08723864, -0.55940267, 0.34416949, -0.35268622, 0.22252883, -0.18668398, -0.49287651, 0.82483699, 0.17049323, -0.36894765, 0.46002704, 0.39026147, -0.02633802, 0.27822955, -0.60688266, 0.00461498, -0.41695397, 0.63904946, -0.42534705, -0.35748937, 0.05943162, 0.34075674, -0.42435248, 0.05444187, 0.09367026, 0.27935257, 0.33716515, 0.36117114, 0.2903928, 0.3352802, 0.28577795, 0.50842142, 0.3873581, -0.14820455, -0.03641834, -0.46644767, 0.45719931, 0.35813923, 1.66523348, 1.09722954, 0.41483574, -0.12524579, 0.95003115, 1.08203855, 0.14017292, 0.47153747, 0.05333192, 0.7562444, 0.63787555, -0.69017265, 0.08046007, 0.33481676, -0.08012297, 0.46828347, -0.33924237, -0.0648715, 0.00541225, 0.92991958, 0.28157712, -0.040611, 0.45487365, -0.70853334, -1.48176201, 0.68683515, 0.45567688, -0.73684179, 0.32903689, -0.5127594, 0.01785268, -0.51966395, 0.49014177, 0.04126317, -0.33796322, -0.08865805, -0.36920743, 0.0287596, 0.57302842, 0.06263771, 0.60168178, 0.02604508, 0.58665349, 0.2900799, -0.81840984, 0.41305784, -0.67990565, 0.00580809, 0.06885373, -1.09843913, 0.69194489, -0.57036928, 0.14163079, -0.32603203, -0.67528092, 0.13433141, 0.00804013, 0.11347552, -0.26162916, -0.46360183, 0.30511908, 0.24982625, -0.46724763, 0.09166332, 0.95149154, 0.22090068, -0.09459887, 1.70734053, 0.74930376, 0.22669064, 0.23088873, 0.00691208, 0.25461777, 0.49022368, -0.14824938, -0.08682214, 0.34272745, 0.54509346, 1.4000886, -0.03680593, 0.03357015, -0.26427125, -0.64349718, -0.40486876, -0.27951439, -0.34387091, 0.43569515, -0.14073143, -1.00215432, -0.77639047, 0.70114047, -0.42803449, 0.57140846, -0.26717316, -0.07949634, 0.28524032, 0.27920031, 0.61605446, -0.34894915, -0.2712964, -0.63830127, -0.09076834, 0.07402614, -0.35414093, -0.0684393, 0.34896978, 0.32264804, -0.34490816, -0.45356265, 0.63439775, -1.57600579, -0.06746198, -0.08537566, 1.09918399, 0.31868402, -0.03376455, -0.25548217, 0.42193183, -0.3127198, 0.4727384, -0.06248772, 0.08320642, -0.2881927, 0.00782974, 0.4451475, 0.77373579, 0.22577541, 0.30525797, -0.45273546, 1.03770254, -0.05583925, -0.16798302, 0.07008786, 0.16383369, 1.57074778, 0.93955063, -0.12112078, 0.66962385, -0.26793744, 1.04184463, 0.29216865, 0.16070794, 0.33549893, -0.45702747, -1.13992813, -0.64657602, 0.26132991, -0.02085444, 0.16059716, -0.26935617, 0.34359996, -0.22458816, -0.72919062, -0.22978941, 0.37173572, 0.16773367, 0.02098599, 0.2716156, -0.53525399, -0.27688178, -0.97950053, -0.32334612, -0.25029956, -0.06467537, -0.07218093, -1.01340458, -0.21611213, 0.15029247, -0.38265591, -0.47588177, 0.06405578, 0.37624425, -0.08201947, 0.22172391, 0.03612089, -0.12981825, -0.11134576, 0.33256439, 0.11602157, -0.16626147, 0.61933846, -0.24215501, -0.55514468, 0.52243741, 1.20488911, 0.19173783, 0.20565168, 0.00644769, 0.6703385, 0.2052223, 0.17900277, 0.16313057, 0.58269392, 0.00173648, 0.50942206, -0.61683307, -1.46956046, 0.01266611, -0.09550294, -0.39602346, 0.07013626, 0.60146089, 0.68026193, -0.29026554, -0.2540086, 0.46243097, 0.04812017, -1.26404814, -0.39118637, 0.47828079, -0.02254198, -0.29781671, -0.25658804, -0.54873166, -0.49387461, -0.76328254, -1.01676986, -0.13034879, 0.15770167, -0.44614452, -0.06037171, -0.17925293, 0.23464917, -0.68336229, 0.57623704, -0.31081313, -0.49639537, -0.40952591, -0.22370329, 0.43885301, -0.028323, 0.0188124, -0.18967801, -0.35367742, -0.19206563, -0.49588587, 0.24829387, 0.01903777, 0.57040827, 2.72491966, -0.37807439, -0.40776463, 0.03627962, -0.93149738, -0.04963062, -0.34383704, -0.02506453, 0.11986074, 0.24562915, -0.33740327, 0.23716379, 0.21267282, 0.08205699, -0.02999661, 0.55361538, 0.35859333, -0.02758471, 0.35317362, 0.46563806, -0.01505904, -0.06359542, 0.28172492, -0.01575933, -0.09248343, 0.05493762, -0.21260668, 0.22769476, 0.23893377, 0.5173057, 0.42637082, 0.33849944, 0.39346337, 0.03080021, -0.31391991, 0.34274927, 0.24812789, 0.16865966, 0.18244305, 0.46673628, -0.71000847, 0.00293225, 0.4536123, 0.91971681, -0.30898484, -0.19726569, 0.4793678, -0.39953838, 0.04603011, -0.19085773, -0.49374168, 0.14248923, -0.25347248, 0.1539884, -0.3381789, 0.6150777, -0.1885152, -0.07296459, 0.11777548, -0.12478369, -0.78552517, 0.12054085, 0.91435569, 0.47031117, 0.04047152, -0.08767102, 0.28111799, -0.02124643, 1.13503109, 0.03670552, 0.09898181, 0.64261767, 1.41467219, -0.71452366, 0.27641977, -0.4476406, -0.27908163, 0.53286556, 0.01147704, -0.08576561, 0.34389645, 0.16502984, -0.03746609, -0.12941539, 0.05676178, -0.43498304, -0.56349863, 0.41625942, 0.37243294, -0.22078923, -0.84976553, 0.05545318, -0.03537457, 0.44254738, -0.76460323, -0.20293335, 0.30298515, -0.01907024, -0.62560245, 0.6279514, 0.44739138, 1.22262979, 0.35938674, 0.89309988, 0.36212964, 0.23205768, 0.52482745, 0.25233463, -0.62129294, 0.05498481, -0.4560259, -0.23054347, -0.02574204, -0.48216593, 0.33955806, 0.20483013, -0.90602299, 0.57322584, -0.05093936, 0.1646145, -0.01429148, 0.40006555, 0.01888463, 0.28819351, 0.0726744, 0.32692636, 0.57094279, -0.18648538, 0.00556427, -0.04964708, 0.4111429, 0.25742869, 0.0896221, -0.38195579, 0.15628806, -0.01166875, -0.2901624, -1.32993149, -0.00591237, 0.10646304, -0.41226836, -0.15054724, 0.21722247, -0.41034127, 0.5878759, -0.58710366, 0.23164358, 0.40791447, -1.01599833, -0.12948828, -0.49793159, 0.19025755, 0.31259493, -0.48683006, 0.33777179, -0.08704104, -0.30503902, 0.68525083, -0.49020564, 0.06250808, 0.40463369, 0.33772726, 1.04466189, 0.15990268, -0.52680586, 0.14771937, 0.16826381, -0.16129405, 0.38795634, 0.84928823, 0.45345982, 1.10246936, 0.08383852, 0.0780205, -0.17398169, 0.43126701, -0.44679115, 0.11457492, -0.01764735, 0.57507503, -0.12219563, 0.59354659, -0.19624025, 0.43172547, 1.56085574, -0.32837438, -0.41954544, 1.35660896, 1.05986259, 0.41042023, 0.25119354, 0.04962639, 0.1819531, -0.82794901, 0.38166209, 0.666766, -0.13868658, 0.01395617, -0.20142711, -0.08781057, 0.22192809, 1.71218669, -0.02913629, -0.83176747, 0.38935886, 0.12619378, 0.3367484, 0.06111146, 0.20676118, 0.15945462, 0.09938302, -0.00768375, 0.06067527, 0.5972888, 0.38486441, 0.17080494, 0.22716211, 0.03381028, -0.00233479, -1.02576006, 0.69778953, 0.21272467, -0.32264809, -1.21195787, 0.05201386, 0.47900678, -0.75168006, -2.04562592, 0.44292291, -0.11270947, -0.08236143, -0.25360588, -0.02693176, -0.23172039, -0.45858358, -1.29033933, 1.00028266, 0.3434152, -0.34193044, 0.12953692, -0.65773072, 1.41460808, 0.35848971, -0.20396988, -0.50504556, -1.33247652, 0.90431179, -0.13210972, 0.28488859];
  const b1 = [0.15920827, -0.43166889, -0.0675993, 0.03339267, -0.14736637, -0.1983139, 0.02390528, -0.40268505, -0.49983402, -0.71953602, -0.08518223, -0.57073853, 0.22758926, 0.55602469, -0.0077341, 0.02096832, -0.2051495, 0.3016202, -0.3751937, -0.10366951, 0.20311337, 0.01694928, -0.12531235, 0.14691086];
  const W2 = [0.54247374, 0.86832904, 0.18068135, 0.20984645, -0.49189309, -0.25879529, 0.05251636, -0.30104285, 0.0260195, 0.86289642, -0.26084685, -0.32439601, -0.58021052, 0.31087067, -0.14465713, -1.03364043, 0.26452191, 0.55054756, -0.4607206, -0.83993635, 0.00743894, 0.40357251, 0.81217289, 0.23951988, -0.25816643, -0.53121914, -0.06674625, -0.51526671, -0.02816474, -0.52170475, -0.52637129, -0.23987969, 0.55976685, 0.32173093, -0.60648788, -0.98959481, 0.63481982, 0.0428517, 0.02475942, 0.0119749, -0.06099691, 0.6755614, 0.46943357, -0.88339713, -0.0266863, 0.66544902, 0.0956175, -0.07551576, -0.64720404, -0.08306334, 0.15592898, -0.01733847, -0.06427562, 0.38829296, 0.55680505, 0.45237054, -0.495264, -0.52682366, -0.36012757, 0.11459108, 0.51118291, 0.01974198, -0.54573976, -0.16269153, -0.07672154, -0.25754632, 0.54168173, 0.84106338, -0.19201789, -0.4100774, 0.1942514, 0.10992718, 0.65214561, 0.64041501, 0.47816714, -0.12205325, 0.33038189, -0.59251034, -0.49714791, -0.46177991, 0.63834309, 0.02022834, -0.57199429, 0.63473198, -0.19282243, -0.04622024, -0.71073075, -0.16915612, 0.87368364, -0.19639622, -0.46144101, -0.09226731, -0.41031184, -0.52299841, 0.45185886, 0.00431855, 0.02172061, 0.10904878, 0.72830684, 0.2678994, -0.16777036, -0.14819549, -0.06292678, 0.41464158, -0.26905812, 0.26501398, -0.00895521, -0.65785324, 0.23332399, -0.33462707, 0.68975489, -0.72196349, -0.27834403, 0.41103108, 0.13309676, 0.40994753, 0.23468863, -0.05969509, 0.26308608, 0.11043425, -0.24267272, -0.05843755, -0.74976216, -0.10064263, -0.49080933, 0.33140413, -0.49959361, 0.0911211, -0.12154595, 0.3718216, -0.06100468, -0.03833565, 0.14697059, -0.55189811, 0.2544361, 0.01742821, 0.37990524, -0.45885477, 0.15632297, 0.41644768, 0.4328091, -0.67248781, 0.57953217, -0.03029795, -0.4191149, -0.00243307, 0.13287425, 1.14071682, -0.32292669, 0.14139873, 0.85955806, -0.37252867, 1.43420743, -0.53709538, -0.00572119, 0.37029745, 0.41790264, -0.27744215, 0.0682296, -0.80051132, -0.09693305, -0.22096531, 0.76050983, 0.37026393, -0.80277079, -0.0051135, 0.56795758, -0.51399867, -0.0755205, -0.06466649, 0.36783789, 0.20255052, -0.26522135, 0.85287384, 0.52123548, 0.19054305, -0.17399183, 0.08761386, 0.21850481, -0.30273283, 0.11424527, 0.24557832, -0.25402611, 0.21782415, 0.29789938, 0.70312415, -0.80951691, 0.10204281, 0.69423295, 0.16915515, -0.69604868, 0.59288883, -0.04233299, -0.09917248, 0.03605698, 0.14327247, -0.50878509, -0.41314975, 0.32353387, -0.56799082, 0.41152038, -1.05467736, -0.33218165, -0.01466625, 0.2500429, -0.00640784, 0.48920246, -0.06851237, 0.10950843, -0.28047306, 1.27122974, 0.26778687, -0.20965498, 0.05966231, -0.00737077, 0.51376314, -0.03310669, 0.04000779, 0.32301482, -0.62258329, 0.06372631, -0.10490108, -0.33816124, -0.11193624, -0.93471216, 0.06005379, -0.00582699, -0.11404245, -0.38422749, 0.3752085, -0.5069963, -0.18867895, -0.44620464, 0.55795773, -0.00158051, 0.33624875, 0.31926824, 0.02160093, 0.6654894, -0.31819482, 0.08356259, -0.43952932, -0.06293565, 0.0535796, 0.30535802, 0.01247109, -0.7281938, -0.08689071, -0.23844762, -1.02881999, 0.38698379, -0.71748919, 0.26524313, 0.2902467, -0.53168338, 0.91810756, 0.38495431, 0.43431144, 0.00504469, 0.035795, 0.21446148, 0.16667373, -0.31032626, 0.84076548, -0.33922565, -0.36437759, 0.33573022, -1.01241875, -0.31344073, -0.42350423, 0.05523917, 0.19400118, 0.91095566, 0.15839675, 0.739852, -0.53507346, -0.54574754, 0.11692534, -0.33822965, 0.59021345, -0.32560446, -0.13722227, 0.14831106, -0.61720111, 0.24636341, -0.05821383, -0.01996904, -0.04065672, -0.21986686, -0.08767616, -0.00745672, -0.22921492, -0.30577557, 0.43697187, 0.13097605, -0.20986671, 0.35204903, 0.29037645, -1.04140773, -0.70221042, -0.06041101, 0.48038921, 0.19865339, -0.05975922, 0.03434219, -0.06742248, 0.74869572, -0.10867569, 0.06348322, -0.21926995, 0.02474056, -0.39416978, -0.11967728, -0.01576845, -0.09075414, 0.46405326, -0.15242146, 0.05803013, 0.1037105, -0.33557925, 1.29393612, -0.78121679, -0.07083863, -0.45795545, 0.49496264, -0.41003813, 0.28690868, -0.13999092, 0.24309896, 0.25744957, 1.19925399, -0.38188064, -0.68897555, 0.05424064, 0.31072307, -0.17813833, 0.04111223, 0.05967255, -0.17640973, 0.0967115, -0.27474694, -0.07308925, -0.29375981, 0.05935046, -0.34840387, -0.43971671, -0.01109003, -0.61678802, -0.16670553, 0.27477585, 0.11880909, 0.00606765, -0.46084648, 0.19119837, -0.27664747, -0.17710353, -0.11481983, 0.82559053, -0.32826093, 0.30087227, 0.15331873, 0.09051307, 0.00214496, 0.24929402, -0.12908378, 0.92054806, -0.85514176, 0.1281831, -0.25799487, 0.35822421, -0.22283738, -0.02276509, 0.1509969, -0.48196055, -0.81578716, -0.00636459, 0.07790823, -0.50144091, 0.03868029, 0.18902279, -0.17966878, -0.56509588, 0.15466779, 0.04008383];
  const b2 = [0.03334961, 0.07560899, -0.0306667, 0.07332929, 0.30675453, -0.27532262, -0.10842766, 0.28548837, 0.00461051, 0.16640197, -0.61591286, -0.17170685, -0.13848418, -0.10602048, 0.81079592, -0.43535308];
  const W3 = [0.83773354, 0.43208601, -0.30642806, 0.7331294, -0.14490738, -0.50015562, 0.52790396, -1.37173614, -0.34714762, -0.60350551, -0.13255906, -0.07448241, -0.34614463, 0.75937533, 0.05045933, -0.61851931, 0.09060202, 0.24280053, 0.36570273, 0.06898967, -1.42465876, -1.12020136, -0.02890302, 0.50931894, -0.41850085, -0.09908804, -0.07563624, -0.11718983, -0.1749126, 0.55965612, -0.67766312, -0.01556262, 0.29130563, -0.0623848, -0.33215347, -0.67290029, 0.30722107, 0.42222655, -0.04453258, -0.30191282, -0.76489039, 0.00257077, 0.34370651, 0.2151296, -0.13947726, 0.20678835, -0.25881618, 0.17061797, 0.19543123, -0.35961783, 0.15370324, 0.47495654, -0.86579057, 0.30703933, -0.00386803, -0.08714491, 0.11455408, 0.73578083, 0.35128798, -0.06305502, 0.98634428, 0.15569331, 0.17489905, 0.21520658, 0.55075377, 1.2752488, -0.22134933, 0.03846544, 0.21248838, -0.37755592, -0.63355997, -0.43677321, -0.94789427, 0.19605512, -0.81639076, -0.00392941, 0.49647528, -1.31916409, 0.08576553, -0.41647767];
  const b3 = [0.01226738, -0.50027164, 0.63185453, 0.49247114, 0.44428307];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-4"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [-0.2357732, 0.02634139, -0.2768696, 0.40091123, -0.27198983, 0.49810835, 0.31156402, 0.01940359, -0.7738431, -0.13783468, 0.10765544, 0.61622267, -0.0511993, 0.28267754, 0.14895243, 0.6471685, 0.44529869, -0.18262228, 0.45381755, -0.09739416, -0.395692, 0.12043324, 0.25958921, 0.44550519, -0.72043581, -0.32455332, -0.26604753, 0.40496418, -1.27806336, -1.3418663, 0.00503958, -0.42021287, -0.02611556, -0.17617193, -1.02944845, 0.18694497, -0.36452884, -0.48436563, -0.3599027, 0.04413992, 0.09432728, 0.03950904, -0.35843172, -0.06308131, 0.0156311, 0.19714881, -0.28304971, 0.0206515, -0.42586885, 0.16671394, 0.41487369, -0.3987425, -0.26535347, 0.09109996, -0.24583065, 0.54707823, 0.13530272, -0.44648455, -0.00522103, -0.11447097, 0.1787504, -0.26528898, 0.61932067, -0.49996168, -0.59178697, -0.01416045, -0.11558889, -0.14163286, 0.23887228, 0.6341497, 0.27309587, -1.23442547, -0.49337339, 0.41936009, -0.53181299, -0.32536327, -0.61247861, -0.25948647, 0.39173963, -0.22754439, 0.08453632, -0.29416437, 0.14266488, -0.018089, 0.68862312, -0.78499064, 0.19457195, -0.47508544, 0.15762316, -0.01909196, -0.16632682, 0.02828834, 0.78604801, -0.54883196, 0.80731106, 0.33965961, -0.02857838, -0.13870498, 0.66473777, -0.33735956, 0.03711809, 0.01366417, 0.1814562, -1.05214982, -0.20639146, 0.10438804, 0.27242064, -0.07503711, 0.32133774, 0.15374217, 0.47711521, -0.03397035, 0.12795526, 0.077671, -1.2802327, -0.80711007, -0.02167037, 0.24367284, 0.38230997, -0.20432688, -0.55583685, 0.64721242, 0.75056146, 0.30868136, -0.44595948, 0.18272466, -0.53687228, 0.5343944, 0.21617953, -0.29297674, -1.07207191, 0.39614951, -0.39112253, 0.36107937, -0.37838412, -0.15788288, 0.2573166, 0.6466398, 1.12507457, 0.58998512, 0.01500307, 0.72210532, -0.00037618, -0.05216391, 0.20299318, 0.23693515, 0.06008989, 0.18305067, 0.09455217, -0.55164513, 0.31161314, 0.30265037, -0.31439486, 0.36993244, 0.043895, 1.11475629, 0.02862288, -0.05309323, -0.20257513, -1.01460075, 0.59632834, -0.16275008, 0.03822404, -1.01930431, -0.33694263, 0.63591434, -0.04932564, -0.64803293, -0.52810161, -0.55397281, 0.44148106, -0.15985292, 0.21641667, -0.31279188, -0.01142058, -0.11749153, -0.13905185, -0.90877486, -0.64699426, -0.03272542, 0.51172517, -0.92667678, 0.10537888, -0.50114096, 0.09444276, 0.14649023, -0.26500213, -0.2693419, 0.05984365, 0.09452058, -0.31706702, -0.36956691, 0.89187971, 0.19087493, -0.21811088, -0.83137973, -0.74630028, -0.09959176, 0.09500996, -0.2923984, 0.41870228, -0.94529939, -0.6623974, 0.47803185, 0.30693394, -0.44615616, -1.07450704, -0.03953652, 0.06985743, 0.18297802, 0.33126735, 0.40507084, 0.03806302, 0.27472966, 0.14885497, -0.38299512, 0.57495117, -0.44939423, -0.26144651, 0.00330667, -0.17740051, 0.18165847, -0.1173933, 0.66457661, -0.60639531, 0.13394702, 0.06311017, 0.40852277, -0.07798384, 0.09199797, 0.21940218, 0.53032653, -0.14268529, 0.30985419, 0.05685485, 0.39474354, 0.57284904, 0.61280362, -0.30627413, 0.39395862, 0.85835203, -0.24064918, -0.58957863, 0.9966288, 0.64410104, 0.65472918, 0.21590269, -1.06021328, 0.73186616, 0.6056456, 0.09301941, 0.27854138, -0.5394236, 0.7364847, 0.34187712, 0.71339864, 0.20932205, -0.13908938, 0.32454092, -0.02385126, 0.4102746, 0.35441755, -0.10600595, -0.2566295, -0.07759301, 0.50798128, -0.0049675, 1.83731818, -0.03331043, 0.03269217, 0.14522556, 0.17030689, 0.13514892, 0.57806525, 0.0871643, 0.02011128, 0.21156542, 0.31465029, 0.64349551, -0.28241731, 0.19481499, 0.14808729, 0.66295225, 0.62612837, 0.04167787, 0.12423115, -0.05351779, 1.38133295, 0.13949702, 0.09180802, -0.26763491, -0.33108576, 0.45118776, -0.29460004, 0.65140407, -0.68211143, -1.08954084, 0.58350625, -0.31354752, 0.42177181, 0.36211515, 0.16961878, -0.08926298, -0.36578472, 0.24271354, 0.17211399, 0.22284118, -0.75480529, 0.08954827, -0.54673226, -0.20164896, -0.01798856, 0.35379824, -0.42216938, -0.50346707, 0.15213156, -0.06373593, -0.29000228, 0.2027261, -0.15171819, -0.00377551, -1.03858815, -0.87202946, -0.11194298, 0.2758585, -0.77119197, 0.7981156, -0.24303843, -0.58440428, 1.21380153, 1.04824116, -0.21117462, -0.8423889, -0.02087191, 1.16906926, 0.9703315, -0.38302848, -0.43875439, -0.62767248, 0.12127513, 1.13537919, -0.22921823, 0.12067754, -0.69609811, 0.43107382, -0.12191585, -0.50169014, 0.80063014, 0.31970946, 0.40921847, -0.38801561, -0.04209568, -0.06308807, 1.8093925, 0.19808815, -0.04397689, 0.21267481, 0.06348, -0.03697248, -0.26231326, -0.00118257, 0.28359176, 0.16005355, 0.01664968, 0.866719, -0.58145217, -0.09146186, 0.20107679, -0.27990698, -0.04436133, -0.39920918, -0.61689032, -1.10618906, 0.9171798, -0.53466555, -0.28348998, -0.1231616, -1.09907272, 0.78678451, -0.5981971, -0.40642012, -0.3096091, -1.09386969, 1.06980515, -0.79942156, -0.91427517, -0.4096431, -0.24233566, -0.30615205, -0.88901262, -0.86479727, -0.44055508, -0.3963222, -0.21526566, 0.01032306, 0.35014156, -4.78352904, -0.29543986, -0.6111401, 0.24253167, 0.65401288, 0.4217101, -0.06745108, 0.10270246, 1.14385676, 0.16327688, -0.49374794, 1.20178487, 0.49484133, -0.1222703, -0.04055787, -0.16786515, 0.05658129, 0.30881351, -0.23910557, 0.08267583, -0.82662538, -0.2936944, 0.30498341, -0.30492662, 1.22938781, -1.38010541, -0.34034213, 0.87322636, -0.52356623, 1.31479852, 0.25174402, -0.14609408, 0.84556585, 0.01255683, 0.11420633, -0.18321017, 0.01440074, 0.02996949, -0.39405712, -0.61246269, 0.32041495, 0.1930965, -0.77072619, -0.5335698, 0.16169134, -0.05634864, 0.08555152, -0.13295023, -0.26851962, 0.17436667, -0.54976472, 1.05511108, -0.18092632, -0.76094481, 0.69092003, 0.56430217, -0.24604029, 0.89844454, 0.18669489, 0.93804533, -0.76826344, 0.18669313, 1.06182759, -0.94942139, 0.2943491, -0.21588942, 0.00849108, 0.30275311, -0.69889326, 0.13911169, 0.18370253, -0.88747634, 0.27273599, -0.04867609, 0.29838191, -0.00393964, -0.69674422, -0.13377483, -0.89051287, 0.20302294, -0.14039776, -0.1274034, 0.04852941, -0.33614926, -0.02585425, -0.0404718, -0.05939889, 0.14324031, -0.72520171, -1.0375725, 0.12612976, -0.17577518, -0.62986626, 0.6144157, 0.06530959, -0.32639405, -0.19318147, 0.73856011, -0.31917996, 0.27949492, -0.22504909, 2.07801705, 0.92924964, -0.05670527, -0.31497623, -0.54934355, -0.45569069, 0.92493849, 0.47380143, 0.12334206, -0.08723864, -0.55940267, 0.34416949, -0.35268622, 0.22252883, -0.18668398, -0.49287651, 0.82483699, 0.17049323, -0.36894765, 0.46002704, 0.39026147, -0.02633802, 0.27822955, -0.60688266, 0.00461498, -0.41695397, 0.63904946, -0.42534705, -0.35748937, 0.05943162, 0.34075674, -0.42435248, 0.05444187, 0.09367026, 0.27935257, 0.33716515, 0.36117114, 0.2903928, 0.3352802, 0.28577795, 0.50842142, 0.3873581, -0.14820455, -0.03641834, -0.46644767, 0.45719931, 0.35813923, 1.66523348, 1.09722954, 0.41483574, -0.12524579, 0.95003115, 1.08203855, 0.14017292, 0.47153747, 0.05333192, 0.7562444, 0.63787555, -0.69017265, 0.08046007, 0.33481676, -0.08012297, 0.46828347, -0.33924237, -0.0648715, 0.00541225, 0.92991958, 0.28157712, -0.040611, 0.45487365, -0.70853334, -1.48176201, 0.68683515, 0.45567688, -0.73684179, 0.32903689, -0.5127594, 0.01785268, -0.51966395, 0.49014177, 0.04126317, -0.33796322, -0.08865805, -0.36920743, 0.0287596, 0.57302842, 0.06263771, 0.60168178, 0.02604508, 0.58665349, 0.2900799, -0.81840984, 0.41305784, -0.67990565, 0.00580809, 0.06885373, -1.09843913, 0.69194489, -0.57036928, 0.14163079, -0.32603203, -0.67528092, 0.13433141, 0.00804013, 0.11347552, -0.26162916, -0.46360183, 0.30511908, 0.24982625, -0.46724763, 0.09166332, 0.95149154, 0.22090068, -0.09459887, 1.70734053, 0.74930376, 0.22669064, 0.23088873, 0.00691208, 0.25461777, 0.49022368, -0.14824938, -0.08682214, 0.34272745, 0.54509346, 1.4000886, -0.03680593, 0.03357015, -0.26427125, -0.64349718, -0.40486876, -0.27951439, -0.34387091, 0.43569515, -0.14073143, -1.00215432, -0.77639047, 0.70114047, -0.42803449, 0.57140846, -0.26717316, -0.07949634, 0.28524032, 0.27920031, 0.61605446, -0.34894915, -0.2712964, -0.63830127, -0.09076834, 0.07402614, -0.35414093, -0.0684393, 0.34896978, 0.32264804, -0.34490816, -0.45356265, 0.63439775, -1.57600579, -0.06746198, -0.08537566, 1.09918399, 0.31868402, -0.03376455, -0.25548217, 0.42193183, -0.3127198, 0.4727384, -0.06248772, 0.08320642, -0.2881927, 0.00782974, 0.4451475, 0.77373579, 0.22577541, 0.30525797, -0.45273546, 1.03770254, -0.05583925, -0.16798302, 0.07008786, 0.16383369, 1.57074778, 0.93955063, -0.12112078, 0.66962385, -0.26793744, 1.04184463, 0.29216865, 0.16070794, 0.33549893, -0.45702747, -1.13992813, -0.64657602, 0.26132991, -0.02085444, 0.16059716, -0.26935617, 0.34359996, -0.22458816, -0.72919062, -0.22978941, 0.37173572, 0.16773367, 0.02098599, 0.2716156, -0.53525399, -0.27688178, -0.97950053, -0.32334612, -0.25029956, -0.06467537, -0.07218093, -1.01340458, -0.21611213, 0.15029247, -0.38265591, -0.47588177, 0.06405578, 0.37624425, -0.08201947, 0.22172391, 0.03612089, -0.12981825, -0.11134576, 0.33256439, 0.11602157, -0.16626147, 0.61933846, -0.24215501, -0.55514468, 0.52243741, 1.20488911, 0.19173783, 0.20565168, 0.00644769, 0.6703385, 0.2052223, 0.17900277, 0.16313057, 0.58269392, 0.00173648, 0.50942206, -0.61683307, -1.46956046, 0.01266611, -0.09550294, -0.39602346, 0.07013626, 0.60146089, 0.68026193, -0.29026554, -0.2540086, 0.46243097, 0.04812017, -1.26404814, -0.39118637, 0.47828079, -0.02254198, -0.29781671, -0.25658804, -0.54873166, -0.49387461, -0.76328254, -1.01676986, -0.13034879, 0.15770167, -0.44614452, -0.06037171, -0.17925293, 0.23464917, -0.68336229, 0.57623704, -0.31081313, -0.49639537, -0.40952591, -0.22370329, 0.43885301, -0.028323, 0.0188124, -0.18967801, -0.35367742, -0.19206563, -0.49588587, 0.24829387, 0.01903777, 0.57040827, 2.72491966, -0.37807439, -0.40776463, 0.03627962, -0.93149738, -0.04963062, -0.34383704, -0.02506453, 0.11986074, 0.24562915, -0.33740327, 0.23716379, 0.21267282, 0.08205699, -0.02999661, 0.55361538, 0.35859333, -0.02758471, 0.35317362, 0.46563806, -0.01505904, -0.06359542, 0.28172492, -0.01575933, -0.09248343, 0.05493762, -0.21260668, 0.22769476, 0.23893377, 0.5173057, 0.42637082, 0.33849944, 0.39346337, 0.03080021, -0.31391991, 0.34274927, 0.24812789, 0.16865966, 0.18244305, 0.46673628, -0.71000847, 0.00293225, 0.4536123, 0.91971681, -0.30898484, -0.19726569, 0.4793678, -0.39953838, 0.04603011, -0.19085773, -0.49374168, 0.14248923, -0.25347248, 0.1539884, -0.3381789, 0.6150777, -0.1885152, -0.07296459, 0.11777548, -0.12478369, -0.78552517, 0.12054085, 0.91435569, 0.47031117, 0.04047152, -0.08767102, 0.28111799, -0.02124643, 1.13503109, 0.03670552, 0.09898181, 0.64261767, 1.41467219, -0.71452366, 0.27641977, -0.4476406, -0.27908163, 0.53286556, 0.01147704, -0.08576561, 0.34389645, 0.16502984, -0.03746609, -0.12941539, 0.05676178, -0.43498304, -0.56349863, 0.41625942, 0.37243294, -0.22078923, -0.84976553, 0.05545318, -0.03537457, 0.44254738, -0.76460323, -0.20293335, 0.30298515, -0.01907024, -0.62560245, 0.6279514, 0.44739138, 1.22262979, 0.35938674, 0.89309988, 0.36212964, 0.23205768, 0.52482745, 0.25233463, -0.62129294, 0.05498481, -0.4560259, -0.23054347, -0.02574204, -0.48216593, 0.33955806, 0.20483013, -0.90602299, 0.57322584, -0.05093936, 0.1646145, -0.01429148, 0.40006555, 0.01888463, 0.28819351, 0.0726744, 0.32692636, 0.57094279, -0.18648538, 0.00556427, -0.04964708, 0.4111429, 0.25742869, 0.0896221, -0.38195579, 0.15628806, -0.01166875, -0.2901624, -1.32993149, -0.00591237, 0.10646304, -0.41226836, -0.15054724, 0.21722247, -0.41034127, 0.5878759, -0.58710366, 0.23164358, 0.40791447, -1.01599833, -0.12948828, -0.49793159, 0.19025755, 0.31259493, -0.48683006, 0.33777179, -0.08704104, -0.30503902, 0.68525083, -0.49020564, 0.06250808, 0.40463369, 0.33772726, 1.04466189, 0.15990268, -0.52680586, 0.14771937, 0.16826381, -0.16129405, 0.38795634, 0.84928823, 0.45345982, 1.10246936, 0.08383852, 0.0780205, -0.17398169, 0.43126701, -0.44679115, 0.11457492, -0.01764735, 0.57507503, -0.12219563, 0.59354659, -0.19624025, 0.43172547, 1.56085574, -0.32837438, -0.41954544, 1.35660896, 1.05986259, 0.41042023, 0.25119354, 0.04962639, 0.1819531, -0.82794901, 0.38166209, 0.666766, -0.13868658, 0.01395617, -0.20142711, -0.08781057, 0.22192809, 1.71218669, -0.02913629, -0.83176747, 0.38935886, 0.12619378, 0.3367484, 0.06111146, 0.20676118, 0.15945462, 0.09938302, -0.00768375, 0.06067527, 0.5972888, 0.38486441, 0.17080494, 0.22716211, 0.03381028, -0.00233479, -1.02576006, 0.69778953, 0.21272467, -0.32264809, -1.21195787, 0.05201386, 0.47900678, -0.75168006, -2.04562592, 0.44292291, -0.11270947, -0.08236143, -0.25360588, -0.02693176, -0.23172039, -0.45858358, -1.29033933, 1.00028266, 0.3434152, -0.34193044, 0.12953692, -0.65773072, 1.41460808, 0.35848971, -0.20396988, -0.50504556, -1.33247652, 0.90431179, -0.13210972, 0.28488859];
  const b1 = [0.15920827, -0.43166889, -0.0675993, 0.03339267, -0.14736637, -0.1983139, 0.02390528, -0.40268505, -0.49983402, -0.71953602, -0.08518223, -0.57073853, 0.22758926, 0.55602469, -0.0077341, 0.02096832, -0.2051495, 0.3016202, -0.3751937, -0.10366951, 0.20311337, 0.01694928, -0.12531235, 0.14691086];
  const W2 = [0.54247374, 0.86832904, 0.18068135, 0.20984645, -0.49189309, -0.25879529, 0.05251636, -0.30104285, 0.0260195, 0.86289642, -0.26084685, -0.32439601, -0.58021052, 0.31087067, -0.14465713, -1.03364043, 0.26452191, 0.55054756, -0.4607206, -0.83993635, 0.00743894, 0.40357251, 0.81217289, 0.23951988, -0.25816643, -0.53121914, -0.06674625, -0.51526671, -0.02816474, -0.52170475, -0.52637129, -0.23987969, 0.55976685, 0.32173093, -0.60648788, -0.98959481, 0.63481982, 0.0428517, 0.02475942, 0.0119749, -0.06099691, 0.6755614, 0.46943357, -0.88339713, -0.0266863, 0.66544902, 0.0956175, -0.07551576, -0.64720404, -0.08306334, 0.15592898, -0.01733847, -0.06427562, 0.38829296, 0.55680505, 0.45237054, -0.495264, -0.52682366, -0.36012757, 0.11459108, 0.51118291, 0.01974198, -0.54573976, -0.16269153, -0.07672154, -0.25754632, 0.54168173, 0.84106338, -0.19201789, -0.4100774, 0.1942514, 0.10992718, 0.65214561, 0.64041501, 0.47816714, -0.12205325, 0.33038189, -0.59251034, -0.49714791, -0.46177991, 0.63834309, 0.02022834, -0.57199429, 0.63473198, -0.19282243, -0.04622024, -0.71073075, -0.16915612, 0.87368364, -0.19639622, -0.46144101, -0.09226731, -0.41031184, -0.52299841, 0.45185886, 0.00431855, 0.02172061, 0.10904878, 0.72830684, 0.2678994, -0.16777036, -0.14819549, -0.06292678, 0.41464158, -0.26905812, 0.26501398, -0.00895521, -0.65785324, 0.23332399, -0.33462707, 0.68975489, -0.72196349, -0.27834403, 0.41103108, 0.13309676, 0.40994753, 0.23468863, -0.05969509, 0.26308608, 0.11043425, -0.24267272, -0.05843755, -0.74976216, -0.10064263, -0.49080933, 0.33140413, -0.49959361, 0.0911211, -0.12154595, 0.3718216, -0.06100468, -0.03833565, 0.14697059, -0.55189811, 0.2544361, 0.01742821, 0.37990524, -0.45885477, 0.15632297, 0.41644768, 0.4328091, -0.67248781, 0.57953217, -0.03029795, -0.4191149, -0.00243307, 0.13287425, 1.14071682, -0.32292669, 0.14139873, 0.85955806, -0.37252867, 1.43420743, -0.53709538, -0.00572119, 0.37029745, 0.41790264, -0.27744215, 0.0682296, -0.80051132, -0.09693305, -0.22096531, 0.76050983, 0.37026393, -0.80277079, -0.0051135, 0.56795758, -0.51399867, -0.0755205, -0.06466649, 0.36783789, 0.20255052, -0.26522135, 0.85287384, 0.52123548, 0.19054305, -0.17399183, 0.08761386, 0.21850481, -0.30273283, 0.11424527, 0.24557832, -0.25402611, 0.21782415, 0.29789938, 0.70312415, -0.80951691, 0.10204281, 0.69423295, 0.16915515, -0.69604868, 0.59288883, -0.04233299, -0.09917248, 0.03605698, 0.14327247, -0.50878509, -0.41314975, 0.32353387, -0.56799082, 0.41152038, -1.05467736, -0.33218165, -0.01466625, 0.2500429, -0.00640784, 0.48920246, -0.06851237, 0.10950843, -0.28047306, 1.27122974, 0.26778687, -0.20965498, 0.05966231, -0.00737077, 0.51376314, -0.03310669, 0.04000779, 0.32301482, -0.62258329, 0.06372631, -0.10490108, -0.33816124, -0.11193624, -0.93471216, 0.06005379, -0.00582699, -0.11404245, -0.38422749, 0.3752085, -0.5069963, -0.18867895, -0.44620464, 0.55795773, -0.00158051, 0.33624875, 0.31926824, 0.02160093, 0.6654894, -0.31819482, 0.08356259, -0.43952932, -0.06293565, 0.0535796, 0.30535802, 0.01247109, -0.7281938, -0.08689071, -0.23844762, -1.02881999, 0.38698379, -0.71748919, 0.26524313, 0.2902467, -0.53168338, 0.91810756, 0.38495431, 0.43431144, 0.00504469, 0.035795, 0.21446148, 0.16667373, -0.31032626, 0.84076548, -0.33922565, -0.36437759, 0.33573022, -1.01241875, -0.31344073, -0.42350423, 0.05523917, 0.19400118, 0.91095566, 0.15839675, 0.739852, -0.53507346, -0.54574754, 0.11692534, -0.33822965, 0.59021345, -0.32560446, -0.13722227, 0.14831106, -0.61720111, 0.24636341, -0.05821383, -0.01996904, -0.04065672, -0.21986686, -0.08767616, -0.00745672, -0.22921492, -0.30577557, 0.43697187, 0.13097605, -0.20986671, 0.35204903, 0.29037645, -1.04140773, -0.70221042, -0.06041101, 0.48038921, 0.19865339, -0.05975922, 0.03434219, -0.06742248, 0.74869572, -0.10867569, 0.06348322, -0.21926995, 0.02474056, -0.39416978, -0.11967728, -0.01576845, -0.09075414, 0.46405326, -0.15242146, 0.05803013, 0.1037105, -0.33557925, 1.29393612, -0.78121679, -0.07083863, -0.45795545, 0.49496264, -0.41003813, 0.28690868, -0.13999092, 0.24309896, 0.25744957, 1.19925399, -0.38188064, -0.68897555, 0.05424064, 0.31072307, -0.17813833, 0.04111223, 0.05967255, -0.17640973, 0.0967115, -0.27474694, -0.07308925, -0.29375981, 0.05935046, -0.34840387, -0.43971671, -0.01109003, -0.61678802, -0.16670553, 0.27477585, 0.11880909, 0.00606765, -0.46084648, 0.19119837, -0.27664747, -0.17710353, -0.11481983, 0.82559053, -0.32826093, 0.30087227, 0.15331873, 0.09051307, 0.00214496, 0.24929402, -0.12908378, 0.92054806, -0.85514176, 0.1281831, -0.25799487, 0.35822421, -0.22283738, -0.02276509, 0.1509969, -0.48196055, -0.81578716, -0.00636459, 0.07790823, -0.50144091, 0.03868029, 0.18902279, -0.17966878, -0.56509588, 0.15466779, 0.04008383];
  const b2 = [0.03334961, 0.07560899, -0.0306667, 0.07332929, 0.30675453, -0.27532262, -0.10842766, 0.28548837, 0.00461051, 0.16640197, -0.61591286, -0.17170685, -0.13848418, -0.10602048, 0.81079592, -0.43535308];
  const W3 = [0.83773354, 0.43208601, -0.30642806, 0.7331294, -0.14490738, -0.50015562, 0.52790396, -1.37173614, -0.34714762, -0.60350551, -0.13255906, -0.07448241, -0.34614463, 0.75937533, 0.05045933, -0.61851931, 0.09060202, 0.24280053, 0.36570273, 0.06898967, -1.42465876, -1.12020136, -0.02890302, 0.50931894, -0.41850085, -0.09908804, -0.07563624, -0.11718983, -0.1749126, 0.55965612, -0.67766312, -0.01556262, 0.29130563, -0.0623848, -0.33215347, -0.67290029, 0.30722107, 0.42222655, -0.04453258, -0.30191282, -0.76489039, 0.00257077, 0.34370651, 0.2151296, -0.13947726, 0.20678835, -0.25881618, 0.17061797, 0.19543123, -0.35961783, 0.15370324, 0.47495654, -0.86579057, 0.30703933, -0.00386803, -0.08714491, 0.11455408, 0.73578083, 0.35128798, -0.06305502, 0.98634428, 0.15569331, 0.17489905, 0.21520658, 0.55075377, 1.2752488, -0.22134933, 0.03846544, 0.21248838, -0.37755592, -0.63355997, -0.43677321, -0.94789427, 0.19605512, -0.81639076, -0.00392941, 0.49647528, -1.31916409, 0.08576553, -0.41647767];
  const b3 = [0.01226738, -0.50027164, 0.63185453, 0.49247114, 0.44428307];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-5"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [-0.2357732, 0.02634139, -0.2768696, 0.40091123, -0.27198983, 0.49810835, 0.31156402, 0.01940359, -0.7738431, -0.13783468, 0.10765544, 0.61622267, -0.0511993, 0.28267754, 0.14895243, 0.6471685, 0.44529869, -0.18262228, 0.45381755, -0.09739416, -0.395692, 0.12043324, 0.25958921, 0.44550519, -0.72043581, -0.32455332, -0.26604753, 0.40496418, -1.27806336, -1.3418663, 0.00503958, -0.42021287, -0.02611556, -0.17617193, -1.02944845, 0.18694497, -0.36452884, -0.48436563, -0.3599027, 0.04413992, 0.09432728, 0.03950904, -0.35843172, -0.06308131, 0.0156311, 0.19714881, -0.28304971, 0.0206515, -0.42586885, 0.16671394, 0.41487369, -0.3987425, -0.26535347, 0.09109996, -0.24583065, 0.54707823, 0.13530272, -0.44648455, -0.00522103, -0.11447097, 0.1787504, -0.26528898, 0.61932067, -0.49996168, -0.59178697, -0.01416045, -0.11558889, -0.14163286, 0.23887228, 0.6341497, 0.27309587, -1.23442547, -0.49337339, 0.41936009, -0.53181299, -0.32536327, -0.61247861, -0.25948647, 0.39173963, -0.22754439, 0.08453632, -0.29416437, 0.14266488, -0.018089, 0.68862312, -0.78499064, 0.19457195, -0.47508544, 0.15762316, -0.01909196, -0.16632682, 0.02828834, 0.78604801, -0.54883196, 0.80731106, 0.33965961, -0.02857838, -0.13870498, 0.66473777, -0.33735956, 0.03711809, 0.01366417, 0.1814562, -1.05214982, -0.20639146, 0.10438804, 0.27242064, -0.07503711, 0.32133774, 0.15374217, 0.47711521, -0.03397035, 0.12795526, 0.077671, -1.2802327, -0.80711007, -0.02167037, 0.24367284, 0.38230997, -0.20432688, -0.55583685, 0.64721242, 0.75056146, 0.30868136, -0.44595948, 0.18272466, -0.53687228, 0.5343944, 0.21617953, -0.29297674, -1.07207191, 0.39614951, -0.39112253, 0.36107937, -0.37838412, -0.15788288, 0.2573166, 0.6466398, 1.12507457, 0.58998512, 0.01500307, 0.72210532, -0.00037618, -0.05216391, 0.20299318, 0.23693515, 0.06008989, 0.18305067, 0.09455217, -0.55164513, 0.31161314, 0.30265037, -0.31439486, 0.36993244, 0.043895, 1.11475629, 0.02862288, -0.05309323, -0.20257513, -1.01460075, 0.59632834, -0.16275008, 0.03822404, -1.01930431, -0.33694263, 0.63591434, -0.04932564, -0.64803293, -0.52810161, -0.55397281, 0.44148106, -0.15985292, 0.21641667, -0.31279188, -0.01142058, -0.11749153, -0.13905185, -0.90877486, -0.64699426, -0.03272542, 0.51172517, -0.92667678, 0.10537888, -0.50114096, 0.09444276, 0.14649023, -0.26500213, -0.2693419, 0.05984365, 0.09452058, -0.31706702, -0.36956691, 0.89187971, 0.19087493, -0.21811088, -0.83137973, -0.74630028, -0.09959176, 0.09500996, -0.2923984, 0.41870228, -0.94529939, -0.6623974, 0.47803185, 0.30693394, -0.44615616, -1.07450704, -0.03953652, 0.06985743, 0.18297802, 0.33126735, 0.40507084, 0.03806302, 0.27472966, 0.14885497, -0.38299512, 0.57495117, -0.44939423, -0.26144651, 0.00330667, -0.17740051, 0.18165847, -0.1173933, 0.66457661, -0.60639531, 0.13394702, 0.06311017, 0.40852277, -0.07798384, 0.09199797, 0.21940218, 0.53032653, -0.14268529, 0.30985419, 0.05685485, 0.39474354, 0.57284904, 0.61280362, -0.30627413, 0.39395862, 0.85835203, -0.24064918, -0.58957863, 0.9966288, 0.64410104, 0.65472918, 0.21590269, -1.06021328, 0.73186616, 0.6056456, 0.09301941, 0.27854138, -0.5394236, 0.7364847, 0.34187712, 0.71339864, 0.20932205, -0.13908938, 0.32454092, -0.02385126, 0.4102746, 0.35441755, -0.10600595, -0.2566295, -0.07759301, 0.50798128, -0.0049675, 1.83731818, -0.03331043, 0.03269217, 0.14522556, 0.17030689, 0.13514892, 0.57806525, 0.0871643, 0.02011128, 0.21156542, 0.31465029, 0.64349551, -0.28241731, 0.19481499, 0.14808729, 0.66295225, 0.62612837, 0.04167787, 0.12423115, -0.05351779, 1.38133295, 0.13949702, 0.09180802, -0.26763491, -0.33108576, 0.45118776, -0.29460004, 0.65140407, -0.68211143, -1.08954084, 0.58350625, -0.31354752, 0.42177181, 0.36211515, 0.16961878, -0.08926298, -0.36578472, 0.24271354, 0.17211399, 0.22284118, -0.75480529, 0.08954827, -0.54673226, -0.20164896, -0.01798856, 0.35379824, -0.42216938, -0.50346707, 0.15213156, -0.06373593, -0.29000228, 0.2027261, -0.15171819, -0.00377551, -1.03858815, -0.87202946, -0.11194298, 0.2758585, -0.77119197, 0.7981156, -0.24303843, -0.58440428, 1.21380153, 1.04824116, -0.21117462, -0.8423889, -0.02087191, 1.16906926, 0.9703315, -0.38302848, -0.43875439, -0.62767248, 0.12127513, 1.13537919, -0.22921823, 0.12067754, -0.69609811, 0.43107382, -0.12191585, -0.50169014, 0.80063014, 0.31970946, 0.40921847, -0.38801561, -0.04209568, -0.06308807, 1.8093925, 0.19808815, -0.04397689, 0.21267481, 0.06348, -0.03697248, -0.26231326, -0.00118257, 0.28359176, 0.16005355, 0.01664968, 0.866719, -0.58145217, -0.09146186, 0.20107679, -0.27990698, -0.04436133, -0.39920918, -0.61689032, -1.10618906, 0.9171798, -0.53466555, -0.28348998, -0.1231616, -1.09907272, 0.78678451, -0.5981971, -0.40642012, -0.3096091, -1.09386969, 1.06980515, -0.79942156, -0.91427517, -0.4096431, -0.24233566, -0.30615205, -0.88901262, -0.86479727, -0.44055508, -0.3963222, -0.21526566, 0.01032306, 0.35014156, -4.78352904, -0.29543986, -0.6111401, 0.24253167, 0.65401288, 0.4217101, -0.06745108, 0.10270246, 1.14385676, 0.16327688, -0.49374794, 1.20178487, 0.49484133, -0.1222703, -0.04055787, -0.16786515, 0.05658129, 0.30881351, -0.23910557, 0.08267583, -0.82662538, -0.2936944, 0.30498341, -0.30492662, 1.22938781, -1.38010541, -0.34034213, 0.87322636, -0.52356623, 1.31479852, 0.25174402, -0.14609408, 0.84556585, 0.01255683, 0.11420633, -0.18321017, 0.01440074, 0.02996949, -0.39405712, -0.61246269, 0.32041495, 0.1930965, -0.77072619, -0.5335698, 0.16169134, -0.05634864, 0.08555152, -0.13295023, -0.26851962, 0.17436667, -0.54976472, 1.05511108, -0.18092632, -0.76094481, 0.69092003, 0.56430217, -0.24604029, 0.89844454, 0.18669489, 0.93804533, -0.76826344, 0.18669313, 1.06182759, -0.94942139, 0.2943491, -0.21588942, 0.00849108, 0.30275311, -0.69889326, 0.13911169, 0.18370253, -0.88747634, 0.27273599, -0.04867609, 0.29838191, -0.00393964, -0.69674422, -0.13377483, -0.89051287, 0.20302294, -0.14039776, -0.1274034, 0.04852941, -0.33614926, -0.02585425, -0.0404718, -0.05939889, 0.14324031, -0.72520171, -1.0375725, 0.12612976, -0.17577518, -0.62986626, 0.6144157, 0.06530959, -0.32639405, -0.19318147, 0.73856011, -0.31917996, 0.27949492, -0.22504909, 2.07801705, 0.92924964, -0.05670527, -0.31497623, -0.54934355, -0.45569069, 0.92493849, 0.47380143, 0.12334206, -0.08723864, -0.55940267, 0.34416949, -0.35268622, 0.22252883, -0.18668398, -0.49287651, 0.82483699, 0.17049323, -0.36894765, 0.46002704, 0.39026147, -0.02633802, 0.27822955, -0.60688266, 0.00461498, -0.41695397, 0.63904946, -0.42534705, -0.35748937, 0.05943162, 0.34075674, -0.42435248, 0.05444187, 0.09367026, 0.27935257, 0.33716515, 0.36117114, 0.2903928, 0.3352802, 0.28577795, 0.50842142, 0.3873581, -0.14820455, -0.03641834, -0.46644767, 0.45719931, 0.35813923, 1.66523348, 1.09722954, 0.41483574, -0.12524579, 0.95003115, 1.08203855, 0.14017292, 0.47153747, 0.05333192, 0.7562444, 0.63787555, -0.69017265, 0.08046007, 0.33481676, -0.08012297, 0.46828347, -0.33924237, -0.0648715, 0.00541225, 0.92991958, 0.28157712, -0.040611, 0.45487365, -0.70853334, -1.48176201, 0.68683515, 0.45567688, -0.73684179, 0.32903689, -0.5127594, 0.01785268, -0.51966395, 0.49014177, 0.04126317, -0.33796322, -0.08865805, -0.36920743, 0.0287596, 0.57302842, 0.06263771, 0.60168178, 0.02604508, 0.58665349, 0.2900799, -0.81840984, 0.41305784, -0.67990565, 0.00580809, 0.06885373, -1.09843913, 0.69194489, -0.57036928, 0.14163079, -0.32603203, -0.67528092, 0.13433141, 0.00804013, 0.11347552, -0.26162916, -0.46360183, 0.30511908, 0.24982625, -0.46724763, 0.09166332, 0.95149154, 0.22090068, -0.09459887, 1.70734053, 0.74930376, 0.22669064, 0.23088873, 0.00691208, 0.25461777, 0.49022368, -0.14824938, -0.08682214, 0.34272745, 0.54509346, 1.4000886, -0.03680593, 0.03357015, -0.26427125, -0.64349718, -0.40486876, -0.27951439, -0.34387091, 0.43569515, -0.14073143, -1.00215432, -0.77639047, 0.70114047, -0.42803449, 0.57140846, -0.26717316, -0.07949634, 0.28524032, 0.27920031, 0.61605446, -0.34894915, -0.2712964, -0.63830127, -0.09076834, 0.07402614, -0.35414093, -0.0684393, 0.34896978, 0.32264804, -0.34490816, -0.45356265, 0.63439775, -1.57600579, -0.06746198, -0.08537566, 1.09918399, 0.31868402, -0.03376455, -0.25548217, 0.42193183, -0.3127198, 0.4727384, -0.06248772, 0.08320642, -0.2881927, 0.00782974, 0.4451475, 0.77373579, 0.22577541, 0.30525797, -0.45273546, 1.03770254, -0.05583925, -0.16798302, 0.07008786, 0.16383369, 1.57074778, 0.93955063, -0.12112078, 0.66962385, -0.26793744, 1.04184463, 0.29216865, 0.16070794, 0.33549893, -0.45702747, -1.13992813, -0.64657602, 0.26132991, -0.02085444, 0.16059716, -0.26935617, 0.34359996, -0.22458816, -0.72919062, -0.22978941, 0.37173572, 0.16773367, 0.02098599, 0.2716156, -0.53525399, -0.27688178, -0.97950053, -0.32334612, -0.25029956, -0.06467537, -0.07218093, -1.01340458, -0.21611213, 0.15029247, -0.38265591, -0.47588177, 0.06405578, 0.37624425, -0.08201947, 0.22172391, 0.03612089, -0.12981825, -0.11134576, 0.33256439, 0.11602157, -0.16626147, 0.61933846, -0.24215501, -0.55514468, 0.52243741, 1.20488911, 0.19173783, 0.20565168, 0.00644769, 0.6703385, 0.2052223, 0.17900277, 0.16313057, 0.58269392, 0.00173648, 0.50942206, -0.61683307, -1.46956046, 0.01266611, -0.09550294, -0.39602346, 0.07013626, 0.60146089, 0.68026193, -0.29026554, -0.2540086, 0.46243097, 0.04812017, -1.26404814, -0.39118637, 0.47828079, -0.02254198, -0.29781671, -0.25658804, -0.54873166, -0.49387461, -0.76328254, -1.01676986, -0.13034879, 0.15770167, -0.44614452, -0.06037171, -0.17925293, 0.23464917, -0.68336229, 0.57623704, -0.31081313, -0.49639537, -0.40952591, -0.22370329, 0.43885301, -0.028323, 0.0188124, -0.18967801, -0.35367742, -0.19206563, -0.49588587, 0.24829387, 0.01903777, 0.57040827, 2.72491966, -0.37807439, -0.40776463, 0.03627962, -0.93149738, -0.04963062, -0.34383704, -0.02506453, 0.11986074, 0.24562915, -0.33740327, 0.23716379, 0.21267282, 0.08205699, -0.02999661, 0.55361538, 0.35859333, -0.02758471, 0.35317362, 0.46563806, -0.01505904, -0.06359542, 0.28172492, -0.01575933, -0.09248343, 0.05493762, -0.21260668, 0.22769476, 0.23893377, 0.5173057, 0.42637082, 0.33849944, 0.39346337, 0.03080021, -0.31391991, 0.34274927, 0.24812789, 0.16865966, 0.18244305, 0.46673628, -0.71000847, 0.00293225, 0.4536123, 0.91971681, -0.30898484, -0.19726569, 0.4793678, -0.39953838, 0.04603011, -0.19085773, -0.49374168, 0.14248923, -0.25347248, 0.1539884, -0.3381789, 0.6150777, -0.1885152, -0.07296459, 0.11777548, -0.12478369, -0.78552517, 0.12054085, 0.91435569, 0.47031117, 0.04047152, -0.08767102, 0.28111799, -0.02124643, 1.13503109, 0.03670552, 0.09898181, 0.64261767, 1.41467219, -0.71452366, 0.27641977, -0.4476406, -0.27908163, 0.53286556, 0.01147704, -0.08576561, 0.34389645, 0.16502984, -0.03746609, -0.12941539, 0.05676178, -0.43498304, -0.56349863, 0.41625942, 0.37243294, -0.22078923, -0.84976553, 0.05545318, -0.03537457, 0.44254738, -0.76460323, -0.20293335, 0.30298515, -0.01907024, -0.62560245, 0.6279514, 0.44739138, 1.22262979, 0.35938674, 0.89309988, 0.36212964, 0.23205768, 0.52482745, 0.25233463, -0.62129294, 0.05498481, -0.4560259, -0.23054347, -0.02574204, -0.48216593, 0.33955806, 0.20483013, -0.90602299, 0.57322584, -0.05093936, 0.1646145, -0.01429148, 0.40006555, 0.01888463, 0.28819351, 0.0726744, 0.32692636, 0.57094279, -0.18648538, 0.00556427, -0.04964708, 0.4111429, 0.25742869, 0.0896221, -0.38195579, 0.15628806, -0.01166875, -0.2901624, -1.32993149, -0.00591237, 0.10646304, -0.41226836, -0.15054724, 0.21722247, -0.41034127, 0.5878759, -0.58710366, 0.23164358, 0.40791447, -1.01599833, -0.12948828, -0.49793159, 0.19025755, 0.31259493, -0.48683006, 0.33777179, -0.08704104, -0.30503902, 0.68525083, -0.49020564, 0.06250808, 0.40463369, 0.33772726, 1.04466189, 0.15990268, -0.52680586, 0.14771937, 0.16826381, -0.16129405, 0.38795634, 0.84928823, 0.45345982, 1.10246936, 0.08383852, 0.0780205, -0.17398169, 0.43126701, -0.44679115, 0.11457492, -0.01764735, 0.57507503, -0.12219563, 0.59354659, -0.19624025, 0.43172547, 1.56085574, -0.32837438, -0.41954544, 1.35660896, 1.05986259, 0.41042023, 0.25119354, 0.04962639, 0.1819531, -0.82794901, 0.38166209, 0.666766, -0.13868658, 0.01395617, -0.20142711, -0.08781057, 0.22192809, 1.71218669, -0.02913629, -0.83176747, 0.38935886, 0.12619378, 0.3367484, 0.06111146, 0.20676118, 0.15945462, 0.09938302, -0.00768375, 0.06067527, 0.5972888, 0.38486441, 0.17080494, 0.22716211, 0.03381028, -0.00233479, -1.02576006, 0.69778953, 0.21272467, -0.32264809, -1.21195787, 0.05201386, 0.47900678, -0.75168006, -2.04562592, 0.44292291, -0.11270947, -0.08236143, -0.25360588, -0.02693176, -0.23172039, -0.45858358, -1.29033933, 1.00028266, 0.3434152, -0.34193044, 0.12953692, -0.65773072, 1.41460808, 0.35848971, -0.20396988, -0.50504556, -1.33247652, 0.90431179, -0.13210972, 0.28488859];
  const b1 = [0.15920827, -0.43166889, -0.0675993, 0.03339267, -0.14736637, -0.1983139, 0.02390528, -0.40268505, -0.49983402, -0.71953602, -0.08518223, -0.57073853, 0.22758926, 0.55602469, -0.0077341, 0.02096832, -0.2051495, 0.3016202, -0.3751937, -0.10366951, 0.20311337, 0.01694928, -0.12531235, 0.14691086];
  const W2 = [0.54247374, 0.86832904, 0.18068135, 0.20984645, -0.49189309, -0.25879529, 0.05251636, -0.30104285, 0.0260195, 0.86289642, -0.26084685, -0.32439601, -0.58021052, 0.31087067, -0.14465713, -1.03364043, 0.26452191, 0.55054756, -0.4607206, -0.83993635, 0.00743894, 0.40357251, 0.81217289, 0.23951988, -0.25816643, -0.53121914, -0.06674625, -0.51526671, -0.02816474, -0.52170475, -0.52637129, -0.23987969, 0.55976685, 0.32173093, -0.60648788, -0.98959481, 0.63481982, 0.0428517, 0.02475942, 0.0119749, -0.06099691, 0.6755614, 0.46943357, -0.88339713, -0.0266863, 0.66544902, 0.0956175, -0.07551576, -0.64720404, -0.08306334, 0.15592898, -0.01733847, -0.06427562, 0.38829296, 0.55680505, 0.45237054, -0.495264, -0.52682366, -0.36012757, 0.11459108, 0.51118291, 0.01974198, -0.54573976, -0.16269153, -0.07672154, -0.25754632, 0.54168173, 0.84106338, -0.19201789, -0.4100774, 0.1942514, 0.10992718, 0.65214561, 0.64041501, 0.47816714, -0.12205325, 0.33038189, -0.59251034, -0.49714791, -0.46177991, 0.63834309, 0.02022834, -0.57199429, 0.63473198, -0.19282243, -0.04622024, -0.71073075, -0.16915612, 0.87368364, -0.19639622, -0.46144101, -0.09226731, -0.41031184, -0.52299841, 0.45185886, 0.00431855, 0.02172061, 0.10904878, 0.72830684, 0.2678994, -0.16777036, -0.14819549, -0.06292678, 0.41464158, -0.26905812, 0.26501398, -0.00895521, -0.65785324, 0.23332399, -0.33462707, 0.68975489, -0.72196349, -0.27834403, 0.41103108, 0.13309676, 0.40994753, 0.23468863, -0.05969509, 0.26308608, 0.11043425, -0.24267272, -0.05843755, -0.74976216, -0.10064263, -0.49080933, 0.33140413, -0.49959361, 0.0911211, -0.12154595, 0.3718216, -0.06100468, -0.03833565, 0.14697059, -0.55189811, 0.2544361, 0.01742821, 0.37990524, -0.45885477, 0.15632297, 0.41644768, 0.4328091, -0.67248781, 0.57953217, -0.03029795, -0.4191149, -0.00243307, 0.13287425, 1.14071682, -0.32292669, 0.14139873, 0.85955806, -0.37252867, 1.43420743, -0.53709538, -0.00572119, 0.37029745, 0.41790264, -0.27744215, 0.0682296, -0.80051132, -0.09693305, -0.22096531, 0.76050983, 0.37026393, -0.80277079, -0.0051135, 0.56795758, -0.51399867, -0.0755205, -0.06466649, 0.36783789, 0.20255052, -0.26522135, 0.85287384, 0.52123548, 0.19054305, -0.17399183, 0.08761386, 0.21850481, -0.30273283, 0.11424527, 0.24557832, -0.25402611, 0.21782415, 0.29789938, 0.70312415, -0.80951691, 0.10204281, 0.69423295, 0.16915515, -0.69604868, 0.59288883, -0.04233299, -0.09917248, 0.03605698, 0.14327247, -0.50878509, -0.41314975, 0.32353387, -0.56799082, 0.41152038, -1.05467736, -0.33218165, -0.01466625, 0.2500429, -0.00640784, 0.48920246, -0.06851237, 0.10950843, -0.28047306, 1.27122974, 0.26778687, -0.20965498, 0.05966231, -0.00737077, 0.51376314, -0.03310669, 0.04000779, 0.32301482, -0.62258329, 0.06372631, -0.10490108, -0.33816124, -0.11193624, -0.93471216, 0.06005379, -0.00582699, -0.11404245, -0.38422749, 0.3752085, -0.5069963, -0.18867895, -0.44620464, 0.55795773, -0.00158051, 0.33624875, 0.31926824, 0.02160093, 0.6654894, -0.31819482, 0.08356259, -0.43952932, -0.06293565, 0.0535796, 0.30535802, 0.01247109, -0.7281938, -0.08689071, -0.23844762, -1.02881999, 0.38698379, -0.71748919, 0.26524313, 0.2902467, -0.53168338, 0.91810756, 0.38495431, 0.43431144, 0.00504469, 0.035795, 0.21446148, 0.16667373, -0.31032626, 0.84076548, -0.33922565, -0.36437759, 0.33573022, -1.01241875, -0.31344073, -0.42350423, 0.05523917, 0.19400118, 0.91095566, 0.15839675, 0.739852, -0.53507346, -0.54574754, 0.11692534, -0.33822965, 0.59021345, -0.32560446, -0.13722227, 0.14831106, -0.61720111, 0.24636341, -0.05821383, -0.01996904, -0.04065672, -0.21986686, -0.08767616, -0.00745672, -0.22921492, -0.30577557, 0.43697187, 0.13097605, -0.20986671, 0.35204903, 0.29037645, -1.04140773, -0.70221042, -0.06041101, 0.48038921, 0.19865339, -0.05975922, 0.03434219, -0.06742248, 0.74869572, -0.10867569, 0.06348322, -0.21926995, 0.02474056, -0.39416978, -0.11967728, -0.01576845, -0.09075414, 0.46405326, -0.15242146, 0.05803013, 0.1037105, -0.33557925, 1.29393612, -0.78121679, -0.07083863, -0.45795545, 0.49496264, -0.41003813, 0.28690868, -0.13999092, 0.24309896, 0.25744957, 1.19925399, -0.38188064, -0.68897555, 0.05424064, 0.31072307, -0.17813833, 0.04111223, 0.05967255, -0.17640973, 0.0967115, -0.27474694, -0.07308925, -0.29375981, 0.05935046, -0.34840387, -0.43971671, -0.01109003, -0.61678802, -0.16670553, 0.27477585, 0.11880909, 0.00606765, -0.46084648, 0.19119837, -0.27664747, -0.17710353, -0.11481983, 0.82559053, -0.32826093, 0.30087227, 0.15331873, 0.09051307, 0.00214496, 0.24929402, -0.12908378, 0.92054806, -0.85514176, 0.1281831, -0.25799487, 0.35822421, -0.22283738, -0.02276509, 0.1509969, -0.48196055, -0.81578716, -0.00636459, 0.07790823, -0.50144091, 0.03868029, 0.18902279, -0.17966878, -0.56509588, 0.15466779, 0.04008383];
  const b2 = [0.03334961, 0.07560899, -0.0306667, 0.07332929, 0.30675453, -0.27532262, -0.10842766, 0.28548837, 0.00461051, 0.16640197, -0.61591286, -0.17170685, -0.13848418, -0.10602048, 0.81079592, -0.43535308];
  const W3 = [0.83773354, 0.43208601, -0.30642806, 0.7331294, -0.14490738, -0.50015562, 0.52790396, -1.37173614, -0.34714762, -0.60350551, -0.13255906, -0.07448241, -0.34614463, 0.75937533, 0.05045933, -0.61851931, 0.09060202, 0.24280053, 0.36570273, 0.06898967, -1.42465876, -1.12020136, -0.02890302, 0.50931894, -0.41850085, -0.09908804, -0.07563624, -0.11718983, -0.1749126, 0.55965612, -0.67766312, -0.01556262, 0.29130563, -0.0623848, -0.33215347, -0.67290029, 0.30722107, 0.42222655, -0.04453258, -0.30191282, -0.76489039, 0.00257077, 0.34370651, 0.2151296, -0.13947726, 0.20678835, -0.25881618, 0.17061797, 0.19543123, -0.35961783, 0.15370324, 0.47495654, -0.86579057, 0.30703933, -0.00386803, -0.08714491, 0.11455408, 0.73578083, 0.35128798, -0.06305502, 0.98634428, 0.15569331, 0.17489905, 0.21520658, 0.55075377, 1.2752488, -0.22134933, 0.03846544, 0.21248838, -0.37755592, -0.63355997, -0.43677321, -0.94789427, 0.19605512, -0.81639076, -0.00392941, 0.49647528, -1.31916409, 0.08576553, -0.41647767];
  const b3 = [0.01226738, -0.50027164, 0.63185453, 0.49247114, 0.44428307];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-6"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [-0.2357732, 0.02634139, -0.2768696, 0.40091123, -0.27198983, 0.49810835, 0.31156402, 0.01940359, -0.7738431, -0.13783468, 0.10765544, 0.61622267, -0.0511993, 0.28267754, 0.14895243, 0.6471685, 0.44529869, -0.18262228, 0.45381755, -0.09739416, -0.395692, 0.12043324, 0.25958921, 0.44550519, -0.72043581, -0.32455332, -0.26604753, 0.40496418, -1.27806336, -1.3418663, 0.00503958, -0.42021287, -0.02611556, -0.17617193, -1.02944845, 0.18694497, -0.36452884, -0.48436563, -0.3599027, 0.04413992, 0.09432728, 0.03950904, -0.35843172, -0.06308131, 0.0156311, 0.19714881, -0.28304971, 0.0206515, -0.42586885, 0.16671394, 0.41487369, -0.3987425, -0.26535347, 0.09109996, -0.24583065, 0.54707823, 0.13530272, -0.44648455, -0.00522103, -0.11447097, 0.1787504, -0.26528898, 0.61932067, -0.49996168, -0.59178697, -0.01416045, -0.11558889, -0.14163286, 0.23887228, 0.6341497, 0.27309587, -1.23442547, -0.49337339, 0.41936009, -0.53181299, -0.32536327, -0.61247861, -0.25948647, 0.39173963, -0.22754439, 0.08453632, -0.29416437, 0.14266488, -0.018089, 0.68862312, -0.78499064, 0.19457195, -0.47508544, 0.15762316, -0.01909196, -0.16632682, 0.02828834, 0.78604801, -0.54883196, 0.80731106, 0.33965961, -0.02857838, -0.13870498, 0.66473777, -0.33735956, 0.03711809, 0.01366417, 0.1814562, -1.05214982, -0.20639146, 0.10438804, 0.27242064, -0.07503711, 0.32133774, 0.15374217, 0.47711521, -0.03397035, 0.12795526, 0.077671, -1.2802327, -0.80711007, -0.02167037, 0.24367284, 0.38230997, -0.20432688, -0.55583685, 0.64721242, 0.75056146, 0.30868136, -0.44595948, 0.18272466, -0.53687228, 0.5343944, 0.21617953, -0.29297674, -1.07207191, 0.39614951, -0.39112253, 0.36107937, -0.37838412, -0.15788288, 0.2573166, 0.6466398, 1.12507457, 0.58998512, 0.01500307, 0.72210532, -0.00037618, -0.05216391, 0.20299318, 0.23693515, 0.06008989, 0.18305067, 0.09455217, -0.55164513, 0.31161314, 0.30265037, -0.31439486, 0.36993244, 0.043895, 1.11475629, 0.02862288, -0.05309323, -0.20257513, -1.01460075, 0.59632834, -0.16275008, 0.03822404, -1.01930431, -0.33694263, 0.63591434, -0.04932564, -0.64803293, -0.52810161, -0.55397281, 0.44148106, -0.15985292, 0.21641667, -0.31279188, -0.01142058, -0.11749153, -0.13905185, -0.90877486, -0.64699426, -0.03272542, 0.51172517, -0.92667678, 0.10537888, -0.50114096, 0.09444276, 0.14649023, -0.26500213, -0.2693419, 0.05984365, 0.09452058, -0.31706702, -0.36956691, 0.89187971, 0.19087493, -0.21811088, -0.83137973, -0.74630028, -0.09959176, 0.09500996, -0.2923984, 0.41870228, -0.94529939, -0.6623974, 0.47803185, 0.30693394, -0.44615616, -1.07450704, -0.03953652, 0.06985743, 0.18297802, 0.33126735, 0.40507084, 0.03806302, 0.27472966, 0.14885497, -0.38299512, 0.57495117, -0.44939423, -0.26144651, 0.00330667, -0.17740051, 0.18165847, -0.1173933, 0.66457661, -0.60639531, 0.13394702, 0.06311017, 0.40852277, -0.07798384, 0.09199797, 0.21940218, 0.53032653, -0.14268529, 0.30985419, 0.05685485, 0.39474354, 0.57284904, 0.61280362, -0.30627413, 0.39395862, 0.85835203, -0.24064918, -0.58957863, 0.9966288, 0.64410104, 0.65472918, 0.21590269, -1.06021328, 0.73186616, 0.6056456, 0.09301941, 0.27854138, -0.5394236, 0.7364847, 0.34187712, 0.71339864, 0.20932205, -0.13908938, 0.32454092, -0.02385126, 0.4102746, 0.35441755, -0.10600595, -0.2566295, -0.07759301, 0.50798128, -0.0049675, 1.83731818, -0.03331043, 0.03269217, 0.14522556, 0.17030689, 0.13514892, 0.57806525, 0.0871643, 0.02011128, 0.21156542, 0.31465029, 0.64349551, -0.28241731, 0.19481499, 0.14808729, 0.66295225, 0.62612837, 0.04167787, 0.12423115, -0.05351779, 1.38133295, 0.13949702, 0.09180802, -0.26763491, -0.33108576, 0.45118776, -0.29460004, 0.65140407, -0.68211143, -1.08954084, 0.58350625, -0.31354752, 0.42177181, 0.36211515, 0.16961878, -0.08926298, -0.36578472, 0.24271354, 0.17211399, 0.22284118, -0.75480529, 0.08954827, -0.54673226, -0.20164896, -0.01798856, 0.35379824, -0.42216938, -0.50346707, 0.15213156, -0.06373593, -0.29000228, 0.2027261, -0.15171819, -0.00377551, -1.03858815, -0.87202946, -0.11194298, 0.2758585, -0.77119197, 0.7981156, -0.24303843, -0.58440428, 1.21380153, 1.04824116, -0.21117462, -0.8423889, -0.02087191, 1.16906926, 0.9703315, -0.38302848, -0.43875439, -0.62767248, 0.12127513, 1.13537919, -0.22921823, 0.12067754, -0.69609811, 0.43107382, -0.12191585, -0.50169014, 0.80063014, 0.31970946, 0.40921847, -0.38801561, -0.04209568, -0.06308807, 1.8093925, 0.19808815, -0.04397689, 0.21267481, 0.06348, -0.03697248, -0.26231326, -0.00118257, 0.28359176, 0.16005355, 0.01664968, 0.866719, -0.58145217, -0.09146186, 0.20107679, -0.27990698, -0.04436133, -0.39920918, -0.61689032, -1.10618906, 0.9171798, -0.53466555, -0.28348998, -0.1231616, -1.09907272, 0.78678451, -0.5981971, -0.40642012, -0.3096091, -1.09386969, 1.06980515, -0.79942156, -0.91427517, -0.4096431, -0.24233566, -0.30615205, -0.88901262, -0.86479727, -0.44055508, -0.3963222, -0.21526566, 0.01032306, 0.35014156, -4.78352904, -0.29543986, -0.6111401, 0.24253167, 0.65401288, 0.4217101, -0.06745108, 0.10270246, 1.14385676, 0.16327688, -0.49374794, 1.20178487, 0.49484133, -0.1222703, -0.04055787, -0.16786515, 0.05658129, 0.30881351, -0.23910557, 0.08267583, -0.82662538, -0.2936944, 0.30498341, -0.30492662, 1.22938781, -1.38010541, -0.34034213, 0.87322636, -0.52356623, 1.31479852, 0.25174402, -0.14609408, 0.84556585, 0.01255683, 0.11420633, -0.18321017, 0.01440074, 0.02996949, -0.39405712, -0.61246269, 0.32041495, 0.1930965, -0.77072619, -0.5335698, 0.16169134, -0.05634864, 0.08555152, -0.13295023, -0.26851962, 0.17436667, -0.54976472, 1.05511108, -0.18092632, -0.76094481, 0.69092003, 0.56430217, -0.24604029, 0.89844454, 0.18669489, 0.93804533, -0.76826344, 0.18669313, 1.06182759, -0.94942139, 0.2943491, -0.21588942, 0.00849108, 0.30275311, -0.69889326, 0.13911169, 0.18370253, -0.88747634, 0.27273599, -0.04867609, 0.29838191, -0.00393964, -0.69674422, -0.13377483, -0.89051287, 0.20302294, -0.14039776, -0.1274034, 0.04852941, -0.33614926, -0.02585425, -0.0404718, -0.05939889, 0.14324031, -0.72520171, -1.0375725, 0.12612976, -0.17577518, -0.62986626, 0.6144157, 0.06530959, -0.32639405, -0.19318147, 0.73856011, -0.31917996, 0.27949492, -0.22504909, 2.07801705, 0.92924964, -0.05670527, -0.31497623, -0.54934355, -0.45569069, 0.92493849, 0.47380143, 0.12334206, -0.08723864, -0.55940267, 0.34416949, -0.35268622, 0.22252883, -0.18668398, -0.49287651, 0.82483699, 0.17049323, -0.36894765, 0.46002704, 0.39026147, -0.02633802, 0.27822955, -0.60688266, 0.00461498, -0.41695397, 0.63904946, -0.42534705, -0.35748937, 0.05943162, 0.34075674, -0.42435248, 0.05444187, 0.09367026, 0.27935257, 0.33716515, 0.36117114, 0.2903928, 0.3352802, 0.28577795, 0.50842142, 0.3873581, -0.14820455, -0.03641834, -0.46644767, 0.45719931, 0.35813923, 1.66523348, 1.09722954, 0.41483574, -0.12524579, 0.95003115, 1.08203855, 0.14017292, 0.47153747, 0.05333192, 0.7562444, 0.63787555, -0.69017265, 0.08046007, 0.33481676, -0.08012297, 0.46828347, -0.33924237, -0.0648715, 0.00541225, 0.92991958, 0.28157712, -0.040611, 0.45487365, -0.70853334, -1.48176201, 0.68683515, 0.45567688, -0.73684179, 0.32903689, -0.5127594, 0.01785268, -0.51966395, 0.49014177, 0.04126317, -0.33796322, -0.08865805, -0.36920743, 0.0287596, 0.57302842, 0.06263771, 0.60168178, 0.02604508, 0.58665349, 0.2900799, -0.81840984, 0.41305784, -0.67990565, 0.00580809, 0.06885373, -1.09843913, 0.69194489, -0.57036928, 0.14163079, -0.32603203, -0.67528092, 0.13433141, 0.00804013, 0.11347552, -0.26162916, -0.46360183, 0.30511908, 0.24982625, -0.46724763, 0.09166332, 0.95149154, 0.22090068, -0.09459887, 1.70734053, 0.74930376, 0.22669064, 0.23088873, 0.00691208, 0.25461777, 0.49022368, -0.14824938, -0.08682214, 0.34272745, 0.54509346, 1.4000886, -0.03680593, 0.03357015, -0.26427125, -0.64349718, -0.40486876, -0.27951439, -0.34387091, 0.43569515, -0.14073143, -1.00215432, -0.77639047, 0.70114047, -0.42803449, 0.57140846, -0.26717316, -0.07949634, 0.28524032, 0.27920031, 0.61605446, -0.34894915, -0.2712964, -0.63830127, -0.09076834, 0.07402614, -0.35414093, -0.0684393, 0.34896978, 0.32264804, -0.34490816, -0.45356265, 0.63439775, -1.57600579, -0.06746198, -0.08537566, 1.09918399, 0.31868402, -0.03376455, -0.25548217, 0.42193183, -0.3127198, 0.4727384, -0.06248772, 0.08320642, -0.2881927, 0.00782974, 0.4451475, 0.77373579, 0.22577541, 0.30525797, -0.45273546, 1.03770254, -0.05583925, -0.16798302, 0.07008786, 0.16383369, 1.57074778, 0.93955063, -0.12112078, 0.66962385, -0.26793744, 1.04184463, 0.29216865, 0.16070794, 0.33549893, -0.45702747, -1.13992813, -0.64657602, 0.26132991, -0.02085444, 0.16059716, -0.26935617, 0.34359996, -0.22458816, -0.72919062, -0.22978941, 0.37173572, 0.16773367, 0.02098599, 0.2716156, -0.53525399, -0.27688178, -0.97950053, -0.32334612, -0.25029956, -0.06467537, -0.07218093, -1.01340458, -0.21611213, 0.15029247, -0.38265591, -0.47588177, 0.06405578, 0.37624425, -0.08201947, 0.22172391, 0.03612089, -0.12981825, -0.11134576, 0.33256439, 0.11602157, -0.16626147, 0.61933846, -0.24215501, -0.55514468, 0.52243741, 1.20488911, 0.19173783, 0.20565168, 0.00644769, 0.6703385, 0.2052223, 0.17900277, 0.16313057, 0.58269392, 0.00173648, 0.50942206, -0.61683307, -1.46956046, 0.01266611, -0.09550294, -0.39602346, 0.07013626, 0.60146089, 0.68026193, -0.29026554, -0.2540086, 0.46243097, 0.04812017, -1.26404814, -0.39118637, 0.47828079, -0.02254198, -0.29781671, -0.25658804, -0.54873166, -0.49387461, -0.76328254, -1.01676986, -0.13034879, 0.15770167, -0.44614452, -0.06037171, -0.17925293, 0.23464917, -0.68336229, 0.57623704, -0.31081313, -0.49639537, -0.40952591, -0.22370329, 0.43885301, -0.028323, 0.0188124, -0.18967801, -0.35367742, -0.19206563, -0.49588587, 0.24829387, 0.01903777, 0.57040827, 2.72491966, -0.37807439, -0.40776463, 0.03627962, -0.93149738, -0.04963062, -0.34383704, -0.02506453, 0.11986074, 0.24562915, -0.33740327, 0.23716379, 0.21267282, 0.08205699, -0.02999661, 0.55361538, 0.35859333, -0.02758471, 0.35317362, 0.46563806, -0.01505904, -0.06359542, 0.28172492, -0.01575933, -0.09248343, 0.05493762, -0.21260668, 0.22769476, 0.23893377, 0.5173057, 0.42637082, 0.33849944, 0.39346337, 0.03080021, -0.31391991, 0.34274927, 0.24812789, 0.16865966, 0.18244305, 0.46673628, -0.71000847, 0.00293225, 0.4536123, 0.91971681, -0.30898484, -0.19726569, 0.4793678, -0.39953838, 0.04603011, -0.19085773, -0.49374168, 0.14248923, -0.25347248, 0.1539884, -0.3381789, 0.6150777, -0.1885152, -0.07296459, 0.11777548, -0.12478369, -0.78552517, 0.12054085, 0.91435569, 0.47031117, 0.04047152, -0.08767102, 0.28111799, -0.02124643, 1.13503109, 0.03670552, 0.09898181, 0.64261767, 1.41467219, -0.71452366, 0.27641977, -0.4476406, -0.27908163, 0.53286556, 0.01147704, -0.08576561, 0.34389645, 0.16502984, -0.03746609, -0.12941539, 0.05676178, -0.43498304, -0.56349863, 0.41625942, 0.37243294, -0.22078923, -0.84976553, 0.05545318, -0.03537457, 0.44254738, -0.76460323, -0.20293335, 0.30298515, -0.01907024, -0.62560245, 0.6279514, 0.44739138, 1.22262979, 0.35938674, 0.89309988, 0.36212964, 0.23205768, 0.52482745, 0.25233463, -0.62129294, 0.05498481, -0.4560259, -0.23054347, -0.02574204, -0.48216593, 0.33955806, 0.20483013, -0.90602299, 0.57322584, -0.05093936, 0.1646145, -0.01429148, 0.40006555, 0.01888463, 0.28819351, 0.0726744, 0.32692636, 0.57094279, -0.18648538, 0.00556427, -0.04964708, 0.4111429, 0.25742869, 0.0896221, -0.38195579, 0.15628806, -0.01166875, -0.2901624, -1.32993149, -0.00591237, 0.10646304, -0.41226836, -0.15054724, 0.21722247, -0.41034127, 0.5878759, -0.58710366, 0.23164358, 0.40791447, -1.01599833, -0.12948828, -0.49793159, 0.19025755, 0.31259493, -0.48683006, 0.33777179, -0.08704104, -0.30503902, 0.68525083, -0.49020564, 0.06250808, 0.40463369, 0.33772726, 1.04466189, 0.15990268, -0.52680586, 0.14771937, 0.16826381, -0.16129405, 0.38795634, 0.84928823, 0.45345982, 1.10246936, 0.08383852, 0.0780205, -0.17398169, 0.43126701, -0.44679115, 0.11457492, -0.01764735, 0.57507503, -0.12219563, 0.59354659, -0.19624025, 0.43172547, 1.56085574, -0.32837438, -0.41954544, 1.35660896, 1.05986259, 0.41042023, 0.25119354, 0.04962639, 0.1819531, -0.82794901, 0.38166209, 0.666766, -0.13868658, 0.01395617, -0.20142711, -0.08781057, 0.22192809, 1.71218669, -0.02913629, -0.83176747, 0.38935886, 0.12619378, 0.3367484, 0.06111146, 0.20676118, 0.15945462, 0.09938302, -0.00768375, 0.06067527, 0.5972888, 0.38486441, 0.17080494, 0.22716211, 0.03381028, -0.00233479, -1.02576006, 0.69778953, 0.21272467, -0.32264809, -1.21195787, 0.05201386, 0.47900678, -0.75168006, -2.04562592, 0.44292291, -0.11270947, -0.08236143, -0.25360588, -0.02693176, -0.23172039, -0.45858358, -1.29033933, 1.00028266, 0.3434152, -0.34193044, 0.12953692, -0.65773072, 1.41460808, 0.35848971, -0.20396988, -0.50504556, -1.33247652, 0.90431179, -0.13210972, 0.28488859];
  const b1 = [0.15920827, -0.43166889, -0.0675993, 0.03339267, -0.14736637, -0.1983139, 0.02390528, -0.40268505, -0.49983402, -0.71953602, -0.08518223, -0.57073853, 0.22758926, 0.55602469, -0.0077341, 0.02096832, -0.2051495, 0.3016202, -0.3751937, -0.10366951, 0.20311337, 0.01694928, -0.12531235, 0.14691086];
  const W2 = [0.54247374, 0.86832904, 0.18068135, 0.20984645, -0.49189309, -0.25879529, 0.05251636, -0.30104285, 0.0260195, 0.86289642, -0.26084685, -0.32439601, -0.58021052, 0.31087067, -0.14465713, -1.03364043, 0.26452191, 0.55054756, -0.4607206, -0.83993635, 0.00743894, 0.40357251, 0.81217289, 0.23951988, -0.25816643, -0.53121914, -0.06674625, -0.51526671, -0.02816474, -0.52170475, -0.52637129, -0.23987969, 0.55976685, 0.32173093, -0.60648788, -0.98959481, 0.63481982, 0.0428517, 0.02475942, 0.0119749, -0.06099691, 0.6755614, 0.46943357, -0.88339713, -0.0266863, 0.66544902, 0.0956175, -0.07551576, -0.64720404, -0.08306334, 0.15592898, -0.01733847, -0.06427562, 0.38829296, 0.55680505, 0.45237054, -0.495264, -0.52682366, -0.36012757, 0.11459108, 0.51118291, 0.01974198, -0.54573976, -0.16269153, -0.07672154, -0.25754632, 0.54168173, 0.84106338, -0.19201789, -0.4100774, 0.1942514, 0.10992718, 0.65214561, 0.64041501, 0.47816714, -0.12205325, 0.33038189, -0.59251034, -0.49714791, -0.46177991, 0.63834309, 0.02022834, -0.57199429, 0.63473198, -0.19282243, -0.04622024, -0.71073075, -0.16915612, 0.87368364, -0.19639622, -0.46144101, -0.09226731, -0.41031184, -0.52299841, 0.45185886, 0.00431855, 0.02172061, 0.10904878, 0.72830684, 0.2678994, -0.16777036, -0.14819549, -0.06292678, 0.41464158, -0.26905812, 0.26501398, -0.00895521, -0.65785324, 0.23332399, -0.33462707, 0.68975489, -0.72196349, -0.27834403, 0.41103108, 0.13309676, 0.40994753, 0.23468863, -0.05969509, 0.26308608, 0.11043425, -0.24267272, -0.05843755, -0.74976216, -0.10064263, -0.49080933, 0.33140413, -0.49959361, 0.0911211, -0.12154595, 0.3718216, -0.06100468, -0.03833565, 0.14697059, -0.55189811, 0.2544361, 0.01742821, 0.37990524, -0.45885477, 0.15632297, 0.41644768, 0.4328091, -0.67248781, 0.57953217, -0.03029795, -0.4191149, -0.00243307, 0.13287425, 1.14071682, -0.32292669, 0.14139873, 0.85955806, -0.37252867, 1.43420743, -0.53709538, -0.00572119, 0.37029745, 0.41790264, -0.27744215, 0.0682296, -0.80051132, -0.09693305, -0.22096531, 0.76050983, 0.37026393, -0.80277079, -0.0051135, 0.56795758, -0.51399867, -0.0755205, -0.06466649, 0.36783789, 0.20255052, -0.26522135, 0.85287384, 0.52123548, 0.19054305, -0.17399183, 0.08761386, 0.21850481, -0.30273283, 0.11424527, 0.24557832, -0.25402611, 0.21782415, 0.29789938, 0.70312415, -0.80951691, 0.10204281, 0.69423295, 0.16915515, -0.69604868, 0.59288883, -0.04233299, -0.09917248, 0.03605698, 0.14327247, -0.50878509, -0.41314975, 0.32353387, -0.56799082, 0.41152038, -1.05467736, -0.33218165, -0.01466625, 0.2500429, -0.00640784, 0.48920246, -0.06851237, 0.10950843, -0.28047306, 1.27122974, 0.26778687, -0.20965498, 0.05966231, -0.00737077, 0.51376314, -0.03310669, 0.04000779, 0.32301482, -0.62258329, 0.06372631, -0.10490108, -0.33816124, -0.11193624, -0.93471216, 0.06005379, -0.00582699, -0.11404245, -0.38422749, 0.3752085, -0.5069963, -0.18867895, -0.44620464, 0.55795773, -0.00158051, 0.33624875, 0.31926824, 0.02160093, 0.6654894, -0.31819482, 0.08356259, -0.43952932, -0.06293565, 0.0535796, 0.30535802, 0.01247109, -0.7281938, -0.08689071, -0.23844762, -1.02881999, 0.38698379, -0.71748919, 0.26524313, 0.2902467, -0.53168338, 0.91810756, 0.38495431, 0.43431144, 0.00504469, 0.035795, 0.21446148, 0.16667373, -0.31032626, 0.84076548, -0.33922565, -0.36437759, 0.33573022, -1.01241875, -0.31344073, -0.42350423, 0.05523917, 0.19400118, 0.91095566, 0.15839675, 0.739852, -0.53507346, -0.54574754, 0.11692534, -0.33822965, 0.59021345, -0.32560446, -0.13722227, 0.14831106, -0.61720111, 0.24636341, -0.05821383, -0.01996904, -0.04065672, -0.21986686, -0.08767616, -0.00745672, -0.22921492, -0.30577557, 0.43697187, 0.13097605, -0.20986671, 0.35204903, 0.29037645, -1.04140773, -0.70221042, -0.06041101, 0.48038921, 0.19865339, -0.05975922, 0.03434219, -0.06742248, 0.74869572, -0.10867569, 0.06348322, -0.21926995, 0.02474056, -0.39416978, -0.11967728, -0.01576845, -0.09075414, 0.46405326, -0.15242146, 0.05803013, 0.1037105, -0.33557925, 1.29393612, -0.78121679, -0.07083863, -0.45795545, 0.49496264, -0.41003813, 0.28690868, -0.13999092, 0.24309896, 0.25744957, 1.19925399, -0.38188064, -0.68897555, 0.05424064, 0.31072307, -0.17813833, 0.04111223, 0.05967255, -0.17640973, 0.0967115, -0.27474694, -0.07308925, -0.29375981, 0.05935046, -0.34840387, -0.43971671, -0.01109003, -0.61678802, -0.16670553, 0.27477585, 0.11880909, 0.00606765, -0.46084648, 0.19119837, -0.27664747, -0.17710353, -0.11481983, 0.82559053, -0.32826093, 0.30087227, 0.15331873, 0.09051307, 0.00214496, 0.24929402, -0.12908378, 0.92054806, -0.85514176, 0.1281831, -0.25799487, 0.35822421, -0.22283738, -0.02276509, 0.1509969, -0.48196055, -0.81578716, -0.00636459, 0.07790823, -0.50144091, 0.03868029, 0.18902279, -0.17966878, -0.56509588, 0.15466779, 0.04008383];
  const b2 = [0.03334961, 0.07560899, -0.0306667, 0.07332929, 0.30675453, -0.27532262, -0.10842766, 0.28548837, 0.00461051, 0.16640197, -0.61591286, -0.17170685, -0.13848418, -0.10602048, 0.81079592, -0.43535308];
  const W3 = [0.83773354, 0.43208601, -0.30642806, 0.7331294, -0.14490738, -0.50015562, 0.52790396, -1.37173614, -0.34714762, -0.60350551, -0.13255906, -0.07448241, -0.34614463, 0.75937533, 0.05045933, -0.61851931, 0.09060202, 0.24280053, 0.36570273, 0.06898967, -1.42465876, -1.12020136, -0.02890302, 0.50931894, -0.41850085, -0.09908804, -0.07563624, -0.11718983, -0.1749126, 0.55965612, -0.67766312, -0.01556262, 0.29130563, -0.0623848, -0.33215347, -0.67290029, 0.30722107, 0.42222655, -0.04453258, -0.30191282, -0.76489039, 0.00257077, 0.34370651, 0.2151296, -0.13947726, 0.20678835, -0.25881618, 0.17061797, 0.19543123, -0.35961783, 0.15370324, 0.47495654, -0.86579057, 0.30703933, -0.00386803, -0.08714491, 0.11455408, 0.73578083, 0.35128798, -0.06305502, 0.98634428, 0.15569331, 0.17489905, 0.21520658, 0.55075377, 1.2752488, -0.22134933, 0.03846544, 0.21248838, -0.37755592, -0.63355997, -0.43677321, -0.94789427, 0.19605512, -0.81639076, -0.00392941, 0.49647528, -1.31916409, 0.08576553, -0.41647767];
  const b3 = [0.01226738, -0.50027164, 0.63185453, 0.49247114, 0.44428307];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}
