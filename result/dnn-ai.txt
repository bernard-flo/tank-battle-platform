function name(){ return "DNN-1"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16696991, -0.07251391, -0.2168828, 0.3036222, 0.16809272, 0.28460805, -0.04166438, 0.47968636, -0.65316789, -0.84134666, -0.14173119, 0.26560759, -0.10377426, 0.08035988, 0.12425724, 0.32452985, -0.27647173, -0.11123868, -0.04600036, 0.0281014, -0.00947044, 0.07503979, 0.13281319, 0.36191177, -0.67152044, -0.46850151, -0.01167639, 0.2803319, -1.19913539, -1.04782047, -0.03555183, -0.04648532, 0.0225009, -0.24357091, -1.05673991, 0.05700647, -0.12484442, -0.19480858, -0.58471519, -0.1499737, 0.28764565, -0.28483543, -0.26197615, -0.05895301, 0.01036905, -0.06521036, -0.10576278, 0.08186413, -0.45802654, -0.06481485, -0.01324017, -0.15813584, 0.06378432, -0.24747291, -0.17581397, -0.17720651, 0.35278504, -0.25429374, -0.00150542, -0.05067204, 0.0513872, -0.25094379, -0.00235429, -0.00235575, -0.30229907, -0.25958563, -0.14607265, -0.0722902, 0.04841354, -0.06084822, -0.17499657, -0.49193455, 0.00952833, 0.21344015, -0.47830239, -0.29445138, -0.20045302, -0.03955536, 0.23376275, -0.2966064, -0.40368417, -0.68392515, 0.01536786, -0.08538592, -0.09629931, -0.24338335, -0.01480121, -0.01726573, 0.03883442, 0.36971488, 0.06297283, 0.25098838, 0.31547071, 0.0676934, 0.74353925, 0.13166846, 0.21287281, 0.03850817, 0.27745053, -0.27006488, -0.07765343, 0.09322007, 0.38209079, -0.37245191, -0.01832997, -0.04153888, -0.14751603, 0.05288601, 0.09781128, 0.01532738, 0.35918935, -0.21448295, 0.2104868, -0.14754397, -1.36431996, -0.43219107, -0.09611919, 0.50316181, 0.13781978, -0.51070332, -0.32949001, 0.21963895, 0.30011335, -0.15396032, -0.21812793, 0.16997592, -0.22240592, 0.51066451, -0.08492232, -0.35846908, -0.72046295, 0.02400361, -0.3509301, 0.12439407, -0.32706612, -0.14067637, -0.25761274, 0.44715611, 1.07025773, 0.13182633, -0.50719883, 0.47002708, -0.09300086, 0.22437595, 0.02476151, 0.06170925, 0.09372822, 0.12163894, -0.07694989, -0.11319575, 0.24020836, 0.21506694, -0.1878085, -0.00581023, -0.24528872, 0.18944167, -0.18796665, -0.52009595, -0.66561732, -0.44310195, 0.31915052, -0.1096065, -0.27501671, -0.69768037, -0.4425739, 0.28590853, -0.6529124, -0.40580972, -0.02000369, -0.17398775, 0.43323, -0.18772681, 0.06854147, -0.26804511, -0.35115461, -0.19142385, 0.03437788, -0.299493, -0.45754946, -0.00295278, 0.08143059, -0.95380538, -0.08163821, -0.44514535, 0.21885333, 0.33416542, -0.00387319, -0.00858369, 0.47662563, 0.17436188, -0.36272559, -0.20080347, 0.39661547, 0.33992924, 0.07843172, -0.4629419, -0.56145381, -0.2831284, 0.03278749, -0.2012548, 0.49144509, -1.48933625, -0.44217698, 0.14700791, 0.00188137, 0.17686054, -1.06776135, -0.30914359, 0.25763212, 0.51750275, 0.5685931, -0.20053371, -0.13546183, 0.370309, -0.19243595, -0.24091672, 0.14409764, -0.0045921, -0.27560124, 0.06777249, -0.26575982, 0.04686864, -0.25064215, 0.64266651, 0.13015609, 0.1677144, -0.07436131, 0.01013988, 0.06357737, 0.0236343, 0.11257115, 0.02558286, -0.08439366, 0.29916114, 0.10665492, 0.27038873, 0.3074661, 0.67853735, 0.18479911, 0.03034829, 0.7025451, -0.21555468, -0.03336201, 1.44848477, 0.7228501, 0.17299155, -0.14400994, -0.64174475, 0.8895495, 0.28878887, 0.35371274, -0.02987698, -0.67628939, 0.73025261, 0.44452689, 0.1215198, 0.03270968, -0.51183703, 0.37944108, -0.09832362, 0.15665689, 0.11245013, -0.05609115, 0.15104483, 0.14111587, 0.01082892, -0.06010215, 1.16725744, 0.00238502, 0.23050189, -0.2629778, -0.23730588, -0.09490716, -0.04236215, -0.22773514, 0.03832175, 0.05409679, -0.16337999, 0.73181896, -0.26053281, 0.09519328, -0.02079857, 0.41093214, 0.44248387, 0.16799908, -0.01333672, -0.22617897, 0.6476411, 0.23007708, 0.09819449, 0.24489611, -0.60891715, 0.75304256, 0.11343741, 0.13064912, -0.07000543, -0.34671381, 0.34382369, 0.00209943, -0.09770453, -0.01221395, -0.14554187, 0.15354082, -0.21512321, -0.15191347, 0.09980666, 0.23107376, -0.2303226, -0.08891717, -0.27484535, 0.12091194, -0.25142217, -0.19023925, -0.16033411, -0.18687651, 0.21603701, 0.09721349, -0.18319949, -0.21356163, -0.08362084, -0.08125166, -0.41662309, -0.39783253, 0.34156618, 0.33065495, -0.95178353, 0.84366905, -0.49765864, -0.18010074, 1.41339123, 0.7946291, 0.150399, -0.61487123, 0.06573722, 1.15809689, 0.75984938, -0.01343237, -0.38488409, -0.42800255, 0.40463388, 0.78162028, 0.00838056, -0.17852332, -0.40657733, 0.10011192, -0.63243899, -0.21880253, 0.04260806, 0.23221358, 0.10066574, -0.41423139, -0.12765171, 0.08049712, 1.95429844, -0.00260313, -0.20048565, 0.27188369, 0.0189917, 0.17920741, -0.00477723, -0.04725872, 0.52287378, 0.04766486, -0.02373728, 0.60858443, -0.42515862, -0.11719525, -0.08743832, -0.29778613, -0.48666428, 0.08357413, -0.44082098, -0.84562723, 1.30067115, -0.23777025, -0.05104294, -0.36504125, -1.31227642, 0.50932537, -0.31155317, -0.35775375, 0.19038497, -0.82852382, 0.66393526, -0.27192971, -0.67546244, -0.03235313, -0.17702787, -0.10740097, -0.22004092, -0.45522122, -0.28109097, -0.16576372, -0.13664882, -0.3122309, 0.20120898, -5.19183464, 0.1838247, -0.45139091, 0.34968349, 0.77867316, -0.06563209, 0.045492, 0.36433178, 0.79280612, 0.02739077, -0.0466727, 0.62557025, 0.55449779, -0.07411458, -0.12693615, -0.69434448, -0.28309895, -0.04441911, -0.13654621, 0.45062185, -1.12916434, -0.5032554, 0.18945523, -0.19314113, 0.9129545, -0.85053961, -0.2916347, 0.65269383, -0.37020521, 0.82515971, -0.10353648, -0.09182913, 0.51541394, -0.22968296, -0.20862189, 0.00141701, -0.54830176, -0.3845895, -0.3371224, -0.79827125, 0.23039771, 0.12226295, -0.61295964, -0.18756488, 0.0849835, -0.00425158, -0.18830219, 0.43450864, -0.02439968, -0.14805237, -0.59641246, 0.62588297, -0.35796501, -0.26696002, 0.51866604, 0.91237138, -0.44091809, 0.60529762, -0.16050761, 0.72053322, -0.56926742, 0.00529658, 0.62903292, -0.94234303, 0.16799242, -0.20542786, -0.4758799, 0.4854704, -0.97499377, 0.36214378, -0.17284759, -0.55302296, -0.33165564, -0.06934902, 0.18604119, -0.36219461, -0.62845034, -0.36309202, -0.43840289, -0.05880275, -0.27399282, -0.21453314, -0.15967041, -0.84920018, 0.08344027, -0.07531231, 0.00966525, 0.05679306, -0.30841345, -0.91589665, 0.22885657, -0.07147898, -0.06751674, 0.08529804, 0.03354777, 0.14889417, 0.01078049, 0.77900937, -0.07704101, -0.06763113, -0.34325431, 1.78155751, 1.01232586, -0.16707859, -0.11632375, -0.14256762, -0.19084915, 0.51236994, 0.23818931, -0.15875387, -0.80994433, -0.39260904, 0.74680301, -0.28863141, 0.25083907, -0.11601555, -0.58645936, 0.58848576, 0.00259028, 0.33009969, 0.28078568, 0.56908261, 0.20529206, 0.14460108, 0.08313178, -0.1838972, -0.44078381, 0.15987749, -0.29451875, -0.50763573, -0.19415852, 0.36536217, -0.2795311, -0.23020914, 0.1195568, 0.07866547, 0.31574221, 0.28229577, 0.18859987, 0.31222441, 0.47901826, 0.25782211, 0.06485747, 0.06208318, 0.07699697, -0.58895092, 0.13696644, -0.21957843, 1.35167302, 1.05287145, 0.41911317, -0.20673229, 1.07562797, 0.79341194, 0.43654794, 0.30925653, 0.16017521, 0.86328218, 0.64091486, -0.28870848, 0.31952282, 0.21558504, 0.58304942, 0.53269672, -0.16249371, 0.15026724, 0.33939058, 0.14154557, 0.10144106, 0.00656555, 0.40295367, -1.21132464, -1.72923171, 0.40798729, 0.23085314, -0.62784993, 0.32987519, -0.42545169, 0.2203548, -0.28145068, 0.16549015, -0.29473196, -0.05468132, 0.44515282, -0.04373012, 0.0849826, 0.48568427, -0.21100016, 0.28533225, 0.00462787, 0.78654642, -0.09548717, -0.82066855, 0.25059813, -0.42125394, 0.29665581, 0.04444159, -0.5337895, 0.25808337, -0.26745666, 0.34722889, -0.22416563, -0.38070847, -0.09357444, -0.30942542, 0.2507339, -0.0424697, -0.3608606, -0.22036806, 0.0035217, -0.15809604, 0.03927281, -0.00938424, -0.06013908, 0.49125395, 2.03911799, 0.21450224, 0.24159407, 0.15360971, 0.12543795, 0.04427504, 0.24638785, -0.17798262, -0.06514217, 0.04194641, 0.22931769, 0.82133097, 0.07222393, 0.03146129, -0.18108282, -0.51474258, 0.07976995, 0.11250867, -0.05176837, 0.30094094, 0.22844745, -0.50778207, -0.58228861, 0.26778805, 0.35982163, 0.46123648, 0.00282227, -0.41937761, 0.07266744, 0.29213968, 0.57464901, -0.23959964, -0.42181467, -0.32121092, -0.04370756, 0.15575905, 0.37053942, -0.20429576, -0.01043382, 0.30038349, 0.02634012, -0.19138927, 0.32951671, -1.96967694, -0.14289129, -0.15124915, 0.70318602, 0.17086913, -0.02774863, -0.27719379, 0.36180308, -0.68409109, 0.24512606, -0.18017808, 0.45716647, -0.39155789, 0.13049812, 0.34437386, 0.84224947, -0.01941149, 0.19297008, -0.16116435, 1.49942, -0.00920271, -0.03532564, 0.00552639, 0.09053378, 1.69051442, 0.36115929, 0.01787409, 0.59015941, -0.25679133, 1.27651104, -0.11786158, 0.08457797, 0.52742909, -0.30280638, -0.2316479, -0.4643401, -0.14622545, -0.00552543, -0.094927, -0.27726797, 0.08104484, -0.11360011, -0.36118028, 0.14533423, 0.25944621, -0.00326565, -0.19741274, 0.27953052, -0.25540602, -0.24449377, -0.62027069, 0.10236546, -0.1861308, -0.04147423, -0.3254367, -0.96378477, -0.35197363, 0.00045655, -0.26837079, -0.34476668, -0.11770559, -0.00602886, 0.25091636, 0.15454756, 0.43895656, -0.14055342, -0.16209425, 0.05187905, 0.14865933, 0.22650616, 0.31764861, -0.30285934, -0.28496371, 0.18277695, 0.48507435, 0.06738052, -0.2509352, 0.28665165, 0.19366735, 0.04371687, 0.13572964, 0.2190171, 0.37201669, 0.4883512, 0.15492976, -0.70847552, -1.08933444, 0.36842111, 0.0327582, -0.03246074, -0.24177183, 0.35205849, 0.18939384, -0.08321916, -0.57444417, 0.33986498, -0.18579834, -0.32955017, -0.29402282, 0.33773332, -0.11078364, 0.0951086, 0.06568543, -0.07715619, -0.13020954, -0.62492327, -0.87518823, -0.11918327, -0.16623645, -0.02641087, -0.27111308, -0.98632728, -0.00459122, -0.24461103, -0.01345897, -0.5772367, -0.62581347, 0.06007122, 0.06455581, 0.10439986, 0.01481108, -0.5158367, -0.10274367, -0.27370409, -0.13445752, -0.19712038, 0.11166795, -0.13627311, 0.76444004, 2.70569665, -0.01452113, 0.04177221, -0.09109909, -0.36607674, 0.01465089, 0.04278046, 0.14255929, 0.05637018, 0.19607433, 0.06010088, 0.38713616, 0.27902532, -0.20994366, 0.00853533, 0.33871351, 0.07774148, 0.03046234, 0.16041719, 0.44611599, 0.24758303, -0.12614456, 0.19408098, -0.02776688, 0.22649552, 0.05083633, -0.32456358, 0.06842645, -0.0002137, 0.26011125, -0.08629718, -0.1203229, 0.17185713, -0.18987753, -0.25493439, 0.12389653, 0.0665237, -0.19129477, -0.32169718, 0.19020889, -0.55258371, -0.29956329, 0.75352807, 0.91369393, -0.17413508, -0.32119318, 0.4138767, -0.3757014, -0.02626034, -0.1985431, -0.10810852, 0.04472789, 0.08563015, -0.08893828, -0.31949069, 0.39969434, -0.32948539, -0.37727481, 0.65504146, 0.1031571, -0.43851898, -0.05601487, 1.0742807, 1.11294547, -0.10085743, 0.11218563, 0.04776663, 0.21038495, 1.00428962, -0.13040614, 0.03650264, 0.11891836, 1.13820699, -0.10166036, 0.02213477, 0.22349314, 0.0655658, 0.1268899, 0.31235819, 0.02295054, 0.31927889, 0.25102134, 0.45862747, -0.15159251, 0.25095133, -0.48794174, -1.09296916, -0.20917865, 0.09159233, 0.0610243, 0.25290571, -0.1698787, 0.11057861, 0.37819613, -0.46963656, -0.03491324, -0.08409002, -0.05482648, -0.47368276, 0.42193116, 0.34908551, 0.58054521, 0.13314218, 0.18163395, 0.15030515, -0.05496039, 0.34023351, 0.48482938, -0.35164312, 0.13481835, 0.05268316, 0.38973279, 0.34689121, -0.11622239, 0.70699272, 0.03526073, -0.19280017, 0.36103787, -0.02742246, -0.00244491, -0.0413123, -0.05309919, 0.1566742, 0.19727131, 0.38320555, 0.33928477, 0.46788532, 0.02879197, -0.07859224, -0.35925993, 0.10991527, 0.31060592, -0.10646397, -0.41218936, 0.05087348, 0.16939289, -0.05193487, -0.85623841, 0.00930045, -0.0105953, -0.35433351, -0.04543242, 0.28314322, -0.02799066, 0.30088815, -0.42843727, 0.15724924, 0.41758743, -0.98700487, -0.23653581, 0.05866727, 0.08004812, 0.10489386, -0.33037076, 0.01109575, -0.17072772, -0.18717068, 0.11013724, -0.05353382, -0.12205128, -0.14501877, 0.23374759, 0.18917979, -0.22375887, -0.34658173, 0.25323533, 0.03889627, -0.09650188, 0.33962366, 0.20875381, 0.29878415, 1.14358782, 0.31278232, -0.10098919, 0.03535645, -0.06695637, 0.34928457, -0.29107778, -0.1213437, 0.20878566, -0.01722285, 0.21160002, -0.26719782, 0.72905218, 1.42253175, -0.14591433, -0.04163039, 1.33701861, 1.11241609, 0.1298302, 0.16069599, 0.0311014, -0.14055158, -0.90727859, 0.01024169, 0.35632798, 0.66130291, 0.09579255, -0.61962868, -0.02112925, 0.6033547, 2.03345372, 0.350862, -0.58438712, 0.17287153, 0.11603444, 0.15657411, 0.24533863, 0.08752834, -0.01254151, 0.13468903, 0.46169179, -0.0346732, 0.10563109, -0.08026043, -0.17172551, 0.14834587, -0.09634177, 0.01096443, -0.93570844, 0.45225537, 0.23387354, -0.21412839, -0.53780805, 0.29753452, 0.30523822, -1.37084426, -1.99951674, 0.4978767, -0.07915112, -0.44809584, -0.43565209, -0.13810274, -0.49700245, 0.15646195, -1.33308318, 0.93837911, 0.36822838, -0.06555656, 0.12743506, -0.78915555, 0.64441212, 0.19242776, 0.03990934, -0.26013101, -1.39555314, 0.71649525, -0.10303198, 0.25608126];
  const b1 = [0.22655134, -0.14020637, 0.14655259, -0.19228163, -0.21744217, -0.12310314, 0.12513495, -0.14902083, 0.0579311, -0.35205919, -0.25390085, -0.11231621, 0.07913164, 0.29131966, -0.05362356, -0.03963334, -0.12526769, 0.19400729, -0.17127596, -0.16537223, 0.16710757, 0.128486, 0.03969586, 0.05247498];
  const W2 = [1.08574119, 0.27294415, -0.08816171, 0.11499439, -0.19938239, -0.21291633, -0.07335598, 0.05102684, 0.15453498, 1.29770783, -0.19157424, -0.04733362, -0.4025474, 0.37928757, -0.42098816, -0.53308894, 0.14258274, 0.70824014, -0.41086387, -0.90352058, -0.18112285, 0.07427613, 0.37756045, 0.12502606, -0.13591963, -0.06648227, 0.0444981, -0.33482593, -0.04062617, -0.40058712, -0.23217808, -0.16740611, 0.59229945, 0.27680947, -0.26470904, -0.36141681, 0.30281725, 0.16107127, 0.14491523, -0.29097134, -0.26673866, 0.4234127, 0.02614764, -0.27010268, 0.07564826, 0.49210711, 0.41964731, -0.0808418, -0.4468177, -0.15823228, -0.14166713, -0.40279342, -0.1634345, 0.26598939, -0.01751108, 0.18935248, -0.33750342, -0.64726745, 0.19860688, -0.10072041, 0.48121248, -0.26526988, 0.0322166, 0.1792752, -0.14854844, -0.44966704, 0.61405285, 0.35507936, -0.07511123, -0.35155202, -0.01514639, -0.02550535, 0.52389094, -0.05813953, 0.63829906, 0.19660708, 0.26858777, -0.14343422, -0.36639704, -0.26818308, 0.34082189, 0.16974133, -0.28367221, 0.41023286, -0.52406759, 0.14730523, -0.60840703, -0.48200915, 0.3377393, 0.25235122, -0.42580495, -0.06089472, -0.02024144, 0.35519446, 0.46485212, -0.07691918, 0.25380877, -0.37540446, 0.32940098, -0.20104516, -0.2611689, -0.23296243, -0.07070221, 0.22207293, -0.24744317, -0.09078055, -0.06856221, -0.06987017, 0.32106059, 0.16301568, -0.00668169, -0.40934638, -0.06348747, 0.1801935, 0.04025676, 0.21325227, 0.23276657, 0.46852715, 0.03300513, -0.1098588, -0.59155694, 0.08930629, -0.40134005, 0.07170999, -0.0658159, 0.1111296, -0.41767858, -0.08263135, 0.02123045, 0.01549046, 0.04790395, -0.04190519, -0.18549534, -0.34313649, -0.34255245, -0.10749073, 0.38840907, -0.38961031, 0.20804721, 0.18673467, -0.22002958, -0.63127461, 0.10533067, -0.04172833, -0.25085612, 0.14965585, 0.08834531, 0.71733262, -0.16220313, 0.32674457, 0.50600173, -0.07339434, 1.20601527, -0.9076531, -0.10514765, 0.44776573, -0.04529116, -0.59079911, 0.46602974, -0.61479753, 0.15532879, -0.17151215, 0.84860123, 0.41034708, -0.19111423, 0.04033314, 0.39341553, -0.26640808, -0.38495549, 0.30617472, 0.187708, 0.26371105, -0.42100376, 0.10416518, 0.13090378, 0.53851066, -0.13785536, -0.19535119, 0.17755137, -0.56693039, 0.27819663, -0.23406631, 0.36437641, 0.5082922, 0.30334532, 0.15305908, -0.37284323, 0.06471705, 0.21384209, -0.13608709, -0.53622408, 0.76837315, 0.04811773, -0.25078788, 0.12059399, -0.1292026, -0.53392131, -0.19732319, 0.26210472, -0.01688948, 0.69105124, -1.58056993, -0.03493239, -0.11604709, -0.19741079, -0.03442191, 0.47846243, -0.52121366, -0.04481268, -0.25576978, 1.28927093, 0.26957286, -0.18212015, -0.2414929, -0.03827795, 0.23922908, 0.20439551, 0.03421438, 0.26911328, -0.21041482, -0.41285444, -0.1410382, -0.15288229, -0.04921996, -0.20354408, -0.35286944, -0.16570329, -0.14045528, 0.12688139, 0.65880688, -0.11571739, 0.00105434, -0.45348374, 0.22068957, -0.16598408, -0.03302853, 0.14159843, -0.24340221, 0.54014054, -0.09081436, 0.00129695, -0.36971739, -0.00538001, 0.2921776, 0.18928502, -0.0272717, -0.34160718, -0.37757189, -0.24901174, -0.40545254, 0.12494434, -0.23995837, -0.19038637, 0.26386768, -0.34976678, 0.2915191, 0.18375294, 0.29035211, -0.17772209, -0.20643667, -0.08950352, -0.08830209, -0.27261429, 0.43070631, -0.19108235, -0.0124257, 0.1686082, -0.32960927, -0.07430824, 0.13556274, -0.00190929, 0.14860793, 0.23406443, -0.01271269, 0.12526667, -0.11431716, -0.10597909, 0.00937724, -0.00644766, -0.141441, -0.21114006, -0.21426132, 0.0705681, -0.08091196, 0.22810774, -0.13130035, 0.20392723, -0.26120438, -0.09000863, -0.04687245, 0.17226675, 0.12520565, -0.25972953, 0.1591656, 0.21756543, -0.13123642, 0.17237942, 0.43935729, -0.24478714, -0.26245968, -0.17261323, 0.0444131, -0.16099871, -0.26239684, -0.07017134, -0.0690036, 0.26621535, 0.01140387, 0.00872029, 0.04749326, 0.37976088, -0.55860422, -0.55192013, -0.067829, 0.30722821, 0.50323846, 0.11838418, 0.04954888, 0.08856014, -0.13160133, 1.19827205, -0.88188813, -0.08523351, 0.0055614, -0.31862355, -0.80558547, 0.66492034, -0.52844045, -0.04028015, -0.41003197, 1.07166789, 0.18326593, -0.37733662, -0.3099847, 0.23725367, -0.06609738, 0.24052484, -0.19360363, -0.14731405, 0.03183963, -0.18072513, -0.23573731, -0.12620584, 0.10886264, 0.01133929, 0.12843642, -0.17980431, -0.39348223, 0.00096101, 0.06683013, 0.20202627, -0.18724728, -0.3415218, 0.00265841, -0.13264547, -0.50755975, 0.38108865, 0.38597959, -0.31897502, 0.11372419, -0.04095141, 0.33093078, 0.10263205, 0.24905528, -0.18321424, 0.90896732, -0.06238821, 0.3904486, -0.36480824, -0.08891654, 0.57717035, 0.0673158, 0.20627995, -0.18599701, -0.12354684, 0.11970104, 0.09581659, -0.31796984, 0.13354021, -0.07547773, -0.21467727, -0.37854838, -0.28383529, 0.32205521];
  const b2 = [0.18159118, 0.13074923, -0.1806983, 0.12997335, 0.18251378, -0.14826703, 0.22541986, -0.15389551, -0.0168465, 0.22411998, -0.09890166, 0.07575984, 0.12289346, -0.12123446, 0.15253202, -0.15839329];
  const W3 = [0.63328465, 0.65810547, -0.58333104, 0.68297808, -0.06001321, -0.68791495, 0.23413671, -0.81401338, -0.3174556, -0.15725028, -0.21437672, 0.00322, 0.07387369, 0.2581333, 0.51067856, -0.47916867, 0.08964725, 0.53230638, 0.21685489, 0.1441812, -0.96631165, -0.97344028, -0.15243749, 0.05312582, -0.03524841, -0.1367731, -0.16278663, -0.04209313, -0.09829228, 0.15893513, -0.02040651, 0.24587443, -0.0313039, -0.05033969, -0.07819333, -0.03594498, 0.24801138, 0.27185877, 0.02366985, -0.03648474, -0.0359507, -0.21511033, 0.26518756, 0.46318047, -0.13663972, -0.00393309, 0.06027309, -0.1427728, 0.09747296, -0.00095645, 0.14854354, 0.06795456, -0.45387299, 0.23349917, 0.09346764, 0.06340903, 0.02594641, 0.55679549, 0.02412997, -0.06698918, 0.02641783, -0.08064873, -0.19332, -0.17903636, 0.37833429, 0.69071711, 0.12035095, -0.16271312, 0.4991926, -0.3444992, -0.71795471, -0.23022288, -1.02340627, 0.37868281, -0.65617598, 0.12899496, 0.51745816, -1.20224011, 0.38261154, -0.21415341];
  const b3 = [0.14101524, -0.06252835, 0.05515229, 0.12416452, 0.17880822];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-2"; }
function type(){ return Type.NORMAL; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16696991, -0.07251391, -0.2168828, 0.3036222, 0.16809272, 0.28460805, -0.04166438, 0.47968636, -0.65316789, -0.84134666, -0.14173119, 0.26560759, -0.10377426, 0.08035988, 0.12425724, 0.32452985, -0.27647173, -0.11123868, -0.04600036, 0.0281014, -0.00947044, 0.07503979, 0.13281319, 0.36191177, -0.67152044, -0.46850151, -0.01167639, 0.2803319, -1.19913539, -1.04782047, -0.03555183, -0.04648532, 0.0225009, -0.24357091, -1.05673991, 0.05700647, -0.12484442, -0.19480858, -0.58471519, -0.1499737, 0.28764565, -0.28483543, -0.26197615, -0.05895301, 0.01036905, -0.06521036, -0.10576278, 0.08186413, -0.45802654, -0.06481485, -0.01324017, -0.15813584, 0.06378432, -0.24747291, -0.17581397, -0.17720651, 0.35278504, -0.25429374, -0.00150542, -0.05067204, 0.0513872, -0.25094379, -0.00235429, -0.00235575, -0.30229907, -0.25958563, -0.14607265, -0.0722902, 0.04841354, -0.06084822, -0.17499657, -0.49193455, 0.00952833, 0.21344015, -0.47830239, -0.29445138, -0.20045302, -0.03955536, 0.23376275, -0.2966064, -0.40368417, -0.68392515, 0.01536786, -0.08538592, -0.09629931, -0.24338335, -0.01480121, -0.01726573, 0.03883442, 0.36971488, 0.06297283, 0.25098838, 0.31547071, 0.0676934, 0.74353925, 0.13166846, 0.21287281, 0.03850817, 0.27745053, -0.27006488, -0.07765343, 0.09322007, 0.38209079, -0.37245191, -0.01832997, -0.04153888, -0.14751603, 0.05288601, 0.09781128, 0.01532738, 0.35918935, -0.21448295, 0.2104868, -0.14754397, -1.36431996, -0.43219107, -0.09611919, 0.50316181, 0.13781978, -0.51070332, -0.32949001, 0.21963895, 0.30011335, -0.15396032, -0.21812793, 0.16997592, -0.22240592, 0.51066451, -0.08492232, -0.35846908, -0.72046295, 0.02400361, -0.3509301, 0.12439407, -0.32706612, -0.14067637, -0.25761274, 0.44715611, 1.07025773, 0.13182633, -0.50719883, 0.47002708, -0.09300086, 0.22437595, 0.02476151, 0.06170925, 0.09372822, 0.12163894, -0.07694989, -0.11319575, 0.24020836, 0.21506694, -0.1878085, -0.00581023, -0.24528872, 0.18944167, -0.18796665, -0.52009595, -0.66561732, -0.44310195, 0.31915052, -0.1096065, -0.27501671, -0.69768037, -0.4425739, 0.28590853, -0.6529124, -0.40580972, -0.02000369, -0.17398775, 0.43323, -0.18772681, 0.06854147, -0.26804511, -0.35115461, -0.19142385, 0.03437788, -0.299493, -0.45754946, -0.00295278, 0.08143059, -0.95380538, -0.08163821, -0.44514535, 0.21885333, 0.33416542, -0.00387319, -0.00858369, 0.47662563, 0.17436188, -0.36272559, -0.20080347, 0.39661547, 0.33992924, 0.07843172, -0.4629419, -0.56145381, -0.2831284, 0.03278749, -0.2012548, 0.49144509, -1.48933625, -0.44217698, 0.14700791, 0.00188137, 0.17686054, -1.06776135, -0.30914359, 0.25763212, 0.51750275, 0.5685931, -0.20053371, -0.13546183, 0.370309, -0.19243595, -0.24091672, 0.14409764, -0.0045921, -0.27560124, 0.06777249, -0.26575982, 0.04686864, -0.25064215, 0.64266651, 0.13015609, 0.1677144, -0.07436131, 0.01013988, 0.06357737, 0.0236343, 0.11257115, 0.02558286, -0.08439366, 0.29916114, 0.10665492, 0.27038873, 0.3074661, 0.67853735, 0.18479911, 0.03034829, 0.7025451, -0.21555468, -0.03336201, 1.44848477, 0.7228501, 0.17299155, -0.14400994, -0.64174475, 0.8895495, 0.28878887, 0.35371274, -0.02987698, -0.67628939, 0.73025261, 0.44452689, 0.1215198, 0.03270968, -0.51183703, 0.37944108, -0.09832362, 0.15665689, 0.11245013, -0.05609115, 0.15104483, 0.14111587, 0.01082892, -0.06010215, 1.16725744, 0.00238502, 0.23050189, -0.2629778, -0.23730588, -0.09490716, -0.04236215, -0.22773514, 0.03832175, 0.05409679, -0.16337999, 0.73181896, -0.26053281, 0.09519328, -0.02079857, 0.41093214, 0.44248387, 0.16799908, -0.01333672, -0.22617897, 0.6476411, 0.23007708, 0.09819449, 0.24489611, -0.60891715, 0.75304256, 0.11343741, 0.13064912, -0.07000543, -0.34671381, 0.34382369, 0.00209943, -0.09770453, -0.01221395, -0.14554187, 0.15354082, -0.21512321, -0.15191347, 0.09980666, 0.23107376, -0.2303226, -0.08891717, -0.27484535, 0.12091194, -0.25142217, -0.19023925, -0.16033411, -0.18687651, 0.21603701, 0.09721349, -0.18319949, -0.21356163, -0.08362084, -0.08125166, -0.41662309, -0.39783253, 0.34156618, 0.33065495, -0.95178353, 0.84366905, -0.49765864, -0.18010074, 1.41339123, 0.7946291, 0.150399, -0.61487123, 0.06573722, 1.15809689, 0.75984938, -0.01343237, -0.38488409, -0.42800255, 0.40463388, 0.78162028, 0.00838056, -0.17852332, -0.40657733, 0.10011192, -0.63243899, -0.21880253, 0.04260806, 0.23221358, 0.10066574, -0.41423139, -0.12765171, 0.08049712, 1.95429844, -0.00260313, -0.20048565, 0.27188369, 0.0189917, 0.17920741, -0.00477723, -0.04725872, 0.52287378, 0.04766486, -0.02373728, 0.60858443, -0.42515862, -0.11719525, -0.08743832, -0.29778613, -0.48666428, 0.08357413, -0.44082098, -0.84562723, 1.30067115, -0.23777025, -0.05104294, -0.36504125, -1.31227642, 0.50932537, -0.31155317, -0.35775375, 0.19038497, -0.82852382, 0.66393526, -0.27192971, -0.67546244, -0.03235313, -0.17702787, -0.10740097, -0.22004092, -0.45522122, -0.28109097, -0.16576372, -0.13664882, -0.3122309, 0.20120898, -5.19183464, 0.1838247, -0.45139091, 0.34968349, 0.77867316, -0.06563209, 0.045492, 0.36433178, 0.79280612, 0.02739077, -0.0466727, 0.62557025, 0.55449779, -0.07411458, -0.12693615, -0.69434448, -0.28309895, -0.04441911, -0.13654621, 0.45062185, -1.12916434, -0.5032554, 0.18945523, -0.19314113, 0.9129545, -0.85053961, -0.2916347, 0.65269383, -0.37020521, 0.82515971, -0.10353648, -0.09182913, 0.51541394, -0.22968296, -0.20862189, 0.00141701, -0.54830176, -0.3845895, -0.3371224, -0.79827125, 0.23039771, 0.12226295, -0.61295964, -0.18756488, 0.0849835, -0.00425158, -0.18830219, 0.43450864, -0.02439968, -0.14805237, -0.59641246, 0.62588297, -0.35796501, -0.26696002, 0.51866604, 0.91237138, -0.44091809, 0.60529762, -0.16050761, 0.72053322, -0.56926742, 0.00529658, 0.62903292, -0.94234303, 0.16799242, -0.20542786, -0.4758799, 0.4854704, -0.97499377, 0.36214378, -0.17284759, -0.55302296, -0.33165564, -0.06934902, 0.18604119, -0.36219461, -0.62845034, -0.36309202, -0.43840289, -0.05880275, -0.27399282, -0.21453314, -0.15967041, -0.84920018, 0.08344027, -0.07531231, 0.00966525, 0.05679306, -0.30841345, -0.91589665, 0.22885657, -0.07147898, -0.06751674, 0.08529804, 0.03354777, 0.14889417, 0.01078049, 0.77900937, -0.07704101, -0.06763113, -0.34325431, 1.78155751, 1.01232586, -0.16707859, -0.11632375, -0.14256762, -0.19084915, 0.51236994, 0.23818931, -0.15875387, -0.80994433, -0.39260904, 0.74680301, -0.28863141, 0.25083907, -0.11601555, -0.58645936, 0.58848576, 0.00259028, 0.33009969, 0.28078568, 0.56908261, 0.20529206, 0.14460108, 0.08313178, -0.1838972, -0.44078381, 0.15987749, -0.29451875, -0.50763573, -0.19415852, 0.36536217, -0.2795311, -0.23020914, 0.1195568, 0.07866547, 0.31574221, 0.28229577, 0.18859987, 0.31222441, 0.47901826, 0.25782211, 0.06485747, 0.06208318, 0.07699697, -0.58895092, 0.13696644, -0.21957843, 1.35167302, 1.05287145, 0.41911317, -0.20673229, 1.07562797, 0.79341194, 0.43654794, 0.30925653, 0.16017521, 0.86328218, 0.64091486, -0.28870848, 0.31952282, 0.21558504, 0.58304942, 0.53269672, -0.16249371, 0.15026724, 0.33939058, 0.14154557, 0.10144106, 0.00656555, 0.40295367, -1.21132464, -1.72923171, 0.40798729, 0.23085314, -0.62784993, 0.32987519, -0.42545169, 0.2203548, -0.28145068, 0.16549015, -0.29473196, -0.05468132, 0.44515282, -0.04373012, 0.0849826, 0.48568427, -0.21100016, 0.28533225, 0.00462787, 0.78654642, -0.09548717, -0.82066855, 0.25059813, -0.42125394, 0.29665581, 0.04444159, -0.5337895, 0.25808337, -0.26745666, 0.34722889, -0.22416563, -0.38070847, -0.09357444, -0.30942542, 0.2507339, -0.0424697, -0.3608606, -0.22036806, 0.0035217, -0.15809604, 0.03927281, -0.00938424, -0.06013908, 0.49125395, 2.03911799, 0.21450224, 0.24159407, 0.15360971, 0.12543795, 0.04427504, 0.24638785, -0.17798262, -0.06514217, 0.04194641, 0.22931769, 0.82133097, 0.07222393, 0.03146129, -0.18108282, -0.51474258, 0.07976995, 0.11250867, -0.05176837, 0.30094094, 0.22844745, -0.50778207, -0.58228861, 0.26778805, 0.35982163, 0.46123648, 0.00282227, -0.41937761, 0.07266744, 0.29213968, 0.57464901, -0.23959964, -0.42181467, -0.32121092, -0.04370756, 0.15575905, 0.37053942, -0.20429576, -0.01043382, 0.30038349, 0.02634012, -0.19138927, 0.32951671, -1.96967694, -0.14289129, -0.15124915, 0.70318602, 0.17086913, -0.02774863, -0.27719379, 0.36180308, -0.68409109, 0.24512606, -0.18017808, 0.45716647, -0.39155789, 0.13049812, 0.34437386, 0.84224947, -0.01941149, 0.19297008, -0.16116435, 1.49942, -0.00920271, -0.03532564, 0.00552639, 0.09053378, 1.69051442, 0.36115929, 0.01787409, 0.59015941, -0.25679133, 1.27651104, -0.11786158, 0.08457797, 0.52742909, -0.30280638, -0.2316479, -0.4643401, -0.14622545, -0.00552543, -0.094927, -0.27726797, 0.08104484, -0.11360011, -0.36118028, 0.14533423, 0.25944621, -0.00326565, -0.19741274, 0.27953052, -0.25540602, -0.24449377, -0.62027069, 0.10236546, -0.1861308, -0.04147423, -0.3254367, -0.96378477, -0.35197363, 0.00045655, -0.26837079, -0.34476668, -0.11770559, -0.00602886, 0.25091636, 0.15454756, 0.43895656, -0.14055342, -0.16209425, 0.05187905, 0.14865933, 0.22650616, 0.31764861, -0.30285934, -0.28496371, 0.18277695, 0.48507435, 0.06738052, -0.2509352, 0.28665165, 0.19366735, 0.04371687, 0.13572964, 0.2190171, 0.37201669, 0.4883512, 0.15492976, -0.70847552, -1.08933444, 0.36842111, 0.0327582, -0.03246074, -0.24177183, 0.35205849, 0.18939384, -0.08321916, -0.57444417, 0.33986498, -0.18579834, -0.32955017, -0.29402282, 0.33773332, -0.11078364, 0.0951086, 0.06568543, -0.07715619, -0.13020954, -0.62492327, -0.87518823, -0.11918327, -0.16623645, -0.02641087, -0.27111308, -0.98632728, -0.00459122, -0.24461103, -0.01345897, -0.5772367, -0.62581347, 0.06007122, 0.06455581, 0.10439986, 0.01481108, -0.5158367, -0.10274367, -0.27370409, -0.13445752, -0.19712038, 0.11166795, -0.13627311, 0.76444004, 2.70569665, -0.01452113, 0.04177221, -0.09109909, -0.36607674, 0.01465089, 0.04278046, 0.14255929, 0.05637018, 0.19607433, 0.06010088, 0.38713616, 0.27902532, -0.20994366, 0.00853533, 0.33871351, 0.07774148, 0.03046234, 0.16041719, 0.44611599, 0.24758303, -0.12614456, 0.19408098, -0.02776688, 0.22649552, 0.05083633, -0.32456358, 0.06842645, -0.0002137, 0.26011125, -0.08629718, -0.1203229, 0.17185713, -0.18987753, -0.25493439, 0.12389653, 0.0665237, -0.19129477, -0.32169718, 0.19020889, -0.55258371, -0.29956329, 0.75352807, 0.91369393, -0.17413508, -0.32119318, 0.4138767, -0.3757014, -0.02626034, -0.1985431, -0.10810852, 0.04472789, 0.08563015, -0.08893828, -0.31949069, 0.39969434, -0.32948539, -0.37727481, 0.65504146, 0.1031571, -0.43851898, -0.05601487, 1.0742807, 1.11294547, -0.10085743, 0.11218563, 0.04776663, 0.21038495, 1.00428962, -0.13040614, 0.03650264, 0.11891836, 1.13820699, -0.10166036, 0.02213477, 0.22349314, 0.0655658, 0.1268899, 0.31235819, 0.02295054, 0.31927889, 0.25102134, 0.45862747, -0.15159251, 0.25095133, -0.48794174, -1.09296916, -0.20917865, 0.09159233, 0.0610243, 0.25290571, -0.1698787, 0.11057861, 0.37819613, -0.46963656, -0.03491324, -0.08409002, -0.05482648, -0.47368276, 0.42193116, 0.34908551, 0.58054521, 0.13314218, 0.18163395, 0.15030515, -0.05496039, 0.34023351, 0.48482938, -0.35164312, 0.13481835, 0.05268316, 0.38973279, 0.34689121, -0.11622239, 0.70699272, 0.03526073, -0.19280017, 0.36103787, -0.02742246, -0.00244491, -0.0413123, -0.05309919, 0.1566742, 0.19727131, 0.38320555, 0.33928477, 0.46788532, 0.02879197, -0.07859224, -0.35925993, 0.10991527, 0.31060592, -0.10646397, -0.41218936, 0.05087348, 0.16939289, -0.05193487, -0.85623841, 0.00930045, -0.0105953, -0.35433351, -0.04543242, 0.28314322, -0.02799066, 0.30088815, -0.42843727, 0.15724924, 0.41758743, -0.98700487, -0.23653581, 0.05866727, 0.08004812, 0.10489386, -0.33037076, 0.01109575, -0.17072772, -0.18717068, 0.11013724, -0.05353382, -0.12205128, -0.14501877, 0.23374759, 0.18917979, -0.22375887, -0.34658173, 0.25323533, 0.03889627, -0.09650188, 0.33962366, 0.20875381, 0.29878415, 1.14358782, 0.31278232, -0.10098919, 0.03535645, -0.06695637, 0.34928457, -0.29107778, -0.1213437, 0.20878566, -0.01722285, 0.21160002, -0.26719782, 0.72905218, 1.42253175, -0.14591433, -0.04163039, 1.33701861, 1.11241609, 0.1298302, 0.16069599, 0.0311014, -0.14055158, -0.90727859, 0.01024169, 0.35632798, 0.66130291, 0.09579255, -0.61962868, -0.02112925, 0.6033547, 2.03345372, 0.350862, -0.58438712, 0.17287153, 0.11603444, 0.15657411, 0.24533863, 0.08752834, -0.01254151, 0.13468903, 0.46169179, -0.0346732, 0.10563109, -0.08026043, -0.17172551, 0.14834587, -0.09634177, 0.01096443, -0.93570844, 0.45225537, 0.23387354, -0.21412839, -0.53780805, 0.29753452, 0.30523822, -1.37084426, -1.99951674, 0.4978767, -0.07915112, -0.44809584, -0.43565209, -0.13810274, -0.49700245, 0.15646195, -1.33308318, 0.93837911, 0.36822838, -0.06555656, 0.12743506, -0.78915555, 0.64441212, 0.19242776, 0.03990934, -0.26013101, -1.39555314, 0.71649525, -0.10303198, 0.25608126];
  const b1 = [0.22655134, -0.14020637, 0.14655259, -0.19228163, -0.21744217, -0.12310314, 0.12513495, -0.14902083, 0.0579311, -0.35205919, -0.25390085, -0.11231621, 0.07913164, 0.29131966, -0.05362356, -0.03963334, -0.12526769, 0.19400729, -0.17127596, -0.16537223, 0.16710757, 0.128486, 0.03969586, 0.05247498];
  const W2 = [1.08574119, 0.27294415, -0.08816171, 0.11499439, -0.19938239, -0.21291633, -0.07335598, 0.05102684, 0.15453498, 1.29770783, -0.19157424, -0.04733362, -0.4025474, 0.37928757, -0.42098816, -0.53308894, 0.14258274, 0.70824014, -0.41086387, -0.90352058, -0.18112285, 0.07427613, 0.37756045, 0.12502606, -0.13591963, -0.06648227, 0.0444981, -0.33482593, -0.04062617, -0.40058712, -0.23217808, -0.16740611, 0.59229945, 0.27680947, -0.26470904, -0.36141681, 0.30281725, 0.16107127, 0.14491523, -0.29097134, -0.26673866, 0.4234127, 0.02614764, -0.27010268, 0.07564826, 0.49210711, 0.41964731, -0.0808418, -0.4468177, -0.15823228, -0.14166713, -0.40279342, -0.1634345, 0.26598939, -0.01751108, 0.18935248, -0.33750342, -0.64726745, 0.19860688, -0.10072041, 0.48121248, -0.26526988, 0.0322166, 0.1792752, -0.14854844, -0.44966704, 0.61405285, 0.35507936, -0.07511123, -0.35155202, -0.01514639, -0.02550535, 0.52389094, -0.05813953, 0.63829906, 0.19660708, 0.26858777, -0.14343422, -0.36639704, -0.26818308, 0.34082189, 0.16974133, -0.28367221, 0.41023286, -0.52406759, 0.14730523, -0.60840703, -0.48200915, 0.3377393, 0.25235122, -0.42580495, -0.06089472, -0.02024144, 0.35519446, 0.46485212, -0.07691918, 0.25380877, -0.37540446, 0.32940098, -0.20104516, -0.2611689, -0.23296243, -0.07070221, 0.22207293, -0.24744317, -0.09078055, -0.06856221, -0.06987017, 0.32106059, 0.16301568, -0.00668169, -0.40934638, -0.06348747, 0.1801935, 0.04025676, 0.21325227, 0.23276657, 0.46852715, 0.03300513, -0.1098588, -0.59155694, 0.08930629, -0.40134005, 0.07170999, -0.0658159, 0.1111296, -0.41767858, -0.08263135, 0.02123045, 0.01549046, 0.04790395, -0.04190519, -0.18549534, -0.34313649, -0.34255245, -0.10749073, 0.38840907, -0.38961031, 0.20804721, 0.18673467, -0.22002958, -0.63127461, 0.10533067, -0.04172833, -0.25085612, 0.14965585, 0.08834531, 0.71733262, -0.16220313, 0.32674457, 0.50600173, -0.07339434, 1.20601527, -0.9076531, -0.10514765, 0.44776573, -0.04529116, -0.59079911, 0.46602974, -0.61479753, 0.15532879, -0.17151215, 0.84860123, 0.41034708, -0.19111423, 0.04033314, 0.39341553, -0.26640808, -0.38495549, 0.30617472, 0.187708, 0.26371105, -0.42100376, 0.10416518, 0.13090378, 0.53851066, -0.13785536, -0.19535119, 0.17755137, -0.56693039, 0.27819663, -0.23406631, 0.36437641, 0.5082922, 0.30334532, 0.15305908, -0.37284323, 0.06471705, 0.21384209, -0.13608709, -0.53622408, 0.76837315, 0.04811773, -0.25078788, 0.12059399, -0.1292026, -0.53392131, -0.19732319, 0.26210472, -0.01688948, 0.69105124, -1.58056993, -0.03493239, -0.11604709, -0.19741079, -0.03442191, 0.47846243, -0.52121366, -0.04481268, -0.25576978, 1.28927093, 0.26957286, -0.18212015, -0.2414929, -0.03827795, 0.23922908, 0.20439551, 0.03421438, 0.26911328, -0.21041482, -0.41285444, -0.1410382, -0.15288229, -0.04921996, -0.20354408, -0.35286944, -0.16570329, -0.14045528, 0.12688139, 0.65880688, -0.11571739, 0.00105434, -0.45348374, 0.22068957, -0.16598408, -0.03302853, 0.14159843, -0.24340221, 0.54014054, -0.09081436, 0.00129695, -0.36971739, -0.00538001, 0.2921776, 0.18928502, -0.0272717, -0.34160718, -0.37757189, -0.24901174, -0.40545254, 0.12494434, -0.23995837, -0.19038637, 0.26386768, -0.34976678, 0.2915191, 0.18375294, 0.29035211, -0.17772209, -0.20643667, -0.08950352, -0.08830209, -0.27261429, 0.43070631, -0.19108235, -0.0124257, 0.1686082, -0.32960927, -0.07430824, 0.13556274, -0.00190929, 0.14860793, 0.23406443, -0.01271269, 0.12526667, -0.11431716, -0.10597909, 0.00937724, -0.00644766, -0.141441, -0.21114006, -0.21426132, 0.0705681, -0.08091196, 0.22810774, -0.13130035, 0.20392723, -0.26120438, -0.09000863, -0.04687245, 0.17226675, 0.12520565, -0.25972953, 0.1591656, 0.21756543, -0.13123642, 0.17237942, 0.43935729, -0.24478714, -0.26245968, -0.17261323, 0.0444131, -0.16099871, -0.26239684, -0.07017134, -0.0690036, 0.26621535, 0.01140387, 0.00872029, 0.04749326, 0.37976088, -0.55860422, -0.55192013, -0.067829, 0.30722821, 0.50323846, 0.11838418, 0.04954888, 0.08856014, -0.13160133, 1.19827205, -0.88188813, -0.08523351, 0.0055614, -0.31862355, -0.80558547, 0.66492034, -0.52844045, -0.04028015, -0.41003197, 1.07166789, 0.18326593, -0.37733662, -0.3099847, 0.23725367, -0.06609738, 0.24052484, -0.19360363, -0.14731405, 0.03183963, -0.18072513, -0.23573731, -0.12620584, 0.10886264, 0.01133929, 0.12843642, -0.17980431, -0.39348223, 0.00096101, 0.06683013, 0.20202627, -0.18724728, -0.3415218, 0.00265841, -0.13264547, -0.50755975, 0.38108865, 0.38597959, -0.31897502, 0.11372419, -0.04095141, 0.33093078, 0.10263205, 0.24905528, -0.18321424, 0.90896732, -0.06238821, 0.3904486, -0.36480824, -0.08891654, 0.57717035, 0.0673158, 0.20627995, -0.18599701, -0.12354684, 0.11970104, 0.09581659, -0.31796984, 0.13354021, -0.07547773, -0.21467727, -0.37854838, -0.28383529, 0.32205521];
  const b2 = [0.18159118, 0.13074923, -0.1806983, 0.12997335, 0.18251378, -0.14826703, 0.22541986, -0.15389551, -0.0168465, 0.22411998, -0.09890166, 0.07575984, 0.12289346, -0.12123446, 0.15253202, -0.15839329];
  const W3 = [0.63328465, 0.65810547, -0.58333104, 0.68297808, -0.06001321, -0.68791495, 0.23413671, -0.81401338, -0.3174556, -0.15725028, -0.21437672, 0.00322, 0.07387369, 0.2581333, 0.51067856, -0.47916867, 0.08964725, 0.53230638, 0.21685489, 0.1441812, -0.96631165, -0.97344028, -0.15243749, 0.05312582, -0.03524841, -0.1367731, -0.16278663, -0.04209313, -0.09829228, 0.15893513, -0.02040651, 0.24587443, -0.0313039, -0.05033969, -0.07819333, -0.03594498, 0.24801138, 0.27185877, 0.02366985, -0.03648474, -0.0359507, -0.21511033, 0.26518756, 0.46318047, -0.13663972, -0.00393309, 0.06027309, -0.1427728, 0.09747296, -0.00095645, 0.14854354, 0.06795456, -0.45387299, 0.23349917, 0.09346764, 0.06340903, 0.02594641, 0.55679549, 0.02412997, -0.06698918, 0.02641783, -0.08064873, -0.19332, -0.17903636, 0.37833429, 0.69071711, 0.12035095, -0.16271312, 0.4991926, -0.3444992, -0.71795471, -0.23022288, -1.02340627, 0.37868281, -0.65617598, 0.12899496, 0.51745816, -1.20224011, 0.38261154, -0.21415341];
  const b3 = [0.14101524, -0.06252835, 0.05515229, 0.12416452, 0.17880822];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-3"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16696991, -0.07251391, -0.2168828, 0.3036222, 0.16809272, 0.28460805, -0.04166438, 0.47968636, -0.65316789, -0.84134666, -0.14173119, 0.26560759, -0.10377426, 0.08035988, 0.12425724, 0.32452985, -0.27647173, -0.11123868, -0.04600036, 0.0281014, -0.00947044, 0.07503979, 0.13281319, 0.36191177, -0.67152044, -0.46850151, -0.01167639, 0.2803319, -1.19913539, -1.04782047, -0.03555183, -0.04648532, 0.0225009, -0.24357091, -1.05673991, 0.05700647, -0.12484442, -0.19480858, -0.58471519, -0.1499737, 0.28764565, -0.28483543, -0.26197615, -0.05895301, 0.01036905, -0.06521036, -0.10576278, 0.08186413, -0.45802654, -0.06481485, -0.01324017, -0.15813584, 0.06378432, -0.24747291, -0.17581397, -0.17720651, 0.35278504, -0.25429374, -0.00150542, -0.05067204, 0.0513872, -0.25094379, -0.00235429, -0.00235575, -0.30229907, -0.25958563, -0.14607265, -0.0722902, 0.04841354, -0.06084822, -0.17499657, -0.49193455, 0.00952833, 0.21344015, -0.47830239, -0.29445138, -0.20045302, -0.03955536, 0.23376275, -0.2966064, -0.40368417, -0.68392515, 0.01536786, -0.08538592, -0.09629931, -0.24338335, -0.01480121, -0.01726573, 0.03883442, 0.36971488, 0.06297283, 0.25098838, 0.31547071, 0.0676934, 0.74353925, 0.13166846, 0.21287281, 0.03850817, 0.27745053, -0.27006488, -0.07765343, 0.09322007, 0.38209079, -0.37245191, -0.01832997, -0.04153888, -0.14751603, 0.05288601, 0.09781128, 0.01532738, 0.35918935, -0.21448295, 0.2104868, -0.14754397, -1.36431996, -0.43219107, -0.09611919, 0.50316181, 0.13781978, -0.51070332, -0.32949001, 0.21963895, 0.30011335, -0.15396032, -0.21812793, 0.16997592, -0.22240592, 0.51066451, -0.08492232, -0.35846908, -0.72046295, 0.02400361, -0.3509301, 0.12439407, -0.32706612, -0.14067637, -0.25761274, 0.44715611, 1.07025773, 0.13182633, -0.50719883, 0.47002708, -0.09300086, 0.22437595, 0.02476151, 0.06170925, 0.09372822, 0.12163894, -0.07694989, -0.11319575, 0.24020836, 0.21506694, -0.1878085, -0.00581023, -0.24528872, 0.18944167, -0.18796665, -0.52009595, -0.66561732, -0.44310195, 0.31915052, -0.1096065, -0.27501671, -0.69768037, -0.4425739, 0.28590853, -0.6529124, -0.40580972, -0.02000369, -0.17398775, 0.43323, -0.18772681, 0.06854147, -0.26804511, -0.35115461, -0.19142385, 0.03437788, -0.299493, -0.45754946, -0.00295278, 0.08143059, -0.95380538, -0.08163821, -0.44514535, 0.21885333, 0.33416542, -0.00387319, -0.00858369, 0.47662563, 0.17436188, -0.36272559, -0.20080347, 0.39661547, 0.33992924, 0.07843172, -0.4629419, -0.56145381, -0.2831284, 0.03278749, -0.2012548, 0.49144509, -1.48933625, -0.44217698, 0.14700791, 0.00188137, 0.17686054, -1.06776135, -0.30914359, 0.25763212, 0.51750275, 0.5685931, -0.20053371, -0.13546183, 0.370309, -0.19243595, -0.24091672, 0.14409764, -0.0045921, -0.27560124, 0.06777249, -0.26575982, 0.04686864, -0.25064215, 0.64266651, 0.13015609, 0.1677144, -0.07436131, 0.01013988, 0.06357737, 0.0236343, 0.11257115, 0.02558286, -0.08439366, 0.29916114, 0.10665492, 0.27038873, 0.3074661, 0.67853735, 0.18479911, 0.03034829, 0.7025451, -0.21555468, -0.03336201, 1.44848477, 0.7228501, 0.17299155, -0.14400994, -0.64174475, 0.8895495, 0.28878887, 0.35371274, -0.02987698, -0.67628939, 0.73025261, 0.44452689, 0.1215198, 0.03270968, -0.51183703, 0.37944108, -0.09832362, 0.15665689, 0.11245013, -0.05609115, 0.15104483, 0.14111587, 0.01082892, -0.06010215, 1.16725744, 0.00238502, 0.23050189, -0.2629778, -0.23730588, -0.09490716, -0.04236215, -0.22773514, 0.03832175, 0.05409679, -0.16337999, 0.73181896, -0.26053281, 0.09519328, -0.02079857, 0.41093214, 0.44248387, 0.16799908, -0.01333672, -0.22617897, 0.6476411, 0.23007708, 0.09819449, 0.24489611, -0.60891715, 0.75304256, 0.11343741, 0.13064912, -0.07000543, -0.34671381, 0.34382369, 0.00209943, -0.09770453, -0.01221395, -0.14554187, 0.15354082, -0.21512321, -0.15191347, 0.09980666, 0.23107376, -0.2303226, -0.08891717, -0.27484535, 0.12091194, -0.25142217, -0.19023925, -0.16033411, -0.18687651, 0.21603701, 0.09721349, -0.18319949, -0.21356163, -0.08362084, -0.08125166, -0.41662309, -0.39783253, 0.34156618, 0.33065495, -0.95178353, 0.84366905, -0.49765864, -0.18010074, 1.41339123, 0.7946291, 0.150399, -0.61487123, 0.06573722, 1.15809689, 0.75984938, -0.01343237, -0.38488409, -0.42800255, 0.40463388, 0.78162028, 0.00838056, -0.17852332, -0.40657733, 0.10011192, -0.63243899, -0.21880253, 0.04260806, 0.23221358, 0.10066574, -0.41423139, -0.12765171, 0.08049712, 1.95429844, -0.00260313, -0.20048565, 0.27188369, 0.0189917, 0.17920741, -0.00477723, -0.04725872, 0.52287378, 0.04766486, -0.02373728, 0.60858443, -0.42515862, -0.11719525, -0.08743832, -0.29778613, -0.48666428, 0.08357413, -0.44082098, -0.84562723, 1.30067115, -0.23777025, -0.05104294, -0.36504125, -1.31227642, 0.50932537, -0.31155317, -0.35775375, 0.19038497, -0.82852382, 0.66393526, -0.27192971, -0.67546244, -0.03235313, -0.17702787, -0.10740097, -0.22004092, -0.45522122, -0.28109097, -0.16576372, -0.13664882, -0.3122309, 0.20120898, -5.19183464, 0.1838247, -0.45139091, 0.34968349, 0.77867316, -0.06563209, 0.045492, 0.36433178, 0.79280612, 0.02739077, -0.0466727, 0.62557025, 0.55449779, -0.07411458, -0.12693615, -0.69434448, -0.28309895, -0.04441911, -0.13654621, 0.45062185, -1.12916434, -0.5032554, 0.18945523, -0.19314113, 0.9129545, -0.85053961, -0.2916347, 0.65269383, -0.37020521, 0.82515971, -0.10353648, -0.09182913, 0.51541394, -0.22968296, -0.20862189, 0.00141701, -0.54830176, -0.3845895, -0.3371224, -0.79827125, 0.23039771, 0.12226295, -0.61295964, -0.18756488, 0.0849835, -0.00425158, -0.18830219, 0.43450864, -0.02439968, -0.14805237, -0.59641246, 0.62588297, -0.35796501, -0.26696002, 0.51866604, 0.91237138, -0.44091809, 0.60529762, -0.16050761, 0.72053322, -0.56926742, 0.00529658, 0.62903292, -0.94234303, 0.16799242, -0.20542786, -0.4758799, 0.4854704, -0.97499377, 0.36214378, -0.17284759, -0.55302296, -0.33165564, -0.06934902, 0.18604119, -0.36219461, -0.62845034, -0.36309202, -0.43840289, -0.05880275, -0.27399282, -0.21453314, -0.15967041, -0.84920018, 0.08344027, -0.07531231, 0.00966525, 0.05679306, -0.30841345, -0.91589665, 0.22885657, -0.07147898, -0.06751674, 0.08529804, 0.03354777, 0.14889417, 0.01078049, 0.77900937, -0.07704101, -0.06763113, -0.34325431, 1.78155751, 1.01232586, -0.16707859, -0.11632375, -0.14256762, -0.19084915, 0.51236994, 0.23818931, -0.15875387, -0.80994433, -0.39260904, 0.74680301, -0.28863141, 0.25083907, -0.11601555, -0.58645936, 0.58848576, 0.00259028, 0.33009969, 0.28078568, 0.56908261, 0.20529206, 0.14460108, 0.08313178, -0.1838972, -0.44078381, 0.15987749, -0.29451875, -0.50763573, -0.19415852, 0.36536217, -0.2795311, -0.23020914, 0.1195568, 0.07866547, 0.31574221, 0.28229577, 0.18859987, 0.31222441, 0.47901826, 0.25782211, 0.06485747, 0.06208318, 0.07699697, -0.58895092, 0.13696644, -0.21957843, 1.35167302, 1.05287145, 0.41911317, -0.20673229, 1.07562797, 0.79341194, 0.43654794, 0.30925653, 0.16017521, 0.86328218, 0.64091486, -0.28870848, 0.31952282, 0.21558504, 0.58304942, 0.53269672, -0.16249371, 0.15026724, 0.33939058, 0.14154557, 0.10144106, 0.00656555, 0.40295367, -1.21132464, -1.72923171, 0.40798729, 0.23085314, -0.62784993, 0.32987519, -0.42545169, 0.2203548, -0.28145068, 0.16549015, -0.29473196, -0.05468132, 0.44515282, -0.04373012, 0.0849826, 0.48568427, -0.21100016, 0.28533225, 0.00462787, 0.78654642, -0.09548717, -0.82066855, 0.25059813, -0.42125394, 0.29665581, 0.04444159, -0.5337895, 0.25808337, -0.26745666, 0.34722889, -0.22416563, -0.38070847, -0.09357444, -0.30942542, 0.2507339, -0.0424697, -0.3608606, -0.22036806, 0.0035217, -0.15809604, 0.03927281, -0.00938424, -0.06013908, 0.49125395, 2.03911799, 0.21450224, 0.24159407, 0.15360971, 0.12543795, 0.04427504, 0.24638785, -0.17798262, -0.06514217, 0.04194641, 0.22931769, 0.82133097, 0.07222393, 0.03146129, -0.18108282, -0.51474258, 0.07976995, 0.11250867, -0.05176837, 0.30094094, 0.22844745, -0.50778207, -0.58228861, 0.26778805, 0.35982163, 0.46123648, 0.00282227, -0.41937761, 0.07266744, 0.29213968, 0.57464901, -0.23959964, -0.42181467, -0.32121092, -0.04370756, 0.15575905, 0.37053942, -0.20429576, -0.01043382, 0.30038349, 0.02634012, -0.19138927, 0.32951671, -1.96967694, -0.14289129, -0.15124915, 0.70318602, 0.17086913, -0.02774863, -0.27719379, 0.36180308, -0.68409109, 0.24512606, -0.18017808, 0.45716647, -0.39155789, 0.13049812, 0.34437386, 0.84224947, -0.01941149, 0.19297008, -0.16116435, 1.49942, -0.00920271, -0.03532564, 0.00552639, 0.09053378, 1.69051442, 0.36115929, 0.01787409, 0.59015941, -0.25679133, 1.27651104, -0.11786158, 0.08457797, 0.52742909, -0.30280638, -0.2316479, -0.4643401, -0.14622545, -0.00552543, -0.094927, -0.27726797, 0.08104484, -0.11360011, -0.36118028, 0.14533423, 0.25944621, -0.00326565, -0.19741274, 0.27953052, -0.25540602, -0.24449377, -0.62027069, 0.10236546, -0.1861308, -0.04147423, -0.3254367, -0.96378477, -0.35197363, 0.00045655, -0.26837079, -0.34476668, -0.11770559, -0.00602886, 0.25091636, 0.15454756, 0.43895656, -0.14055342, -0.16209425, 0.05187905, 0.14865933, 0.22650616, 0.31764861, -0.30285934, -0.28496371, 0.18277695, 0.48507435, 0.06738052, -0.2509352, 0.28665165, 0.19366735, 0.04371687, 0.13572964, 0.2190171, 0.37201669, 0.4883512, 0.15492976, -0.70847552, -1.08933444, 0.36842111, 0.0327582, -0.03246074, -0.24177183, 0.35205849, 0.18939384, -0.08321916, -0.57444417, 0.33986498, -0.18579834, -0.32955017, -0.29402282, 0.33773332, -0.11078364, 0.0951086, 0.06568543, -0.07715619, -0.13020954, -0.62492327, -0.87518823, -0.11918327, -0.16623645, -0.02641087, -0.27111308, -0.98632728, -0.00459122, -0.24461103, -0.01345897, -0.5772367, -0.62581347, 0.06007122, 0.06455581, 0.10439986, 0.01481108, -0.5158367, -0.10274367, -0.27370409, -0.13445752, -0.19712038, 0.11166795, -0.13627311, 0.76444004, 2.70569665, -0.01452113, 0.04177221, -0.09109909, -0.36607674, 0.01465089, 0.04278046, 0.14255929, 0.05637018, 0.19607433, 0.06010088, 0.38713616, 0.27902532, -0.20994366, 0.00853533, 0.33871351, 0.07774148, 0.03046234, 0.16041719, 0.44611599, 0.24758303, -0.12614456, 0.19408098, -0.02776688, 0.22649552, 0.05083633, -0.32456358, 0.06842645, -0.0002137, 0.26011125, -0.08629718, -0.1203229, 0.17185713, -0.18987753, -0.25493439, 0.12389653, 0.0665237, -0.19129477, -0.32169718, 0.19020889, -0.55258371, -0.29956329, 0.75352807, 0.91369393, -0.17413508, -0.32119318, 0.4138767, -0.3757014, -0.02626034, -0.1985431, -0.10810852, 0.04472789, 0.08563015, -0.08893828, -0.31949069, 0.39969434, -0.32948539, -0.37727481, 0.65504146, 0.1031571, -0.43851898, -0.05601487, 1.0742807, 1.11294547, -0.10085743, 0.11218563, 0.04776663, 0.21038495, 1.00428962, -0.13040614, 0.03650264, 0.11891836, 1.13820699, -0.10166036, 0.02213477, 0.22349314, 0.0655658, 0.1268899, 0.31235819, 0.02295054, 0.31927889, 0.25102134, 0.45862747, -0.15159251, 0.25095133, -0.48794174, -1.09296916, -0.20917865, 0.09159233, 0.0610243, 0.25290571, -0.1698787, 0.11057861, 0.37819613, -0.46963656, -0.03491324, -0.08409002, -0.05482648, -0.47368276, 0.42193116, 0.34908551, 0.58054521, 0.13314218, 0.18163395, 0.15030515, -0.05496039, 0.34023351, 0.48482938, -0.35164312, 0.13481835, 0.05268316, 0.38973279, 0.34689121, -0.11622239, 0.70699272, 0.03526073, -0.19280017, 0.36103787, -0.02742246, -0.00244491, -0.0413123, -0.05309919, 0.1566742, 0.19727131, 0.38320555, 0.33928477, 0.46788532, 0.02879197, -0.07859224, -0.35925993, 0.10991527, 0.31060592, -0.10646397, -0.41218936, 0.05087348, 0.16939289, -0.05193487, -0.85623841, 0.00930045, -0.0105953, -0.35433351, -0.04543242, 0.28314322, -0.02799066, 0.30088815, -0.42843727, 0.15724924, 0.41758743, -0.98700487, -0.23653581, 0.05866727, 0.08004812, 0.10489386, -0.33037076, 0.01109575, -0.17072772, -0.18717068, 0.11013724, -0.05353382, -0.12205128, -0.14501877, 0.23374759, 0.18917979, -0.22375887, -0.34658173, 0.25323533, 0.03889627, -0.09650188, 0.33962366, 0.20875381, 0.29878415, 1.14358782, 0.31278232, -0.10098919, 0.03535645, -0.06695637, 0.34928457, -0.29107778, -0.1213437, 0.20878566, -0.01722285, 0.21160002, -0.26719782, 0.72905218, 1.42253175, -0.14591433, -0.04163039, 1.33701861, 1.11241609, 0.1298302, 0.16069599, 0.0311014, -0.14055158, -0.90727859, 0.01024169, 0.35632798, 0.66130291, 0.09579255, -0.61962868, -0.02112925, 0.6033547, 2.03345372, 0.350862, -0.58438712, 0.17287153, 0.11603444, 0.15657411, 0.24533863, 0.08752834, -0.01254151, 0.13468903, 0.46169179, -0.0346732, 0.10563109, -0.08026043, -0.17172551, 0.14834587, -0.09634177, 0.01096443, -0.93570844, 0.45225537, 0.23387354, -0.21412839, -0.53780805, 0.29753452, 0.30523822, -1.37084426, -1.99951674, 0.4978767, -0.07915112, -0.44809584, -0.43565209, -0.13810274, -0.49700245, 0.15646195, -1.33308318, 0.93837911, 0.36822838, -0.06555656, 0.12743506, -0.78915555, 0.64441212, 0.19242776, 0.03990934, -0.26013101, -1.39555314, 0.71649525, -0.10303198, 0.25608126];
  const b1 = [0.22655134, -0.14020637, 0.14655259, -0.19228163, -0.21744217, -0.12310314, 0.12513495, -0.14902083, 0.0579311, -0.35205919, -0.25390085, -0.11231621, 0.07913164, 0.29131966, -0.05362356, -0.03963334, -0.12526769, 0.19400729, -0.17127596, -0.16537223, 0.16710757, 0.128486, 0.03969586, 0.05247498];
  const W2 = [1.08574119, 0.27294415, -0.08816171, 0.11499439, -0.19938239, -0.21291633, -0.07335598, 0.05102684, 0.15453498, 1.29770783, -0.19157424, -0.04733362, -0.4025474, 0.37928757, -0.42098816, -0.53308894, 0.14258274, 0.70824014, -0.41086387, -0.90352058, -0.18112285, 0.07427613, 0.37756045, 0.12502606, -0.13591963, -0.06648227, 0.0444981, -0.33482593, -0.04062617, -0.40058712, -0.23217808, -0.16740611, 0.59229945, 0.27680947, -0.26470904, -0.36141681, 0.30281725, 0.16107127, 0.14491523, -0.29097134, -0.26673866, 0.4234127, 0.02614764, -0.27010268, 0.07564826, 0.49210711, 0.41964731, -0.0808418, -0.4468177, -0.15823228, -0.14166713, -0.40279342, -0.1634345, 0.26598939, -0.01751108, 0.18935248, -0.33750342, -0.64726745, 0.19860688, -0.10072041, 0.48121248, -0.26526988, 0.0322166, 0.1792752, -0.14854844, -0.44966704, 0.61405285, 0.35507936, -0.07511123, -0.35155202, -0.01514639, -0.02550535, 0.52389094, -0.05813953, 0.63829906, 0.19660708, 0.26858777, -0.14343422, -0.36639704, -0.26818308, 0.34082189, 0.16974133, -0.28367221, 0.41023286, -0.52406759, 0.14730523, -0.60840703, -0.48200915, 0.3377393, 0.25235122, -0.42580495, -0.06089472, -0.02024144, 0.35519446, 0.46485212, -0.07691918, 0.25380877, -0.37540446, 0.32940098, -0.20104516, -0.2611689, -0.23296243, -0.07070221, 0.22207293, -0.24744317, -0.09078055, -0.06856221, -0.06987017, 0.32106059, 0.16301568, -0.00668169, -0.40934638, -0.06348747, 0.1801935, 0.04025676, 0.21325227, 0.23276657, 0.46852715, 0.03300513, -0.1098588, -0.59155694, 0.08930629, -0.40134005, 0.07170999, -0.0658159, 0.1111296, -0.41767858, -0.08263135, 0.02123045, 0.01549046, 0.04790395, -0.04190519, -0.18549534, -0.34313649, -0.34255245, -0.10749073, 0.38840907, -0.38961031, 0.20804721, 0.18673467, -0.22002958, -0.63127461, 0.10533067, -0.04172833, -0.25085612, 0.14965585, 0.08834531, 0.71733262, -0.16220313, 0.32674457, 0.50600173, -0.07339434, 1.20601527, -0.9076531, -0.10514765, 0.44776573, -0.04529116, -0.59079911, 0.46602974, -0.61479753, 0.15532879, -0.17151215, 0.84860123, 0.41034708, -0.19111423, 0.04033314, 0.39341553, -0.26640808, -0.38495549, 0.30617472, 0.187708, 0.26371105, -0.42100376, 0.10416518, 0.13090378, 0.53851066, -0.13785536, -0.19535119, 0.17755137, -0.56693039, 0.27819663, -0.23406631, 0.36437641, 0.5082922, 0.30334532, 0.15305908, -0.37284323, 0.06471705, 0.21384209, -0.13608709, -0.53622408, 0.76837315, 0.04811773, -0.25078788, 0.12059399, -0.1292026, -0.53392131, -0.19732319, 0.26210472, -0.01688948, 0.69105124, -1.58056993, -0.03493239, -0.11604709, -0.19741079, -0.03442191, 0.47846243, -0.52121366, -0.04481268, -0.25576978, 1.28927093, 0.26957286, -0.18212015, -0.2414929, -0.03827795, 0.23922908, 0.20439551, 0.03421438, 0.26911328, -0.21041482, -0.41285444, -0.1410382, -0.15288229, -0.04921996, -0.20354408, -0.35286944, -0.16570329, -0.14045528, 0.12688139, 0.65880688, -0.11571739, 0.00105434, -0.45348374, 0.22068957, -0.16598408, -0.03302853, 0.14159843, -0.24340221, 0.54014054, -0.09081436, 0.00129695, -0.36971739, -0.00538001, 0.2921776, 0.18928502, -0.0272717, -0.34160718, -0.37757189, -0.24901174, -0.40545254, 0.12494434, -0.23995837, -0.19038637, 0.26386768, -0.34976678, 0.2915191, 0.18375294, 0.29035211, -0.17772209, -0.20643667, -0.08950352, -0.08830209, -0.27261429, 0.43070631, -0.19108235, -0.0124257, 0.1686082, -0.32960927, -0.07430824, 0.13556274, -0.00190929, 0.14860793, 0.23406443, -0.01271269, 0.12526667, -0.11431716, -0.10597909, 0.00937724, -0.00644766, -0.141441, -0.21114006, -0.21426132, 0.0705681, -0.08091196, 0.22810774, -0.13130035, 0.20392723, -0.26120438, -0.09000863, -0.04687245, 0.17226675, 0.12520565, -0.25972953, 0.1591656, 0.21756543, -0.13123642, 0.17237942, 0.43935729, -0.24478714, -0.26245968, -0.17261323, 0.0444131, -0.16099871, -0.26239684, -0.07017134, -0.0690036, 0.26621535, 0.01140387, 0.00872029, 0.04749326, 0.37976088, -0.55860422, -0.55192013, -0.067829, 0.30722821, 0.50323846, 0.11838418, 0.04954888, 0.08856014, -0.13160133, 1.19827205, -0.88188813, -0.08523351, 0.0055614, -0.31862355, -0.80558547, 0.66492034, -0.52844045, -0.04028015, -0.41003197, 1.07166789, 0.18326593, -0.37733662, -0.3099847, 0.23725367, -0.06609738, 0.24052484, -0.19360363, -0.14731405, 0.03183963, -0.18072513, -0.23573731, -0.12620584, 0.10886264, 0.01133929, 0.12843642, -0.17980431, -0.39348223, 0.00096101, 0.06683013, 0.20202627, -0.18724728, -0.3415218, 0.00265841, -0.13264547, -0.50755975, 0.38108865, 0.38597959, -0.31897502, 0.11372419, -0.04095141, 0.33093078, 0.10263205, 0.24905528, -0.18321424, 0.90896732, -0.06238821, 0.3904486, -0.36480824, -0.08891654, 0.57717035, 0.0673158, 0.20627995, -0.18599701, -0.12354684, 0.11970104, 0.09581659, -0.31796984, 0.13354021, -0.07547773, -0.21467727, -0.37854838, -0.28383529, 0.32205521];
  const b2 = [0.18159118, 0.13074923, -0.1806983, 0.12997335, 0.18251378, -0.14826703, 0.22541986, -0.15389551, -0.0168465, 0.22411998, -0.09890166, 0.07575984, 0.12289346, -0.12123446, 0.15253202, -0.15839329];
  const W3 = [0.63328465, 0.65810547, -0.58333104, 0.68297808, -0.06001321, -0.68791495, 0.23413671, -0.81401338, -0.3174556, -0.15725028, -0.21437672, 0.00322, 0.07387369, 0.2581333, 0.51067856, -0.47916867, 0.08964725, 0.53230638, 0.21685489, 0.1441812, -0.96631165, -0.97344028, -0.15243749, 0.05312582, -0.03524841, -0.1367731, -0.16278663, -0.04209313, -0.09829228, 0.15893513, -0.02040651, 0.24587443, -0.0313039, -0.05033969, -0.07819333, -0.03594498, 0.24801138, 0.27185877, 0.02366985, -0.03648474, -0.0359507, -0.21511033, 0.26518756, 0.46318047, -0.13663972, -0.00393309, 0.06027309, -0.1427728, 0.09747296, -0.00095645, 0.14854354, 0.06795456, -0.45387299, 0.23349917, 0.09346764, 0.06340903, 0.02594641, 0.55679549, 0.02412997, -0.06698918, 0.02641783, -0.08064873, -0.19332, -0.17903636, 0.37833429, 0.69071711, 0.12035095, -0.16271312, 0.4991926, -0.3444992, -0.71795471, -0.23022288, -1.02340627, 0.37868281, -0.65617598, 0.12899496, 0.51745816, -1.20224011, 0.38261154, -0.21415341];
  const b3 = [0.14101524, -0.06252835, 0.05515229, 0.12416452, 0.17880822];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-4"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16696991, -0.07251391, -0.2168828, 0.3036222, 0.16809272, 0.28460805, -0.04166438, 0.47968636, -0.65316789, -0.84134666, -0.14173119, 0.26560759, -0.10377426, 0.08035988, 0.12425724, 0.32452985, -0.27647173, -0.11123868, -0.04600036, 0.0281014, -0.00947044, 0.07503979, 0.13281319, 0.36191177, -0.67152044, -0.46850151, -0.01167639, 0.2803319, -1.19913539, -1.04782047, -0.03555183, -0.04648532, 0.0225009, -0.24357091, -1.05673991, 0.05700647, -0.12484442, -0.19480858, -0.58471519, -0.1499737, 0.28764565, -0.28483543, -0.26197615, -0.05895301, 0.01036905, -0.06521036, -0.10576278, 0.08186413, -0.45802654, -0.06481485, -0.01324017, -0.15813584, 0.06378432, -0.24747291, -0.17581397, -0.17720651, 0.35278504, -0.25429374, -0.00150542, -0.05067204, 0.0513872, -0.25094379, -0.00235429, -0.00235575, -0.30229907, -0.25958563, -0.14607265, -0.0722902, 0.04841354, -0.06084822, -0.17499657, -0.49193455, 0.00952833, 0.21344015, -0.47830239, -0.29445138, -0.20045302, -0.03955536, 0.23376275, -0.2966064, -0.40368417, -0.68392515, 0.01536786, -0.08538592, -0.09629931, -0.24338335, -0.01480121, -0.01726573, 0.03883442, 0.36971488, 0.06297283, 0.25098838, 0.31547071, 0.0676934, 0.74353925, 0.13166846, 0.21287281, 0.03850817, 0.27745053, -0.27006488, -0.07765343, 0.09322007, 0.38209079, -0.37245191, -0.01832997, -0.04153888, -0.14751603, 0.05288601, 0.09781128, 0.01532738, 0.35918935, -0.21448295, 0.2104868, -0.14754397, -1.36431996, -0.43219107, -0.09611919, 0.50316181, 0.13781978, -0.51070332, -0.32949001, 0.21963895, 0.30011335, -0.15396032, -0.21812793, 0.16997592, -0.22240592, 0.51066451, -0.08492232, -0.35846908, -0.72046295, 0.02400361, -0.3509301, 0.12439407, -0.32706612, -0.14067637, -0.25761274, 0.44715611, 1.07025773, 0.13182633, -0.50719883, 0.47002708, -0.09300086, 0.22437595, 0.02476151, 0.06170925, 0.09372822, 0.12163894, -0.07694989, -0.11319575, 0.24020836, 0.21506694, -0.1878085, -0.00581023, -0.24528872, 0.18944167, -0.18796665, -0.52009595, -0.66561732, -0.44310195, 0.31915052, -0.1096065, -0.27501671, -0.69768037, -0.4425739, 0.28590853, -0.6529124, -0.40580972, -0.02000369, -0.17398775, 0.43323, -0.18772681, 0.06854147, -0.26804511, -0.35115461, -0.19142385, 0.03437788, -0.299493, -0.45754946, -0.00295278, 0.08143059, -0.95380538, -0.08163821, -0.44514535, 0.21885333, 0.33416542, -0.00387319, -0.00858369, 0.47662563, 0.17436188, -0.36272559, -0.20080347, 0.39661547, 0.33992924, 0.07843172, -0.4629419, -0.56145381, -0.2831284, 0.03278749, -0.2012548, 0.49144509, -1.48933625, -0.44217698, 0.14700791, 0.00188137, 0.17686054, -1.06776135, -0.30914359, 0.25763212, 0.51750275, 0.5685931, -0.20053371, -0.13546183, 0.370309, -0.19243595, -0.24091672, 0.14409764, -0.0045921, -0.27560124, 0.06777249, -0.26575982, 0.04686864, -0.25064215, 0.64266651, 0.13015609, 0.1677144, -0.07436131, 0.01013988, 0.06357737, 0.0236343, 0.11257115, 0.02558286, -0.08439366, 0.29916114, 0.10665492, 0.27038873, 0.3074661, 0.67853735, 0.18479911, 0.03034829, 0.7025451, -0.21555468, -0.03336201, 1.44848477, 0.7228501, 0.17299155, -0.14400994, -0.64174475, 0.8895495, 0.28878887, 0.35371274, -0.02987698, -0.67628939, 0.73025261, 0.44452689, 0.1215198, 0.03270968, -0.51183703, 0.37944108, -0.09832362, 0.15665689, 0.11245013, -0.05609115, 0.15104483, 0.14111587, 0.01082892, -0.06010215, 1.16725744, 0.00238502, 0.23050189, -0.2629778, -0.23730588, -0.09490716, -0.04236215, -0.22773514, 0.03832175, 0.05409679, -0.16337999, 0.73181896, -0.26053281, 0.09519328, -0.02079857, 0.41093214, 0.44248387, 0.16799908, -0.01333672, -0.22617897, 0.6476411, 0.23007708, 0.09819449, 0.24489611, -0.60891715, 0.75304256, 0.11343741, 0.13064912, -0.07000543, -0.34671381, 0.34382369, 0.00209943, -0.09770453, -0.01221395, -0.14554187, 0.15354082, -0.21512321, -0.15191347, 0.09980666, 0.23107376, -0.2303226, -0.08891717, -0.27484535, 0.12091194, -0.25142217, -0.19023925, -0.16033411, -0.18687651, 0.21603701, 0.09721349, -0.18319949, -0.21356163, -0.08362084, -0.08125166, -0.41662309, -0.39783253, 0.34156618, 0.33065495, -0.95178353, 0.84366905, -0.49765864, -0.18010074, 1.41339123, 0.7946291, 0.150399, -0.61487123, 0.06573722, 1.15809689, 0.75984938, -0.01343237, -0.38488409, -0.42800255, 0.40463388, 0.78162028, 0.00838056, -0.17852332, -0.40657733, 0.10011192, -0.63243899, -0.21880253, 0.04260806, 0.23221358, 0.10066574, -0.41423139, -0.12765171, 0.08049712, 1.95429844, -0.00260313, -0.20048565, 0.27188369, 0.0189917, 0.17920741, -0.00477723, -0.04725872, 0.52287378, 0.04766486, -0.02373728, 0.60858443, -0.42515862, -0.11719525, -0.08743832, -0.29778613, -0.48666428, 0.08357413, -0.44082098, -0.84562723, 1.30067115, -0.23777025, -0.05104294, -0.36504125, -1.31227642, 0.50932537, -0.31155317, -0.35775375, 0.19038497, -0.82852382, 0.66393526, -0.27192971, -0.67546244, -0.03235313, -0.17702787, -0.10740097, -0.22004092, -0.45522122, -0.28109097, -0.16576372, -0.13664882, -0.3122309, 0.20120898, -5.19183464, 0.1838247, -0.45139091, 0.34968349, 0.77867316, -0.06563209, 0.045492, 0.36433178, 0.79280612, 0.02739077, -0.0466727, 0.62557025, 0.55449779, -0.07411458, -0.12693615, -0.69434448, -0.28309895, -0.04441911, -0.13654621, 0.45062185, -1.12916434, -0.5032554, 0.18945523, -0.19314113, 0.9129545, -0.85053961, -0.2916347, 0.65269383, -0.37020521, 0.82515971, -0.10353648, -0.09182913, 0.51541394, -0.22968296, -0.20862189, 0.00141701, -0.54830176, -0.3845895, -0.3371224, -0.79827125, 0.23039771, 0.12226295, -0.61295964, -0.18756488, 0.0849835, -0.00425158, -0.18830219, 0.43450864, -0.02439968, -0.14805237, -0.59641246, 0.62588297, -0.35796501, -0.26696002, 0.51866604, 0.91237138, -0.44091809, 0.60529762, -0.16050761, 0.72053322, -0.56926742, 0.00529658, 0.62903292, -0.94234303, 0.16799242, -0.20542786, -0.4758799, 0.4854704, -0.97499377, 0.36214378, -0.17284759, -0.55302296, -0.33165564, -0.06934902, 0.18604119, -0.36219461, -0.62845034, -0.36309202, -0.43840289, -0.05880275, -0.27399282, -0.21453314, -0.15967041, -0.84920018, 0.08344027, -0.07531231, 0.00966525, 0.05679306, -0.30841345, -0.91589665, 0.22885657, -0.07147898, -0.06751674, 0.08529804, 0.03354777, 0.14889417, 0.01078049, 0.77900937, -0.07704101, -0.06763113, -0.34325431, 1.78155751, 1.01232586, -0.16707859, -0.11632375, -0.14256762, -0.19084915, 0.51236994, 0.23818931, -0.15875387, -0.80994433, -0.39260904, 0.74680301, -0.28863141, 0.25083907, -0.11601555, -0.58645936, 0.58848576, 0.00259028, 0.33009969, 0.28078568, 0.56908261, 0.20529206, 0.14460108, 0.08313178, -0.1838972, -0.44078381, 0.15987749, -0.29451875, -0.50763573, -0.19415852, 0.36536217, -0.2795311, -0.23020914, 0.1195568, 0.07866547, 0.31574221, 0.28229577, 0.18859987, 0.31222441, 0.47901826, 0.25782211, 0.06485747, 0.06208318, 0.07699697, -0.58895092, 0.13696644, -0.21957843, 1.35167302, 1.05287145, 0.41911317, -0.20673229, 1.07562797, 0.79341194, 0.43654794, 0.30925653, 0.16017521, 0.86328218, 0.64091486, -0.28870848, 0.31952282, 0.21558504, 0.58304942, 0.53269672, -0.16249371, 0.15026724, 0.33939058, 0.14154557, 0.10144106, 0.00656555, 0.40295367, -1.21132464, -1.72923171, 0.40798729, 0.23085314, -0.62784993, 0.32987519, -0.42545169, 0.2203548, -0.28145068, 0.16549015, -0.29473196, -0.05468132, 0.44515282, -0.04373012, 0.0849826, 0.48568427, -0.21100016, 0.28533225, 0.00462787, 0.78654642, -0.09548717, -0.82066855, 0.25059813, -0.42125394, 0.29665581, 0.04444159, -0.5337895, 0.25808337, -0.26745666, 0.34722889, -0.22416563, -0.38070847, -0.09357444, -0.30942542, 0.2507339, -0.0424697, -0.3608606, -0.22036806, 0.0035217, -0.15809604, 0.03927281, -0.00938424, -0.06013908, 0.49125395, 2.03911799, 0.21450224, 0.24159407, 0.15360971, 0.12543795, 0.04427504, 0.24638785, -0.17798262, -0.06514217, 0.04194641, 0.22931769, 0.82133097, 0.07222393, 0.03146129, -0.18108282, -0.51474258, 0.07976995, 0.11250867, -0.05176837, 0.30094094, 0.22844745, -0.50778207, -0.58228861, 0.26778805, 0.35982163, 0.46123648, 0.00282227, -0.41937761, 0.07266744, 0.29213968, 0.57464901, -0.23959964, -0.42181467, -0.32121092, -0.04370756, 0.15575905, 0.37053942, -0.20429576, -0.01043382, 0.30038349, 0.02634012, -0.19138927, 0.32951671, -1.96967694, -0.14289129, -0.15124915, 0.70318602, 0.17086913, -0.02774863, -0.27719379, 0.36180308, -0.68409109, 0.24512606, -0.18017808, 0.45716647, -0.39155789, 0.13049812, 0.34437386, 0.84224947, -0.01941149, 0.19297008, -0.16116435, 1.49942, -0.00920271, -0.03532564, 0.00552639, 0.09053378, 1.69051442, 0.36115929, 0.01787409, 0.59015941, -0.25679133, 1.27651104, -0.11786158, 0.08457797, 0.52742909, -0.30280638, -0.2316479, -0.4643401, -0.14622545, -0.00552543, -0.094927, -0.27726797, 0.08104484, -0.11360011, -0.36118028, 0.14533423, 0.25944621, -0.00326565, -0.19741274, 0.27953052, -0.25540602, -0.24449377, -0.62027069, 0.10236546, -0.1861308, -0.04147423, -0.3254367, -0.96378477, -0.35197363, 0.00045655, -0.26837079, -0.34476668, -0.11770559, -0.00602886, 0.25091636, 0.15454756, 0.43895656, -0.14055342, -0.16209425, 0.05187905, 0.14865933, 0.22650616, 0.31764861, -0.30285934, -0.28496371, 0.18277695, 0.48507435, 0.06738052, -0.2509352, 0.28665165, 0.19366735, 0.04371687, 0.13572964, 0.2190171, 0.37201669, 0.4883512, 0.15492976, -0.70847552, -1.08933444, 0.36842111, 0.0327582, -0.03246074, -0.24177183, 0.35205849, 0.18939384, -0.08321916, -0.57444417, 0.33986498, -0.18579834, -0.32955017, -0.29402282, 0.33773332, -0.11078364, 0.0951086, 0.06568543, -0.07715619, -0.13020954, -0.62492327, -0.87518823, -0.11918327, -0.16623645, -0.02641087, -0.27111308, -0.98632728, -0.00459122, -0.24461103, -0.01345897, -0.5772367, -0.62581347, 0.06007122, 0.06455581, 0.10439986, 0.01481108, -0.5158367, -0.10274367, -0.27370409, -0.13445752, -0.19712038, 0.11166795, -0.13627311, 0.76444004, 2.70569665, -0.01452113, 0.04177221, -0.09109909, -0.36607674, 0.01465089, 0.04278046, 0.14255929, 0.05637018, 0.19607433, 0.06010088, 0.38713616, 0.27902532, -0.20994366, 0.00853533, 0.33871351, 0.07774148, 0.03046234, 0.16041719, 0.44611599, 0.24758303, -0.12614456, 0.19408098, -0.02776688, 0.22649552, 0.05083633, -0.32456358, 0.06842645, -0.0002137, 0.26011125, -0.08629718, -0.1203229, 0.17185713, -0.18987753, -0.25493439, 0.12389653, 0.0665237, -0.19129477, -0.32169718, 0.19020889, -0.55258371, -0.29956329, 0.75352807, 0.91369393, -0.17413508, -0.32119318, 0.4138767, -0.3757014, -0.02626034, -0.1985431, -0.10810852, 0.04472789, 0.08563015, -0.08893828, -0.31949069, 0.39969434, -0.32948539, -0.37727481, 0.65504146, 0.1031571, -0.43851898, -0.05601487, 1.0742807, 1.11294547, -0.10085743, 0.11218563, 0.04776663, 0.21038495, 1.00428962, -0.13040614, 0.03650264, 0.11891836, 1.13820699, -0.10166036, 0.02213477, 0.22349314, 0.0655658, 0.1268899, 0.31235819, 0.02295054, 0.31927889, 0.25102134, 0.45862747, -0.15159251, 0.25095133, -0.48794174, -1.09296916, -0.20917865, 0.09159233, 0.0610243, 0.25290571, -0.1698787, 0.11057861, 0.37819613, -0.46963656, -0.03491324, -0.08409002, -0.05482648, -0.47368276, 0.42193116, 0.34908551, 0.58054521, 0.13314218, 0.18163395, 0.15030515, -0.05496039, 0.34023351, 0.48482938, -0.35164312, 0.13481835, 0.05268316, 0.38973279, 0.34689121, -0.11622239, 0.70699272, 0.03526073, -0.19280017, 0.36103787, -0.02742246, -0.00244491, -0.0413123, -0.05309919, 0.1566742, 0.19727131, 0.38320555, 0.33928477, 0.46788532, 0.02879197, -0.07859224, -0.35925993, 0.10991527, 0.31060592, -0.10646397, -0.41218936, 0.05087348, 0.16939289, -0.05193487, -0.85623841, 0.00930045, -0.0105953, -0.35433351, -0.04543242, 0.28314322, -0.02799066, 0.30088815, -0.42843727, 0.15724924, 0.41758743, -0.98700487, -0.23653581, 0.05866727, 0.08004812, 0.10489386, -0.33037076, 0.01109575, -0.17072772, -0.18717068, 0.11013724, -0.05353382, -0.12205128, -0.14501877, 0.23374759, 0.18917979, -0.22375887, -0.34658173, 0.25323533, 0.03889627, -0.09650188, 0.33962366, 0.20875381, 0.29878415, 1.14358782, 0.31278232, -0.10098919, 0.03535645, -0.06695637, 0.34928457, -0.29107778, -0.1213437, 0.20878566, -0.01722285, 0.21160002, -0.26719782, 0.72905218, 1.42253175, -0.14591433, -0.04163039, 1.33701861, 1.11241609, 0.1298302, 0.16069599, 0.0311014, -0.14055158, -0.90727859, 0.01024169, 0.35632798, 0.66130291, 0.09579255, -0.61962868, -0.02112925, 0.6033547, 2.03345372, 0.350862, -0.58438712, 0.17287153, 0.11603444, 0.15657411, 0.24533863, 0.08752834, -0.01254151, 0.13468903, 0.46169179, -0.0346732, 0.10563109, -0.08026043, -0.17172551, 0.14834587, -0.09634177, 0.01096443, -0.93570844, 0.45225537, 0.23387354, -0.21412839, -0.53780805, 0.29753452, 0.30523822, -1.37084426, -1.99951674, 0.4978767, -0.07915112, -0.44809584, -0.43565209, -0.13810274, -0.49700245, 0.15646195, -1.33308318, 0.93837911, 0.36822838, -0.06555656, 0.12743506, -0.78915555, 0.64441212, 0.19242776, 0.03990934, -0.26013101, -1.39555314, 0.71649525, -0.10303198, 0.25608126];
  const b1 = [0.22655134, -0.14020637, 0.14655259, -0.19228163, -0.21744217, -0.12310314, 0.12513495, -0.14902083, 0.0579311, -0.35205919, -0.25390085, -0.11231621, 0.07913164, 0.29131966, -0.05362356, -0.03963334, -0.12526769, 0.19400729, -0.17127596, -0.16537223, 0.16710757, 0.128486, 0.03969586, 0.05247498];
  const W2 = [1.08574119, 0.27294415, -0.08816171, 0.11499439, -0.19938239, -0.21291633, -0.07335598, 0.05102684, 0.15453498, 1.29770783, -0.19157424, -0.04733362, -0.4025474, 0.37928757, -0.42098816, -0.53308894, 0.14258274, 0.70824014, -0.41086387, -0.90352058, -0.18112285, 0.07427613, 0.37756045, 0.12502606, -0.13591963, -0.06648227, 0.0444981, -0.33482593, -0.04062617, -0.40058712, -0.23217808, -0.16740611, 0.59229945, 0.27680947, -0.26470904, -0.36141681, 0.30281725, 0.16107127, 0.14491523, -0.29097134, -0.26673866, 0.4234127, 0.02614764, -0.27010268, 0.07564826, 0.49210711, 0.41964731, -0.0808418, -0.4468177, -0.15823228, -0.14166713, -0.40279342, -0.1634345, 0.26598939, -0.01751108, 0.18935248, -0.33750342, -0.64726745, 0.19860688, -0.10072041, 0.48121248, -0.26526988, 0.0322166, 0.1792752, -0.14854844, -0.44966704, 0.61405285, 0.35507936, -0.07511123, -0.35155202, -0.01514639, -0.02550535, 0.52389094, -0.05813953, 0.63829906, 0.19660708, 0.26858777, -0.14343422, -0.36639704, -0.26818308, 0.34082189, 0.16974133, -0.28367221, 0.41023286, -0.52406759, 0.14730523, -0.60840703, -0.48200915, 0.3377393, 0.25235122, -0.42580495, -0.06089472, -0.02024144, 0.35519446, 0.46485212, -0.07691918, 0.25380877, -0.37540446, 0.32940098, -0.20104516, -0.2611689, -0.23296243, -0.07070221, 0.22207293, -0.24744317, -0.09078055, -0.06856221, -0.06987017, 0.32106059, 0.16301568, -0.00668169, -0.40934638, -0.06348747, 0.1801935, 0.04025676, 0.21325227, 0.23276657, 0.46852715, 0.03300513, -0.1098588, -0.59155694, 0.08930629, -0.40134005, 0.07170999, -0.0658159, 0.1111296, -0.41767858, -0.08263135, 0.02123045, 0.01549046, 0.04790395, -0.04190519, -0.18549534, -0.34313649, -0.34255245, -0.10749073, 0.38840907, -0.38961031, 0.20804721, 0.18673467, -0.22002958, -0.63127461, 0.10533067, -0.04172833, -0.25085612, 0.14965585, 0.08834531, 0.71733262, -0.16220313, 0.32674457, 0.50600173, -0.07339434, 1.20601527, -0.9076531, -0.10514765, 0.44776573, -0.04529116, -0.59079911, 0.46602974, -0.61479753, 0.15532879, -0.17151215, 0.84860123, 0.41034708, -0.19111423, 0.04033314, 0.39341553, -0.26640808, -0.38495549, 0.30617472, 0.187708, 0.26371105, -0.42100376, 0.10416518, 0.13090378, 0.53851066, -0.13785536, -0.19535119, 0.17755137, -0.56693039, 0.27819663, -0.23406631, 0.36437641, 0.5082922, 0.30334532, 0.15305908, -0.37284323, 0.06471705, 0.21384209, -0.13608709, -0.53622408, 0.76837315, 0.04811773, -0.25078788, 0.12059399, -0.1292026, -0.53392131, -0.19732319, 0.26210472, -0.01688948, 0.69105124, -1.58056993, -0.03493239, -0.11604709, -0.19741079, -0.03442191, 0.47846243, -0.52121366, -0.04481268, -0.25576978, 1.28927093, 0.26957286, -0.18212015, -0.2414929, -0.03827795, 0.23922908, 0.20439551, 0.03421438, 0.26911328, -0.21041482, -0.41285444, -0.1410382, -0.15288229, -0.04921996, -0.20354408, -0.35286944, -0.16570329, -0.14045528, 0.12688139, 0.65880688, -0.11571739, 0.00105434, -0.45348374, 0.22068957, -0.16598408, -0.03302853, 0.14159843, -0.24340221, 0.54014054, -0.09081436, 0.00129695, -0.36971739, -0.00538001, 0.2921776, 0.18928502, -0.0272717, -0.34160718, -0.37757189, -0.24901174, -0.40545254, 0.12494434, -0.23995837, -0.19038637, 0.26386768, -0.34976678, 0.2915191, 0.18375294, 0.29035211, -0.17772209, -0.20643667, -0.08950352, -0.08830209, -0.27261429, 0.43070631, -0.19108235, -0.0124257, 0.1686082, -0.32960927, -0.07430824, 0.13556274, -0.00190929, 0.14860793, 0.23406443, -0.01271269, 0.12526667, -0.11431716, -0.10597909, 0.00937724, -0.00644766, -0.141441, -0.21114006, -0.21426132, 0.0705681, -0.08091196, 0.22810774, -0.13130035, 0.20392723, -0.26120438, -0.09000863, -0.04687245, 0.17226675, 0.12520565, -0.25972953, 0.1591656, 0.21756543, -0.13123642, 0.17237942, 0.43935729, -0.24478714, -0.26245968, -0.17261323, 0.0444131, -0.16099871, -0.26239684, -0.07017134, -0.0690036, 0.26621535, 0.01140387, 0.00872029, 0.04749326, 0.37976088, -0.55860422, -0.55192013, -0.067829, 0.30722821, 0.50323846, 0.11838418, 0.04954888, 0.08856014, -0.13160133, 1.19827205, -0.88188813, -0.08523351, 0.0055614, -0.31862355, -0.80558547, 0.66492034, -0.52844045, -0.04028015, -0.41003197, 1.07166789, 0.18326593, -0.37733662, -0.3099847, 0.23725367, -0.06609738, 0.24052484, -0.19360363, -0.14731405, 0.03183963, -0.18072513, -0.23573731, -0.12620584, 0.10886264, 0.01133929, 0.12843642, -0.17980431, -0.39348223, 0.00096101, 0.06683013, 0.20202627, -0.18724728, -0.3415218, 0.00265841, -0.13264547, -0.50755975, 0.38108865, 0.38597959, -0.31897502, 0.11372419, -0.04095141, 0.33093078, 0.10263205, 0.24905528, -0.18321424, 0.90896732, -0.06238821, 0.3904486, -0.36480824, -0.08891654, 0.57717035, 0.0673158, 0.20627995, -0.18599701, -0.12354684, 0.11970104, 0.09581659, -0.31796984, 0.13354021, -0.07547773, -0.21467727, -0.37854838, -0.28383529, 0.32205521];
  const b2 = [0.18159118, 0.13074923, -0.1806983, 0.12997335, 0.18251378, -0.14826703, 0.22541986, -0.15389551, -0.0168465, 0.22411998, -0.09890166, 0.07575984, 0.12289346, -0.12123446, 0.15253202, -0.15839329];
  const W3 = [0.63328465, 0.65810547, -0.58333104, 0.68297808, -0.06001321, -0.68791495, 0.23413671, -0.81401338, -0.3174556, -0.15725028, -0.21437672, 0.00322, 0.07387369, 0.2581333, 0.51067856, -0.47916867, 0.08964725, 0.53230638, 0.21685489, 0.1441812, -0.96631165, -0.97344028, -0.15243749, 0.05312582, -0.03524841, -0.1367731, -0.16278663, -0.04209313, -0.09829228, 0.15893513, -0.02040651, 0.24587443, -0.0313039, -0.05033969, -0.07819333, -0.03594498, 0.24801138, 0.27185877, 0.02366985, -0.03648474, -0.0359507, -0.21511033, 0.26518756, 0.46318047, -0.13663972, -0.00393309, 0.06027309, -0.1427728, 0.09747296, -0.00095645, 0.14854354, 0.06795456, -0.45387299, 0.23349917, 0.09346764, 0.06340903, 0.02594641, 0.55679549, 0.02412997, -0.06698918, 0.02641783, -0.08064873, -0.19332, -0.17903636, 0.37833429, 0.69071711, 0.12035095, -0.16271312, 0.4991926, -0.3444992, -0.71795471, -0.23022288, -1.02340627, 0.37868281, -0.65617598, 0.12899496, 0.51745816, -1.20224011, 0.38261154, -0.21415341];
  const b3 = [0.14101524, -0.06252835, 0.05515229, 0.12416452, 0.17880822];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-5"; }
function type(){ return Type.DEALER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16696991, -0.07251391, -0.2168828, 0.3036222, 0.16809272, 0.28460805, -0.04166438, 0.47968636, -0.65316789, -0.84134666, -0.14173119, 0.26560759, -0.10377426, 0.08035988, 0.12425724, 0.32452985, -0.27647173, -0.11123868, -0.04600036, 0.0281014, -0.00947044, 0.07503979, 0.13281319, 0.36191177, -0.67152044, -0.46850151, -0.01167639, 0.2803319, -1.19913539, -1.04782047, -0.03555183, -0.04648532, 0.0225009, -0.24357091, -1.05673991, 0.05700647, -0.12484442, -0.19480858, -0.58471519, -0.1499737, 0.28764565, -0.28483543, -0.26197615, -0.05895301, 0.01036905, -0.06521036, -0.10576278, 0.08186413, -0.45802654, -0.06481485, -0.01324017, -0.15813584, 0.06378432, -0.24747291, -0.17581397, -0.17720651, 0.35278504, -0.25429374, -0.00150542, -0.05067204, 0.0513872, -0.25094379, -0.00235429, -0.00235575, -0.30229907, -0.25958563, -0.14607265, -0.0722902, 0.04841354, -0.06084822, -0.17499657, -0.49193455, 0.00952833, 0.21344015, -0.47830239, -0.29445138, -0.20045302, -0.03955536, 0.23376275, -0.2966064, -0.40368417, -0.68392515, 0.01536786, -0.08538592, -0.09629931, -0.24338335, -0.01480121, -0.01726573, 0.03883442, 0.36971488, 0.06297283, 0.25098838, 0.31547071, 0.0676934, 0.74353925, 0.13166846, 0.21287281, 0.03850817, 0.27745053, -0.27006488, -0.07765343, 0.09322007, 0.38209079, -0.37245191, -0.01832997, -0.04153888, -0.14751603, 0.05288601, 0.09781128, 0.01532738, 0.35918935, -0.21448295, 0.2104868, -0.14754397, -1.36431996, -0.43219107, -0.09611919, 0.50316181, 0.13781978, -0.51070332, -0.32949001, 0.21963895, 0.30011335, -0.15396032, -0.21812793, 0.16997592, -0.22240592, 0.51066451, -0.08492232, -0.35846908, -0.72046295, 0.02400361, -0.3509301, 0.12439407, -0.32706612, -0.14067637, -0.25761274, 0.44715611, 1.07025773, 0.13182633, -0.50719883, 0.47002708, -0.09300086, 0.22437595, 0.02476151, 0.06170925, 0.09372822, 0.12163894, -0.07694989, -0.11319575, 0.24020836, 0.21506694, -0.1878085, -0.00581023, -0.24528872, 0.18944167, -0.18796665, -0.52009595, -0.66561732, -0.44310195, 0.31915052, -0.1096065, -0.27501671, -0.69768037, -0.4425739, 0.28590853, -0.6529124, -0.40580972, -0.02000369, -0.17398775, 0.43323, -0.18772681, 0.06854147, -0.26804511, -0.35115461, -0.19142385, 0.03437788, -0.299493, -0.45754946, -0.00295278, 0.08143059, -0.95380538, -0.08163821, -0.44514535, 0.21885333, 0.33416542, -0.00387319, -0.00858369, 0.47662563, 0.17436188, -0.36272559, -0.20080347, 0.39661547, 0.33992924, 0.07843172, -0.4629419, -0.56145381, -0.2831284, 0.03278749, -0.2012548, 0.49144509, -1.48933625, -0.44217698, 0.14700791, 0.00188137, 0.17686054, -1.06776135, -0.30914359, 0.25763212, 0.51750275, 0.5685931, -0.20053371, -0.13546183, 0.370309, -0.19243595, -0.24091672, 0.14409764, -0.0045921, -0.27560124, 0.06777249, -0.26575982, 0.04686864, -0.25064215, 0.64266651, 0.13015609, 0.1677144, -0.07436131, 0.01013988, 0.06357737, 0.0236343, 0.11257115, 0.02558286, -0.08439366, 0.29916114, 0.10665492, 0.27038873, 0.3074661, 0.67853735, 0.18479911, 0.03034829, 0.7025451, -0.21555468, -0.03336201, 1.44848477, 0.7228501, 0.17299155, -0.14400994, -0.64174475, 0.8895495, 0.28878887, 0.35371274, -0.02987698, -0.67628939, 0.73025261, 0.44452689, 0.1215198, 0.03270968, -0.51183703, 0.37944108, -0.09832362, 0.15665689, 0.11245013, -0.05609115, 0.15104483, 0.14111587, 0.01082892, -0.06010215, 1.16725744, 0.00238502, 0.23050189, -0.2629778, -0.23730588, -0.09490716, -0.04236215, -0.22773514, 0.03832175, 0.05409679, -0.16337999, 0.73181896, -0.26053281, 0.09519328, -0.02079857, 0.41093214, 0.44248387, 0.16799908, -0.01333672, -0.22617897, 0.6476411, 0.23007708, 0.09819449, 0.24489611, -0.60891715, 0.75304256, 0.11343741, 0.13064912, -0.07000543, -0.34671381, 0.34382369, 0.00209943, -0.09770453, -0.01221395, -0.14554187, 0.15354082, -0.21512321, -0.15191347, 0.09980666, 0.23107376, -0.2303226, -0.08891717, -0.27484535, 0.12091194, -0.25142217, -0.19023925, -0.16033411, -0.18687651, 0.21603701, 0.09721349, -0.18319949, -0.21356163, -0.08362084, -0.08125166, -0.41662309, -0.39783253, 0.34156618, 0.33065495, -0.95178353, 0.84366905, -0.49765864, -0.18010074, 1.41339123, 0.7946291, 0.150399, -0.61487123, 0.06573722, 1.15809689, 0.75984938, -0.01343237, -0.38488409, -0.42800255, 0.40463388, 0.78162028, 0.00838056, -0.17852332, -0.40657733, 0.10011192, -0.63243899, -0.21880253, 0.04260806, 0.23221358, 0.10066574, -0.41423139, -0.12765171, 0.08049712, 1.95429844, -0.00260313, -0.20048565, 0.27188369, 0.0189917, 0.17920741, -0.00477723, -0.04725872, 0.52287378, 0.04766486, -0.02373728, 0.60858443, -0.42515862, -0.11719525, -0.08743832, -0.29778613, -0.48666428, 0.08357413, -0.44082098, -0.84562723, 1.30067115, -0.23777025, -0.05104294, -0.36504125, -1.31227642, 0.50932537, -0.31155317, -0.35775375, 0.19038497, -0.82852382, 0.66393526, -0.27192971, -0.67546244, -0.03235313, -0.17702787, -0.10740097, -0.22004092, -0.45522122, -0.28109097, -0.16576372, -0.13664882, -0.3122309, 0.20120898, -5.19183464, 0.1838247, -0.45139091, 0.34968349, 0.77867316, -0.06563209, 0.045492, 0.36433178, 0.79280612, 0.02739077, -0.0466727, 0.62557025, 0.55449779, -0.07411458, -0.12693615, -0.69434448, -0.28309895, -0.04441911, -0.13654621, 0.45062185, -1.12916434, -0.5032554, 0.18945523, -0.19314113, 0.9129545, -0.85053961, -0.2916347, 0.65269383, -0.37020521, 0.82515971, -0.10353648, -0.09182913, 0.51541394, -0.22968296, -0.20862189, 0.00141701, -0.54830176, -0.3845895, -0.3371224, -0.79827125, 0.23039771, 0.12226295, -0.61295964, -0.18756488, 0.0849835, -0.00425158, -0.18830219, 0.43450864, -0.02439968, -0.14805237, -0.59641246, 0.62588297, -0.35796501, -0.26696002, 0.51866604, 0.91237138, -0.44091809, 0.60529762, -0.16050761, 0.72053322, -0.56926742, 0.00529658, 0.62903292, -0.94234303, 0.16799242, -0.20542786, -0.4758799, 0.4854704, -0.97499377, 0.36214378, -0.17284759, -0.55302296, -0.33165564, -0.06934902, 0.18604119, -0.36219461, -0.62845034, -0.36309202, -0.43840289, -0.05880275, -0.27399282, -0.21453314, -0.15967041, -0.84920018, 0.08344027, -0.07531231, 0.00966525, 0.05679306, -0.30841345, -0.91589665, 0.22885657, -0.07147898, -0.06751674, 0.08529804, 0.03354777, 0.14889417, 0.01078049, 0.77900937, -0.07704101, -0.06763113, -0.34325431, 1.78155751, 1.01232586, -0.16707859, -0.11632375, -0.14256762, -0.19084915, 0.51236994, 0.23818931, -0.15875387, -0.80994433, -0.39260904, 0.74680301, -0.28863141, 0.25083907, -0.11601555, -0.58645936, 0.58848576, 0.00259028, 0.33009969, 0.28078568, 0.56908261, 0.20529206, 0.14460108, 0.08313178, -0.1838972, -0.44078381, 0.15987749, -0.29451875, -0.50763573, -0.19415852, 0.36536217, -0.2795311, -0.23020914, 0.1195568, 0.07866547, 0.31574221, 0.28229577, 0.18859987, 0.31222441, 0.47901826, 0.25782211, 0.06485747, 0.06208318, 0.07699697, -0.58895092, 0.13696644, -0.21957843, 1.35167302, 1.05287145, 0.41911317, -0.20673229, 1.07562797, 0.79341194, 0.43654794, 0.30925653, 0.16017521, 0.86328218, 0.64091486, -0.28870848, 0.31952282, 0.21558504, 0.58304942, 0.53269672, -0.16249371, 0.15026724, 0.33939058, 0.14154557, 0.10144106, 0.00656555, 0.40295367, -1.21132464, -1.72923171, 0.40798729, 0.23085314, -0.62784993, 0.32987519, -0.42545169, 0.2203548, -0.28145068, 0.16549015, -0.29473196, -0.05468132, 0.44515282, -0.04373012, 0.0849826, 0.48568427, -0.21100016, 0.28533225, 0.00462787, 0.78654642, -0.09548717, -0.82066855, 0.25059813, -0.42125394, 0.29665581, 0.04444159, -0.5337895, 0.25808337, -0.26745666, 0.34722889, -0.22416563, -0.38070847, -0.09357444, -0.30942542, 0.2507339, -0.0424697, -0.3608606, -0.22036806, 0.0035217, -0.15809604, 0.03927281, -0.00938424, -0.06013908, 0.49125395, 2.03911799, 0.21450224, 0.24159407, 0.15360971, 0.12543795, 0.04427504, 0.24638785, -0.17798262, -0.06514217, 0.04194641, 0.22931769, 0.82133097, 0.07222393, 0.03146129, -0.18108282, -0.51474258, 0.07976995, 0.11250867, -0.05176837, 0.30094094, 0.22844745, -0.50778207, -0.58228861, 0.26778805, 0.35982163, 0.46123648, 0.00282227, -0.41937761, 0.07266744, 0.29213968, 0.57464901, -0.23959964, -0.42181467, -0.32121092, -0.04370756, 0.15575905, 0.37053942, -0.20429576, -0.01043382, 0.30038349, 0.02634012, -0.19138927, 0.32951671, -1.96967694, -0.14289129, -0.15124915, 0.70318602, 0.17086913, -0.02774863, -0.27719379, 0.36180308, -0.68409109, 0.24512606, -0.18017808, 0.45716647, -0.39155789, 0.13049812, 0.34437386, 0.84224947, -0.01941149, 0.19297008, -0.16116435, 1.49942, -0.00920271, -0.03532564, 0.00552639, 0.09053378, 1.69051442, 0.36115929, 0.01787409, 0.59015941, -0.25679133, 1.27651104, -0.11786158, 0.08457797, 0.52742909, -0.30280638, -0.2316479, -0.4643401, -0.14622545, -0.00552543, -0.094927, -0.27726797, 0.08104484, -0.11360011, -0.36118028, 0.14533423, 0.25944621, -0.00326565, -0.19741274, 0.27953052, -0.25540602, -0.24449377, -0.62027069, 0.10236546, -0.1861308, -0.04147423, -0.3254367, -0.96378477, -0.35197363, 0.00045655, -0.26837079, -0.34476668, -0.11770559, -0.00602886, 0.25091636, 0.15454756, 0.43895656, -0.14055342, -0.16209425, 0.05187905, 0.14865933, 0.22650616, 0.31764861, -0.30285934, -0.28496371, 0.18277695, 0.48507435, 0.06738052, -0.2509352, 0.28665165, 0.19366735, 0.04371687, 0.13572964, 0.2190171, 0.37201669, 0.4883512, 0.15492976, -0.70847552, -1.08933444, 0.36842111, 0.0327582, -0.03246074, -0.24177183, 0.35205849, 0.18939384, -0.08321916, -0.57444417, 0.33986498, -0.18579834, -0.32955017, -0.29402282, 0.33773332, -0.11078364, 0.0951086, 0.06568543, -0.07715619, -0.13020954, -0.62492327, -0.87518823, -0.11918327, -0.16623645, -0.02641087, -0.27111308, -0.98632728, -0.00459122, -0.24461103, -0.01345897, -0.5772367, -0.62581347, 0.06007122, 0.06455581, 0.10439986, 0.01481108, -0.5158367, -0.10274367, -0.27370409, -0.13445752, -0.19712038, 0.11166795, -0.13627311, 0.76444004, 2.70569665, -0.01452113, 0.04177221, -0.09109909, -0.36607674, 0.01465089, 0.04278046, 0.14255929, 0.05637018, 0.19607433, 0.06010088, 0.38713616, 0.27902532, -0.20994366, 0.00853533, 0.33871351, 0.07774148, 0.03046234, 0.16041719, 0.44611599, 0.24758303, -0.12614456, 0.19408098, -0.02776688, 0.22649552, 0.05083633, -0.32456358, 0.06842645, -0.0002137, 0.26011125, -0.08629718, -0.1203229, 0.17185713, -0.18987753, -0.25493439, 0.12389653, 0.0665237, -0.19129477, -0.32169718, 0.19020889, -0.55258371, -0.29956329, 0.75352807, 0.91369393, -0.17413508, -0.32119318, 0.4138767, -0.3757014, -0.02626034, -0.1985431, -0.10810852, 0.04472789, 0.08563015, -0.08893828, -0.31949069, 0.39969434, -0.32948539, -0.37727481, 0.65504146, 0.1031571, -0.43851898, -0.05601487, 1.0742807, 1.11294547, -0.10085743, 0.11218563, 0.04776663, 0.21038495, 1.00428962, -0.13040614, 0.03650264, 0.11891836, 1.13820699, -0.10166036, 0.02213477, 0.22349314, 0.0655658, 0.1268899, 0.31235819, 0.02295054, 0.31927889, 0.25102134, 0.45862747, -0.15159251, 0.25095133, -0.48794174, -1.09296916, -0.20917865, 0.09159233, 0.0610243, 0.25290571, -0.1698787, 0.11057861, 0.37819613, -0.46963656, -0.03491324, -0.08409002, -0.05482648, -0.47368276, 0.42193116, 0.34908551, 0.58054521, 0.13314218, 0.18163395, 0.15030515, -0.05496039, 0.34023351, 0.48482938, -0.35164312, 0.13481835, 0.05268316, 0.38973279, 0.34689121, -0.11622239, 0.70699272, 0.03526073, -0.19280017, 0.36103787, -0.02742246, -0.00244491, -0.0413123, -0.05309919, 0.1566742, 0.19727131, 0.38320555, 0.33928477, 0.46788532, 0.02879197, -0.07859224, -0.35925993, 0.10991527, 0.31060592, -0.10646397, -0.41218936, 0.05087348, 0.16939289, -0.05193487, -0.85623841, 0.00930045, -0.0105953, -0.35433351, -0.04543242, 0.28314322, -0.02799066, 0.30088815, -0.42843727, 0.15724924, 0.41758743, -0.98700487, -0.23653581, 0.05866727, 0.08004812, 0.10489386, -0.33037076, 0.01109575, -0.17072772, -0.18717068, 0.11013724, -0.05353382, -0.12205128, -0.14501877, 0.23374759, 0.18917979, -0.22375887, -0.34658173, 0.25323533, 0.03889627, -0.09650188, 0.33962366, 0.20875381, 0.29878415, 1.14358782, 0.31278232, -0.10098919, 0.03535645, -0.06695637, 0.34928457, -0.29107778, -0.1213437, 0.20878566, -0.01722285, 0.21160002, -0.26719782, 0.72905218, 1.42253175, -0.14591433, -0.04163039, 1.33701861, 1.11241609, 0.1298302, 0.16069599, 0.0311014, -0.14055158, -0.90727859, 0.01024169, 0.35632798, 0.66130291, 0.09579255, -0.61962868, -0.02112925, 0.6033547, 2.03345372, 0.350862, -0.58438712, 0.17287153, 0.11603444, 0.15657411, 0.24533863, 0.08752834, -0.01254151, 0.13468903, 0.46169179, -0.0346732, 0.10563109, -0.08026043, -0.17172551, 0.14834587, -0.09634177, 0.01096443, -0.93570844, 0.45225537, 0.23387354, -0.21412839, -0.53780805, 0.29753452, 0.30523822, -1.37084426, -1.99951674, 0.4978767, -0.07915112, -0.44809584, -0.43565209, -0.13810274, -0.49700245, 0.15646195, -1.33308318, 0.93837911, 0.36822838, -0.06555656, 0.12743506, -0.78915555, 0.64441212, 0.19242776, 0.03990934, -0.26013101, -1.39555314, 0.71649525, -0.10303198, 0.25608126];
  const b1 = [0.22655134, -0.14020637, 0.14655259, -0.19228163, -0.21744217, -0.12310314, 0.12513495, -0.14902083, 0.0579311, -0.35205919, -0.25390085, -0.11231621, 0.07913164, 0.29131966, -0.05362356, -0.03963334, -0.12526769, 0.19400729, -0.17127596, -0.16537223, 0.16710757, 0.128486, 0.03969586, 0.05247498];
  const W2 = [1.08574119, 0.27294415, -0.08816171, 0.11499439, -0.19938239, -0.21291633, -0.07335598, 0.05102684, 0.15453498, 1.29770783, -0.19157424, -0.04733362, -0.4025474, 0.37928757, -0.42098816, -0.53308894, 0.14258274, 0.70824014, -0.41086387, -0.90352058, -0.18112285, 0.07427613, 0.37756045, 0.12502606, -0.13591963, -0.06648227, 0.0444981, -0.33482593, -0.04062617, -0.40058712, -0.23217808, -0.16740611, 0.59229945, 0.27680947, -0.26470904, -0.36141681, 0.30281725, 0.16107127, 0.14491523, -0.29097134, -0.26673866, 0.4234127, 0.02614764, -0.27010268, 0.07564826, 0.49210711, 0.41964731, -0.0808418, -0.4468177, -0.15823228, -0.14166713, -0.40279342, -0.1634345, 0.26598939, -0.01751108, 0.18935248, -0.33750342, -0.64726745, 0.19860688, -0.10072041, 0.48121248, -0.26526988, 0.0322166, 0.1792752, -0.14854844, -0.44966704, 0.61405285, 0.35507936, -0.07511123, -0.35155202, -0.01514639, -0.02550535, 0.52389094, -0.05813953, 0.63829906, 0.19660708, 0.26858777, -0.14343422, -0.36639704, -0.26818308, 0.34082189, 0.16974133, -0.28367221, 0.41023286, -0.52406759, 0.14730523, -0.60840703, -0.48200915, 0.3377393, 0.25235122, -0.42580495, -0.06089472, -0.02024144, 0.35519446, 0.46485212, -0.07691918, 0.25380877, -0.37540446, 0.32940098, -0.20104516, -0.2611689, -0.23296243, -0.07070221, 0.22207293, -0.24744317, -0.09078055, -0.06856221, -0.06987017, 0.32106059, 0.16301568, -0.00668169, -0.40934638, -0.06348747, 0.1801935, 0.04025676, 0.21325227, 0.23276657, 0.46852715, 0.03300513, -0.1098588, -0.59155694, 0.08930629, -0.40134005, 0.07170999, -0.0658159, 0.1111296, -0.41767858, -0.08263135, 0.02123045, 0.01549046, 0.04790395, -0.04190519, -0.18549534, -0.34313649, -0.34255245, -0.10749073, 0.38840907, -0.38961031, 0.20804721, 0.18673467, -0.22002958, -0.63127461, 0.10533067, -0.04172833, -0.25085612, 0.14965585, 0.08834531, 0.71733262, -0.16220313, 0.32674457, 0.50600173, -0.07339434, 1.20601527, -0.9076531, -0.10514765, 0.44776573, -0.04529116, -0.59079911, 0.46602974, -0.61479753, 0.15532879, -0.17151215, 0.84860123, 0.41034708, -0.19111423, 0.04033314, 0.39341553, -0.26640808, -0.38495549, 0.30617472, 0.187708, 0.26371105, -0.42100376, 0.10416518, 0.13090378, 0.53851066, -0.13785536, -0.19535119, 0.17755137, -0.56693039, 0.27819663, -0.23406631, 0.36437641, 0.5082922, 0.30334532, 0.15305908, -0.37284323, 0.06471705, 0.21384209, -0.13608709, -0.53622408, 0.76837315, 0.04811773, -0.25078788, 0.12059399, -0.1292026, -0.53392131, -0.19732319, 0.26210472, -0.01688948, 0.69105124, -1.58056993, -0.03493239, -0.11604709, -0.19741079, -0.03442191, 0.47846243, -0.52121366, -0.04481268, -0.25576978, 1.28927093, 0.26957286, -0.18212015, -0.2414929, -0.03827795, 0.23922908, 0.20439551, 0.03421438, 0.26911328, -0.21041482, -0.41285444, -0.1410382, -0.15288229, -0.04921996, -0.20354408, -0.35286944, -0.16570329, -0.14045528, 0.12688139, 0.65880688, -0.11571739, 0.00105434, -0.45348374, 0.22068957, -0.16598408, -0.03302853, 0.14159843, -0.24340221, 0.54014054, -0.09081436, 0.00129695, -0.36971739, -0.00538001, 0.2921776, 0.18928502, -0.0272717, -0.34160718, -0.37757189, -0.24901174, -0.40545254, 0.12494434, -0.23995837, -0.19038637, 0.26386768, -0.34976678, 0.2915191, 0.18375294, 0.29035211, -0.17772209, -0.20643667, -0.08950352, -0.08830209, -0.27261429, 0.43070631, -0.19108235, -0.0124257, 0.1686082, -0.32960927, -0.07430824, 0.13556274, -0.00190929, 0.14860793, 0.23406443, -0.01271269, 0.12526667, -0.11431716, -0.10597909, 0.00937724, -0.00644766, -0.141441, -0.21114006, -0.21426132, 0.0705681, -0.08091196, 0.22810774, -0.13130035, 0.20392723, -0.26120438, -0.09000863, -0.04687245, 0.17226675, 0.12520565, -0.25972953, 0.1591656, 0.21756543, -0.13123642, 0.17237942, 0.43935729, -0.24478714, -0.26245968, -0.17261323, 0.0444131, -0.16099871, -0.26239684, -0.07017134, -0.0690036, 0.26621535, 0.01140387, 0.00872029, 0.04749326, 0.37976088, -0.55860422, -0.55192013, -0.067829, 0.30722821, 0.50323846, 0.11838418, 0.04954888, 0.08856014, -0.13160133, 1.19827205, -0.88188813, -0.08523351, 0.0055614, -0.31862355, -0.80558547, 0.66492034, -0.52844045, -0.04028015, -0.41003197, 1.07166789, 0.18326593, -0.37733662, -0.3099847, 0.23725367, -0.06609738, 0.24052484, -0.19360363, -0.14731405, 0.03183963, -0.18072513, -0.23573731, -0.12620584, 0.10886264, 0.01133929, 0.12843642, -0.17980431, -0.39348223, 0.00096101, 0.06683013, 0.20202627, -0.18724728, -0.3415218, 0.00265841, -0.13264547, -0.50755975, 0.38108865, 0.38597959, -0.31897502, 0.11372419, -0.04095141, 0.33093078, 0.10263205, 0.24905528, -0.18321424, 0.90896732, -0.06238821, 0.3904486, -0.36480824, -0.08891654, 0.57717035, 0.0673158, 0.20627995, -0.18599701, -0.12354684, 0.11970104, 0.09581659, -0.31796984, 0.13354021, -0.07547773, -0.21467727, -0.37854838, -0.28383529, 0.32205521];
  const b2 = [0.18159118, 0.13074923, -0.1806983, 0.12997335, 0.18251378, -0.14826703, 0.22541986, -0.15389551, -0.0168465, 0.22411998, -0.09890166, 0.07575984, 0.12289346, -0.12123446, 0.15253202, -0.15839329];
  const W3 = [0.63328465, 0.65810547, -0.58333104, 0.68297808, -0.06001321, -0.68791495, 0.23413671, -0.81401338, -0.3174556, -0.15725028, -0.21437672, 0.00322, 0.07387369, 0.2581333, 0.51067856, -0.47916867, 0.08964725, 0.53230638, 0.21685489, 0.1441812, -0.96631165, -0.97344028, -0.15243749, 0.05312582, -0.03524841, -0.1367731, -0.16278663, -0.04209313, -0.09829228, 0.15893513, -0.02040651, 0.24587443, -0.0313039, -0.05033969, -0.07819333, -0.03594498, 0.24801138, 0.27185877, 0.02366985, -0.03648474, -0.0359507, -0.21511033, 0.26518756, 0.46318047, -0.13663972, -0.00393309, 0.06027309, -0.1427728, 0.09747296, -0.00095645, 0.14854354, 0.06795456, -0.45387299, 0.23349917, 0.09346764, 0.06340903, 0.02594641, 0.55679549, 0.02412997, -0.06698918, 0.02641783, -0.08064873, -0.19332, -0.17903636, 0.37833429, 0.69071711, 0.12035095, -0.16271312, 0.4991926, -0.3444992, -0.71795471, -0.23022288, -1.02340627, 0.37868281, -0.65617598, 0.12899496, 0.51745816, -1.20224011, 0.38261154, -0.21415341];
  const b3 = [0.14101524, -0.06252835, 0.05515229, 0.12416452, 0.17880822];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}


// ===== 다음 로봇 =====

function name(){ return "DNN-6"; }
function type(){ return Type.TANKER; }
function update(tank,enemies,allies,bulletInfo){
  // ===== DNN 기반 정책 =====
  // 입력: self + 상위 K개의 enemy/allies/bullets 특징
  // 출력: [move1, move2, move3, move4, fireAngle] (각도: 0~360)

  // 고정 하이퍼파라미터(플랫폼 상수)
  const W=900, H=600; const EMAX=150, SCL=700; const VX=10, VY=10;
  const EN_K=3, AL_K=2, BL_K=3;

  // 특징 벡터 구성
  function norm(v, s){ return s ? v/s : v; }
  function angleWrap(a){ a%=360; if(a<0)a+=360; return a; }

  function nearest(arr, k){
    const tmp = arr.map((e)=>({e, d: e.distance!==undefined? e.distance : Math.hypot((e.x||0)-tank.x,(e.y||0)-tank.y)}));
    tmp.sort((a,b)=>a.d-b.d);
    const out=[]; for(let i=0;i<k;i++){ out.push(tmp[i]? tmp[i].e:null); }
    return out;
  }

  const xSelf = [
    norm(tank.x, W),
    norm(tank.y, H),
    norm(tank.health, EMAX),
    norm(tank.energy, EMAX),
    norm(tank.size, 50),
    (tank.type===0?1:0),
    (tank.type===1?1:0),
    (tank.type===2?1:0),
  ];

  const ens = nearest(enemies, EN_K);
  const als = nearest(allies, AL_K);
  const bls = nearest(bulletInfo, BL_K);

  const xEn = [];
  for(let i=0;i<EN_K;i++){
    const e = ens[i];
    if(e){
      xEn.push( norm(e.x - tank.x, W), norm(e.y - tank.y, H), norm(e.health, EMAX), norm(e.distance, SCL) );
    } else {
      xEn.push(0,0,0,0);
    }
  }

  const xAl = [];
  for(let i=0;i<AL_K;i++){
    const a = als[i];
    if(a){
      xAl.push( norm(a.x - tank.x, W), norm(a.y - tank.y, H), norm(a.health, EMAX), norm(a.distance, SCL) );
    } else {
      xAl.push(0,0,0,0);
    }
  }

  const xBl = [];
  for(let i=0;i<BL_K;i++){
    const b = bls[i];
    if(b){
      xBl.push( norm(b.x - tank.x, W), norm(b.y - tank.y, H), norm(b.vx, VX), norm(b.vy, VY), norm(b.distance, SCL) );
    } else {
      xBl.push(0,0,0,0,0);
    }
  }

  const X = [].concat(xSelf, xEn, xAl, xBl);

  // 네트워크 파라미터
  const W1 = [0.16696991, -0.07251391, -0.2168828, 0.3036222, 0.16809272, 0.28460805, -0.04166438, 0.47968636, -0.65316789, -0.84134666, -0.14173119, 0.26560759, -0.10377426, 0.08035988, 0.12425724, 0.32452985, -0.27647173, -0.11123868, -0.04600036, 0.0281014, -0.00947044, 0.07503979, 0.13281319, 0.36191177, -0.67152044, -0.46850151, -0.01167639, 0.2803319, -1.19913539, -1.04782047, -0.03555183, -0.04648532, 0.0225009, -0.24357091, -1.05673991, 0.05700647, -0.12484442, -0.19480858, -0.58471519, -0.1499737, 0.28764565, -0.28483543, -0.26197615, -0.05895301, 0.01036905, -0.06521036, -0.10576278, 0.08186413, -0.45802654, -0.06481485, -0.01324017, -0.15813584, 0.06378432, -0.24747291, -0.17581397, -0.17720651, 0.35278504, -0.25429374, -0.00150542, -0.05067204, 0.0513872, -0.25094379, -0.00235429, -0.00235575, -0.30229907, -0.25958563, -0.14607265, -0.0722902, 0.04841354, -0.06084822, -0.17499657, -0.49193455, 0.00952833, 0.21344015, -0.47830239, -0.29445138, -0.20045302, -0.03955536, 0.23376275, -0.2966064, -0.40368417, -0.68392515, 0.01536786, -0.08538592, -0.09629931, -0.24338335, -0.01480121, -0.01726573, 0.03883442, 0.36971488, 0.06297283, 0.25098838, 0.31547071, 0.0676934, 0.74353925, 0.13166846, 0.21287281, 0.03850817, 0.27745053, -0.27006488, -0.07765343, 0.09322007, 0.38209079, -0.37245191, -0.01832997, -0.04153888, -0.14751603, 0.05288601, 0.09781128, 0.01532738, 0.35918935, -0.21448295, 0.2104868, -0.14754397, -1.36431996, -0.43219107, -0.09611919, 0.50316181, 0.13781978, -0.51070332, -0.32949001, 0.21963895, 0.30011335, -0.15396032, -0.21812793, 0.16997592, -0.22240592, 0.51066451, -0.08492232, -0.35846908, -0.72046295, 0.02400361, -0.3509301, 0.12439407, -0.32706612, -0.14067637, -0.25761274, 0.44715611, 1.07025773, 0.13182633, -0.50719883, 0.47002708, -0.09300086, 0.22437595, 0.02476151, 0.06170925, 0.09372822, 0.12163894, -0.07694989, -0.11319575, 0.24020836, 0.21506694, -0.1878085, -0.00581023, -0.24528872, 0.18944167, -0.18796665, -0.52009595, -0.66561732, -0.44310195, 0.31915052, -0.1096065, -0.27501671, -0.69768037, -0.4425739, 0.28590853, -0.6529124, -0.40580972, -0.02000369, -0.17398775, 0.43323, -0.18772681, 0.06854147, -0.26804511, -0.35115461, -0.19142385, 0.03437788, -0.299493, -0.45754946, -0.00295278, 0.08143059, -0.95380538, -0.08163821, -0.44514535, 0.21885333, 0.33416542, -0.00387319, -0.00858369, 0.47662563, 0.17436188, -0.36272559, -0.20080347, 0.39661547, 0.33992924, 0.07843172, -0.4629419, -0.56145381, -0.2831284, 0.03278749, -0.2012548, 0.49144509, -1.48933625, -0.44217698, 0.14700791, 0.00188137, 0.17686054, -1.06776135, -0.30914359, 0.25763212, 0.51750275, 0.5685931, -0.20053371, -0.13546183, 0.370309, -0.19243595, -0.24091672, 0.14409764, -0.0045921, -0.27560124, 0.06777249, -0.26575982, 0.04686864, -0.25064215, 0.64266651, 0.13015609, 0.1677144, -0.07436131, 0.01013988, 0.06357737, 0.0236343, 0.11257115, 0.02558286, -0.08439366, 0.29916114, 0.10665492, 0.27038873, 0.3074661, 0.67853735, 0.18479911, 0.03034829, 0.7025451, -0.21555468, -0.03336201, 1.44848477, 0.7228501, 0.17299155, -0.14400994, -0.64174475, 0.8895495, 0.28878887, 0.35371274, -0.02987698, -0.67628939, 0.73025261, 0.44452689, 0.1215198, 0.03270968, -0.51183703, 0.37944108, -0.09832362, 0.15665689, 0.11245013, -0.05609115, 0.15104483, 0.14111587, 0.01082892, -0.06010215, 1.16725744, 0.00238502, 0.23050189, -0.2629778, -0.23730588, -0.09490716, -0.04236215, -0.22773514, 0.03832175, 0.05409679, -0.16337999, 0.73181896, -0.26053281, 0.09519328, -0.02079857, 0.41093214, 0.44248387, 0.16799908, -0.01333672, -0.22617897, 0.6476411, 0.23007708, 0.09819449, 0.24489611, -0.60891715, 0.75304256, 0.11343741, 0.13064912, -0.07000543, -0.34671381, 0.34382369, 0.00209943, -0.09770453, -0.01221395, -0.14554187, 0.15354082, -0.21512321, -0.15191347, 0.09980666, 0.23107376, -0.2303226, -0.08891717, -0.27484535, 0.12091194, -0.25142217, -0.19023925, -0.16033411, -0.18687651, 0.21603701, 0.09721349, -0.18319949, -0.21356163, -0.08362084, -0.08125166, -0.41662309, -0.39783253, 0.34156618, 0.33065495, -0.95178353, 0.84366905, -0.49765864, -0.18010074, 1.41339123, 0.7946291, 0.150399, -0.61487123, 0.06573722, 1.15809689, 0.75984938, -0.01343237, -0.38488409, -0.42800255, 0.40463388, 0.78162028, 0.00838056, -0.17852332, -0.40657733, 0.10011192, -0.63243899, -0.21880253, 0.04260806, 0.23221358, 0.10066574, -0.41423139, -0.12765171, 0.08049712, 1.95429844, -0.00260313, -0.20048565, 0.27188369, 0.0189917, 0.17920741, -0.00477723, -0.04725872, 0.52287378, 0.04766486, -0.02373728, 0.60858443, -0.42515862, -0.11719525, -0.08743832, -0.29778613, -0.48666428, 0.08357413, -0.44082098, -0.84562723, 1.30067115, -0.23777025, -0.05104294, -0.36504125, -1.31227642, 0.50932537, -0.31155317, -0.35775375, 0.19038497, -0.82852382, 0.66393526, -0.27192971, -0.67546244, -0.03235313, -0.17702787, -0.10740097, -0.22004092, -0.45522122, -0.28109097, -0.16576372, -0.13664882, -0.3122309, 0.20120898, -5.19183464, 0.1838247, -0.45139091, 0.34968349, 0.77867316, -0.06563209, 0.045492, 0.36433178, 0.79280612, 0.02739077, -0.0466727, 0.62557025, 0.55449779, -0.07411458, -0.12693615, -0.69434448, -0.28309895, -0.04441911, -0.13654621, 0.45062185, -1.12916434, -0.5032554, 0.18945523, -0.19314113, 0.9129545, -0.85053961, -0.2916347, 0.65269383, -0.37020521, 0.82515971, -0.10353648, -0.09182913, 0.51541394, -0.22968296, -0.20862189, 0.00141701, -0.54830176, -0.3845895, -0.3371224, -0.79827125, 0.23039771, 0.12226295, -0.61295964, -0.18756488, 0.0849835, -0.00425158, -0.18830219, 0.43450864, -0.02439968, -0.14805237, -0.59641246, 0.62588297, -0.35796501, -0.26696002, 0.51866604, 0.91237138, -0.44091809, 0.60529762, -0.16050761, 0.72053322, -0.56926742, 0.00529658, 0.62903292, -0.94234303, 0.16799242, -0.20542786, -0.4758799, 0.4854704, -0.97499377, 0.36214378, -0.17284759, -0.55302296, -0.33165564, -0.06934902, 0.18604119, -0.36219461, -0.62845034, -0.36309202, -0.43840289, -0.05880275, -0.27399282, -0.21453314, -0.15967041, -0.84920018, 0.08344027, -0.07531231, 0.00966525, 0.05679306, -0.30841345, -0.91589665, 0.22885657, -0.07147898, -0.06751674, 0.08529804, 0.03354777, 0.14889417, 0.01078049, 0.77900937, -0.07704101, -0.06763113, -0.34325431, 1.78155751, 1.01232586, -0.16707859, -0.11632375, -0.14256762, -0.19084915, 0.51236994, 0.23818931, -0.15875387, -0.80994433, -0.39260904, 0.74680301, -0.28863141, 0.25083907, -0.11601555, -0.58645936, 0.58848576, 0.00259028, 0.33009969, 0.28078568, 0.56908261, 0.20529206, 0.14460108, 0.08313178, -0.1838972, -0.44078381, 0.15987749, -0.29451875, -0.50763573, -0.19415852, 0.36536217, -0.2795311, -0.23020914, 0.1195568, 0.07866547, 0.31574221, 0.28229577, 0.18859987, 0.31222441, 0.47901826, 0.25782211, 0.06485747, 0.06208318, 0.07699697, -0.58895092, 0.13696644, -0.21957843, 1.35167302, 1.05287145, 0.41911317, -0.20673229, 1.07562797, 0.79341194, 0.43654794, 0.30925653, 0.16017521, 0.86328218, 0.64091486, -0.28870848, 0.31952282, 0.21558504, 0.58304942, 0.53269672, -0.16249371, 0.15026724, 0.33939058, 0.14154557, 0.10144106, 0.00656555, 0.40295367, -1.21132464, -1.72923171, 0.40798729, 0.23085314, -0.62784993, 0.32987519, -0.42545169, 0.2203548, -0.28145068, 0.16549015, -0.29473196, -0.05468132, 0.44515282, -0.04373012, 0.0849826, 0.48568427, -0.21100016, 0.28533225, 0.00462787, 0.78654642, -0.09548717, -0.82066855, 0.25059813, -0.42125394, 0.29665581, 0.04444159, -0.5337895, 0.25808337, -0.26745666, 0.34722889, -0.22416563, -0.38070847, -0.09357444, -0.30942542, 0.2507339, -0.0424697, -0.3608606, -0.22036806, 0.0035217, -0.15809604, 0.03927281, -0.00938424, -0.06013908, 0.49125395, 2.03911799, 0.21450224, 0.24159407, 0.15360971, 0.12543795, 0.04427504, 0.24638785, -0.17798262, -0.06514217, 0.04194641, 0.22931769, 0.82133097, 0.07222393, 0.03146129, -0.18108282, -0.51474258, 0.07976995, 0.11250867, -0.05176837, 0.30094094, 0.22844745, -0.50778207, -0.58228861, 0.26778805, 0.35982163, 0.46123648, 0.00282227, -0.41937761, 0.07266744, 0.29213968, 0.57464901, -0.23959964, -0.42181467, -0.32121092, -0.04370756, 0.15575905, 0.37053942, -0.20429576, -0.01043382, 0.30038349, 0.02634012, -0.19138927, 0.32951671, -1.96967694, -0.14289129, -0.15124915, 0.70318602, 0.17086913, -0.02774863, -0.27719379, 0.36180308, -0.68409109, 0.24512606, -0.18017808, 0.45716647, -0.39155789, 0.13049812, 0.34437386, 0.84224947, -0.01941149, 0.19297008, -0.16116435, 1.49942, -0.00920271, -0.03532564, 0.00552639, 0.09053378, 1.69051442, 0.36115929, 0.01787409, 0.59015941, -0.25679133, 1.27651104, -0.11786158, 0.08457797, 0.52742909, -0.30280638, -0.2316479, -0.4643401, -0.14622545, -0.00552543, -0.094927, -0.27726797, 0.08104484, -0.11360011, -0.36118028, 0.14533423, 0.25944621, -0.00326565, -0.19741274, 0.27953052, -0.25540602, -0.24449377, -0.62027069, 0.10236546, -0.1861308, -0.04147423, -0.3254367, -0.96378477, -0.35197363, 0.00045655, -0.26837079, -0.34476668, -0.11770559, -0.00602886, 0.25091636, 0.15454756, 0.43895656, -0.14055342, -0.16209425, 0.05187905, 0.14865933, 0.22650616, 0.31764861, -0.30285934, -0.28496371, 0.18277695, 0.48507435, 0.06738052, -0.2509352, 0.28665165, 0.19366735, 0.04371687, 0.13572964, 0.2190171, 0.37201669, 0.4883512, 0.15492976, -0.70847552, -1.08933444, 0.36842111, 0.0327582, -0.03246074, -0.24177183, 0.35205849, 0.18939384, -0.08321916, -0.57444417, 0.33986498, -0.18579834, -0.32955017, -0.29402282, 0.33773332, -0.11078364, 0.0951086, 0.06568543, -0.07715619, -0.13020954, -0.62492327, -0.87518823, -0.11918327, -0.16623645, -0.02641087, -0.27111308, -0.98632728, -0.00459122, -0.24461103, -0.01345897, -0.5772367, -0.62581347, 0.06007122, 0.06455581, 0.10439986, 0.01481108, -0.5158367, -0.10274367, -0.27370409, -0.13445752, -0.19712038, 0.11166795, -0.13627311, 0.76444004, 2.70569665, -0.01452113, 0.04177221, -0.09109909, -0.36607674, 0.01465089, 0.04278046, 0.14255929, 0.05637018, 0.19607433, 0.06010088, 0.38713616, 0.27902532, -0.20994366, 0.00853533, 0.33871351, 0.07774148, 0.03046234, 0.16041719, 0.44611599, 0.24758303, -0.12614456, 0.19408098, -0.02776688, 0.22649552, 0.05083633, -0.32456358, 0.06842645, -0.0002137, 0.26011125, -0.08629718, -0.1203229, 0.17185713, -0.18987753, -0.25493439, 0.12389653, 0.0665237, -0.19129477, -0.32169718, 0.19020889, -0.55258371, -0.29956329, 0.75352807, 0.91369393, -0.17413508, -0.32119318, 0.4138767, -0.3757014, -0.02626034, -0.1985431, -0.10810852, 0.04472789, 0.08563015, -0.08893828, -0.31949069, 0.39969434, -0.32948539, -0.37727481, 0.65504146, 0.1031571, -0.43851898, -0.05601487, 1.0742807, 1.11294547, -0.10085743, 0.11218563, 0.04776663, 0.21038495, 1.00428962, -0.13040614, 0.03650264, 0.11891836, 1.13820699, -0.10166036, 0.02213477, 0.22349314, 0.0655658, 0.1268899, 0.31235819, 0.02295054, 0.31927889, 0.25102134, 0.45862747, -0.15159251, 0.25095133, -0.48794174, -1.09296916, -0.20917865, 0.09159233, 0.0610243, 0.25290571, -0.1698787, 0.11057861, 0.37819613, -0.46963656, -0.03491324, -0.08409002, -0.05482648, -0.47368276, 0.42193116, 0.34908551, 0.58054521, 0.13314218, 0.18163395, 0.15030515, -0.05496039, 0.34023351, 0.48482938, -0.35164312, 0.13481835, 0.05268316, 0.38973279, 0.34689121, -0.11622239, 0.70699272, 0.03526073, -0.19280017, 0.36103787, -0.02742246, -0.00244491, -0.0413123, -0.05309919, 0.1566742, 0.19727131, 0.38320555, 0.33928477, 0.46788532, 0.02879197, -0.07859224, -0.35925993, 0.10991527, 0.31060592, -0.10646397, -0.41218936, 0.05087348, 0.16939289, -0.05193487, -0.85623841, 0.00930045, -0.0105953, -0.35433351, -0.04543242, 0.28314322, -0.02799066, 0.30088815, -0.42843727, 0.15724924, 0.41758743, -0.98700487, -0.23653581, 0.05866727, 0.08004812, 0.10489386, -0.33037076, 0.01109575, -0.17072772, -0.18717068, 0.11013724, -0.05353382, -0.12205128, -0.14501877, 0.23374759, 0.18917979, -0.22375887, -0.34658173, 0.25323533, 0.03889627, -0.09650188, 0.33962366, 0.20875381, 0.29878415, 1.14358782, 0.31278232, -0.10098919, 0.03535645, -0.06695637, 0.34928457, -0.29107778, -0.1213437, 0.20878566, -0.01722285, 0.21160002, -0.26719782, 0.72905218, 1.42253175, -0.14591433, -0.04163039, 1.33701861, 1.11241609, 0.1298302, 0.16069599, 0.0311014, -0.14055158, -0.90727859, 0.01024169, 0.35632798, 0.66130291, 0.09579255, -0.61962868, -0.02112925, 0.6033547, 2.03345372, 0.350862, -0.58438712, 0.17287153, 0.11603444, 0.15657411, 0.24533863, 0.08752834, -0.01254151, 0.13468903, 0.46169179, -0.0346732, 0.10563109, -0.08026043, -0.17172551, 0.14834587, -0.09634177, 0.01096443, -0.93570844, 0.45225537, 0.23387354, -0.21412839, -0.53780805, 0.29753452, 0.30523822, -1.37084426, -1.99951674, 0.4978767, -0.07915112, -0.44809584, -0.43565209, -0.13810274, -0.49700245, 0.15646195, -1.33308318, 0.93837911, 0.36822838, -0.06555656, 0.12743506, -0.78915555, 0.64441212, 0.19242776, 0.03990934, -0.26013101, -1.39555314, 0.71649525, -0.10303198, 0.25608126];
  const b1 = [0.22655134, -0.14020637, 0.14655259, -0.19228163, -0.21744217, -0.12310314, 0.12513495, -0.14902083, 0.0579311, -0.35205919, -0.25390085, -0.11231621, 0.07913164, 0.29131966, -0.05362356, -0.03963334, -0.12526769, 0.19400729, -0.17127596, -0.16537223, 0.16710757, 0.128486, 0.03969586, 0.05247498];
  const W2 = [1.08574119, 0.27294415, -0.08816171, 0.11499439, -0.19938239, -0.21291633, -0.07335598, 0.05102684, 0.15453498, 1.29770783, -0.19157424, -0.04733362, -0.4025474, 0.37928757, -0.42098816, -0.53308894, 0.14258274, 0.70824014, -0.41086387, -0.90352058, -0.18112285, 0.07427613, 0.37756045, 0.12502606, -0.13591963, -0.06648227, 0.0444981, -0.33482593, -0.04062617, -0.40058712, -0.23217808, -0.16740611, 0.59229945, 0.27680947, -0.26470904, -0.36141681, 0.30281725, 0.16107127, 0.14491523, -0.29097134, -0.26673866, 0.4234127, 0.02614764, -0.27010268, 0.07564826, 0.49210711, 0.41964731, -0.0808418, -0.4468177, -0.15823228, -0.14166713, -0.40279342, -0.1634345, 0.26598939, -0.01751108, 0.18935248, -0.33750342, -0.64726745, 0.19860688, -0.10072041, 0.48121248, -0.26526988, 0.0322166, 0.1792752, -0.14854844, -0.44966704, 0.61405285, 0.35507936, -0.07511123, -0.35155202, -0.01514639, -0.02550535, 0.52389094, -0.05813953, 0.63829906, 0.19660708, 0.26858777, -0.14343422, -0.36639704, -0.26818308, 0.34082189, 0.16974133, -0.28367221, 0.41023286, -0.52406759, 0.14730523, -0.60840703, -0.48200915, 0.3377393, 0.25235122, -0.42580495, -0.06089472, -0.02024144, 0.35519446, 0.46485212, -0.07691918, 0.25380877, -0.37540446, 0.32940098, -0.20104516, -0.2611689, -0.23296243, -0.07070221, 0.22207293, -0.24744317, -0.09078055, -0.06856221, -0.06987017, 0.32106059, 0.16301568, -0.00668169, -0.40934638, -0.06348747, 0.1801935, 0.04025676, 0.21325227, 0.23276657, 0.46852715, 0.03300513, -0.1098588, -0.59155694, 0.08930629, -0.40134005, 0.07170999, -0.0658159, 0.1111296, -0.41767858, -0.08263135, 0.02123045, 0.01549046, 0.04790395, -0.04190519, -0.18549534, -0.34313649, -0.34255245, -0.10749073, 0.38840907, -0.38961031, 0.20804721, 0.18673467, -0.22002958, -0.63127461, 0.10533067, -0.04172833, -0.25085612, 0.14965585, 0.08834531, 0.71733262, -0.16220313, 0.32674457, 0.50600173, -0.07339434, 1.20601527, -0.9076531, -0.10514765, 0.44776573, -0.04529116, -0.59079911, 0.46602974, -0.61479753, 0.15532879, -0.17151215, 0.84860123, 0.41034708, -0.19111423, 0.04033314, 0.39341553, -0.26640808, -0.38495549, 0.30617472, 0.187708, 0.26371105, -0.42100376, 0.10416518, 0.13090378, 0.53851066, -0.13785536, -0.19535119, 0.17755137, -0.56693039, 0.27819663, -0.23406631, 0.36437641, 0.5082922, 0.30334532, 0.15305908, -0.37284323, 0.06471705, 0.21384209, -0.13608709, -0.53622408, 0.76837315, 0.04811773, -0.25078788, 0.12059399, -0.1292026, -0.53392131, -0.19732319, 0.26210472, -0.01688948, 0.69105124, -1.58056993, -0.03493239, -0.11604709, -0.19741079, -0.03442191, 0.47846243, -0.52121366, -0.04481268, -0.25576978, 1.28927093, 0.26957286, -0.18212015, -0.2414929, -0.03827795, 0.23922908, 0.20439551, 0.03421438, 0.26911328, -0.21041482, -0.41285444, -0.1410382, -0.15288229, -0.04921996, -0.20354408, -0.35286944, -0.16570329, -0.14045528, 0.12688139, 0.65880688, -0.11571739, 0.00105434, -0.45348374, 0.22068957, -0.16598408, -0.03302853, 0.14159843, -0.24340221, 0.54014054, -0.09081436, 0.00129695, -0.36971739, -0.00538001, 0.2921776, 0.18928502, -0.0272717, -0.34160718, -0.37757189, -0.24901174, -0.40545254, 0.12494434, -0.23995837, -0.19038637, 0.26386768, -0.34976678, 0.2915191, 0.18375294, 0.29035211, -0.17772209, -0.20643667, -0.08950352, -0.08830209, -0.27261429, 0.43070631, -0.19108235, -0.0124257, 0.1686082, -0.32960927, -0.07430824, 0.13556274, -0.00190929, 0.14860793, 0.23406443, -0.01271269, 0.12526667, -0.11431716, -0.10597909, 0.00937724, -0.00644766, -0.141441, -0.21114006, -0.21426132, 0.0705681, -0.08091196, 0.22810774, -0.13130035, 0.20392723, -0.26120438, -0.09000863, -0.04687245, 0.17226675, 0.12520565, -0.25972953, 0.1591656, 0.21756543, -0.13123642, 0.17237942, 0.43935729, -0.24478714, -0.26245968, -0.17261323, 0.0444131, -0.16099871, -0.26239684, -0.07017134, -0.0690036, 0.26621535, 0.01140387, 0.00872029, 0.04749326, 0.37976088, -0.55860422, -0.55192013, -0.067829, 0.30722821, 0.50323846, 0.11838418, 0.04954888, 0.08856014, -0.13160133, 1.19827205, -0.88188813, -0.08523351, 0.0055614, -0.31862355, -0.80558547, 0.66492034, -0.52844045, -0.04028015, -0.41003197, 1.07166789, 0.18326593, -0.37733662, -0.3099847, 0.23725367, -0.06609738, 0.24052484, -0.19360363, -0.14731405, 0.03183963, -0.18072513, -0.23573731, -0.12620584, 0.10886264, 0.01133929, 0.12843642, -0.17980431, -0.39348223, 0.00096101, 0.06683013, 0.20202627, -0.18724728, -0.3415218, 0.00265841, -0.13264547, -0.50755975, 0.38108865, 0.38597959, -0.31897502, 0.11372419, -0.04095141, 0.33093078, 0.10263205, 0.24905528, -0.18321424, 0.90896732, -0.06238821, 0.3904486, -0.36480824, -0.08891654, 0.57717035, 0.0673158, 0.20627995, -0.18599701, -0.12354684, 0.11970104, 0.09581659, -0.31796984, 0.13354021, -0.07547773, -0.21467727, -0.37854838, -0.28383529, 0.32205521];
  const b2 = [0.18159118, 0.13074923, -0.1806983, 0.12997335, 0.18251378, -0.14826703, 0.22541986, -0.15389551, -0.0168465, 0.22411998, -0.09890166, 0.07575984, 0.12289346, -0.12123446, 0.15253202, -0.15839329];
  const W3 = [0.63328465, 0.65810547, -0.58333104, 0.68297808, -0.06001321, -0.68791495, 0.23413671, -0.81401338, -0.3174556, -0.15725028, -0.21437672, 0.00322, 0.07387369, 0.2581333, 0.51067856, -0.47916867, 0.08964725, 0.53230638, 0.21685489, 0.1441812, -0.96631165, -0.97344028, -0.15243749, 0.05312582, -0.03524841, -0.1367731, -0.16278663, -0.04209313, -0.09829228, 0.15893513, -0.02040651, 0.24587443, -0.0313039, -0.05033969, -0.07819333, -0.03594498, 0.24801138, 0.27185877, 0.02366985, -0.03648474, -0.0359507, -0.21511033, 0.26518756, 0.46318047, -0.13663972, -0.00393309, 0.06027309, -0.1427728, 0.09747296, -0.00095645, 0.14854354, 0.06795456, -0.45387299, 0.23349917, 0.09346764, 0.06340903, 0.02594641, 0.55679549, 0.02412997, -0.06698918, 0.02641783, -0.08064873, -0.19332, -0.17903636, 0.37833429, 0.69071711, 0.12035095, -0.16271312, 0.4991926, -0.3444992, -0.71795471, -0.23022288, -1.02340627, 0.37868281, -0.65617598, 0.12899496, 0.51745816, -1.20224011, 0.38261154, -0.21415341];
  const b3 = [0.14101524, -0.06252835, 0.05515229, 0.12416452, 0.17880822];

  function dotRow(mat, cols, r, vec){
    let s=0, off=r*cols;
    for(let c=0;c<cols;c++){ s += mat[off+c]*vec[c]; }
    return s;
  }
  function tanh(x){ return Math.tanh(x); }

  const IN=43, H1=24, H2=16, OUT=5;
  const h1 = new Array(H1);
  for(let i=0;i<H1;i++){ h1[i] = tanh(dotRow(W1, IN, i, X) + b1[i]); }
  const h2 = new Array(H2);
  for(let i=0;i<H2;i++){ h2[i] = tanh(dotRow(W2, H1, i, h1) + b2[i]); }
  const y = new Array(OUT);
  for(let i=0;i<OUT;i++){ y[i] = dotRow(W3, H2, i, h2) + b3[i]; }

  // 각도 변환: y in R -> [0,360)
  function toDeg(v){
    if (!(v===v) || !isFinite(v)) v = 0; // NaN/Infinity 방지
    return angleWrap((v*180/Math.PI));
  }

  const m1 = toDeg(y[0]);
  const m2 = toDeg(y[1]);
  const m3 = toDeg(y[2]);
  const m4 = toDeg(y[3]);
  const fA = toDeg(y[4]);

  // 사격 및 이동 시도 (DNN 출력만 사용)
  tank.fire(fA);
  if(tank.move(m1)) return;
  if(tank.move(m2)) return;
  if(tank.move(m3)) return;
  if(tank.move(m4)) return;
}
