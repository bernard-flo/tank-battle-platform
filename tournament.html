<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech of Tanks ÌÜ†ÎÑàÎ®ºÌä∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tournament-wrapper {
            display: flex;
            flex-direction: column;
            gap: 50px;
        }

        .round-section {
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .back-btn {
            position: fixed;
            top: 30px;
            left: 30px;
            padding: 15px 25px;
            background: #4CAF50; /* ÎÖπÏÉâ */
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
        }

        .round-title {
            text-align: center;
            font-size: 1.8em;
            color: #555;
            margin-bottom: 20px;
            padding: 10px;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            border-radius: 10px;
        }

        .matches-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }

        .score-input {
            width: 90%;
            margin: 8px auto;
            display: block;
            padding: 8px 10px;
            border: 2px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            text-align: center;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .score-input:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 5px rgba(102,126,234,0.5);
        }

        .match {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            transition: all 0.3s ease;
        }

        .match:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .match-number {
            text-align: center;
            font-size: 0.9em;
            color: #888;
            margin-bottom: 10px;
        }

        .team {
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .team:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .team.winner {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
            animation: winnerPulse 1s ease;
        }

        @keyframes winnerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .team.eliminated {
            background: #ffebee;
            color: #c62828;
            text-decoration: line-through;
            opacity: 0.7;
        }

        .winner-selector {
            margin-top: 20px;
            padding: 20px;
            background: #fff3e0;
            border-radius: 10px;
            text-align: center;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .winner-selector.active {
            display: block;
        }

        .winner-selector h3 {
            color: #f57c00;
            margin-bottom: 15px;
        }

        .winner-teams {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .winner-team-btn {
            padding: 8px 15px;
            background: white;
            border: 2px solid #f57c00;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .winner-team-btn:hover {
            background: #f57c00;
            color: white;
        }

        .winner-team-btn.selected {
            background: #ff6b6b;
            color: white;
            border-color: #ff6b6b;
        }

        .confirm-btn {
            padding: 10px 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .confirm-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .reset-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .reset-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }

        .champion {
            text-align: center;
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #ffd700, #ffed4b);
            border-radius: 20px;
            display: none;
            animation: championReveal 1s ease;
        }

        @keyframes championReveal {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .champion.active {
            display: block;
        }

        .champion h2 {
            color: #333;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .champion-name {
            font-size: 2.5em;
            color: #d4af37;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .trophy {
            font-size: 4em;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÜ Tech of Tanks ÌÜ†ÎÑàÎ®ºÌä∏ <span id="playVideoBtn" style="cursor:pointer;">üèÜ</span></h1>


        <div class="tournament-wrapper">
            <!-- Ïö∞ÏäπÌåÄ ÌëúÏãú -->
            <div class="champion" id="champion">
                <div class="trophy">üèÜ</div>
                <h2>ÌÜ†ÎÑàÎ®ºÌä∏ Ïö∞Ïäπ</h2>
                <div class="champion-name" id="championName"></div>
            </div>

            <!-- Í≤∞ÏäπÏ†Ñ -->
            <div class="round-section" id="finals" style="display: none;">
                <div class="round-title">ü•á Í≤∞ÏäπÏ†Ñ</div>
                <div class="matches-container">
                    <div class="match">
                        <div class="match-number">8Í≤ΩÍ∏∞ - FINAL</div>
                        <div class="team" onclick="selectWinner('finals', 0, 0)" id="finals-0-0">
                            <span>6Í≤ΩÍ∏∞ ÏäπÏûê</span>
                        </div>
                        <div class="team" onclick="selectWinner('finals', 0, 1)" id="finals-0-1">
                            <span>7Í≤ΩÍ∏∞ ÏäπÏûê</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÏòÅÏÉÅ Ïò§Î≤ÑÎ†àÏù¥ -->
            <!-- ÏòÅÏÉÅ Ïò§Î≤ÑÎ†àÏù¥ -->
            <div id="videoOverlay"
                 style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
            z-index:2000; justify-content:center; align-items:center;">
                <video id="winnerVideo" src="new.mp4"
                       autoplay
                       style="max-width:80%; max-height:80%; border-radius:20px; box-shadow:0 0 20px rgba(0,0,0,0.6);">
                </video>
            </div>


            <!-- 2Ï∞®Ï†Ñ (Ï§ÄÍ≤∞Ïäπ) -->
            <div class="round-section" id="semifinals" style="display: none;">
                <div class="round-title">ü•à 2Ï∞®Ï†Ñ (Ï§ÄÍ≤∞Ïäπ)</div>
                <div class="matches-container">
                    <div class="match">
                        <div class="match-number">6Í≤ΩÍ∏∞</div>
                        <div class="team" onclick="selectWinner('semifinals', 0, 0)" id="semifinals-0-0">
                            <span>ÎåÄÍ∏∞Ï§ë</span>
                        </div>
                        <div class="team" onclick="selectWinner('semifinals', 0, 1)" id="semifinals-0-1">
                            <span>ÎåÄÍ∏∞Ï§ë</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">7Í≤ΩÍ∏∞</div>
                        <div class="team" onclick="selectWinner('semifinals', 1, 0)" id="semifinals-1-0">
                            <span>ÎåÄÍ∏∞Ï§ë</span>
                        </div>
                        <div class="team" onclick="selectWinner('semifinals', 1, 1)" id="semifinals-1-1">
                            <span>ÎåÄÍ∏∞Ï§ë</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 1Ï∞®Ï†Ñ -->
            <div class="round-section" id="quarterfinals">
                <div class="round-title">ü•â 1Ï∞®Ï†Ñ</div>
                <div class="matches-container">
                    <div class="match">
                        <div class="match-number">1Í≤ΩÍ∏∞</div>
                        <input type="text" class="score-input" id="score-quarterfinals-0" placeholder="ÏäπÏûê Ï†êÏàò ÏûÖÎ†•">
                        <div class="team" onclick="selectWinner('quarterfinals', 0, 0)" id="quarterfinals-0-0">
                            <span>1ÌåÄ</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 0, 1)" id="quarterfinals-0-1">
                            <span>2ÌåÄ</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">2Í≤ΩÍ∏∞</div>
                        <input type="text" class="score-input" id="score-quarterfinals-1" placeholder="ÏäπÏûê Ï†êÏàò ÏûÖÎ†•">
                        <div class="team" onclick="selectWinner('quarterfinals', 1, 0)" id="quarterfinals-1-0">
                            <span>3ÌåÄ</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 1, 1)" id="quarterfinals-1-1">
                            <span>4ÌåÄ</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">3Í≤ΩÍ∏∞</div>
                        <input type="text" class="score-input" id="score-quarterfinals-2" placeholder="ÏäπÏûê Ï†êÏàò ÏûÖÎ†•">
                        <div class="team" onclick="selectWinner('quarterfinals', 2, 0)" id="quarterfinals-2-0">
                            <span>5ÌåÄ</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 2, 1)" id="quarterfinals-2-1">
                            <span>6ÌåÄ</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">4Í≤ΩÍ∏∞</div>
                        <input type="text" class="score-input" id="score-quarterfinals-3" placeholder="ÏäπÏûê Ï†êÏàò ÏûÖÎ†•">
                        <div class="team" onclick="selectWinner('quarterfinals', 3, 0)" id="quarterfinals-3-0">
                            <span>7ÌåÄ</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 3, 1)" id="quarterfinals-3-1">
                            <span>8ÌåÄ</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">5Í≤ΩÍ∏∞</div>
                        <input type="text" class="score-input" id="score-quarterfinals-4" placeholder="ÏäπÏûê Ï†êÏàò ÏûÖÎ†•">
                        <div class="team" onclick="selectWinner('quarterfinals', 4, 0)" id="quarterfinals-4-0">
                            <span>9ÌåÄ</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 4, 1)" id="quarterfinals-4-1">
                            <span>10ÌåÄ</span>
                        </div>
                    </div>
                </div>

                <!-- Ï∂îÍ∞Ä ÌÉàÎùΩÏûê ÏÑ†ÌÉù -->
                <div class="winner-selector" id="eliminationSelector">
                    <h3>‚ö†Ô∏è 1Ï∞®Ï†Ñ ÏäπÏûê Ï§ë 1ÌåÄÏùÑ Ï∂îÍ∞ÄÎ°ú ÌÉàÎùΩÏãúÏºúÏ£ºÏÑ∏Ïöî</h3>
                    <div class="winner-teams" id="winnerTeams"></div>
                    <button class="confirm-btn" onclick="confirmElimination()">ÌÉàÎùΩ ÌôïÏ†ï Î∞è 2Ï∞®Ï†Ñ ÏßÑÌñâ</button>
                </div>
            </div>
        </div>

        <!-- ÏïàÎÇ¥Î¨∏Íµ¨ -->
        <div class="rules-section"
             style="margin-top:50px; padding:40px; background:#fff; border-radius:20px;
            box-shadow:0 5px 20px rgba(0,0,0,0.1); max-width:800px; margin-left:auto; margin-right:auto; text-align:center;">

            <h2 style="color:#333; margin-bottom:25px; font-size:1.8em;">üìå Í≤ΩÍ∏∞Î£∞</h2>
            <ul style="list-style:none; padding:0; margin-bottom:40px; color:#444; line-height:2; font-size:1.3em;">
                <li>30Î∂Ñ ÎèôÏïà ÏΩîÎî© : ÏΩîÎî© ÌõÑ, ÌåÄÏû•Ïù¥ ÏΩîÎìúÎ•º Export ÌïòÏó¨ BernardÏóêÍ≤å DMÏúºÎ°ú Ï†úÏ∂ú</li>
                <li>1Ï∞®Ï†Ñ ÌõÑ, ÏäπÏûê 5ÌåÄ Ï§ë ÌåÄ ÏóêÎÑàÏßÄÍ∞Ä Ï†úÏùº Ï†ÅÏùÄ ÌåÄÏùÄ ÌÉàÎùΩ</li>
            </ul>

            <h2 style="color:#333; margin-bottom:25px; font-size:1.8em;">‚ö†Ô∏è Ïú†ÏùòÏÇ¨Ìï≠</h2>
            <ul style="list-style:none; padding:0; color:#444; line-height:2; font-size:1.3em;">
                <li>Ïã§Í≤© Î£∞: Ï†úÍ≥µÎêú Object ÏÜçÏÑ± Ïô∏ Ï†ëÍ∑º, Ïñ¥Î∑∞Ïßï Ïãú Ïã§Í≤©Ìå®</li>
                <li>Í≤ΩÍ∏∞Ïùò ÏäπÎ∂Ä ÏñëÏÉÅÏù¥ ÎÇòÏßÄ ÏïäÏúºÎ©¥ ÏãúÍ∞ÑÏÉÅ ÏûÑÏùò Ï¢ÖÎ£å - ÌåÄ ÏóêÎÑàÏßÄÍ∞Ä ÎßéÏùÄ ÌåÄÏù¥ ÏäπÎ¶¨</li>
                <li>Í≤∞ÏäπÏ†ÑÏùÄ 3Ìåê 2ÏÑ†ÏäπÏ†ú (Îã®, ÏãúÍ∞ÑÏÉÅ Îã®ÌåêÎßå ÏßÑÌñâÌï† Ïàò ÏûàÏùå)</li>
            </ul>
        </div>



        <!-- Í≤ΩÍ∏∞ÌôîÎ©¥ ÎèåÏïÑÍ∞ÄÍ∏∞ Î≤ÑÌäº -->
        <button class="back-btn" onclick="location.href='tank_battle_platform.html'">‚¨Ö Í≤ΩÍ∏∞ÌôîÎ©¥ ÎèåÏïÑÍ∞ÄÍ∏∞</button>
        <button class="reset-btn" onclick="resetTournament()">üîÑ Ï¥àÍ∏∞Ìôî</button>
    </div>


    <script>
        // ÌÜ†ÎÑàÎ®ºÌä∏ ÏÉÅÌÉú Í¥ÄÎ¶¨
        let tournamentState = {
            quarterfinals: {
                matches: [
                    { teams: ['1ÌåÄ', '2ÌåÄ'], winner: null },
                    { teams: ['3ÌåÄ', '4ÌåÄ'], winner: null },
                    { teams: ['5ÌåÄ', '6ÌåÄ'], winner: null },
                    { teams: ['7ÌåÄ', '8ÌåÄ'], winner: null },
                    { teams: ['9ÌåÄ', '10ÌåÄ'], winner: null }
                ],
                complete: false
            },
            eliminatedTeam: null,
            semifinals: {
                matches: [
                    { teams: ['ÎåÄÍ∏∞Ï§ë', 'ÎåÄÍ∏∞Ï§ë'], winner: null },
                    { teams: ['ÎåÄÍ∏∞Ï§ë', 'ÎåÄÍ∏∞Ï§ë'], winner: null }
                ],
                complete: false
            },
            finals: {
                matches: [
                    { teams: ['6Í≤ΩÍ∏∞ ÏäπÏûê', '7Í≤ΩÍ∏∞ ÏäπÏûê'], winner: null }
                ],
                complete: false
            }
        };

        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú ÏÉÅÌÉú Î∂àÎü¨Ïò§Í∏∞
        function loadState() {
            const saved = localStorage.getItem('tournamentState');
            if (saved) {
                tournamentState = JSON.parse(saved);
                updateUI();
            }
        }

        // ÏÉÅÌÉú Ï†ÄÏû•
        function saveState() {
            localStorage.setItem('tournamentState', JSON.stringify(tournamentState));
        }

        // Ï†êÏàò Ï†ÄÏû•
        function saveScores() {
            const scores = {};
            document.querySelectorAll(".score-input").forEach(input => {
                scores[input.id] = input.value;
            });
            localStorage.setItem("winnerScores", JSON.stringify(scores));
        }

        // Ï†êÏàò Î∂àÎü¨Ïò§Í∏∞
        function loadScores() {
            const saved = localStorage.getItem("winnerScores");
            if (saved) {
                const scores = JSON.parse(saved);
                Object.keys(scores).forEach(id => {
                    const input = document.getElementById(id);
                    if (input) input.value = scores[id];
                });
            }
        }

        // input Ïù¥Î≤§Ìä∏ ‚Üí ÏûêÎèô Ï†ÄÏû•
        document.addEventListener("input", function(e) {
            if (e.target.classList.contains("score-input")) {
                saveScores();
            }
        });

        // ÏòÅÏÉÅ Î≤ÑÌäº ÌÅ¥Î¶≠ ‚Üí Ïò§Î≤ÑÎ†àÏù¥ ÎùÑÏö∞Í≥† ÏòÅÏÉÅ Ïû¨ÏÉù
        document.getElementById("playVideoBtn").addEventListener("click", function() {
            if (document.getElementById("champion").classList.contains("active")) {
                const overlay = document.getElementById("videoOverlay");
                const video = document.getElementById("winnerVideo");
                overlay.style.display = "flex";
                video.currentTime = 0;
                video.play();
            } else {
                alert("ÏïÑÏßÅ Ïö∞ÏäπÏûêÍ∞Ä Í≤∞Ï†ïÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§!");
            }
        });

        // ÏòÅÏÉÅÏù¥ ÎÅùÎÇòÎ©¥ ÏûêÎèô Îã´Í∏∞
        document.getElementById("winnerVideo").addEventListener("ended", function() {
            document.getElementById("videoOverlay").style.display = "none";
        });

        // Ïò§Î≤ÑÎ†àÏù¥ ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
        document.getElementById("videoOverlay").addEventListener("click", function(e) {
            if (e.target.id === "videoOverlay") {
                this.style.display = "none";
                document.getElementById("winnerVideo").pause();
            }
        });


        // UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateUI() {
            // 1Ï∞®Ï†Ñ ÏóÖÎç∞Ïù¥Ìä∏
            tournamentState.quarterfinals.matches.forEach((match, matchIndex) => {
                match.teams.forEach((team, teamIndex) => {
                    const element = document.getElementById(`quarterfinals-${matchIndex}-${teamIndex}`);
                    if (element) {
                        element.querySelector('span').textContent = team;
                        element.classList.remove('winner');
                        if (match.winner === teamIndex) {
                            element.classList.add('winner');
                        }
                    }
                });
            });

            // 1Ï∞®Ï†Ñ ÏôÑÎ£å ÌôïÏù∏
            const allQuarterfinalsComplete = tournamentState.quarterfinals.matches.every(m => m.winner !== null);
            
            // 1Ï∞®Ï†ÑÏù¥ Î™®Îëê ÏôÑÎ£åÎêòÍ≥† ÏïÑÏßÅ complete ÏÉÅÌÉúÍ∞Ä ÏïÑÎãê ÎïåÎßå ÌÉàÎùΩÏûê ÏÑ†ÌÉù UI ÌëúÏãú
            if (allQuarterfinalsComplete && !tournamentState.quarterfinals.complete) {
                showEliminationSelector();
            } else if (!allQuarterfinalsComplete) {
                // 1Ï∞®Ï†ÑÏù¥ ÏôÑÎ£åÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ ÌÉàÎùΩÏûê ÏÑ†ÌÉù UI Ïà®Í∏∞Í∏∞
                document.getElementById('eliminationSelector').classList.remove('active');
            }

            // ÌÉàÎùΩÏûê ÏÑ†ÌÉù ÏôÑÎ£åÏãú 2Ï∞®Ï†Ñ ÌëúÏãú
            if (tournamentState.eliminatedTeam !== null && tournamentState.quarterfinals.complete) {
                document.getElementById('eliminationSelector').classList.remove('active');
                setupSemifinals();
                document.getElementById('semifinals').style.display = 'block';
            }

            // 2Ï∞®Ï†Ñ ÏóÖÎç∞Ïù¥Ìä∏
            if (tournamentState.semifinals.matches[0].teams[0] !== 'ÎåÄÍ∏∞Ï§ë') {
                document.getElementById('semifinals').style.display = 'block';
                tournamentState.semifinals.matches.forEach((match, matchIndex) => {
                    match.teams.forEach((team, teamIndex) => {
                        const element = document.getElementById(`semifinals-${matchIndex}-${teamIndex}`);
                        if (element) {
                            element.querySelector('span').textContent = team;
                            element.classList.remove('winner');
                            if (match.winner === teamIndex) {
                                element.classList.add('winner');
                            }
                        }
                    });
                });
            }

            // 2Ï∞®Ï†Ñ ÏôÑÎ£å ÌôïÏù∏ Î∞è Í≤∞ÏäπÏ†Ñ ÏÑ§Ï†ï
            const allSemifinalsComplete = tournamentState.semifinals.matches.every(m => m.winner !== null);
            if (allSemifinalsComplete && tournamentState.semifinals.matches[0].teams[0] !== 'ÎåÄÍ∏∞Ï§ë') {
                if (!tournamentState.semifinals.complete) {
                    setupFinals();
                }
                // Í≤∞ÏäπÏ†Ñ ÌëúÏãú (ÌéòÏù¥ÏßÄ Ïû¨ÏßÑÏûÖ ÏãúÏóêÎèÑ)
                if (tournamentState.finals.matches[0].teams[0] !== '6Í≤ΩÍ∏∞ ÏäπÏûê') {
                    document.getElementById('finals').style.display = 'block';
                }
            }

            // Í≤∞ÏäπÏ†Ñ ÏóÖÎç∞Ïù¥Ìä∏
            if (tournamentState.finals.matches[0].teams[0] !== '6Í≤ΩÍ∏∞ ÏäπÏûê') {
                document.getElementById('finals').style.display = 'block';
                tournamentState.finals.matches[0].teams.forEach((team, teamIndex) => {
                    const element = document.getElementById(`finals-0-${teamIndex}`);
                    if (element) {
                        element.querySelector('span').textContent = team;
                        element.classList.remove('winner');
                        if (tournamentState.finals.matches[0].winner === teamIndex) {
                            element.classList.add('winner');
                        }
                    }
                });
            }

            // Ïö∞ÏäπÌåÄ ÌëúÏãú
            if (tournamentState.finals.matches[0].winner !== null) {
                const championName = tournamentState.finals.matches[0].teams[tournamentState.finals.matches[0].winner];
                document.getElementById('championName').textContent = championName;
                document.getElementById('champion').classList.add('active');
            }
        }

        // ÏäπÏûê ÏÑ†ÌÉù
        function selectWinner(round, matchIndex, teamIndex) {
            const match = tournamentState[round].matches[matchIndex];

            // ÏäπÏûê ÌÜ†Í∏Ä
            if (match.winner === teamIndex) {
                match.winner = null;
            } else {
                match.winner = teamIndex;
            }

            // 1Ï∞®Ï†ÑÏóêÏÑú ÏäπÏûêÍ∞Ä Î∞îÎÄåÏóàÏùÑ Îïå
            if (round === "quarterfinals") {
                // 1Ï∞®Ï†ÑÏù¥ ÏôÑÎ£åÎêú ÏÉÅÌÉúÏóêÏÑú Îã§Î•∏ ÌåÄÏúºÎ°ú Î∞îÍæº Í≤ΩÏö∞
                if (tournamentState.quarterfinals.complete) {
                    // ÌÉàÎùΩÏûê/2Ï∞®Ï†Ñ/Í≤∞Ïäπ Ï¥àÍ∏∞Ìôî
                    tournamentState.quarterfinals.complete = false;
                    tournamentState.eliminatedTeam = null;

                    tournamentState.semifinals = {
                        matches: [
                            { teams: ["ÎåÄÍ∏∞Ï§ë", "ÎåÄÍ∏∞Ï§ë"], winner: null },
                            { teams: ["ÎåÄÍ∏∞Ï§ë", "ÎåÄÍ∏∞Ï§ë"], winner: null }
                        ],
                        complete: false
                    };

                    tournamentState.finals = {
                        matches: [
                            { teams: ["6Í≤ΩÍ∏∞ ÏäπÏûê", "7Í≤ΩÍ∏∞ ÏäπÏûê"], winner: null }
                        ],
                        complete: false
                    };

                    // UI Ïà®ÍπÄ Ï≤òÎ¶¨
                    document.getElementById("semifinals").style.display = "none";
                    document.getElementById("finals").style.display = "none";
                    document.getElementById("champion").classList.remove("active");
                }
            }

            // 2Ï∞®Ï†ÑÏóêÏÑú ÏäπÏûêÍ∞Ä Î∞îÎÄåÏóàÏùÑ Îïå
            if (round === "semifinals") {
                // Í≤∞Ïäπ Ï∞∏Í∞ÄÏûê ÏóÖÎç∞Ïù¥Ìä∏
                const finalists = [];
                tournamentState.semifinals.matches.forEach(m => {
                    if (m.winner !== null) {
                        finalists.push(m.teams[m.winner]);
                    }
                });

                if (finalists.length === 2) {
                    tournamentState.finals.matches[0].teams = finalists;
                    tournamentState.finals.matches[0].winner = null; // Í≤∞ÏäπÏ†Ñ ÏäπÏûê Ï¥àÍ∏∞Ìôî
                    tournamentState.semifinals.complete = true;

                    // üü° Ïö∞ÏäπÏûê Î∞ïÏä§ Ï¥àÍ∏∞Ìôî
                    document.getElementById("champion").classList.remove("active");
                    document.getElementById("championName").textContent = "";

                    document.getElementById("finals").style.display = "block";
                }
            }

            saveState();
            updateUI();
        }

        // ÌÉàÎùΩÏûê ÏÑ†ÌÉù UI ÌëúÏãú
        function showEliminationSelector() {
            const winners = [];
            tournamentState.quarterfinals.matches.forEach(match => {
                if (match.winner !== null) {
                    winners.push(match.teams[match.winner]);
                }
            });

            const winnerTeamsDiv = document.getElementById('winnerTeams');
            winnerTeamsDiv.innerHTML = '';
            
            winners.forEach(team => {
                const btn = document.createElement('button');
                btn.className = 'winner-team-btn';
                btn.textContent = team;
                btn.onclick = function() {
                    document.querySelectorAll('.winner-team-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    tournamentState.eliminatedTeam = team;
                };
                winnerTeamsDiv.appendChild(btn);
            });

            document.getElementById('eliminationSelector').classList.add('active');
        }

        // ÌÉàÎùΩ ÌôïÏ†ï
        function confirmElimination() {
            if (tournamentState.eliminatedTeam === null) {
                alert('ÌÉàÎùΩÏãúÌÇ¨ ÌåÄÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }
            
            tournamentState.quarterfinals.complete = true;
            saveState();
            updateUI();
        }

        // 2Ï∞®Ï†Ñ ÏÑ§Ï†ï
        function setupSemifinals() {
            const winners = [];
            tournamentState.quarterfinals.matches.forEach(match => {
                if (match.winner !== null) {
                    const winnerTeam = match.teams[match.winner];
                    if (winnerTeam !== tournamentState.eliminatedTeam) {
                        winners.push(winnerTeam);
                    }
                }
            });

            // 4Í∞ú ÌåÄÏùÑ 2Í∞úÏî© ÎÇòÎàÑÏñ¥ Î∞∞Ïπò
            if (winners.length === 4) {
                tournamentState.semifinals.matches[0].teams = [winners[0], winners[1]];
                tournamentState.semifinals.matches[1].teams = [winners[2], winners[3]];
                saveState();
            }
        }

        // Í≤∞ÏäπÏ†Ñ ÏÑ§Ï†ï
        function setupFinals() {
            const finalists = [];
            tournamentState.semifinals.matches.forEach((match, index) => {
                if (match.winner !== null) {
                    finalists.push(match.teams[match.winner]);
                }
            });

            if (finalists.length === 2) {
                tournamentState.finals.matches[0].teams = finalists;
                tournamentState.semifinals.complete = true;
                document.getElementById('finals').style.display = 'block';
                saveState();
            }
        }

        // ÌÜ†ÎÑàÎ®ºÌä∏ Ï¥àÍ∏∞Ìôî
        function resetTournament() {
            if (confirm('Ï†ïÎßêÎ°ú ÌÜ†ÎÑàÎ®ºÌä∏Î•º Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                localStorage.removeItem('tournamentState');
                location.reload();
            }
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìúÏãú ÏÉÅÌÉú Î≥µÏõê
        window.onload = function() {
            loadState();
            loadScores();
        };
    </script>
</body>
</html>