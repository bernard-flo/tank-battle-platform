<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech of Tanks í† ë„ˆë¨¼íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tournament-wrapper {
            display: flex;
            flex-direction: column;
            gap: 50px;
        }

        .round-section {
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .back-btn {
            position: fixed;
            top: 30px;
            left: 30px;
            padding: 15px 25px;
            background: #4CAF50; /* ë…¹ìƒ‰ */
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
        }

        .round-title {
            text-align: center;
            font-size: 1.8em;
            color: #555;
            margin-bottom: 20px;
            padding: 10px;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            border-radius: 10px;
        }

        .matches-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }

        .score-input {
            width: 90%;
            margin: 8px auto;
            display: block;
            padding: 8px 10px;
            border: 2px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            text-align: center;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .score-input:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 5px rgba(102,126,234,0.5);
        }

        .match {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            transition: all 0.3s ease;
        }

        .match:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .match-number {
            text-align: center;
            font-size: 0.9em;
            color: #888;
            margin-bottom: 10px;
        }

        .team {
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .team:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .team.winner {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
            animation: winnerPulse 1s ease;
        }

        @keyframes winnerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .team.eliminated {
            background: #ffebee;
            color: #c62828;
            text-decoration: line-through;
            opacity: 0.7;
        }

        .winner-selector {
            margin-top: 20px;
            padding: 20px;
            background: #fff3e0;
            border-radius: 10px;
            text-align: center;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .winner-selector.active {
            display: block;
        }

        .winner-selector h3 {
            color: #f57c00;
            margin-bottom: 15px;
        }

        .winner-teams {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .winner-team-btn {
            padding: 8px 15px;
            background: white;
            border: 2px solid #f57c00;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .winner-team-btn:hover {
            background: #f57c00;
            color: white;
        }

        .winner-team-btn.selected {
            background: #ff6b6b;
            color: white;
            border-color: #ff6b6b;
        }

        .confirm-btn {
            padding: 10px 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .confirm-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .reset-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .reset-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }

        .champion {
            text-align: center;
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #ffd700, #ffed4b);
            border-radius: 20px;
            display: none;
            animation: championReveal 1s ease;
        }

        @keyframes championReveal {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .champion.active {
            display: block;
        }

        .champion h2 {
            color: #333;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .champion-name {
            font-size: 2.5em;
            color: #d4af37;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .trophy {
            font-size: 4em;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ† Tech of Tanks í† ë„ˆë¨¼íŠ¸ <span id="playVideoBtn" style="cursor:pointer;">ğŸ†</span></h1>


        <div class="tournament-wrapper">
            <!-- ìš°ìŠ¹íŒ€ í‘œì‹œ -->
            <div class="champion" id="champion">
                <div class="trophy">ğŸ†</div>
                <h2>í† ë„ˆë¨¼íŠ¸ ìš°ìŠ¹</h2>
                <div class="champion-name" id="championName"></div>
            </div>

            <!-- ê²°ìŠ¹ì „ -->
            <div class="round-section" id="finals" style="display: none;">
                <div class="round-title">ğŸ¥‡ ê²°ìŠ¹ì „</div>
                <div class="matches-container">
                    <div class="match">
                        <div class="match-number">8ê²½ê¸° - FINAL</div>
                        <div class="team" onclick="selectWinner('finals', 0, 0)" id="finals-0-0">
                            <span>6ê²½ê¸° ìŠ¹ì</span>
                        </div>
                        <div class="team" onclick="selectWinner('finals', 0, 1)" id="finals-0-1">
                            <span>7ê²½ê¸° ìŠ¹ì</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì˜ìƒ ì˜¤ë²„ë ˆì´ -->
            <!-- ì˜ìƒ ì˜¤ë²„ë ˆì´ -->
            <div id="videoOverlay"
                 style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
            z-index:2000; justify-content:center; align-items:center;">
                <video id="winnerVideo" src="new.mp4"
                       autoplay
                       style="max-width:80%; max-height:80%; border-radius:20px; box-shadow:0 0 20px rgba(0,0,0,0.6);">
                </video>
            </div>


            <!-- 2ì°¨ì „ (ì¤€ê²°ìŠ¹) -->
            <div class="round-section" id="semifinals" style="display: none;">
                <div class="round-title">ğŸ¥ˆ 2ì°¨ì „ (ì¤€ê²°ìŠ¹)</div>
                <div class="matches-container">
                    <div class="match">
                        <div class="match-number">6ê²½ê¸°</div>
                        <div class="team" onclick="selectWinner('semifinals', 0, 0)" id="semifinals-0-0">
                            <span>ëŒ€ê¸°ì¤‘</span>
                        </div>
                        <div class="team" onclick="selectWinner('semifinals', 0, 1)" id="semifinals-0-1">
                            <span>ëŒ€ê¸°ì¤‘</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">7ê²½ê¸°</div>
                        <div class="team" onclick="selectWinner('semifinals', 1, 0)" id="semifinals-1-0">
                            <span>ëŒ€ê¸°ì¤‘</span>
                        </div>
                        <div class="team" onclick="selectWinner('semifinals', 1, 1)" id="semifinals-1-1">
                            <span>ëŒ€ê¸°ì¤‘</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 1ì°¨ì „ -->
            <div class="round-section" id="quarterfinals">
                <div class="round-title">ğŸ¥‰ 1ì°¨ì „</div>
                <div class="matches-container">
                    <div class="match">
                        <div class="match-number">1ê²½ê¸°</div>
                        <input type="text" class="score-input" id="score-quarterfinals-0" placeholder="ìŠ¹ì ì ìˆ˜ ì…ë ¥">
                        <div class="team" onclick="selectWinner('quarterfinals', 0, 0)" id="quarterfinals-0-0">
                            <span>1íŒ€</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 0, 1)" id="quarterfinals-0-1">
                            <span>2íŒ€</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">2ê²½ê¸°</div>
                        <input type="text" class="score-input" id="score-quarterfinals-1" placeholder="ìŠ¹ì ì ìˆ˜ ì…ë ¥">
                        <div class="team" onclick="selectWinner('quarterfinals', 1, 0)" id="quarterfinals-1-0">
                            <span>3íŒ€</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 1, 1)" id="quarterfinals-1-1">
                            <span>4íŒ€</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">3ê²½ê¸°</div>
                        <input type="text" class="score-input" id="score-quarterfinals-2" placeholder="ìŠ¹ì ì ìˆ˜ ì…ë ¥">
                        <div class="team" onclick="selectWinner('quarterfinals', 2, 0)" id="quarterfinals-2-0">
                            <span>5íŒ€</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 2, 1)" id="quarterfinals-2-1">
                            <span>6íŒ€</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">4ê²½ê¸°</div>
                        <input type="text" class="score-input" id="score-quarterfinals-3" placeholder="ìŠ¹ì ì ìˆ˜ ì…ë ¥">
                        <div class="team" onclick="selectWinner('quarterfinals', 3, 0)" id="quarterfinals-3-0">
                            <span>7íŒ€</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 3, 1)" id="quarterfinals-3-1">
                            <span>8íŒ€</span>
                        </div>
                    </div>
                    <div class="match">
                        <div class="match-number">5ê²½ê¸°</div>
                        <input type="text" class="score-input" id="score-quarterfinals-4" placeholder="ìŠ¹ì ì ìˆ˜ ì…ë ¥">
                        <div class="team" onclick="selectWinner('quarterfinals', 4, 0)" id="quarterfinals-4-0">
                            <span>9íŒ€</span>
                        </div>
                        <div class="team" onclick="selectWinner('quarterfinals', 4, 1)" id="quarterfinals-4-1">
                            <span>10íŒ€</span>
                        </div>
                    </div>
                </div>

                <!-- ì¶”ê°€ íƒˆë½ì ì„ íƒ -->
                <div class="winner-selector" id="eliminationSelector">
                    <h3>âš ï¸ 1ì°¨ì „ ìŠ¹ì ì¤‘ 1íŒ€ì„ ì¶”ê°€ë¡œ íƒˆë½ì‹œì¼œì£¼ì„¸ìš”</h3>
                    <div class="winner-teams" id="winnerTeams"></div>
                    <button class="confirm-btn" onclick="confirmElimination()">íƒˆë½ í™•ì • ë° 2ì°¨ì „ ì§„í–‰</button>
                </div>
            </div>
        </div>

        <!-- ì•ˆë‚´ë¬¸êµ¬ -->
        <div class="rules-section"
             style="margin-top:50px; padding:40px; background:#fff; border-radius:20px;
            box-shadow:0 5px 20px rgba(0,0,0,0.1); max-width:800px; margin-left:auto; margin-right:auto; text-align:center;">

            <h2 style="color:#333; margin-bottom:25px; font-size:1.8em;">ğŸ“Œ ê²½ê¸°ë£°</h2>
            <ul style="list-style:none; padding:0; margin-bottom:40px; color:#444; line-height:2; font-size:1.3em;">
                <li>30ë¶„ ë™ì•ˆ ì½”ë”© : ì½”ë”© í›„, íŒ€ì¥ì´ ì½”ë“œë¥¼ Export í•˜ì—¬ Bernardì—ê²Œ DMìœ¼ë¡œ ì œì¶œ</li>
                <li>1ì°¨ì „ í›„, ìŠ¹ì 5íŒ€ ì¤‘ íŒ€ ì—ë„ˆì§€ê°€ ì œì¼ ì ì€ íŒ€ì€ íƒˆë½</li>
            </ul>

            <h2 style="color:#333; margin-bottom:25px; font-size:1.8em;">âš ï¸ ìœ ì˜ì‚¬í•­</h2>
            <ul style="list-style:none; padding:0; color:#444; line-height:2; font-size:1.3em;">
                <li>ì‹¤ê²© ë£°: ì œê³µëœ Object ì†ì„± ì™¸ ì ‘ê·¼, ì–´ë·°ì§• ì‹œ ì‹¤ê²©íŒ¨</li>
                <li>ê²½ê¸°ì˜ ìŠ¹ë¶€ ì–‘ìƒì´ ë‚˜ì§€ ì•Šìœ¼ë©´ ì‹œê°„ìƒ ì„ì˜ ì¢…ë£Œ - íŒ€ ì—ë„ˆì§€ê°€ ë§ì€ íŒ€ì´ ìŠ¹ë¦¬</li>
                <li>ê²°ìŠ¹ì „ì€ 3íŒ 2ì„ ìŠ¹ì œ (ë‹¨, ì‹œê°„ìƒ ë‹¨íŒë§Œ ì§„í–‰í•  ìˆ˜ ìˆìŒ)</li>
            </ul>
        </div>



        <!-- ê²½ê¸°í™”ë©´ ëŒì•„ê°€ê¸° ë²„íŠ¼ -->
        <button class="back-btn" onclick="location.href='tank_battle_platform.html'">â¬… ê²½ê¸°í™”ë©´ ëŒì•„ê°€ê¸°</button>
        <button class="reset-btn" onclick="resetTournament()">ğŸ”„ ì´ˆê¸°í™”</button>
    </div>


    <script>
        // í† ë„ˆë¨¼íŠ¸ ìƒíƒœ ê´€ë¦¬
        let tournamentState = {
            quarterfinals: {
                matches: [
                    { teams: ['1íŒ€', '2íŒ€'], winner: null },
                    { teams: ['3íŒ€', '4íŒ€'], winner: null },
                    { teams: ['5íŒ€', '6íŒ€'], winner: null },
                    { teams: ['7íŒ€', '8íŒ€'], winner: null },
                    { teams: ['9íŒ€', '10íŒ€'], winner: null }
                ],
                complete: false
            },
            eliminatedTeam: null,
            semifinals: {
                matches: [
                    { teams: ['ëŒ€ê¸°ì¤‘', 'ëŒ€ê¸°ì¤‘'], winner: null },
                    { teams: ['ëŒ€ê¸°ì¤‘', 'ëŒ€ê¸°ì¤‘'], winner: null }
                ],
                complete: false
            },
            finals: {
                matches: [
                    { teams: ['6ê²½ê¸° ìŠ¹ì', '7ê²½ê¸° ìŠ¹ì'], winner: null }
                ],
                complete: false
            }
        };

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ìƒíƒœ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadState() {
            const saved = localStorage.getItem('tournamentState');
            if (saved) {
                tournamentState = JSON.parse(saved);
                updateUI();
            }
        }

        // ìƒíƒœ ì €ì¥
        function saveState() {
            localStorage.setItem('tournamentState', JSON.stringify(tournamentState));
        }

        // ì ìˆ˜ ì €ì¥
        function saveScores() {
            const scores = {};
            document.querySelectorAll(".score-input").forEach(input => {
                scores[input.id] = input.value;
            });
            localStorage.setItem("winnerScores", JSON.stringify(scores));
        }

        // ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadScores() {
            const saved = localStorage.getItem("winnerScores");
            if (saved) {
                const scores = JSON.parse(saved);
                Object.keys(scores).forEach(id => {
                    const input = document.getElementById(id);
                    if (input) input.value = scores[id];
                });
            }
        }

        // input ì´ë²¤íŠ¸ â†’ ìë™ ì €ì¥
        document.addEventListener("input", function(e) {
            if (e.target.classList.contains("score-input")) {
                saveScores();
            }
        });

        // ì˜ìƒ ë²„íŠ¼ í´ë¦­ â†’ ì˜¤ë²„ë ˆì´ ë„ìš°ê³  ì˜ìƒ ì¬ìƒ
        document.getElementById("playVideoBtn").addEventListener("click", function() {
            if (document.getElementById("champion").classList.contains("active")) {
                const overlay = document.getElementById("videoOverlay");
                const video = document.getElementById("winnerVideo");
                overlay.style.display = "flex";
                video.currentTime = 0;
                video.play();
            } else {
                alert("ì•„ì§ ìš°ìŠ¹ìê°€ ê²°ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!");
            }
        });

        // ì˜ìƒì´ ëë‚˜ë©´ ìë™ ë‹«ê¸°
        document.getElementById("winnerVideo").addEventListener("ended", function() {
            document.getElementById("videoOverlay").style.display = "none";
        });

        // ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById("videoOverlay").addEventListener("click", function(e) {
            if (e.target.id === "videoOverlay") {
                this.style.display = "none";
                document.getElementById("winnerVideo").pause();
            }
        });


        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            // 1ì°¨ì „ ì—…ë°ì´íŠ¸
            tournamentState.quarterfinals.matches.forEach((match, matchIndex) => {
                match.teams.forEach((team, teamIndex) => {
                    const element = document.getElementById(`quarterfinals-${matchIndex}-${teamIndex}`);
                    if (element) {
                        element.querySelector('span').textContent = team;
                        element.classList.remove('winner');
                        if (match.winner === teamIndex) {
                            element.classList.add('winner');
                        }
                    }
                });
            });

            // 1ì°¨ì „ ì™„ë£Œ í™•ì¸
            const allQuarterfinalsComplete = tournamentState.quarterfinals.matches.every(m => m.winner !== null);
            
            // 1ì°¨ì „ì´ ëª¨ë‘ ì™„ë£Œë˜ê³  ì•„ì§ complete ìƒíƒœê°€ ì•„ë‹ ë•Œë§Œ íƒˆë½ì ì„ íƒ UI í‘œì‹œ
            if (allQuarterfinalsComplete && !tournamentState.quarterfinals.complete) {
                showEliminationSelector();
            } else if (!allQuarterfinalsComplete) {
                // 1ì°¨ì „ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë©´ íƒˆë½ì ì„ íƒ UI ìˆ¨ê¸°ê¸°
                document.getElementById('eliminationSelector').classList.remove('active');
            }

            // íƒˆë½ì ì„ íƒ ì™„ë£Œì‹œ 2ì°¨ì „ í‘œì‹œ
            if (tournamentState.eliminatedTeam !== null && tournamentState.quarterfinals.complete) {
                document.getElementById('eliminationSelector').classList.remove('active');
                setupSemifinals();
                document.getElementById('semifinals').style.display = 'block';
            }

            // 2ì°¨ì „ ì—…ë°ì´íŠ¸
            if (tournamentState.semifinals.matches[0].teams[0] !== 'ëŒ€ê¸°ì¤‘') {
                document.getElementById('semifinals').style.display = 'block';
                tournamentState.semifinals.matches.forEach((match, matchIndex) => {
                    match.teams.forEach((team, teamIndex) => {
                        const element = document.getElementById(`semifinals-${matchIndex}-${teamIndex}`);
                        if (element) {
                            element.querySelector('span').textContent = team;
                            element.classList.remove('winner');
                            if (match.winner === teamIndex) {
                                element.classList.add('winner');
                            }
                        }
                    });
                });
            }

            // 2ì°¨ì „ ì™„ë£Œ í™•ì¸ ë° ê²°ìŠ¹ì „ ì„¤ì •
            const allSemifinalsComplete = tournamentState.semifinals.matches.every(m => m.winner !== null);
            if (allSemifinalsComplete && tournamentState.semifinals.matches[0].teams[0] !== 'ëŒ€ê¸°ì¤‘') {
                if (!tournamentState.semifinals.complete) {
                    setupFinals();
                }
                // ê²°ìŠ¹ì „ í‘œì‹œ (í˜ì´ì§€ ì¬ì§„ì… ì‹œì—ë„)
                if (tournamentState.finals.matches[0].teams[0] !== '6ê²½ê¸° ìŠ¹ì') {
                    document.getElementById('finals').style.display = 'block';
                }
            }

            // ê²°ìŠ¹ì „ ì—…ë°ì´íŠ¸
            if (tournamentState.finals.matches[0].teams[0] !== '6ê²½ê¸° ìŠ¹ì') {
                document.getElementById('finals').style.display = 'block';
                tournamentState.finals.matches[0].teams.forEach((team, teamIndex) => {
                    const element = document.getElementById(`finals-0-${teamIndex}`);
                    if (element) {
                        element.querySelector('span').textContent = team;
                        element.classList.remove('winner');
                        if (tournamentState.finals.matches[0].winner === teamIndex) {
                            element.classList.add('winner');
                        }
                    }
                });
            }

            // ìš°ìŠ¹íŒ€ í‘œì‹œ
            if (tournamentState.finals.matches[0].winner !== null) {
                const championName = tournamentState.finals.matches[0].teams[tournamentState.finals.matches[0].winner];
                document.getElementById('championName').textContent = championName;
                document.getElementById('champion').classList.add('active');
            }
        }

        // ìŠ¹ì ì„ íƒ
        function selectWinner(round, matchIndex, teamIndex) {
            const match = tournamentState[round].matches[matchIndex];

            // ìŠ¹ì í† ê¸€
            if (match.winner === teamIndex) {
                match.winner = null;
            } else {
                match.winner = teamIndex;
            }

            // 1ì°¨ì „ì—ì„œ ìŠ¹ìê°€ ë°”ë€Œì—ˆì„ ë•Œ
            if (round === "quarterfinals") {
                // 1ì°¨ì „ì´ ì™„ë£Œëœ ìƒíƒœì—ì„œ ë‹¤ë¥¸ íŒ€ìœ¼ë¡œ ë°”ê¾¼ ê²½ìš°
                if (tournamentState.quarterfinals.complete) {
                    // íƒˆë½ì/2ì°¨ì „/ê²°ìŠ¹ ì´ˆê¸°í™”
                    tournamentState.quarterfinals.complete = false;
                    tournamentState.eliminatedTeam = null;

                    tournamentState.semifinals = {
                        matches: [
                            { teams: ["ëŒ€ê¸°ì¤‘", "ëŒ€ê¸°ì¤‘"], winner: null },
                            { teams: ["ëŒ€ê¸°ì¤‘", "ëŒ€ê¸°ì¤‘"], winner: null }
                        ],
                        complete: false
                    };

                    tournamentState.finals = {
                        matches: [
                            { teams: ["6ê²½ê¸° ìŠ¹ì", "7ê²½ê¸° ìŠ¹ì"], winner: null }
                        ],
                        complete: false
                    };

                    // UI ìˆ¨ê¹€ ì²˜ë¦¬
                    document.getElementById("semifinals").style.display = "none";
                    document.getElementById("finals").style.display = "none";
                    document.getElementById("champion").classList.remove("active");
                }
            }

            // 2ì°¨ì „ì—ì„œ ìŠ¹ìê°€ ë°”ë€Œì—ˆì„ ë•Œ
            if (round === "semifinals") {
                // ê²°ìŠ¹ ì°¸ê°€ì ì—…ë°ì´íŠ¸
                const finalists = [];
                tournamentState.semifinals.matches.forEach(m => {
                    if (m.winner !== null) {
                        finalists.push(m.teams[m.winner]);
                    }
                });

                if (finalists.length === 2) {
                    tournamentState.finals.matches[0].teams = finalists;
                    tournamentState.finals.matches[0].winner = null; // ê²°ìŠ¹ì „ ìŠ¹ì ì´ˆê¸°í™”
                    tournamentState.semifinals.complete = true;

                    // ğŸŸ¡ ìš°ìŠ¹ì ë°•ìŠ¤ ì´ˆê¸°í™”
                    document.getElementById("champion").classList.remove("active");
                    document.getElementById("championName").textContent = "";

                    document.getElementById("finals").style.display = "block";
                }
            }

            saveState();
            updateUI();
        }

        // íƒˆë½ì ì„ íƒ UI í‘œì‹œ
        function showEliminationSelector() {
            const winners = [];
            tournamentState.quarterfinals.matches.forEach(match => {
                if (match.winner !== null) {
                    winners.push(match.teams[match.winner]);
                }
            });

            const winnerTeamsDiv = document.getElementById('winnerTeams');
            winnerTeamsDiv.innerHTML = '';
            
            winners.forEach(team => {
                const btn = document.createElement('button');
                btn.className = 'winner-team-btn';
                btn.textContent = team;
                btn.onclick = function() {
                    document.querySelectorAll('.winner-team-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    tournamentState.eliminatedTeam = team;
                };
                winnerTeamsDiv.appendChild(btn);
            });

            document.getElementById('eliminationSelector').classList.add('active');
        }

        // íƒˆë½ í™•ì •
        function confirmElimination() {
            if (tournamentState.eliminatedTeam === null) {
                alert('íƒˆë½ì‹œí‚¬ íŒ€ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            tournamentState.quarterfinals.complete = true;
            saveState();
            updateUI();
        }

        // 2ì°¨ì „ ì„¤ì •
        function setupSemifinals() {
            const winners = [];
            tournamentState.quarterfinals.matches.forEach(match => {
                if (match.winner !== null) {
                    const winnerTeam = match.teams[match.winner];
                    if (winnerTeam !== tournamentState.eliminatedTeam) {
                        winners.push(winnerTeam);
                    }
                }
            });

            // 4ê°œ íŒ€ì„ 2ê°œì”© ë‚˜ëˆ„ì–´ ë°°ì¹˜
            if (winners.length === 4) {
                tournamentState.semifinals.matches[0].teams = [winners[0], winners[1]];
                tournamentState.semifinals.matches[1].teams = [winners[2], winners[3]];
                saveState();
            }
        }

        // ê²°ìŠ¹ì „ ì„¤ì •
        function setupFinals() {
            const finalists = [];
            tournamentState.semifinals.matches.forEach((match, index) => {
                if (match.winner !== null) {
                    finalists.push(match.teams[match.winner]);
                }
            });

            if (finalists.length === 2) {
                tournamentState.finals.matches[0].teams = finalists;
                tournamentState.semifinals.complete = true;
                document.getElementById('finals').style.display = 'block';
                saveState();
            }
        }

        // í† ë„ˆë¨¼íŠ¸ ì´ˆê¸°í™”
        function resetTournament() {
            if (confirm('ì •ë§ë¡œ í† ë„ˆë¨¼íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('tournamentState');
                location.reload();
            }
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ìƒíƒœ ë³µì›
        window.onload = function() {
            loadState();
            loadScores();
        };
    </script>
</body>
</html>